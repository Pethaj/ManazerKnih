# Cursor Rules - Bewit ManaÅ¾er Knih

## ObecnÃ¡ pravidla

- VÅ¾dy odpovÃ­dat v ÄeskÃ©m jazyce
- PouÅ¾Ã­vat TypeScript pro novÃ© komponenty a sluÅ¾by
- DodrÅ¾ovat existujÃ­cÃ­ strukturu projektu
- Testovat zmÄ›ny pÅ™ed commitovÃ¡nÃ­m

## CORE Dokumentace SystÃ©m

### Trigger: "core it"

KdyÅ¾ uÅ¾ivatel zadÃ¡ pÅ™Ã­kaz **"core it"**, MUSÃÅ  provÃ©st nÃ¡sledujÃ­cÃ­ proces:

#### 1. NAÄŒTENÃ CORE DOKUMENTACE

```
POVINNÃ KROK: NaÄÃ­st soubor CORE.md z root sloÅ¾ky projektu
```

- PÅ™eÄti celÃ½ obsah `CORE.md`
- Identifikuj vÅ¡echny funkce, kterÃ© jsou v CORE zdokumentovÃ¡ny
- Zapamatuj si jejich:
  - DatovÃ© toky
  - ZÃ¡vislosti mezi komponentami
  - DatabÃ¡zovÃ¡ schÃ©mata
  - API endpointy
  - SluÅ¾by a jejich rozhranÃ­

#### 2. ANALÃZA NAVRHOVANÃ‰ ZMÄšNY

Analyzuj poÅ¾adovanou zmÄ›nu nebo novou funkci:

- **Co se mÃ¡ zmÄ›nit?** KterÃ© soubory, komponenty, sluÅ¾by?
- **ProÄ?** JakÃ½ je business dÅ¯vod?
- **Rozsah?** JakÃ© ÄÃ¡sti aplikace budou ovlivnÄ›ny?
- **NovÃ© zÃ¡vislosti?** Budou pÅ™idÃ¡ny novÃ© npm balÃ­Äky nebo sluÅ¾by?

#### 3. KONTROLA DOPADU NA CORE

Pro kaÅ¾dou funkci v CORE.md, zkontroluj:

- **PÅ™Ã­mÃ½ dopad:** MÄ›nÃ­ navrhovanÃ¡ zmÄ›na pÅ™Ã­mo tuto funkci?
- **NepÅ™Ã­mÃ½ dopad:** SdÃ­lÃ­ nÄ›jakÃ© komponenty/sluÅ¾by/tabulky?
- **DatovÃ½ tok:** OvlivnÃ­ to datovÃ© toky tÃ©to funkce?
- **API zmÄ›ny:** Budou zmÄ›nÄ›ny endpointy nebo payloady?
- **DatabÃ¡ze:** Budou zmÄ›nÄ›ny tabulky nebo schÃ©mata?
- **ZÃ¡vislosti:** SdÃ­lenÃ© sluÅ¾by nebo komponenty?

#### 4. IDENTIFIKACE KONFLIKTÅ®

OznaÄ vÅ¡echny potenciÃ¡lnÃ­ konflikty:

- **KritickÃ©:** ZmÄ›na by rozbila existujÃ­cÃ­ funkci
- **StÅ™ednÃ­:** MÅ¯Å¾e ovlivnit chovÃ¡nÃ­, ale nenÃ­ zlomovÃ©
- **NÃ­zkÃ©:** MinimÃ¡lnÃ­ nebo Å¾Ã¡dnÃ½ vliv
- **PozitivnÃ­:** VylepÅ¡enÃ­ existujÃ­cÃ­ funkce

Pro kaÅ¾dÃ½ konflikt poskytni:
- NÃ¡zev ovlivnÄ›nÃ© CORE funkce
- ÃšroveÅˆ dopadu (KritickÃ½/StÅ™ednÃ­/NÃ­zkÃ½)
- PÅ™esnÃ½ popis konfliktu
- KterÃ© soubory/komponenty jsou dotÄeny

#### 5. NÃVRH IMPLEMENTAÄŒNÃCH VARIANT

Navrhni **2-3 implementaÄnÃ­ varianty**, kterÃ©:

**Varianta A: MinimÃ¡lnÃ­ dopad**
- Popis pÅ™Ã­stupu
- Co se zmÄ›nÃ­
- JakÃ½ dopad na CORE funkce
- VÃ½hody a nevÃ½hody

**Varianta B: OptimÃ¡lnÃ­ Å™eÅ¡enÃ­**
- Popis pÅ™Ã­stupu
- Co se zmÄ›nÃ­
- JakÃ½ dopad na CORE funkce
- VÃ½hody a nevÃ½hody

**Varianta C: AlternativnÃ­ cesta** (pokud existuje)
- Popis pÅ™Ã­stupu
- Co se zmÄ›nÃ­
- JakÃ½ dopad na CORE funkce
- VÃ½hody a nevÃ½hody

#### 6. ZASTAVENÃ A ÄŒEKÃNÃ NA SCHVÃLENÃ

**KRITICKÃ‰ PRAVIDLO:** 

```
âŒ NIKDY AUTOMATICKY NEPROVÃDÄšJ ZMÄšNY PO "core it"
âŒ NIKDY NEUPRAVUJ CORE.md BEZ EXPLICITNÃHO SCHVÃLENÃ
âœ… VÅ½DY ZASTAV A ÄŒEKEJ NA ROZHODNUTÃ UÅ½IVATELE
```

Tvoje odpovÄ›Ä MUSÃ konÄit otÃ¡zkou:

```
KterÃ¡ varianta implementace ti vyhovuje?
- A) MinimÃ¡lnÃ­ dopad
- B) OptimÃ¡lnÃ­ Å™eÅ¡enÃ­  
- C) AlternativnÃ­ cesta
- D) NeschvÃ¡lit zmÄ›nu

Pokud schvÃ¡lÃ­Å¡, mÃ¡m pokraÄovat s implementacÃ­?
```

#### 7. PO SCHVÃLENÃ

AÅ¾ uÅ¾ivatel vybere variantu a schvÃ¡lÃ­:

1. Implementuj zmÄ›ny podle zvolenÃ© varianty
2. **POKUD** zmÄ›na upravuje existujÃ­cÃ­ CORE funkci:
   - Navrhni aktualizaci CORE.md
   - UkÃ¡Å¾ konkrÃ©tnÃ­ zmÄ›ny v dokumentaci
   - ÄŒekej na schvÃ¡lenÃ­ aktualizace CORE.md
   - AÅ¾ schvÃ¡leno, aktualizuj CORE.md

3. **POKUD** je to novÃ¡ funkce pro CORE:
   - Navrhni kompletnÃ­ dokumentaci ve formÃ¡tu CORE
   - UkÃ¡Å¾ strukturu novÃ© sekce
   - ÄŒekej na schvÃ¡lenÃ­ pÅ™idÃ¡nÃ­ do CORE.md
   - AÅ¾ schvÃ¡leno, pÅ™idej do CORE.md

## FormÃ¡t vÃ½stupu "core it"

```markdown
# ğŸ” CORE ANALÃZA

## ğŸ“‹ PoÅ¾adovanÃ¡ zmÄ›na
[Popis toho, co uÅ¾ivatel chce zmÄ›nit/pÅ™idat]

## ğŸ“š NaÄtenÃ© CORE funkce
- [Funkce 1]: [Stav]
- [Funkce 2]: [Stav]
...

## âš ï¸ IdentifikovanÃ© dopady

### Funkce: [NÃ¡zev CORE funkce]
**ÃšroveÅˆ dopadu:** [KritickÃ½/StÅ™ednÃ­/NÃ­zkÃ½/PozitivnÃ­]

**Popis dopadu:**
[DetailnÃ­ vysvÄ›tlenÃ­ jak zmÄ›na ovlivnÃ­ tuto funkci]

**DotÄenÃ© komponenty:**
- [Soubor/komponenta 1]
- [Soubor/komponenta 2]

---

### Funkce: [DalÅ¡Ã­ CORE funkce]
...

## ğŸ’¡ ImplementaÄnÃ­ varianty

### Varianta A: MinimÃ¡lnÃ­ dopad
**PÅ™Ã­stup:** [Popis]

**ZmÄ›ny:**
- [ZmÄ›na 1]
- [ZmÄ›na 2]

**Dopad na CORE:** [Popis]

**VÃ½hody:**
- [VÃ½hoda 1]

**NevÃ½hody:**
- [NevÃ½hoda 1]

---

### Varianta B: OptimÃ¡lnÃ­ Å™eÅ¡enÃ­
[StejnÃ¡ struktura]

---

### Varianta C: AlternativnÃ­ cesta
[StejnÃ¡ struktura]

---

## â“ RozhodnutÃ­

KterÃ¡ varianta implementace ti vyhovuje?
- A) MinimÃ¡lnÃ­ dopad
- B) OptimÃ¡lnÃ­ Å™eÅ¡enÃ­
- C) AlternativnÃ­ cesta
- D) NeschvÃ¡lit zmÄ›nu

Pokud schvÃ¡lÃ­Å¡, mÃ¡m pokraÄovat s implementacÃ­?
```

## Ochrana CORE

### Pravidla pro CORE.md

1. **Nikdy neupravuj CORE.md automaticky**
   - VÅ¾dy Äekej na explicitnÃ­ schvÃ¡lenÃ­

2. **PÅ™i pÅ™idÃ¡vÃ¡nÃ­ novÃ© funkce do CORE:**
   - MusÃ­ bÃ½t kompletnÄ› implementovanÃ¡ a otestovanÃ¡
   - MusÃ­ projÃ­t schvalovacÃ­m procesem
   - Dokumentace musÃ­ bÃ½t kompletnÃ­ (vÅ¡echny sekce)

3. **PÅ™i ÃºpravÄ› existujÃ­cÃ­ CORE funkce:**
   - UkÃ¡Å¾ diff dokumentace (co se mÄ›nÃ­)
   - VysvÄ›tli dÅ¯vod zmÄ›ny
   - ÄŒekej na schvÃ¡lenÃ­

4. **Nikdy nemaÅ¾ej funkce z CORE bez schvÃ¡lenÃ­**

### Pravidla pro zmÄ›ny ovlivÅˆujÃ­cÃ­ CORE

1. **PÅ™ed zmÄ›nou sdÃ­lenÃ©ho komponentu:**
   - SpusÅ¥ "core it" analÃ½zu
   - Identifikuj vÅ¡echny CORE funkce, kterÃ© ho pouÅ¾Ã­vajÃ­
   - Navrhni backwards-compatible Å™eÅ¡enÃ­

2. **PÅ™ed zmÄ›nou databÃ¡zovÃ©ho schÃ©matu:**
   - Zkontroluj vÅ¡echny CORE funkce pouÅ¾Ã­vajÃ­cÃ­ tabulku
   - Navrhni migraci, kterÃ¡ nerozbi existujÃ­cÃ­ funkce
   - Aktualizuj dokumentaci schÃ©matu v CORE

3. **PÅ™ed zmÄ›nou API endpointu:**
   - Zkontroluj vÅ¡echny CORE funkce volajÃ­cÃ­ endpoint
   - ZvaÅ¾uj versioning API
   - Aktualizuj dokumentaci API v CORE

## PÅ™Ã­klad pouÅ¾itÃ­

### UÅ¾ivatel zadÃ¡:
```
Chci pÅ™idat novÃ© pole "rating" do tabulky product_feed_2
```

### Cursor odpovÃ­:
```
ZavolÃ¡m "core it" analÃ½zu...

[NaÄte CORE.md]
[Analyzuje dopad]
[Navrhne varianty]
[ÄŒekÃ¡ na schvÃ¡lenÃ­]
```

### UÅ¾ivatel schvÃ¡lÃ­:
```
Schvaluji variantu B
```

### Cursor pokraÄuje:
```
Implementuji variantu B...
[Provede zmÄ›ny]

TeÄ potÅ™ebuji aktualizovat CORE.md:
[UkÃ¡Å¾e diff dokumentace]

SchvalÃ­Å¡ aktualizaci CORE.md?
```

## DÅ¯leÅ¾itÃ© poznÃ¡mky

- **"core it" nenÃ­ nutnÃ© pro malÃ© zmÄ›ny** (CSS styling, text zmÄ›ny)
- **"core it" JE nutnÃ© pro:**
  - ZmÄ›ny databÃ¡zovÃ©ho schÃ©matu
  - ZmÄ›ny API/sluÅ¾eb
  - NovÃ© funkce
  - ZmÄ›ny sdÃ­lenÃ½ch komponentÅ¯
  - ZmÄ›ny datovÃ½ch tokÅ¯

- **KdyÅ¾ je pochybnost, spusÅ¥ "core it"** - lepÅ¡Ã­ bÃ½t opatrnÃ½

## Checkpoint systÃ©m

Po dokonÄenÃ­ zmÄ›ny, kterÃ¡ proÅ¡la "core it":

1. Validuj, Å¾e zmÄ›na odpovÃ­dÃ¡ schvÃ¡lenÃ© variantÄ›
2. Zkontroluj, Å¾e CORE.md je aktuÃ¡lnÃ­
3. UdÄ›lej checkpoint: "âœ… CORE validace dokonÄena pro [nÃ¡zev zmÄ›ny]"

---

**PÅ˜IPOMENUTÃ:** CORE.md je svatÃ½ dokument. ChrÃ¡nÃ­ integritu aplikace. Respektuj ho.

