<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EO Smƒõsi Chat - Test pro Bewit</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            padding: 32px;
            border-radius: 16px;
            margin-bottom: 32px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }
        
        .header h1 {
            color: #1a202c;
            margin-bottom: 8px;
            font-size: 32px;
        }
        
        .header p {
            color: #718096;
            font-size: 16px;
        }
        
        .demo-section {
            background: white;
            padding: 32px;
            border-radius: 16px;
            margin-bottom: 32px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }
        
        .demo-section h2 {
            color: #1a202c;
            margin-bottom: 24px;
            font-size: 24px;
        }
        
        .status-badge {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 16px;
        }
        
        .status-badge.open {
            background: #d1fae5;
            color: #065f46;
        }
        
        .status-badge.closed {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .user-info {
            background: #f7fafc;
            padding: 16px;
            border-radius: 8px;
            margin: 16px 0;
        }
        
        .user-info h3 {
            color: #2d3748;
            font-size: 14px;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .user-info code {
            background: #e2e8f0;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 13px;
            color: #2d3748;
        }
        
        .btn-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: 16px;
        }
        
        .btn-primary {
            background: #079854;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-primary:hover {
            background: #065f3e;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(7, 152, 84, 0.3);
        }
        
        .btn-secondary {
            background: white;
            color: #2d3748;
            border: 2px solid #e2e8f0;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-secondary:hover {
            border-color: #cbd5e0;
            background: #f7fafc;
        }
        
        .code-section {
            background: white;
            padding: 32px;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }
        
        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 24px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 16px 0;
            position: relative;
        }
        
        .code-block pre {
            margin: 0;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
        }
        
        .info-box {
            background: #dbeafe;
            border-left: 4px solid #3b82f6;
            padding: 16px;
            border-radius: 8px;
            margin: 16px 0;
        }
        
        .info-box p {
            color: #1e40af;
            margin: 0;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üåø EO Smƒõsi Chat - Live Test</h1>
            <p>Testovac√≠ prost≈ôed√≠ pro Poradce na smƒõsi esenci√°ln√≠ch olej≈Ø</p>
        </div>

        <!-- Live Demo -->
        <div class="demo-section">
            <h2>üì± Live Demo</h2>
            <div id="chat-status" class="status-badge closed">Chat je zav≈ôen√Ω</div>
            
            <div class="user-info">
                <h3>üë§ Simulovan√° User Data</h3>
                <p>ID: <code id="user-id-display">12345</code></p>
                <p>Email: <code id="user-email-display">test@bewit.cz</code></p>
                <p>Jm√©no: <code id="user-name-display">Jan Nov√°k</code></p>
                <p>Token: <code id="user-token-display">bewit_token_abc123</code></p>
            </div>

            <div class="btn-group">
                <button class="btn-primary" onclick="openEOSmesiChat()">
                    üí¨ Otev≈ô√≠t Chat
                </button>
                <button class="btn-secondary" onclick="sendUserData()">
                    üì§ Poslat User Data znovu
                </button>
                <button class="btn-secondary" onclick="clearUserData()">
                    üóëÔ∏è Vymazat User Data
                </button>
            </div>
        </div>

        <!-- Implementaƒçn√≠ k√≥d -->
        <div class="code-section">
            <h2>üë®‚Äçüíª Implementaƒçn√≠ k√≥d pro Bewit web</h2>
            
            <h3 style="margin: 24px 0 12px; color: #2d3748; font-size: 18px;">üìã Kompletn√≠ k√≥d (zkop√≠ruj na Bewit web)</h3>
            <div class="code-block">
<pre>&lt;!-- ========================================
     EO SMƒöSI CHAT WIDGET - START
     ======================================== --&gt;

&lt;!-- 1Ô∏è‚É£ Simulace user dat z backendu (PHP/Laravel) --&gt;
&lt;script&gt;
// Na produkci by user data ≈°la z backendu
const CURRENT_USER = {
    id: '&lt;?php echo $user-&gt;id; ?&gt;',         // Z backendu
    email: '&lt;?php echo $user-&gt;email; ?&gt;',   // Z backendu
    firstName: '&lt;?php echo $user-&gt;firstName; ?&gt;',  // Z backendu
    lastName: '&lt;?php echo $user-&gt;lastName; ?&gt;',    // Z backendu
    tokenEshop: '&lt;?php echo $user-&gt;bewitToken; ?&gt;'  // ‚ö†Ô∏è D≈ÆLE≈ΩIT√â
};
console.log('üë§ Current user:', CURRENT_USER);
&lt;/script&gt;

&lt;!-- 2Ô∏è‚É£ Dla≈ædice s tlaƒç√≠tkem (BEZE ZMƒöN) --&gt;
&lt;div id="eo-smesi-chat-tile" style="position:relative;background-image:url('https://modopafybeslbcqjxsve.supabase.co/storage/v1/object/public/web/ChatGPT%20Image%20Jan%2029,%202026,%2012_00_25%20PM.png');background-size:cover;background-position:center;border-radius:24px;padding:40px;box-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1);max-width:420px;margin:0 auto;text-align:center;overflow:hidden;"&gt;
  
  &lt;!-- Tmav√Ω overlay --&gt;
  &lt;div style="position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.65);z-index:1;"&gt;&lt;/div&gt;
  
  &lt;!-- Nadpis --&gt;
  &lt;h2 style="position:relative;z-index:2;font-size:28px;color:#ffffff;margin:0 0 16px 0;text-shadow:0 2px 4px rgba(0,0,0,0.3);font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;"&gt;
    Poradce na smƒõsi esenci√°ln√≠ch olej≈Ø
  &lt;/h2&gt;
  
  &lt;!-- Obsah --&gt;
  &lt;div style="position:relative;z-index:2;display:flex;flex-direction:column;align-items:center;gap:24px;"&gt;
    &lt;p style="color:#e2e8f0;line-height:1.6;font-size:16px;margin:0;text-shadow:0 1px 3px rgba(0,0,0,0.3);font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;"&gt;
      N√°≈° asistent na esenci√°ln√≠ oleje dod√° informace a porad√≠ s v√Ωbƒõrem produktu
    &lt;/p&gt;
    
    &lt;!-- Tlaƒç√≠tko Spustit Chat --&gt;
    &lt;button
      id="eo-smesi-chat-open-btn"
      onclick="openEOSmesiChat()"
      style="width:180px;height:51px;border-radius:15px;cursor:pointer;transition:0.3s ease;background:linear-gradient(to bottom right,#2e8eff 0%,rgba(46,142,255,0) 30%);background-color:rgba(46,142,255,0.2);border:none;display:inline-flex;align-items:center;justify-content:center;flex-shrink:0;"
      onmouseover="this.style.backgroundColor='rgba(46,142,255,0.7)';this.style.boxShadow='0 0 10px rgba(46,142,255,0.5)'"
      onmouseout="this.style.backgroundColor='rgba(46,142,255,0.2)';this.style.boxShadow='none'"
    &gt;
      &lt;div style="width:176px;height:47px;border-radius:13px;background-color:#079854;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:16px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;"&gt;
        Spustit Chat
      &lt;/div&gt;
    &lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- 3Ô∏è‚É£ Overlay pozad√≠ (tmav√© pozad√≠ za mod√°lem) --&gt;
&lt;div
  id="eo-smesi-chat-overlay"
  onclick="closeEOSmesiChat()"
  style="position:fixed;inset:0;background:rgba(0,0,0,0.5);z-index:999998;visibility:hidden;opacity:0;transition:opacity 0.3s ease;backdrop-filter:blur(4px);"
&gt;&lt;/div&gt;

&lt;!-- 4Ô∏è‚É£ Chat Modal Wrapper (pro spr√°vn√© um√≠stƒõn√≠ k≈ô√≠≈æku) --&gt;
&lt;div
  id="eo-smesi-chat-wrapper"
  style="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(0.95);width:90%;max-width:1200px;height:85%;max-height:800px;z-index:999999;visibility:hidden;opacity:0;transition:all 0.3s ease;"
&gt;
  &lt;!-- Nen√°padn√Ω zav√≠rac√≠ k≈ô√≠≈æek (mimo modal, tƒõsnƒõ u rohu) --&gt;
  &lt;button
    id="eo-smesi-close-btn"
    onclick="closeEOSmesiChat()"
    style="position:absolute;top:-48px;right:0;z-index:10;background:rgba(0,0,0,0.6);color:white;border:none;width:36px;height:36px;border-radius:8px;cursor:pointer;font-size:18px;font-family:sans-serif;transition:all 0.2s ease;display:flex;align-items:center;justify-content:center;"
    onmouseover="this.style.opacity='1';this.style.background='rgba(0,0,0,0.9)'"
    onmouseout="this.style.opacity='0.8';this.style.background='rgba(0,0,0,0.6)'"
  &gt;‚úï&lt;/button&gt;

  &lt;div
    id="eo-smesi-chat-modal"
    style="width:100%;height:100%;border-radius:24px;box-shadow:0 25px 50px -12px rgba(0,0,0,0.5);overflow:hidden;"
  &gt;
    &lt;!-- ‚ö†Ô∏è D≈ÆLE≈ΩIT√â: P≈ôidej ID pro iframe --&gt;
    &lt;iframe
      id="eo-smesi-chat-iframe"
      src="https://gr8learn.eu/embed-eo-smesi.html"
      style="width:100%;height:100%;border:0;border-radius:24px;background:#fff;"
      allow="clipboard-write"
      title="EO Smƒõsi Chat"
    &gt;&lt;/iframe&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- 5Ô∏è‚É£ JavaScript funkce (üÜï S postMessage) --&gt;
&lt;script&gt;
// Otev≈ô√≠t chat
function openEOSmesiChat() {
  const wrapper = document.getElementById('eo-smesi-chat-wrapper');
  const overlay = document.getElementById('eo-smesi-chat-overlay');
  
  // Zobraz overlay
  overlay.style.visibility = 'visible';
  overlay.style.opacity = '1';
  
  // Zobraz wrapper s animac√≠
  wrapper.style.visibility = 'visible';
  setTimeout(() => {
    wrapper.style.opacity = '1';
    wrapper.style.transform = 'translate(-50%, -50%) scale(1)';
  }, 10);
  
  console.log('‚úÖ EO Smƒõsi Chat otev≈ôen');
  
  // Po≈°li user data do iframe
  sendUserData();
}

// Zav≈ô√≠t chat
function closeEOSmesiChat() {
  const wrapper = document.getElementById('eo-smesi-chat-wrapper');
  const overlay = document.getElementById('eo-smesi-chat-overlay');
  
  // Skryj s animac√≠
  wrapper.style.opacity = '0';
  wrapper.style.transform = 'translate(-50%, -50%) scale(0.95)';
  overlay.style.opacity = '0';
  
  setTimeout(() => {
    wrapper.style.visibility = 'hidden';
    overlay.style.visibility = 'hidden';
  }, 300);
  
  console.log('‚ùå EO Smƒõsi Chat zav≈ôen');
}

// üÜï Poslat user data do iframe pomoc√≠ postMessage
function sendUserData() {
  const iframe = document.getElementById('eo-smesi-chat-iframe');
  
  if (!iframe || !iframe.contentWindow) {
    console.warn('‚ö†Ô∏è Iframe je≈°tƒõ nen√≠ naƒçten√Ω');
    return;
  }
  
  // Po≈°li user data do iframe
  iframe.contentWindow.postMessage({
    type: 'USER_DATA',
    user: CURRENT_USER
  }, 'https://gr8learn.eu');
  
  console.log('üì§ User data odesl√°no do iframe:', CURRENT_USER);
}

// Vymazat user data (poslat pr√°zdn√Ω objekt)
function clearUserData() {
  const iframe = document.getElementById('eo-smesi-chat-iframe');
  
  if (!iframe || !iframe.contentWindow) {
    console.warn('‚ö†Ô∏è Iframe je≈°tƒõ nen√≠ naƒçten√Ω');
    return;
  }
  
  iframe.contentWindow.postMessage({
    type: 'USER_DATA',
    user: null
  }, 'https://gr8learn.eu');
  
  console.log('üóëÔ∏è User data vymaz√°na');
}

// üÜï Po naƒçten√≠ iframe po≈°li data automaticky
document.getElementById('eo-smesi-chat-iframe').addEventListener('load', function() {
  console.log('‚úÖ EO Smƒõsi Chat iframe naƒçten');
  // Po otev≈ôen√≠ chatu se data po≈°lou automaticky p≈ôes sendUserData()
});

// Kl√°vesov√° zkratka ESC pro zav≈ôen√≠
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    const wrapper = document.getElementById('eo-smesi-chat-wrapper');
    if (wrapper.style.visibility === 'visible') {
      closeEOSmesiChat();
    }
  }
});
&lt;/script&gt;

&lt;!-- ========================================
     EO SMƒöSI CHAT WIDGET - END
     ======================================== --&gt;</pre>
            </div>

            <div class="info-box">
                <p><strong>üí° Pro pou≈æit√≠ na Bewit webu:</strong> Zkop√≠ruj cel√Ω k√≥d v√Ω≈°e a vlo≈æ ho do ≈°ablony webu (nap≈ô. footer.php). Nezapome≈à nahradit <code>CURRENT_USER</code> promƒõnn√© skuteƒçn√Ωmi PHP promƒõnn√Ωmi z va≈°eho backendu.</p>
            </div>
        </div>
    </div>

    <!-- LIVE IMPLEMENTATION -->
    <script>
        // Simulace user dat pro test
        const CURRENT_USER = {
            id: '12345',
            email: 'test@bewit.cz',
            firstName: 'Jan',
            lastName: 'Nov√°k',
            position: 'Distributor',
            tokenEshop: 'bewit_token_abc123'
        };
        
        console.log('üë§ Test user data:', CURRENT_USER);
    </script>

    <!-- Dla≈ædice s tlaƒç√≠tkem -->
    <div id="eo-smesi-chat-tile" style="position:relative;background-image:url('https://modopafybeslbcqjxsve.supabase.co/storage/v1/object/public/web/ChatGPT%20Image%20Jan%2029,%202026,%2012_00_25%20PM.png');background-size:cover;background-position:center;border-radius:24px;padding:40px;box-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1);max-width:420px;margin:40px auto;text-align:center;overflow:hidden;">
      
      <div style="position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.65);z-index:1;"></div>
      
      <h2 style="position:relative;z-index:2;font-size:28px;color:#ffffff;margin:0 0 16px 0;text-shadow:0 2px 4px rgba(0,0,0,0.3);font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;">
        Poradce na smƒõsi esenci√°ln√≠ch olej≈Ø
      </h2>
      
      <div style="position:relative;z-index:2;display:flex;flex-direction:column;align-items:center;gap:24px;">
        <p style="color:#e2e8f0;line-height:1.6;font-size:16px;margin:0;text-shadow:0 1px 3px rgba(0,0,0,0.3);font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;">
          N√°≈° asistent na esenci√°ln√≠ oleje dod√° informace a porad√≠ s v√Ωbƒõrem produktu
        </p>
        
        <button
          id="eo-smesi-chat-open-btn"
          onclick="openEOSmesiChat()"
          style="width:180px;height:51px;border-radius:15px;cursor:pointer;transition:0.3s ease;background:linear-gradient(to bottom right,#2e8eff 0%,rgba(46,142,255,0) 30%);background-color:rgba(46,142,255,0.2);border:none;display:inline-flex;align-items:center;justify-content:center;flex-shrink:0;"
          onmouseover="this.style.backgroundColor='rgba(46,142,255,0.7)';this.style.boxShadow='0 0 10px rgba(46,142,255,0.5)'"
          onmouseout="this.style.backgroundColor='rgba(46,142,255,0.2)';this.style.boxShadow='none'"
        >
          <div style="width:176px;height:47px;border-radius:13px;background-color:#079854;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:16px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;">
            Spustit Chat
          </div>
        </button>
      </div>
    </div>

    <!-- Overlay pozad√≠ -->
    <div
      id="eo-smesi-chat-overlay"
      onclick="closeEOSmesiChat()"
      style="position:fixed;inset:0;background:rgba(0,0,0,0.5);z-index:999998;visibility:hidden;opacity:0;transition:opacity 0.3s ease;backdrop-filter:blur(4px);"
    ></div>

    <!-- Chat Modal Wrapper -->
    <div
      id="eo-smesi-chat-wrapper"
      style="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(0.95);width:90%;max-width:1200px;height:85%;max-height:800px;z-index:999999;visibility:hidden;opacity:0;transition:all 0.3s ease;"
    >
      <button
        id="eo-smesi-close-btn"
        onclick="closeEOSmesiChat()"
        style="position:absolute;top:-48px;right:0;z-index:10;background:rgba(0,0,0,0.6);color:white;border:none;width:36px;height:36px;border-radius:8px;cursor:pointer;font-size:18px;font-family:sans-serif;transition:all 0.2s ease;display:flex;align-items:center;justify-content:center;"
        onmouseover="this.style.opacity='1';this.style.background='rgba(0,0,0,0.9)'"
        onmouseout="this.style.opacity='0.8';this.style.background='rgba(0,0,0,0.6)'"
      >‚úï</button>

      <div
        id="eo-smesi-chat-modal"
        style="width:100%;height:100%;border-radius:24px;box-shadow:0 25px 50px -12px rgba(0,0,0,0.5);overflow:hidden;"
      >
        <iframe
          id="eo-smesi-chat-iframe"
          src="https://gr8learn.eu/embed-eo-smesi.html"
          style="width:100%;height:100%;border:0;border-radius:24px;background:#fff;"
          allow="clipboard-write"
          title="EO Smƒõsi Chat"
        ></iframe>
      </div>
    </div>

    <!-- JavaScript funkce -->
    <script>
        // Otev≈ô√≠t chat
        function openEOSmesiChat() {
          const wrapper = document.getElementById('eo-smesi-chat-wrapper');
          const overlay = document.getElementById('eo-smesi-chat-overlay');
          const statusBadge = document.getElementById('chat-status');
          
          // Zobraz overlay
          overlay.style.visibility = 'visible';
          overlay.style.opacity = '1';
          
          // Zobraz wrapper s animac√≠
          wrapper.style.visibility = 'visible';
          setTimeout(() => {
            wrapper.style.opacity = '1';
            wrapper.style.transform = 'translate(-50%, -50%) scale(1)';
          }, 10);
          
          // Update status
          statusBadge.textContent = 'Chat je otev≈ôen√Ω';
          statusBadge.className = 'status-badge open';
          
          console.log('‚úÖ EO Smƒõsi Chat otev≈ôen');
          
          // Po≈°li user data do iframe
          sendUserData();
        }

        // Zav≈ô√≠t chat
        function closeEOSmesiChat() {
          const wrapper = document.getElementById('eo-smesi-chat-wrapper');
          const overlay = document.getElementById('eo-smesi-chat-overlay');
          const statusBadge = document.getElementById('chat-status');
          
          // Skryj s animac√≠
          wrapper.style.opacity = '0';
          wrapper.style.transform = 'translate(-50%, -50%) scale(0.95)';
          overlay.style.opacity = '0';
          
          setTimeout(() => {
            wrapper.style.visibility = 'hidden';
            overlay.style.visibility = 'hidden';
          }, 300);
          
          // Update status
          statusBadge.textContent = 'Chat je zav≈ôen√Ω';
          statusBadge.className = 'status-badge closed';
          
          console.log('‚ùå EO Smƒõsi Chat zav≈ôen');
        }

        // Poslat user data do iframe pomoc√≠ postMessage
        function sendUserData() {
          const iframe = document.getElementById('eo-smesi-chat-iframe');
          
          if (!iframe || !iframe.contentWindow) {
            console.warn('‚ö†Ô∏è Iframe je≈°tƒõ nen√≠ naƒçten√Ω');
            return;
          }
          
          // Po≈°li user data do iframe
          iframe.contentWindow.postMessage({
            type: 'USER_DATA',
            user: CURRENT_USER
          }, 'https://gr8learn.eu');
          
          console.log('üì§ User data odesl√°no do iframe:', CURRENT_USER);
        }

        // Vymazat user data (poslat pr√°zdn√Ω objekt)
        function clearUserData() {
          const iframe = document.getElementById('eo-smesi-chat-iframe');
          
          if (!iframe || !iframe.contentWindow) {
            console.warn('‚ö†Ô∏è Iframe je≈°tƒõ nen√≠ naƒçten√Ω');
            return;
          }
          
          iframe.contentWindow.postMessage({
            type: 'USER_DATA',
            user: null
          }, 'https://gr8learn.eu');
          
          console.log('üóëÔ∏è User data vymaz√°na');
        }

        // Po naƒçten√≠ iframe po≈°li data automaticky
        document.getElementById('eo-smesi-chat-iframe').addEventListener('load', function() {
          console.log('‚úÖ EO Smƒõsi Chat iframe naƒçten');
        });

        // Kl√°vesov√° zkratka ESC pro zav≈ôen√≠
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape') {
            const wrapper = document.getElementById('eo-smesi-chat-wrapper');
            if (wrapper.style.visibility === 'visible') {
              closeEOSmesiChat();
            }
          }
        });
    </script>
</body>
</html>
