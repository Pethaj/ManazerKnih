<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EO Smƒõsi Chat - P≈ô√≠klad pro Bewit</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            font-size: 18px;
            margin-bottom: 30px;
        }
        
        .info-box {
            background: #f0f9ff;
            border-left: 4px solid #3b82f6;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .info-box h3 {
            margin-top: 0;
            color: #1e40af;
        }
        
        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .code-comment {
            color: #94a3b8;
        }
        
        .feature {
            margin: 15px 0;
            padding-left: 20px;
        }
        
        .feature::before {
            content: "‚úì";
            color: #10b981;
            font-weight: bold;
            margin-right: 10px;
            margin-left: -20px;
        }
        
        .warning-box {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .warning-box h3 {
            margin-top: 0;
            color: #92400e;
        }
        
        .success-box {
            background: #dcfce7;
            border-left: 4px solid #10b981;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .success-box h3 {
            margin-top: 0;
            color: #065f46;
        }

        .purple-box {
            background: #ede9fe;
            border-left: 4px solid #8b5cf6;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .purple-box h3 {
            margin-top: 0;
            color: #5b21b6;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåø EO Smƒõsi Chat - Embedding na Bewit.cz</h1>
        <p class="subtitle">Kompletn√≠ pr≈Øvodce implementac√≠ chatu o esenci√°ln√≠ch olej√≠ch na va≈°em webu</p>
        
        <div class="success-box">
            <h3>üéØ Co tento chat dƒõl√°</h3>
            <div class="feature">Odpov√≠d√° na dotazy o esenci√°ln√≠ch olej√≠ch a smƒõs√≠ch BEWIT</div>
            <div class="feature">Automaticky sleduje u≈æivatelsk√° data (ID, email, jm√©no, e-shop token)</div>
            <div class="feature">Ukl√°d√° historii konverzac√≠ do datab√°ze</div>
            <div class="feature">Plnƒõ responzivn√≠ - funguje na mobilu i desktopu</div>
            <div class="feature">≈Ω√°dn√° √∫dr≈æba - aktualizace automaticky z MedBase</div>
        </div>
        
        <div class="info-box">
            <h3>üìã Implementace - Krok za krokem</h3>
            <p><strong>1. Otev≈ôete ≈°ablonu va≈°eho webu</strong> (nap≈ô. <code>footer.php</code>, <code>template.php</code>)</p>
            <p><strong>2. Vlo≈æte tento k√≥d p≈ôed uzav√≠rac√≠ tag <code>&lt;/body&gt;</code></strong></p>
        </div>
        
        <div class="code-block">
<span class="code-comment">&lt;!-- ============================================= --&gt;</span>
<span class="code-comment">&lt;!-- EO SMƒöSI CHAT WIDGET - START                --&gt;</span>
<span class="code-comment">&lt;!-- ============================================= --&gt;</span>

<span class="code-comment">&lt;!-- Iframe s chatem --&gt;</span>
&lt;iframe
  id="eo-smesi-chat-iframe"
  src="https://gr8learn.eu/embed-eo-smesi.html"
  
  <span class="code-comment">&lt;!-- üë§ User data (automaticky se sb√≠raj√≠) --&gt;</span>
  data-user-id="&lt;?php echo $user-&gt;id; ?&gt;"
  data-firstname="&lt;?php echo $user-&gt;firstName; ?&gt;"
  data-lastname="&lt;?php echo $user-&gt;lastName; ?&gt;"
  data-email="&lt;?php echo $user-&gt;email; ?&gt;"
  data-position="&lt;?php echo $user-&gt;position; ?&gt;"
  data-token-eshop="&lt;?php echo $user-&gt;bewitToken; ?&gt;"
  
  <span class="code-comment">&lt;!-- üé® Styling --&gt;</span>
  style="position:fixed; right:24px; bottom:24px; width:1200px; height:700px; 
         max-width:calc(100vw - 48px); max-height:calc(100vh - 48px); 
         border:0; border-radius:16px; 
         box-shadow:0 25px 50px -12px rgba(0,0,0,0.25); 
         z-index:999999;"
  
  <span class="code-comment">&lt;!-- ‚öôÔ∏è Permissions --&gt;</span>
  allow="clipboard-write"
  title="EO Smƒõsi Chat"
&gt;&lt;/iframe&gt;

<span class="code-comment">&lt;!-- üì§ JavaScript pro odes√≠l√°n√≠ user dat (voliteln√©) --&gt;</span>
&lt;script&gt;
(function() {
  const iframe = document.getElementById('eo-smesi-chat-iframe');
  if (!iframe) return;
  
  <span class="code-comment">// Poƒçkej na naƒçten√≠ iframe</span>
  iframe.addEventListener('load', function() {
    <span class="code-comment">// Po≈°li user data do chatu</span>
    iframe.contentWindow.postMessage({
      type: 'USER_DATA',
      user: {
        id: iframe.getAttribute('data-user-id'),
        firstName: iframe.getAttribute('data-firstname'),
        lastName: iframe.getAttribute('data-lastname'),
        email: iframe.getAttribute('data-email'),
        position: iframe.getAttribute('data-position'),
        tokenEshop: iframe.getAttribute('data-token-eshop')
      }
    }, 'https://gr8learn.eu');
  });
})();
&lt;/script&gt;

<span class="code-comment">&lt;!-- ============================================= --&gt;</span>
<span class="code-comment">&lt;!-- EO SMƒöSI CHAT WIDGET - END                  --&gt;</span>
<span class="code-comment">&lt;!-- ============================================= --&gt;</span>
        </div>
        
        <div class="purple-box">
            <h3>üë§ Mapov√°n√≠ User Data Fieldu</h3>
            <p>Ujistƒõte se, ≈æe mapujete spr√°vn√© PHP promƒõnn√© z va≈°eho syst√©mu:</p>
            <table style="width:100%; margin-top:10px; border-collapse: collapse;">
                <tr style="background:#f3f4f6;">
                    <th style="padding:10px; text-align:left; border:1px solid #d1d5db;">Data atribut</th>
                    <th style="padding:10px; text-align:left; border:1px solid #d1d5db;">PHP promƒõnn√° (p≈ô√≠klad)</th>
                    <th style="padding:10px; text-align:left; border:1px solid #d1d5db;">Popis</th>
                </tr>
                <tr>
                    <td style="padding:10px; border:1px solid #d1d5db;"><code>data-user-id</code></td>
                    <td style="padding:10px; border:1px solid #d1d5db;"><code>$user-&gt;id</code></td>
                    <td style="padding:10px; border:1px solid #d1d5db;">ID u≈æivatele v Bewit DB</td>
                </tr>
                <tr style="background:#f9fafb;">
                    <td style="padding:10px; border:1px solid #d1d5db;"><code>data-firstname</code></td>
                    <td style="padding:10px; border:1px solid #d1d5db;"><code>$user-&gt;firstName</code></td>
                    <td style="padding:10px; border:1px solid #d1d5db;">K≈ôestn√≠ jm√©no</td>
                </tr>
                <tr>
                    <td style="padding:10px; border:1px solid #d1d5db;"><code>data-lastname</code></td>
                    <td style="padding:10px; border:1px solid #d1d5db;"><code>$user-&gt;lastName</code></td>
                    <td style="padding:10px; border:1px solid #d1d5db;">P≈ô√≠jmen√≠</td>
                </tr>
                <tr style="background:#f9fafb;">
                    <td style="padding:10px; border:1px solid #d1d5db;"><code>data-email</code></td>
                    <td style="padding:10px; border:1px solid #d1d5db;"><code>$user-&gt;email</code></td>
                    <td style="padding:10px; border:1px solid #d1d5db;">Email</td>
                </tr>
                <tr>
                    <td style="padding:10px; border:1px solid #d1d5db;"><code>data-position</code></td>
                    <td style="padding:10px; border:1px solid #d1d5db;"><code>$user-&gt;position</code></td>
                    <td style="padding:10px; border:1px solid #d1d5db;">Pozice/role</td>
                </tr>
                <tr style="background:#f9fafb;">
                    <td style="padding:10px; border:1px solid #d1d5db;"><code>data-token-eshop</code></td>
                    <td style="padding:10px; border:1px solid #d1d5db;"><code>$user-&gt;bewitToken</code></td>
                    <td style="padding:10px; border:1px solid #d1d5db;">‚ö†Ô∏è D≈ÆLE≈ΩIT√â - E-shop token</td>
                </tr>
            </table>
        </div>
        
        <div class="warning-box">
            <h3>‚ö†Ô∏è D≈ÆLE≈ΩIT√â - E-shop Token</h3>
            <p>Pole <code>data-token-eshop</code> je <strong>kritick√©</strong> pro integraci s Bewit e-shopem!</p>
            <ul style="margin-left:20px; margin-top:10px;">
                <li>Tento token propojuje u≈æivatele v chatu s jeho √∫ƒçtem v e-shopu</li>
                <li>Bez tokenu nebude fungovat doporuƒçen√≠ produkt≈Ø a n√°kupn√≠ funkce</li>
                <li>Ovƒõ≈ôte ≈æe m√°te spr√°vn√© jm√©no PHP promƒõnn√© v Bewit syst√©mu</li>
                <li>Token se ukl√°d√° do datab√°ze spolu s chat histori√≠</li>
            </ul>
        </div>

        <div class="info-box">
            <h3>üé® Varianty zobrazen√≠</h3>
            <p><strong>Souƒçasn√Ω k√≥d:</strong> Chat je v≈ædy viditeln√Ω v prav√©m doln√≠m rohu</p>
            <p><strong>Pokud chcete toggle tlaƒç√≠tko:</strong> Viz dokumentace <code>EMBED_EO_SMESI_DEPLOYMENT_GUIDE.md</code> ‚Üí Varianta B</p>
        </div>
        
        <div class="success-box">
            <h3>‚úÖ Po nasazen√≠ ovƒõ≈ôte</h3>
            <div class="feature">Chat se zobrazuje v prav√©m doln√≠m rohu</div>
            <div class="feature">M≈Ø≈æete poslat zpr√°vu a dostanete odpovƒõƒè</div>
            <div class="feature">V Developer Console (F12) vid√≠te logy: "üìã User data naƒçtena..."</div>
            <div class="feature">V MedBase admin panelu vid√≠te nov√© zpr√°vy v historii</div>
            <div class="feature">User data obsahuj√≠ e-shop token</div>
        </div>

        <div class="warning-box">
            <h3>üîç Debugging</h3>
            <p><strong>Pokud chat nefunguje:</strong></p>
            <ol style="margin-left:20px; margin-top:10px;">
                <li>Otev≈ôete Developer Console (F12)</li>
                <li>Hledejte logy zaƒç√≠naj√≠c√≠ "üî• EMBED EO SMESI CHAT"</li>
                <li>Zkontrolujte ≈æe vid√≠te: "üìã User data naƒçtena z data-* atribut≈Ø iframe"</li>
                <li>Ovƒõ≈ôte ≈æe v≈°echny PHP promƒõnn√© existuj√≠ (≈æ√°dn√© PHP errors)</li>
                <li>Zkontrolujte ≈æe URL <code>https://gr8learn.eu/embed-eo-smesi.html</code> je dostupn√°</li>
            </ol>
        </div>

        <div class="purple-box">
            <h3>üìä Co se dƒõje s daty</h3>
            <p>V≈°echna user data se automaticky:</p>
            <ul style="margin-left:20px; margin-top:10px;">
                <li>‚úÖ Ukl√°daj√≠ do Supabase datab√°ze v tabulce <code>chat_messages</code></li>
                <li>‚úÖ Pos√≠laj√≠ do N8N webhooku pro zpracov√°n√≠ AI</li>
                <li>‚úÖ Jsou dostupn√© v admin panelu MedBase</li>
                <li>‚úÖ Lze filtrovat podle emailu, ID, nebo tokenu</li>
                <li>‚ö†Ô∏è Nejsou ≈°ifrovan√° - nepou≈æ√≠vat pro hesla nebo platebn√≠ √∫daje</li>
            </ul>
        </div>

        <div class="info-box">
            <h3>üìû Podpora</h3>
            <p>Pro technickou podporu kontaktujte:</p>
            <ul style="margin-left:20px; margin-top:10px;">
                <li><strong>Email:</strong> podpora@bewit.love</li>
                <li><strong>Dokumentace:</strong> <code>EMBED_EO_SMESI_DEPLOYMENT_GUIDE.md</code></li>
                <li><strong>Quick Start:</strong> <code>EMBED_EO_SMESI_QUICK_START.md</code></li>
            </ul>
        </div>

        <div class="success-box">
            <h3>üéâ To je v≈°e!</h3>
            <p>Po vlo≈æen√≠ k√≥du na v√°≈° web bude chat automaticky fungovat. ≈Ω√°dn√° dal≈°√≠ konfigurace nen√≠ pot≈ôeba.</p>
            <p style="margin-top:10px;"><strong>Zmƒõny v nastaven√≠ chatu</strong> (kategorie, ≈°t√≠tky, AI model) se dƒõlaj√≠ v MedBase admin panelu a projev√≠ se okam≈æitƒõ bez nutnosti mƒõnit k√≥d na webu.</p>
        </div>
    </div>
</body>
</html>
