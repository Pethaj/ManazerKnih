var aM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _l(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Sd={exports:{}},Ao={},Ad={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ig;function sw(){if(ig)return je;ig=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function b(_){return _===null||typeof _!="object"?null:(_=m&&_[m]||_["@@iterator"],typeof _=="function"?_:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,A={};function S(_,X,me){this.props=_,this.context=X,this.refs=A,this.updater=me||T}S.prototype.isReactComponent={},S.prototype.setState=function(_,X){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,X,"setState")},S.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function x(){}x.prototype=S.prototype;function R(_,X,me){this.props=_,this.context=X,this.refs=A,this.updater=me||T}var C=R.prototype=new x;C.constructor=R,w(C,S.prototype),C.isPureReactComponent=!0;var j=Array.isArray,M=Object.prototype.hasOwnProperty,I={current:null},Q={key:!0,ref:!0,__self:!0,__source:!0};function W(_,X,me){var P,Te={},Me=null,we=null;if(X!=null)for(P in X.ref!==void 0&&(we=X.ref),X.key!==void 0&&(Me=""+X.key),X)M.call(X,P)&&!Q.hasOwnProperty(P)&&(Te[P]=X[P]);var Pe=arguments.length-2;if(Pe===1)Te.children=me;else if(1<Pe){for(var Re=Array(Pe),Le=0;Le<Pe;Le++)Re[Le]=arguments[Le+2];Te.children=Re}if(_&&_.defaultProps)for(P in Pe=_.defaultProps,Pe)Te[P]===void 0&&(Te[P]=Pe[P]);return{$$typeof:e,type:_,key:Me,ref:we,props:Te,_owner:I.current}}function te(_,X){return{$$typeof:e,type:_.type,key:X,ref:_.ref,props:_.props,_owner:_._owner}}function B(_){return typeof _=="object"&&_!==null&&_.$$typeof===e}function q(_){var X={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(me){return X[me]})}var Z=/\/+/g;function de(_,X){return typeof _=="object"&&_!==null&&_.key!=null?q(""+_.key):X.toString(36)}function ue(_,X,me,P,Te){var Me=typeof _;(Me==="undefined"||Me==="boolean")&&(_=null);var we=!1;if(_===null)we=!0;else switch(Me){case"string":case"number":we=!0;break;case"object":switch(_.$$typeof){case e:case t:we=!0}}if(we)return we=_,Te=Te(we),_=P===""?"."+de(we,0):P,j(Te)?(me="",_!=null&&(me=_.replace(Z,"$&/")+"/"),ue(Te,X,me,"",function(Le){return Le})):Te!=null&&(B(Te)&&(Te=te(Te,me+(!Te.key||we&&we.key===Te.key?"":(""+Te.key).replace(Z,"$&/")+"/")+_)),X.push(Te)),1;if(we=0,P=P===""?".":P+":",j(_))for(var Pe=0;Pe<_.length;Pe++){Me=_[Pe];var Re=P+de(Me,Pe);we+=ue(Me,X,me,Re,Te)}else if(Re=b(_),typeof Re=="function")for(_=Re.call(_),Pe=0;!(Me=_.next()).done;)Me=Me.value,Re=P+de(Me,Pe++),we+=ue(Me,X,me,Re,Te);else if(Me==="object")throw X=String(_),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return we}function re(_,X,me){if(_==null)return _;var P=[],Te=0;return ue(_,P,"","",function(Me){return X.call(me,Me,Te++)}),P}function ne(_){if(_._status===-1){var X=_._result;X=X(),X.then(function(me){(_._status===0||_._status===-1)&&(_._status=1,_._result=me)},function(me){(_._status===0||_._status===-1)&&(_._status=2,_._result=me)}),_._status===-1&&(_._status=0,_._result=X)}if(_._status===1)return _._result.default;throw _._result}var K={current:null},H={transition:null},G={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:H,ReactCurrentOwner:I};return je.Children={map:re,forEach:function(_,X,me){re(_,function(){X.apply(this,arguments)},me)},count:function(_){var X=0;return re(_,function(){X++}),X},toArray:function(_){return re(_,function(X){return X})||[]},only:function(_){if(!B(_))throw Error("React.Children.only expected to receive a single React element child.");return _}},je.Component=S,je.Fragment=n,je.Profiler=s,je.PureComponent=R,je.StrictMode=r,je.Suspense=d,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,je.cloneElement=function(_,X,me){if(_==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_+".");var P=w({},_.props),Te=_.key,Me=_.ref,we=_._owner;if(X!=null){if(X.ref!==void 0&&(Me=X.ref,we=I.current),X.key!==void 0&&(Te=""+X.key),_.type&&_.type.defaultProps)var Pe=_.type.defaultProps;for(Re in X)M.call(X,Re)&&!Q.hasOwnProperty(Re)&&(P[Re]=X[Re]===void 0&&Pe!==void 0?Pe[Re]:X[Re])}var Re=arguments.length-2;if(Re===1)P.children=me;else if(1<Re){Pe=Array(Re);for(var Le=0;Le<Re;Le++)Pe[Le]=arguments[Le+2];P.children=Pe}return{$$typeof:e,type:_.type,key:Te,ref:Me,props:P,_owner:we}},je.createContext=function(_){return _={$$typeof:u,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_.Provider={$$typeof:a,_context:_},_.Consumer=_},je.createElement=W,je.createFactory=function(_){var X=W.bind(null,_);return X.type=_,X},je.createRef=function(){return{current:null}},je.forwardRef=function(_){return{$$typeof:c,render:_}},je.isValidElement=B,je.lazy=function(_){return{$$typeof:p,_payload:{_status:-1,_result:_},_init:ne}},je.memo=function(_,X){return{$$typeof:h,type:_,compare:X===void 0?null:X}},je.startTransition=function(_){var X=H.transition;H.transition={};try{_()}finally{H.transition=X}},je.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},je.useCallback=function(_,X){return K.current.useCallback(_,X)},je.useContext=function(_){return K.current.useContext(_)},je.useDebugValue=function(){},je.useDeferredValue=function(_){return K.current.useDeferredValue(_)},je.useEffect=function(_,X){return K.current.useEffect(_,X)},je.useId=function(){return K.current.useId()},je.useImperativeHandle=function(_,X,me){return K.current.useImperativeHandle(_,X,me)},je.useInsertionEffect=function(_,X){return K.current.useInsertionEffect(_,X)},je.useLayoutEffect=function(_,X){return K.current.useLayoutEffect(_,X)},je.useMemo=function(_,X){return K.current.useMemo(_,X)},je.useReducer=function(_,X,me){return K.current.useReducer(_,X,me)},je.useRef=function(_){return K.current.useRef(_)},je.useState=function(_){return K.current.useState(_)},je.useSyncExternalStore=function(_,X,me){return K.current.useSyncExternalStore(_,X,me)},je.useTransition=function(){return K.current.useTransition()},je.version="18.2.0",je}var sg;function Tf(){return sg||(sg=1,Ad.exports=sw()),Ad.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var og;function ow(){if(og)return Ao;og=1;var e=Tf(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(c,d,h){var p,m={},b=null,T=null;h!==void 0&&(b=""+h),d.key!==void 0&&(b=""+d.key),d.ref!==void 0&&(T=d.ref);for(p in d)r.call(d,p)&&!a.hasOwnProperty(p)&&(m[p]=d[p]);if(c&&c.defaultProps)for(p in d=c.defaultProps,d)m[p]===void 0&&(m[p]=d[p]);return{$$typeof:t,type:c,key:b,ref:T,props:m,_owner:s.current}}return Ao.Fragment=n,Ao.jsx=u,Ao.jsxs=u,Ao}var ag;function aw(){return ag||(ag=1,Sd.exports=ow()),Sd.exports}var v=aw(),se=Tf();const uw=_l(se);var Mu={},Cd={exports:{}},tn={},Nd={exports:{}},Id={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug;function lw(){return ug||(ug=1,(function(e){function t(H,G){var _=H.length;H.push(G);e:for(;0<_;){var X=_-1>>>1,me=H[X];if(0<s(me,G))H[X]=G,H[_]=me,_=X;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var G=H[0],_=H.pop();if(_!==G){H[0]=_;e:for(var X=0,me=H.length,P=me>>>1;X<P;){var Te=2*(X+1)-1,Me=H[Te],we=Te+1,Pe=H[we];if(0>s(Me,_))we<me&&0>s(Pe,Me)?(H[X]=Pe,H[we]=_,X=we):(H[X]=Me,H[Te]=_,X=Te);else if(we<me&&0>s(Pe,_))H[X]=Pe,H[we]=_,X=we;else break e}}return G}function s(H,G){var _=H.sortIndex-G.sortIndex;return _!==0?_:H.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var u=Date,c=u.now();e.unstable_now=function(){return u.now()-c}}var d=[],h=[],p=1,m=null,b=3,T=!1,w=!1,A=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(H){for(var G=n(h);G!==null;){if(G.callback===null)r(h);else if(G.startTime<=H)r(h),G.sortIndex=G.expirationTime,t(d,G);else break;G=n(h)}}function j(H){if(A=!1,C(H),!w)if(n(d)!==null)w=!0,ne(M);else{var G=n(h);G!==null&&K(j,G.startTime-H)}}function M(H,G){w=!1,A&&(A=!1,x(W),W=-1),T=!0;var _=b;try{for(C(G),m=n(d);m!==null&&(!(m.expirationTime>G)||H&&!q());){var X=m.callback;if(typeof X=="function"){m.callback=null,b=m.priorityLevel;var me=X(m.expirationTime<=G);G=e.unstable_now(),typeof me=="function"?m.callback=me:m===n(d)&&r(d),C(G)}else r(d);m=n(d)}if(m!==null)var P=!0;else{var Te=n(h);Te!==null&&K(j,Te.startTime-G),P=!1}return P}finally{m=null,b=_,T=!1}}var I=!1,Q=null,W=-1,te=5,B=-1;function q(){return!(e.unstable_now()-B<te)}function Z(){if(Q!==null){var H=e.unstable_now();B=H;var G=!0;try{G=Q(!0,H)}finally{G?de():(I=!1,Q=null)}}else I=!1}var de;if(typeof R=="function")de=function(){R(Z)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,re=ue.port2;ue.port1.onmessage=Z,de=function(){re.postMessage(null)}}else de=function(){S(Z,0)};function ne(H){Q=H,I||(I=!0,de())}function K(H,G){W=S(function(){H(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){w||T||(w=!0,ne(M))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(H){switch(b){case 1:case 2:case 3:var G=3;break;default:G=b}var _=b;b=G;try{return H()}finally{b=_}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,G){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var _=b;b=H;try{return G()}finally{b=_}},e.unstable_scheduleCallback=function(H,G,_){var X=e.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?X+_:X):_=X,H){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=_+me,H={id:p++,callback:G,priorityLevel:H,startTime:_,expirationTime:me,sortIndex:-1},_>X?(H.sortIndex=_,t(h,H),n(d)===null&&H===n(h)&&(A?(x(W),W=-1):A=!0,K(j,_-X))):(H.sortIndex=me,t(d,H),w||T||(w=!0,ne(M))),H},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(H){var G=b;return function(){var _=b;b=G;try{return H.apply(this,arguments)}finally{b=_}}}})(Id)),Id}var lg;function cw(){return lg||(lg=1,Nd.exports=lw()),Nd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cg;function dw(){if(cg)return tn;cg=1;var e=Tf(),t=cw();function n(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function b(i){return d.call(m,i)?!0:d.call(p,i)?!1:h.test(i)?m[i]=!0:(p[i]=!0,!1)}function T(i,o,l,f){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function w(i,o,l,f){if(o===null||typeof o>"u"||T(i,o,l,f))return!0;if(f)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function A(i,o,l,f,y,E,k){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=y,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=E,this.removeEmptyString=k}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){S[i]=new A(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];S[o]=new A(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){S[i]=new A(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){S[i]=new A(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){S[i]=new A(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){S[i]=new A(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){S[i]=new A(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){S[i]=new A(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){S[i]=new A(i,5,!1,i.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function R(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(x,R);S[o]=new A(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(x,R);S[o]=new A(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(x,R);S[o]=new A(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){S[i]=new A(i,1,!1,i.toLowerCase(),null,!1,!1)}),S.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){S[i]=new A(i,1,!1,i.toLowerCase(),null,!0,!0)});function C(i,o,l,f){var y=S.hasOwnProperty(o)?S[o]:null;(y!==null?y.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(w(o,l,y,f)&&(l=null),f||y===null?b(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):y.mustUseProperty?i[y.propertyName]=l===null?y.type===3?!1:"":l:(o=y.attributeName,f=y.attributeNamespace,l===null?i.removeAttribute(o):(y=y.type,l=y===3||y===4&&l===!0?"":""+l,f?i.setAttributeNS(f,o,l):i.setAttribute(o,l))))}var j=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),I=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),q=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),H=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=H&&i[H]||i["@@iterator"],typeof i=="function"?i:null)}var _=Object.assign,X;function me(i){if(X===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);X=o&&o[1]||""}return`
`+X+i}var P=!1;function Te(i,o){if(!i||P)return"";P=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Y){var f=Y}Reflect.construct(i,[],o)}else{try{o.call()}catch(Y){f=Y}i.call(o.prototype)}else{try{throw Error()}catch(Y){f=Y}i()}}catch(Y){if(Y&&f&&typeof Y.stack=="string"){for(var y=Y.stack.split(`
`),E=f.stack.split(`
`),k=y.length-1,L=E.length-1;1<=k&&0<=L&&y[k]!==E[L];)L--;for(;1<=k&&0<=L;k--,L--)if(y[k]!==E[L]){if(k!==1||L!==1)do if(k--,L--,0>L||y[k]!==E[L]){var F=`
`+y[k].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=k&&0<=L);break}}}finally{P=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?me(i):""}function Me(i){switch(i.tag){case 5:return me(i.type);case 16:return me("Lazy");case 13:return me("Suspense");case 19:return me("SuspenseList");case 0:case 2:case 15:return i=Te(i.type,!1),i;case 11:return i=Te(i.type.render,!1),i;case 1:return i=Te(i.type,!0),i;default:return""}}function we(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Q:return"Fragment";case I:return"Portal";case te:return"Profiler";case W:return"StrictMode";case de:return"Suspense";case ue:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case q:return(i.displayName||"Context")+".Consumer";case B:return(i._context.displayName||"Context")+".Provider";case Z:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case re:return o=i.displayName||null,o!==null?o:we(i.type)||"Memo";case ne:o=i._payload,i=i._init;try{return we(i(o))}catch{}}return null}function Pe(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(o);case 8:return o===W?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Re(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Le(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function zn(i){var o=Le(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var y=l.get,E=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return y.call(this)},set:function(k){f=""+k,E.call(this,k)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(k){f=""+k},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function mn(i){i._valueTracker||(i._valueTracker=zn(i))}function ti(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),f="";return i&&(f=Le(i)?i.checked?"true":"false":i.value),i=f,i!==l?(o.setValue(i),!0):!1}function yr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function br(i,o){var l=o.checked;return _({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function We(i,o){var l=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;l=Re(o.value!=null?o.value:l),i._wrapperState={initialChecked:f,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Gt(i,o){o=o.checked,o!=null&&C(i,"checked",o,!1)}function qe(i,o){Gt(i,o);var l=Re(o.value),f=o.type;if(l!=null)f==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Er(i,o.type,l):o.hasOwnProperty("defaultValue")&&Er(i,o.type,Re(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function ni(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function Er(i,o,l){(o!=="number"||yr(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var tr=Array.isArray;function on(i,o,l,f){if(i=i.options,o){o={};for(var y=0;y<l.length;y++)o["$"+l[y]]=!0;for(l=0;l<i.length;l++)y=o.hasOwnProperty("$"+i[l].value),i[l].selected!==y&&(i[l].selected=y),y&&f&&(i[l].defaultSelected=!0)}else{for(l=""+Re(l),o=null,y=0;y<i.length;y++){if(i[y].value===l){i[y].selected=!0,f&&(i[y].defaultSelected=!0);return}o!==null||i[y].disabled||(o=i[y])}o!==null&&(o.selected=!0)}}function ri(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return _({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Et(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(n(92));if(tr(l)){if(1<l.length)throw Error(n(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:Re(l)}}function Aa(i,o){var l=Re(o.value),f=Re(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),f!=null&&(i.defaultValue=""+f)}function Ca(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function ee(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?ee(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Ie,Be=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,f,y){MSApp.execUnsafeLocalFunction(function(){return i(o,l,f,y)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Ie=Ie||document.createElement("div"),Ie.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Ie.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Ve(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var Nt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nr=["Webkit","ms","Moz","O"];Object.keys(Nt).forEach(function(i){nr.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Nt[o]=Nt[i]})});function gn(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||Nt.hasOwnProperty(i)&&Nt[i]?(""+o).trim():o+"px"}function Tr(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var f=l.indexOf("--")===0,y=gn(l,o[l],f);l==="float"&&(l="cssFloat"),f?i.setProperty(l,y):i[l]=y}}var ii=_({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function It(i,o){if(o){if(ii[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function Vn(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var an=null;function Hl(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var zl=null,Hi=null,zi=null;function Tp(i){if(i=ho(i)){if(typeof zl!="function")throw Error(n(280));var o=i.stateNode;o&&(o=Xa(o),zl(i.stateNode,i.type,o))}}function _p(i){Hi?zi?zi.push(i):zi=[i]:Hi=i}function vp(){if(Hi){var i=Hi,o=zi;if(zi=Hi=null,Tp(i),o)for(i=0;i<o.length;i++)Tp(o[i])}}function xp(i,o){return i(o)}function wp(){}var Vl=!1;function kp(i,o,l){if(Vl)return i(o,l);Vl=!0;try{return xp(i,o,l)}finally{Vl=!1,(Hi!==null||zi!==null)&&(wp(),vp())}}function $s(i,o){var l=i.stateNode;if(l===null)return null;var f=Xa(l);if(f===null)return null;l=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(n(231,o,typeof l));return l}var $l=!1;if(c)try{var Ws={};Object.defineProperty(Ws,"passive",{get:function(){$l=!0}}),window.addEventListener("test",Ws,Ws),window.removeEventListener("test",Ws,Ws)}catch{$l=!1}function dv(i,o,l,f,y,E,k,L,F){var Y=Array.prototype.slice.call(arguments,3);try{o.apply(l,Y)}catch(ae){this.onError(ae)}}var Ks=!1,Na=null,Ia=!1,Wl=null,hv={onError:function(i){Ks=!0,Na=i}};function fv(i,o,l,f,y,E,k,L,F){Ks=!1,Na=null,dv.apply(hv,arguments)}function pv(i,o,l,f,y,E,k,L,F){if(fv.apply(this,arguments),Ks){if(Ks){var Y=Na;Ks=!1,Na=null}else throw Error(n(198));Ia||(Ia=!0,Wl=Y)}}function si(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function Sp(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Ap(i){if(si(i)!==i)throw Error(n(188))}function mv(i){var o=i.alternate;if(!o){if(o=si(i),o===null)throw Error(n(188));return o!==i?null:i}for(var l=i,f=o;;){var y=l.return;if(y===null)break;var E=y.alternate;if(E===null){if(f=y.return,f!==null){l=f;continue}break}if(y.child===E.child){for(E=y.child;E;){if(E===l)return Ap(y),i;if(E===f)return Ap(y),o;E=E.sibling}throw Error(n(188))}if(l.return!==f.return)l=y,f=E;else{for(var k=!1,L=y.child;L;){if(L===l){k=!0,l=y,f=E;break}if(L===f){k=!0,f=y,l=E;break}L=L.sibling}if(!k){for(L=E.child;L;){if(L===l){k=!0,l=E,f=y;break}if(L===f){k=!0,f=E,l=y;break}L=L.sibling}if(!k)throw Error(n(189))}}if(l.alternate!==f)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?i:o}function Cp(i){return i=mv(i),i!==null?Np(i):null}function Np(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Np(i);if(o!==null)return o;i=i.sibling}return null}var Ip=t.unstable_scheduleCallback,Op=t.unstable_cancelCallback,gv=t.unstable_shouldYield,yv=t.unstable_requestPaint,ht=t.unstable_now,bv=t.unstable_getCurrentPriorityLevel,Kl=t.unstable_ImmediatePriority,Rp=t.unstable_UserBlockingPriority,Oa=t.unstable_NormalPriority,Ev=t.unstable_LowPriority,Pp=t.unstable_IdlePriority,Ra=null,$n=null;function Tv(i){if($n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(Ra,i,void 0,(i.current.flags&128)===128)}catch{}}var Nn=Math.clz32?Math.clz32:xv,_v=Math.log,vv=Math.LN2;function xv(i){return i>>>=0,i===0?32:31-(_v(i)/vv|0)|0}var Pa=64,La=4194304;function qs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Da(i,o){var l=i.pendingLanes;if(l===0)return 0;var f=0,y=i.suspendedLanes,E=i.pingedLanes,k=l&268435455;if(k!==0){var L=k&~y;L!==0?f=qs(L):(E&=k,E!==0&&(f=qs(E)))}else k=l&~y,k!==0?f=qs(k):E!==0&&(f=qs(E));if(f===0)return 0;if(o!==0&&o!==f&&(o&y)===0&&(y=f&-f,E=o&-o,y>=E||y===16&&(E&4194240)!==0))return o;if((f&4)!==0&&(f|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=f;0<o;)l=31-Nn(o),y=1<<l,f|=i[l],o&=~y;return f}function wv(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kv(i,o){for(var l=i.suspendedLanes,f=i.pingedLanes,y=i.expirationTimes,E=i.pendingLanes;0<E;){var k=31-Nn(E),L=1<<k,F=y[k];F===-1?((L&l)===0||(L&f)!==0)&&(y[k]=wv(L,o)):F<=o&&(i.expiredLanes|=L),E&=~L}}function ql(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Lp(){var i=Pa;return Pa<<=1,(Pa&4194240)===0&&(Pa=64),i}function Yl(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function Ys(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Nn(o),i[o]=l}function Sv(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<l;){var y=31-Nn(l),E=1<<y;o[y]=0,f[y]=-1,i[y]=-1,l&=~E}}function Gl(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var f=31-Nn(l),y=1<<f;y&o|i[f]&o&&(i[f]|=o),l&=~y}}var Ye=0;function Dp(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Mp,Ql,Bp,Fp,jp,Xl=!1,Ma=[],_r=null,vr=null,xr=null,Gs=new Map,Qs=new Map,wr=[],Av="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Up(i,o){switch(i){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":Gs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qs.delete(o.pointerId)}}function Xs(i,o,l,f,y,E){return i===null||i.nativeEvent!==E?(i={blockedOn:o,domEventName:l,eventSystemFlags:f,nativeEvent:E,targetContainers:[y]},o!==null&&(o=ho(o),o!==null&&Ql(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),i)}function Cv(i,o,l,f,y){switch(o){case"focusin":return _r=Xs(_r,i,o,l,f,y),!0;case"dragenter":return vr=Xs(vr,i,o,l,f,y),!0;case"mouseover":return xr=Xs(xr,i,o,l,f,y),!0;case"pointerover":var E=y.pointerId;return Gs.set(E,Xs(Gs.get(E)||null,i,o,l,f,y)),!0;case"gotpointercapture":return E=y.pointerId,Qs.set(E,Xs(Qs.get(E)||null,i,o,l,f,y)),!0}return!1}function Hp(i){var o=oi(i.target);if(o!==null){var l=si(o);if(l!==null){if(o=l.tag,o===13){if(o=Sp(l),o!==null){i.blockedOn=o,jp(i.priority,function(){Bp(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ba(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=Zl(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var f=new l.constructor(l.type,l);an=f,l.target.dispatchEvent(f),an=null}else return o=ho(l),o!==null&&Ql(o),i.blockedOn=l,!1;o.shift()}return!0}function zp(i,o,l){Ba(i)&&l.delete(o)}function Nv(){Xl=!1,_r!==null&&Ba(_r)&&(_r=null),vr!==null&&Ba(vr)&&(vr=null),xr!==null&&Ba(xr)&&(xr=null),Gs.forEach(zp),Qs.forEach(zp)}function Js(i,o){i.blockedOn===o&&(i.blockedOn=null,Xl||(Xl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Nv)))}function Zs(i){function o(y){return Js(y,i)}if(0<Ma.length){Js(Ma[0],i);for(var l=1;l<Ma.length;l++){var f=Ma[l];f.blockedOn===i&&(f.blockedOn=null)}}for(_r!==null&&Js(_r,i),vr!==null&&Js(vr,i),xr!==null&&Js(xr,i),Gs.forEach(o),Qs.forEach(o),l=0;l<wr.length;l++)f=wr[l],f.blockedOn===i&&(f.blockedOn=null);for(;0<wr.length&&(l=wr[0],l.blockedOn===null);)Hp(l),l.blockedOn===null&&wr.shift()}var Vi=j.ReactCurrentBatchConfig,Fa=!0;function Iv(i,o,l,f){var y=Ye,E=Vi.transition;Vi.transition=null;try{Ye=1,Jl(i,o,l,f)}finally{Ye=y,Vi.transition=E}}function Ov(i,o,l,f){var y=Ye,E=Vi.transition;Vi.transition=null;try{Ye=4,Jl(i,o,l,f)}finally{Ye=y,Vi.transition=E}}function Jl(i,o,l,f){if(Fa){var y=Zl(i,o,l,f);if(y===null)gc(i,o,f,ja,l),Up(i,f);else if(Cv(y,i,o,l,f))f.stopPropagation();else if(Up(i,f),o&4&&-1<Av.indexOf(i)){for(;y!==null;){var E=ho(y);if(E!==null&&Mp(E),E=Zl(i,o,l,f),E===null&&gc(i,o,f,ja,l),E===y)break;y=E}y!==null&&f.stopPropagation()}else gc(i,o,f,null,l)}}var ja=null;function Zl(i,o,l,f){if(ja=null,i=Hl(f),i=oi(i),i!==null)if(o=si(i),o===null)i=null;else if(l=o.tag,l===13){if(i=Sp(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return ja=i,null}function Vp(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bv()){case Kl:return 1;case Rp:return 4;case Oa:case Ev:return 16;case Pp:return 536870912;default:return 16}default:return 16}}var kr=null,ec=null,Ua=null;function $p(){if(Ua)return Ua;var i,o=ec,l=o.length,f,y="value"in kr?kr.value:kr.textContent,E=y.length;for(i=0;i<l&&o[i]===y[i];i++);var k=l-i;for(f=1;f<=k&&o[l-f]===y[E-f];f++);return Ua=y.slice(i,1<f?1-f:void 0)}function Ha(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function za(){return!0}function Wp(){return!1}function un(i){function o(l,f,y,E,k){this._reactName=l,this._targetInst=y,this.type=f,this.nativeEvent=E,this.target=k,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(l=i[L],this[L]=l?l(E):E[L]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?za:Wp,this.isPropagationStopped=Wp,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=za)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=za)},persist:function(){},isPersistent:za}),o}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tc=un($i),eo=_({},$i,{view:0,detail:0}),Rv=un(eo),nc,rc,to,Va=_({},eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==to&&(to&&i.type==="mousemove"?(nc=i.screenX-to.screenX,rc=i.screenY-to.screenY):rc=nc=0,to=i),nc)},movementY:function(i){return"movementY"in i?i.movementY:rc}}),Kp=un(Va),Pv=_({},Va,{dataTransfer:0}),Lv=un(Pv),Dv=_({},eo,{relatedTarget:0}),ic=un(Dv),Mv=_({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),Bv=un(Mv),Fv=_({},$i,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),jv=un(Fv),Uv=_({},$i,{data:0}),qp=un(Uv),Hv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $v(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Vv[i])?!!o[i]:!1}function sc(){return $v}var Wv=_({},eo,{key:function(i){if(i.key){var o=Hv[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Ha(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?zv[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sc,charCode:function(i){return i.type==="keypress"?Ha(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ha(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Kv=un(Wv),qv=_({},Va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yp=un(qv),Yv=_({},eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sc}),Gv=un(Yv),Qv=_({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xv=un(Qv),Jv=_({},Va,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Zv=un(Jv),ex=[9,13,27,32],oc=c&&"CompositionEvent"in window,no=null;c&&"documentMode"in document&&(no=document.documentMode);var tx=c&&"TextEvent"in window&&!no,Gp=c&&(!oc||no&&8<no&&11>=no),Qp=" ",Xp=!1;function Jp(i,o){switch(i){case"keyup":return ex.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zp(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Wi=!1;function nx(i,o){switch(i){case"compositionend":return Zp(o);case"keypress":return o.which!==32?null:(Xp=!0,Qp);case"textInput":return i=o.data,i===Qp&&Xp?null:i;default:return null}}function rx(i,o){if(Wi)return i==="compositionend"||!oc&&Jp(i,o)?(i=$p(),Ua=ec=kr=null,Wi=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Gp&&o.locale!=="ko"?null:o.data;default:return null}}var ix={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function em(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!ix[i.type]:o==="textarea"}function tm(i,o,l,f){_p(f),o=Ya(o,"onChange"),0<o.length&&(l=new tc("onChange","change",null,l,f),i.push({event:l,listeners:o}))}var ro=null,io=null;function sx(i){Em(i,0)}function $a(i){var o=Qi(i);if(ti(o))return i}function ox(i,o){if(i==="change")return o}var nm=!1;if(c){var ac;if(c){var uc="oninput"in document;if(!uc){var rm=document.createElement("div");rm.setAttribute("oninput","return;"),uc=typeof rm.oninput=="function"}ac=uc}else ac=!1;nm=ac&&(!document.documentMode||9<document.documentMode)}function im(){ro&&(ro.detachEvent("onpropertychange",sm),io=ro=null)}function sm(i){if(i.propertyName==="value"&&$a(io)){var o=[];tm(o,io,i,Hl(i)),kp(sx,o)}}function ax(i,o,l){i==="focusin"?(im(),ro=o,io=l,ro.attachEvent("onpropertychange",sm)):i==="focusout"&&im()}function ux(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return $a(io)}function lx(i,o){if(i==="click")return $a(o)}function cx(i,o){if(i==="input"||i==="change")return $a(o)}function dx(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var In=typeof Object.is=="function"?Object.is:dx;function so(i,o){if(In(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),f=Object.keys(o);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var y=l[f];if(!d.call(o,y)||!In(i[y],o[y]))return!1}return!0}function om(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function am(i,o){var l=om(i);i=0;for(var f;l;){if(l.nodeType===3){if(f=i+l.textContent.length,i<=o&&f>=o)return{node:l,offset:o-i};i=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=om(l)}}function um(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?um(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function lm(){for(var i=window,o=yr();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=yr(i.document)}return o}function lc(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function hx(i){var o=lm(),l=i.focusedElem,f=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&um(l.ownerDocument.documentElement,l)){if(f!==null&&lc(l)){if(o=f.start,i=f.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var y=l.textContent.length,E=Math.min(f.start,y);f=f.end===void 0?E:Math.min(f.end,y),!i.extend&&E>f&&(y=f,f=E,E=y),y=am(l,E);var k=am(l,f);y&&k&&(i.rangeCount!==1||i.anchorNode!==y.node||i.anchorOffset!==y.offset||i.focusNode!==k.node||i.focusOffset!==k.offset)&&(o=o.createRange(),o.setStart(y.node,y.offset),i.removeAllRanges(),E>f?(i.addRange(o),i.extend(k.node,k.offset)):(o.setEnd(k.node,k.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var fx=c&&"documentMode"in document&&11>=document.documentMode,Ki=null,cc=null,oo=null,dc=!1;function cm(i,o,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;dc||Ki==null||Ki!==yr(f)||(f=Ki,"selectionStart"in f&&lc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),oo&&so(oo,f)||(oo=f,f=Ya(cc,"onSelect"),0<f.length&&(o=new tc("onSelect","select",null,o,l),i.push({event:o,listeners:f}),o.target=Ki)))}function Wa(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var qi={animationend:Wa("Animation","AnimationEnd"),animationiteration:Wa("Animation","AnimationIteration"),animationstart:Wa("Animation","AnimationStart"),transitionend:Wa("Transition","TransitionEnd")},hc={},dm={};c&&(dm=document.createElement("div").style,"AnimationEvent"in window||(delete qi.animationend.animation,delete qi.animationiteration.animation,delete qi.animationstart.animation),"TransitionEvent"in window||delete qi.transitionend.transition);function Ka(i){if(hc[i])return hc[i];if(!qi[i])return i;var o=qi[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in dm)return hc[i]=o[l];return i}var hm=Ka("animationend"),fm=Ka("animationiteration"),pm=Ka("animationstart"),mm=Ka("transitionend"),gm=new Map,ym="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(i,o){gm.set(i,o),a(o,[i])}for(var fc=0;fc<ym.length;fc++){var pc=ym[fc],px=pc.toLowerCase(),mx=pc[0].toUpperCase()+pc.slice(1);Sr(px,"on"+mx)}Sr(hm,"onAnimationEnd"),Sr(fm,"onAnimationIteration"),Sr(pm,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(mm,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gx=new Set("cancel close invalid load scroll toggle".split(" ").concat(ao));function bm(i,o,l){var f=i.type||"unknown-event";i.currentTarget=l,pv(f,o,void 0,i),i.currentTarget=null}function Em(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var f=i[l],y=f.event;f=f.listeners;e:{var E=void 0;if(o)for(var k=f.length-1;0<=k;k--){var L=f[k],F=L.instance,Y=L.currentTarget;if(L=L.listener,F!==E&&y.isPropagationStopped())break e;bm(y,L,Y),E=F}else for(k=0;k<f.length;k++){if(L=f[k],F=L.instance,Y=L.currentTarget,L=L.listener,F!==E&&y.isPropagationStopped())break e;bm(y,L,Y),E=F}}}if(Ia)throw i=Wl,Ia=!1,Wl=null,i}function et(i,o){var l=o[vc];l===void 0&&(l=o[vc]=new Set);var f=i+"__bubble";l.has(f)||(Tm(o,i,2,!1),l.add(f))}function mc(i,o,l){var f=0;o&&(f|=4),Tm(l,i,f,o)}var qa="_reactListening"+Math.random().toString(36).slice(2);function uo(i){if(!i[qa]){i[qa]=!0,r.forEach(function(l){l!=="selectionchange"&&(gx.has(l)||mc(l,!1,i),mc(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[qa]||(o[qa]=!0,mc("selectionchange",!1,o))}}function Tm(i,o,l,f){switch(Vp(o)){case 1:var y=Iv;break;case 4:y=Ov;break;default:y=Jl}l=y.bind(null,o,l,i),y=void 0,!$l||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),f?y!==void 0?i.addEventListener(o,l,{capture:!0,passive:y}):i.addEventListener(o,l,!0):y!==void 0?i.addEventListener(o,l,{passive:y}):i.addEventListener(o,l,!1)}function gc(i,o,l,f,y){var E=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var k=f.tag;if(k===3||k===4){var L=f.stateNode.containerInfo;if(L===y||L.nodeType===8&&L.parentNode===y)break;if(k===4)for(k=f.return;k!==null;){var F=k.tag;if((F===3||F===4)&&(F=k.stateNode.containerInfo,F===y||F.nodeType===8&&F.parentNode===y))return;k=k.return}for(;L!==null;){if(k=oi(L),k===null)return;if(F=k.tag,F===5||F===6){f=E=k;continue e}L=L.parentNode}}f=f.return}kp(function(){var Y=E,ae=Hl(l),le=[];e:{var ie=gm.get(i);if(ie!==void 0){var ge=tc,be=i;switch(i){case"keypress":if(Ha(l)===0)break e;case"keydown":case"keyup":ge=Kv;break;case"focusin":be="focus",ge=ic;break;case"focusout":be="blur",ge=ic;break;case"beforeblur":case"afterblur":ge=ic;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Kp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Lv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=Gv;break;case hm:case fm:case pm:ge=Bv;break;case mm:ge=Xv;break;case"scroll":ge=Rv;break;case"wheel":ge=Zv;break;case"copy":case"cut":case"paste":ge=jv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=Yp}var _e=(o&4)!==0,ft=!_e&&i==="scroll",z=_e?ie!==null?ie+"Capture":null:ie;_e=[];for(var U=Y,$;U!==null;){$=U;var fe=$.stateNode;if($.tag===5&&fe!==null&&($=fe,z!==null&&(fe=$s(U,z),fe!=null&&_e.push(lo(U,fe,$)))),ft)break;U=U.return}0<_e.length&&(ie=new ge(ie,be,null,l,ae),le.push({event:ie,listeners:_e}))}}if((o&7)===0){e:{if(ie=i==="mouseover"||i==="pointerover",ge=i==="mouseout"||i==="pointerout",ie&&l!==an&&(be=l.relatedTarget||l.fromElement)&&(oi(be)||be[rr]))break e;if((ge||ie)&&(ie=ae.window===ae?ae:(ie=ae.ownerDocument)?ie.defaultView||ie.parentWindow:window,ge?(be=l.relatedTarget||l.toElement,ge=Y,be=be?oi(be):null,be!==null&&(ft=si(be),be!==ft||be.tag!==5&&be.tag!==6)&&(be=null)):(ge=null,be=Y),ge!==be)){if(_e=Kp,fe="onMouseLeave",z="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(_e=Yp,fe="onPointerLeave",z="onPointerEnter",U="pointer"),ft=ge==null?ie:Qi(ge),$=be==null?ie:Qi(be),ie=new _e(fe,U+"leave",ge,l,ae),ie.target=ft,ie.relatedTarget=$,fe=null,oi(ae)===Y&&(_e=new _e(z,U+"enter",be,l,ae),_e.target=$,_e.relatedTarget=ft,fe=_e),ft=fe,ge&&be)t:{for(_e=ge,z=be,U=0,$=_e;$;$=Yi($))U++;for($=0,fe=z;fe;fe=Yi(fe))$++;for(;0<U-$;)_e=Yi(_e),U--;for(;0<$-U;)z=Yi(z),$--;for(;U--;){if(_e===z||z!==null&&_e===z.alternate)break t;_e=Yi(_e),z=Yi(z)}_e=null}else _e=null;ge!==null&&_m(le,ie,ge,_e,!1),be!==null&&ft!==null&&_m(le,ft,be,_e,!0)}}e:{if(ie=Y?Qi(Y):window,ge=ie.nodeName&&ie.nodeName.toLowerCase(),ge==="select"||ge==="input"&&ie.type==="file")var ve=ox;else if(em(ie))if(nm)ve=cx;else{ve=ux;var ke=ax}else(ge=ie.nodeName)&&ge.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(ve=lx);if(ve&&(ve=ve(i,Y))){tm(le,ve,l,ae);break e}ke&&ke(i,ie,Y),i==="focusout"&&(ke=ie._wrapperState)&&ke.controlled&&ie.type==="number"&&Er(ie,"number",ie.value)}switch(ke=Y?Qi(Y):window,i){case"focusin":(em(ke)||ke.contentEditable==="true")&&(Ki=ke,cc=Y,oo=null);break;case"focusout":oo=cc=Ki=null;break;case"mousedown":dc=!0;break;case"contextmenu":case"mouseup":case"dragend":dc=!1,cm(le,l,ae);break;case"selectionchange":if(fx)break;case"keydown":case"keyup":cm(le,l,ae)}var Se;if(oc)e:{switch(i){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Wi?Jp(i,l)&&(Oe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Oe="onCompositionStart");Oe&&(Gp&&l.locale!=="ko"&&(Wi||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Wi&&(Se=$p()):(kr=ae,ec="value"in kr?kr.value:kr.textContent,Wi=!0)),ke=Ya(Y,Oe),0<ke.length&&(Oe=new qp(Oe,i,null,l,ae),le.push({event:Oe,listeners:ke}),Se?Oe.data=Se:(Se=Zp(l),Se!==null&&(Oe.data=Se)))),(Se=tx?nx(i,l):rx(i,l))&&(Y=Ya(Y,"onBeforeInput"),0<Y.length&&(ae=new qp("onBeforeInput","beforeinput",null,l,ae),le.push({event:ae,listeners:Y}),ae.data=Se))}Em(le,o)})}function lo(i,o,l){return{instance:i,listener:o,currentTarget:l}}function Ya(i,o){for(var l=o+"Capture",f=[];i!==null;){var y=i,E=y.stateNode;y.tag===5&&E!==null&&(y=E,E=$s(i,l),E!=null&&f.unshift(lo(i,E,y)),E=$s(i,o),E!=null&&f.push(lo(i,E,y))),i=i.return}return f}function Yi(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function _m(i,o,l,f,y){for(var E=o._reactName,k=[];l!==null&&l!==f;){var L=l,F=L.alternate,Y=L.stateNode;if(F!==null&&F===f)break;L.tag===5&&Y!==null&&(L=Y,y?(F=$s(l,E),F!=null&&k.unshift(lo(l,F,L))):y||(F=$s(l,E),F!=null&&k.push(lo(l,F,L)))),l=l.return}k.length!==0&&i.push({event:o,listeners:k})}var yx=/\r\n?/g,bx=/\u0000|\uFFFD/g;function vm(i){return(typeof i=="string"?i:""+i).replace(yx,`
`).replace(bx,"")}function Ga(i,o,l){if(o=vm(o),vm(i)!==o&&l)throw Error(n(425))}function Qa(){}var yc=null,bc=null;function Ec(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Tc=typeof setTimeout=="function"?setTimeout:void 0,Ex=typeof clearTimeout=="function"?clearTimeout:void 0,xm=typeof Promise=="function"?Promise:void 0,Tx=typeof queueMicrotask=="function"?queueMicrotask:typeof xm<"u"?function(i){return xm.resolve(null).then(i).catch(_x)}:Tc;function _x(i){setTimeout(function(){throw i})}function _c(i,o){var l=o,f=0;do{var y=l.nextSibling;if(i.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"){if(f===0){i.removeChild(y),Zs(o);return}f--}else l!=="$"&&l!=="$?"&&l!=="$!"||f++;l=y}while(l);Zs(o)}function Ar(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function wm(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var Gi=Math.random().toString(36).slice(2),Wn="__reactFiber$"+Gi,co="__reactProps$"+Gi,rr="__reactContainer$"+Gi,vc="__reactEvents$"+Gi,vx="__reactListeners$"+Gi,xx="__reactHandles$"+Gi;function oi(i){var o=i[Wn];if(o)return o;for(var l=i.parentNode;l;){if(o=l[rr]||l[Wn]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=wm(i);i!==null;){if(l=i[Wn])return l;i=wm(i)}return o}i=l,l=i.parentNode}return null}function ho(i){return i=i[Wn]||i[rr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Qi(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function Xa(i){return i[co]||null}var xc=[],Xi=-1;function Cr(i){return{current:i}}function tt(i){0>Xi||(i.current=xc[Xi],xc[Xi]=null,Xi--)}function Qe(i,o){Xi++,xc[Xi]=i.current,i.current=o}var Nr={},Mt=Cr(Nr),Qt=Cr(!1),ai=Nr;function Ji(i,o){var l=i.type.contextTypes;if(!l)return Nr;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var y={},E;for(E in l)y[E]=o[E];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=y),y}function Xt(i){return i=i.childContextTypes,i!=null}function Ja(){tt(Qt),tt(Mt)}function km(i,o,l){if(Mt.current!==Nr)throw Error(n(168));Qe(Mt,o),Qe(Qt,l)}function Sm(i,o,l){var f=i.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return l;f=f.getChildContext();for(var y in f)if(!(y in o))throw Error(n(108,Pe(i)||"Unknown",y));return _({},l,f)}function Za(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Nr,ai=Mt.current,Qe(Mt,i),Qe(Qt,Qt.current),!0}function Am(i,o,l){var f=i.stateNode;if(!f)throw Error(n(169));l?(i=Sm(i,o,ai),f.__reactInternalMemoizedMergedChildContext=i,tt(Qt),tt(Mt),Qe(Mt,i)):tt(Qt),Qe(Qt,l)}var ir=null,eu=!1,wc=!1;function Cm(i){ir===null?ir=[i]:ir.push(i)}function wx(i){eu=!0,Cm(i)}function Ir(){if(!wc&&ir!==null){wc=!0;var i=0,o=Ye;try{var l=ir;for(Ye=1;i<l.length;i++){var f=l[i];do f=f(!0);while(f!==null)}ir=null,eu=!1}catch(y){throw ir!==null&&(ir=ir.slice(i+1)),Ip(Kl,Ir),y}finally{Ye=o,wc=!1}}return null}var Zi=[],es=0,tu=null,nu=0,yn=[],bn=0,ui=null,sr=1,or="";function li(i,o){Zi[es++]=nu,Zi[es++]=tu,tu=i,nu=o}function Nm(i,o,l){yn[bn++]=sr,yn[bn++]=or,yn[bn++]=ui,ui=i;var f=sr;i=or;var y=32-Nn(f)-1;f&=~(1<<y),l+=1;var E=32-Nn(o)+y;if(30<E){var k=y-y%5;E=(f&(1<<k)-1).toString(32),f>>=k,y-=k,sr=1<<32-Nn(o)+y|l<<y|f,or=E+i}else sr=1<<E|l<<y|f,or=i}function kc(i){i.return!==null&&(li(i,1),Nm(i,1,0))}function Sc(i){for(;i===tu;)tu=Zi[--es],Zi[es]=null,nu=Zi[--es],Zi[es]=null;for(;i===ui;)ui=yn[--bn],yn[bn]=null,or=yn[--bn],yn[bn]=null,sr=yn[--bn],yn[bn]=null}var ln=null,cn=null,rt=!1,On=null;function Im(i,o){var l=vn(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function Om(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,ln=i,cn=Ar(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,ln=i,cn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=ui!==null?{id:sr,overflow:or}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=vn(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,ln=i,cn=null,!0):!1;default:return!1}}function Ac(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Cc(i){if(rt){var o=cn;if(o){var l=o;if(!Om(i,o)){if(Ac(i))throw Error(n(418));o=Ar(l.nextSibling);var f=ln;o&&Om(i,o)?Im(f,l):(i.flags=i.flags&-4097|2,rt=!1,ln=i)}}else{if(Ac(i))throw Error(n(418));i.flags=i.flags&-4097|2,rt=!1,ln=i}}}function Rm(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;ln=i}function ru(i){if(i!==ln)return!1;if(!rt)return Rm(i),rt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Ec(i.type,i.memoizedProps)),o&&(o=cn)){if(Ac(i))throw Pm(),Error(n(418));for(;o;)Im(i,o),o=Ar(o.nextSibling)}if(Rm(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){cn=Ar(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}cn=null}}else cn=ln?Ar(i.stateNode.nextSibling):null;return!0}function Pm(){for(var i=cn;i;)i=Ar(i.nextSibling)}function ts(){cn=ln=null,rt=!1}function Nc(i){On===null?On=[i]:On.push(i)}var kx=j.ReactCurrentBatchConfig;function Rn(i,o){if(i&&i.defaultProps){o=_({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}var iu=Cr(null),su=null,ns=null,Ic=null;function Oc(){Ic=ns=su=null}function Rc(i){var o=iu.current;tt(iu),i._currentValue=o}function Pc(i,o,l){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===l)break;i=i.return}}function rs(i,o){su=i,Ic=ns=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(Jt=!0),i.firstContext=null)}function En(i){var o=i._currentValue;if(Ic!==i)if(i={context:i,memoizedValue:o,next:null},ns===null){if(su===null)throw Error(n(308));ns=i,su.dependencies={lanes:0,firstContext:i}}else ns=ns.next=i;return o}var ci=null;function Lc(i){ci===null?ci=[i]:ci.push(i)}function Lm(i,o,l,f){var y=o.interleaved;return y===null?(l.next=l,Lc(o)):(l.next=y.next,y.next=l),o.interleaved=l,ar(i,f)}function ar(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var Or=!1;function Dc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dm(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ur(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Rr(i,o,l){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,($e&2)!==0){var y=f.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),f.pending=o,ar(i,l)}return y=f.interleaved,y===null?(o.next=o,Lc(f)):(o.next=y.next,y.next=o),f.interleaved=o,ar(i,l)}function ou(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var f=o.lanes;f&=i.pendingLanes,l|=f,o.lanes=l,Gl(i,l)}}function Mm(i,o){var l=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var y=null,E=null;if(l=l.firstBaseUpdate,l!==null){do{var k={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};E===null?y=E=k:E=E.next=k,l=l.next}while(l!==null);E===null?y=E=o:E=E.next=o}else y=E=o;l={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:E,shared:f.shared,effects:f.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function au(i,o,l,f){var y=i.updateQueue;Or=!1;var E=y.firstBaseUpdate,k=y.lastBaseUpdate,L=y.shared.pending;if(L!==null){y.shared.pending=null;var F=L,Y=F.next;F.next=null,k===null?E=Y:k.next=Y,k=F;var ae=i.alternate;ae!==null&&(ae=ae.updateQueue,L=ae.lastBaseUpdate,L!==k&&(L===null?ae.firstBaseUpdate=Y:L.next=Y,ae.lastBaseUpdate=F))}if(E!==null){var le=y.baseState;k=0,ae=Y=F=null,L=E;do{var ie=L.lane,ge=L.eventTime;if((f&ie)===ie){ae!==null&&(ae=ae.next={eventTime:ge,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var be=i,_e=L;switch(ie=o,ge=l,_e.tag){case 1:if(be=_e.payload,typeof be=="function"){le=be.call(ge,le,ie);break e}le=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=_e.payload,ie=typeof be=="function"?be.call(ge,le,ie):be,ie==null)break e;le=_({},le,ie);break e;case 2:Or=!0}}L.callback!==null&&L.lane!==0&&(i.flags|=64,ie=y.effects,ie===null?y.effects=[L]:ie.push(L))}else ge={eventTime:ge,lane:ie,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ae===null?(Y=ae=ge,F=le):ae=ae.next=ge,k|=ie;if(L=L.next,L===null){if(L=y.shared.pending,L===null)break;ie=L,L=ie.next,ie.next=null,y.lastBaseUpdate=ie,y.shared.pending=null}}while(!0);if(ae===null&&(F=le),y.baseState=F,y.firstBaseUpdate=Y,y.lastBaseUpdate=ae,o=y.shared.interleaved,o!==null){y=o;do k|=y.lane,y=y.next;while(y!==o)}else E===null&&(y.shared.lanes=0);fi|=k,i.lanes=k,i.memoizedState=le}}function Bm(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var f=i[o],y=f.callback;if(y!==null){if(f.callback=null,f=l,typeof y!="function")throw Error(n(191,y));y.call(f)}}}var Fm=new e.Component().refs;function Mc(i,o,l,f){o=i.memoizedState,l=l(f,o),l=l==null?o:_({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var uu={isMounted:function(i){return(i=i._reactInternals)?si(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var f=Wt(),y=Mr(i),E=ur(f,y);E.payload=o,l!=null&&(E.callback=l),o=Rr(i,E,y),o!==null&&(Dn(o,i,y,f),ou(o,i,y))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var f=Wt(),y=Mr(i),E=ur(f,y);E.tag=1,E.payload=o,l!=null&&(E.callback=l),o=Rr(i,E,y),o!==null&&(Dn(o,i,y,f),ou(o,i,y))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=Wt(),f=Mr(i),y=ur(l,f);y.tag=2,o!=null&&(y.callback=o),o=Rr(i,y,f),o!==null&&(Dn(o,i,f,l),ou(o,i,f))}};function jm(i,o,l,f,y,E,k){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,E,k):o.prototype&&o.prototype.isPureReactComponent?!so(l,f)||!so(y,E):!0}function Um(i,o,l){var f=!1,y=Nr,E=o.contextType;return typeof E=="object"&&E!==null?E=En(E):(y=Xt(o)?ai:Mt.current,f=o.contextTypes,E=(f=f!=null)?Ji(i,y):Nr),o=new o(l,E),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=uu,i.stateNode=o,o._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=y,i.__reactInternalMemoizedMaskedChildContext=E),o}function Hm(i,o,l,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,f),o.state!==i&&uu.enqueueReplaceState(o,o.state,null)}function Bc(i,o,l,f){var y=i.stateNode;y.props=l,y.state=i.memoizedState,y.refs=Fm,Dc(i);var E=o.contextType;typeof E=="object"&&E!==null?y.context=En(E):(E=Xt(o)?ai:Mt.current,y.context=Ji(i,E)),y.state=i.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Mc(i,o,E,l),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(o=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),o!==y.state&&uu.enqueueReplaceState(y,y.state,null),au(i,l,y,f),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308)}function fo(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(n(309));var f=l.stateNode}if(!f)throw Error(n(147,i));var y=f,E=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===E?o.ref:(o=function(k){var L=y.refs;L===Fm&&(L=y.refs={}),k===null?delete L[E]:L[E]=k},o._stringRef=E,o)}if(typeof i!="string")throw Error(n(284));if(!l._owner)throw Error(n(290,i))}return i}function lu(i,o){throw i=Object.prototype.toString.call(o),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function zm(i){var o=i._init;return o(i._payload)}function Vm(i){function o(z,U){if(i){var $=z.deletions;$===null?(z.deletions=[U],z.flags|=16):$.push(U)}}function l(z,U){if(!i)return null;for(;U!==null;)o(z,U),U=U.sibling;return null}function f(z,U){for(z=new Map;U!==null;)U.key!==null?z.set(U.key,U):z.set(U.index,U),U=U.sibling;return z}function y(z,U){return z=Fr(z,U),z.index=0,z.sibling=null,z}function E(z,U,$){return z.index=$,i?($=z.alternate,$!==null?($=$.index,$<U?(z.flags|=2,U):$):(z.flags|=2,U)):(z.flags|=1048576,U)}function k(z){return i&&z.alternate===null&&(z.flags|=2),z}function L(z,U,$,fe){return U===null||U.tag!==6?(U=Td($,z.mode,fe),U.return=z,U):(U=y(U,$),U.return=z,U)}function F(z,U,$,fe){var ve=$.type;return ve===Q?ae(z,U,$.props.children,fe,$.key):U!==null&&(U.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===ne&&zm(ve)===U.type)?(fe=y(U,$.props),fe.ref=fo(z,U,$),fe.return=z,fe):(fe=Cu($.type,$.key,$.props,null,z.mode,fe),fe.ref=fo(z,U,$),fe.return=z,fe)}function Y(z,U,$,fe){return U===null||U.tag!==4||U.stateNode.containerInfo!==$.containerInfo||U.stateNode.implementation!==$.implementation?(U=_d($,z.mode,fe),U.return=z,U):(U=y(U,$.children||[]),U.return=z,U)}function ae(z,U,$,fe,ve){return U===null||U.tag!==7?(U=yi($,z.mode,fe,ve),U.return=z,U):(U=y(U,$),U.return=z,U)}function le(z,U,$){if(typeof U=="string"&&U!==""||typeof U=="number")return U=Td(""+U,z.mode,$),U.return=z,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case M:return $=Cu(U.type,U.key,U.props,null,z.mode,$),$.ref=fo(z,null,U),$.return=z,$;case I:return U=_d(U,z.mode,$),U.return=z,U;case ne:var fe=U._init;return le(z,fe(U._payload),$)}if(tr(U)||G(U))return U=yi(U,z.mode,$,null),U.return=z,U;lu(z,U)}return null}function ie(z,U,$,fe){var ve=U!==null?U.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return ve!==null?null:L(z,U,""+$,fe);if(typeof $=="object"&&$!==null){switch($.$$typeof){case M:return $.key===ve?F(z,U,$,fe):null;case I:return $.key===ve?Y(z,U,$,fe):null;case ne:return ve=$._init,ie(z,U,ve($._payload),fe)}if(tr($)||G($))return ve!==null?null:ae(z,U,$,fe,null);lu(z,$)}return null}function ge(z,U,$,fe,ve){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return z=z.get($)||null,L(U,z,""+fe,ve);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case M:return z=z.get(fe.key===null?$:fe.key)||null,F(U,z,fe,ve);case I:return z=z.get(fe.key===null?$:fe.key)||null,Y(U,z,fe,ve);case ne:var ke=fe._init;return ge(z,U,$,ke(fe._payload),ve)}if(tr(fe)||G(fe))return z=z.get($)||null,ae(U,z,fe,ve,null);lu(U,fe)}return null}function be(z,U,$,fe){for(var ve=null,ke=null,Se=U,Oe=U=0,St=null;Se!==null&&Oe<$.length;Oe++){Se.index>Oe?(St=Se,Se=null):St=Se.sibling;var Ke=ie(z,Se,$[Oe],fe);if(Ke===null){Se===null&&(Se=St);break}i&&Se&&Ke.alternate===null&&o(z,Se),U=E(Ke,U,Oe),ke===null?ve=Ke:ke.sibling=Ke,ke=Ke,Se=St}if(Oe===$.length)return l(z,Se),rt&&li(z,Oe),ve;if(Se===null){for(;Oe<$.length;Oe++)Se=le(z,$[Oe],fe),Se!==null&&(U=E(Se,U,Oe),ke===null?ve=Se:ke.sibling=Se,ke=Se);return rt&&li(z,Oe),ve}for(Se=f(z,Se);Oe<$.length;Oe++)St=ge(Se,z,Oe,$[Oe],fe),St!==null&&(i&&St.alternate!==null&&Se.delete(St.key===null?Oe:St.key),U=E(St,U,Oe),ke===null?ve=St:ke.sibling=St,ke=St);return i&&Se.forEach(function(jr){return o(z,jr)}),rt&&li(z,Oe),ve}function _e(z,U,$,fe){var ve=G($);if(typeof ve!="function")throw Error(n(150));if($=ve.call($),$==null)throw Error(n(151));for(var ke=ve=null,Se=U,Oe=U=0,St=null,Ke=$.next();Se!==null&&!Ke.done;Oe++,Ke=$.next()){Se.index>Oe?(St=Se,Se=null):St=Se.sibling;var jr=ie(z,Se,Ke.value,fe);if(jr===null){Se===null&&(Se=St);break}i&&Se&&jr.alternate===null&&o(z,Se),U=E(jr,U,Oe),ke===null?ve=jr:ke.sibling=jr,ke=jr,Se=St}if(Ke.done)return l(z,Se),rt&&li(z,Oe),ve;if(Se===null){for(;!Ke.done;Oe++,Ke=$.next())Ke=le(z,Ke.value,fe),Ke!==null&&(U=E(Ke,U,Oe),ke===null?ve=Ke:ke.sibling=Ke,ke=Ke);return rt&&li(z,Oe),ve}for(Se=f(z,Se);!Ke.done;Oe++,Ke=$.next())Ke=ge(Se,z,Oe,Ke.value,fe),Ke!==null&&(i&&Ke.alternate!==null&&Se.delete(Ke.key===null?Oe:Ke.key),U=E(Ke,U,Oe),ke===null?ve=Ke:ke.sibling=Ke,ke=Ke);return i&&Se.forEach(function(iw){return o(z,iw)}),rt&&li(z,Oe),ve}function ft(z,U,$,fe){if(typeof $=="object"&&$!==null&&$.type===Q&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case M:e:{for(var ve=$.key,ke=U;ke!==null;){if(ke.key===ve){if(ve=$.type,ve===Q){if(ke.tag===7){l(z,ke.sibling),U=y(ke,$.props.children),U.return=z,z=U;break e}}else if(ke.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===ne&&zm(ve)===ke.type){l(z,ke.sibling),U=y(ke,$.props),U.ref=fo(z,ke,$),U.return=z,z=U;break e}l(z,ke);break}else o(z,ke);ke=ke.sibling}$.type===Q?(U=yi($.props.children,z.mode,fe,$.key),U.return=z,z=U):(fe=Cu($.type,$.key,$.props,null,z.mode,fe),fe.ref=fo(z,U,$),fe.return=z,z=fe)}return k(z);case I:e:{for(ke=$.key;U!==null;){if(U.key===ke)if(U.tag===4&&U.stateNode.containerInfo===$.containerInfo&&U.stateNode.implementation===$.implementation){l(z,U.sibling),U=y(U,$.children||[]),U.return=z,z=U;break e}else{l(z,U);break}else o(z,U);U=U.sibling}U=_d($,z.mode,fe),U.return=z,z=U}return k(z);case ne:return ke=$._init,ft(z,U,ke($._payload),fe)}if(tr($))return be(z,U,$,fe);if(G($))return _e(z,U,$,fe);lu(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,U!==null&&U.tag===6?(l(z,U.sibling),U=y(U,$),U.return=z,z=U):(l(z,U),U=Td($,z.mode,fe),U.return=z,z=U),k(z)):l(z,U)}return ft}var is=Vm(!0),$m=Vm(!1),po={},Kn=Cr(po),mo=Cr(po),go=Cr(po);function di(i){if(i===po)throw Error(n(174));return i}function Fc(i,o){switch(Qe(go,o),Qe(mo,i),Qe(Kn,po),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:pe(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=pe(o,i)}tt(Kn),Qe(Kn,o)}function ss(){tt(Kn),tt(mo),tt(go)}function Wm(i){di(go.current);var o=di(Kn.current),l=pe(o,i.type);o!==l&&(Qe(mo,i),Qe(Kn,l))}function jc(i){mo.current===i&&(tt(Kn),tt(mo))}var ot=Cr(0);function cu(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Uc=[];function Hc(){for(var i=0;i<Uc.length;i++)Uc[i]._workInProgressVersionPrimary=null;Uc.length=0}var du=j.ReactCurrentDispatcher,zc=j.ReactCurrentBatchConfig,hi=0,at=null,Tt=null,wt=null,hu=!1,yo=!1,bo=0,Sx=0;function Bt(){throw Error(n(321))}function Vc(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!In(i[l],o[l]))return!1;return!0}function $c(i,o,l,f,y,E){if(hi=E,at=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,du.current=i===null||i.memoizedState===null?Ix:Ox,i=l(f,y),yo){E=0;do{if(yo=!1,bo=0,25<=E)throw Error(n(301));E+=1,wt=Tt=null,o.updateQueue=null,du.current=Rx,i=l(f,y)}while(yo)}if(du.current=mu,o=Tt!==null&&Tt.next!==null,hi=0,wt=Tt=at=null,hu=!1,o)throw Error(n(300));return i}function Wc(){var i=bo!==0;return bo=0,i}function qn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?at.memoizedState=wt=i:wt=wt.next=i,wt}function Tn(){if(Tt===null){var i=at.alternate;i=i!==null?i.memoizedState:null}else i=Tt.next;var o=wt===null?at.memoizedState:wt.next;if(o!==null)wt=o,Tt=i;else{if(i===null)throw Error(n(310));Tt=i,i={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},wt===null?at.memoizedState=wt=i:wt=wt.next=i}return wt}function Eo(i,o){return typeof o=="function"?o(i):o}function Kc(i){var o=Tn(),l=o.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=i;var f=Tt,y=f.baseQueue,E=l.pending;if(E!==null){if(y!==null){var k=y.next;y.next=E.next,E.next=k}f.baseQueue=y=E,l.pending=null}if(y!==null){E=y.next,f=f.baseState;var L=k=null,F=null,Y=E;do{var ae=Y.lane;if((hi&ae)===ae)F!==null&&(F=F.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),f=Y.hasEagerState?Y.eagerState:i(f,Y.action);else{var le={lane:ae,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};F===null?(L=F=le,k=f):F=F.next=le,at.lanes|=ae,fi|=ae}Y=Y.next}while(Y!==null&&Y!==E);F===null?k=f:F.next=L,In(f,o.memoizedState)||(Jt=!0),o.memoizedState=f,o.baseState=k,o.baseQueue=F,l.lastRenderedState=f}if(i=l.interleaved,i!==null){y=i;do E=y.lane,at.lanes|=E,fi|=E,y=y.next;while(y!==i)}else y===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function qc(i){var o=Tn(),l=o.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=i;var f=l.dispatch,y=l.pending,E=o.memoizedState;if(y!==null){l.pending=null;var k=y=y.next;do E=i(E,k.action),k=k.next;while(k!==y);In(E,o.memoizedState)||(Jt=!0),o.memoizedState=E,o.baseQueue===null&&(o.baseState=E),l.lastRenderedState=E}return[E,f]}function Km(){}function qm(i,o){var l=at,f=Tn(),y=o(),E=!In(f.memoizedState,y);if(E&&(f.memoizedState=y,Jt=!0),f=f.queue,Yc(Qm.bind(null,l,f,i),[i]),f.getSnapshot!==o||E||wt!==null&&wt.memoizedState.tag&1){if(l.flags|=2048,To(9,Gm.bind(null,l,f,y,o),void 0,null),kt===null)throw Error(n(349));(hi&30)!==0||Ym(l,o,y)}return y}function Ym(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=at.updateQueue,o===null?(o={lastEffect:null,stores:null},at.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function Gm(i,o,l,f){o.value=l,o.getSnapshot=f,Xm(o)&&Jm(i)}function Qm(i,o,l){return l(function(){Xm(o)&&Jm(i)})}function Xm(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!In(i,l)}catch{return!0}}function Jm(i){var o=ar(i,1);o!==null&&Dn(o,i,1,-1)}function Zm(i){var o=qn();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:i},o.queue=i,i=i.dispatch=Nx.bind(null,at,i),[o.memoizedState,i]}function To(i,o,l,f){return i={tag:i,create:o,destroy:l,deps:f,next:null},o=at.updateQueue,o===null?(o={lastEffect:null,stores:null},at.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(f=l.next,l.next=i,i.next=f,o.lastEffect=i)),i}function e0(){return Tn().memoizedState}function fu(i,o,l,f){var y=qn();at.flags|=i,y.memoizedState=To(1|o,l,void 0,f===void 0?null:f)}function pu(i,o,l,f){var y=Tn();f=f===void 0?null:f;var E=void 0;if(Tt!==null){var k=Tt.memoizedState;if(E=k.destroy,f!==null&&Vc(f,k.deps)){y.memoizedState=To(o,l,E,f);return}}at.flags|=i,y.memoizedState=To(1|o,l,E,f)}function t0(i,o){return fu(8390656,8,i,o)}function Yc(i,o){return pu(2048,8,i,o)}function n0(i,o){return pu(4,2,i,o)}function r0(i,o){return pu(4,4,i,o)}function i0(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function s0(i,o,l){return l=l!=null?l.concat([i]):null,pu(4,4,i0.bind(null,o,i),l)}function Gc(){}function o0(i,o){var l=Tn();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&Vc(o,f[1])?f[0]:(l.memoizedState=[i,o],i)}function a0(i,o){var l=Tn();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&Vc(o,f[1])?f[0]:(i=i(),l.memoizedState=[i,o],i)}function u0(i,o,l){return(hi&21)===0?(i.baseState&&(i.baseState=!1,Jt=!0),i.memoizedState=l):(In(l,o)||(l=Lp(),at.lanes|=l,fi|=l,i.baseState=!0),o)}function Ax(i,o){var l=Ye;Ye=l!==0&&4>l?l:4,i(!0);var f=zc.transition;zc.transition={};try{i(!1),o()}finally{Ye=l,zc.transition=f}}function l0(){return Tn().memoizedState}function Cx(i,o,l){var f=Mr(i);if(l={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null},c0(i))d0(o,l);else if(l=Lm(i,o,l,f),l!==null){var y=Wt();Dn(l,i,f,y),h0(l,o,f)}}function Nx(i,o,l){var f=Mr(i),y={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null};if(c0(i))d0(o,y);else{var E=i.alternate;if(i.lanes===0&&(E===null||E.lanes===0)&&(E=o.lastRenderedReducer,E!==null))try{var k=o.lastRenderedState,L=E(k,l);if(y.hasEagerState=!0,y.eagerState=L,In(L,k)){var F=o.interleaved;F===null?(y.next=y,Lc(o)):(y.next=F.next,F.next=y),o.interleaved=y;return}}catch{}finally{}l=Lm(i,o,y,f),l!==null&&(y=Wt(),Dn(l,i,f,y),h0(l,o,f))}}function c0(i){var o=i.alternate;return i===at||o!==null&&o===at}function d0(i,o){yo=hu=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function h0(i,o,l){if((l&4194240)!==0){var f=o.lanes;f&=i.pendingLanes,l|=f,o.lanes=l,Gl(i,l)}}var mu={readContext:En,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},Ix={readContext:En,useCallback:function(i,o){return qn().memoizedState=[i,o===void 0?null:o],i},useContext:En,useEffect:t0,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,fu(4194308,4,i0.bind(null,o,i),l)},useLayoutEffect:function(i,o){return fu(4194308,4,i,o)},useInsertionEffect:function(i,o){return fu(4,2,i,o)},useMemo:function(i,o){var l=qn();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var f=qn();return o=l!==void 0?l(o):o,f.memoizedState=f.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},f.queue=i,i=i.dispatch=Cx.bind(null,at,i),[f.memoizedState,i]},useRef:function(i){var o=qn();return i={current:i},o.memoizedState=i},useState:Zm,useDebugValue:Gc,useDeferredValue:function(i){return qn().memoizedState=i},useTransition:function(){var i=Zm(!1),o=i[0];return i=Ax.bind(null,i[1]),qn().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var f=at,y=qn();if(rt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=o(),kt===null)throw Error(n(349));(hi&30)!==0||Ym(f,o,l)}y.memoizedState=l;var E={value:l,getSnapshot:o};return y.queue=E,t0(Qm.bind(null,f,E,i),[i]),f.flags|=2048,To(9,Gm.bind(null,f,E,l,o),void 0,null),l},useId:function(){var i=qn(),o=kt.identifierPrefix;if(rt){var l=or,f=sr;l=(f&~(1<<32-Nn(f)-1)).toString(32)+l,o=":"+o+"R"+l,l=bo++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=Sx++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},Ox={readContext:En,useCallback:o0,useContext:En,useEffect:Yc,useImperativeHandle:s0,useInsertionEffect:n0,useLayoutEffect:r0,useMemo:a0,useReducer:Kc,useRef:e0,useState:function(){return Kc(Eo)},useDebugValue:Gc,useDeferredValue:function(i){var o=Tn();return u0(o,Tt.memoizedState,i)},useTransition:function(){var i=Kc(Eo)[0],o=Tn().memoizedState;return[i,o]},useMutableSource:Km,useSyncExternalStore:qm,useId:l0,unstable_isNewReconciler:!1},Rx={readContext:En,useCallback:o0,useContext:En,useEffect:Yc,useImperativeHandle:s0,useInsertionEffect:n0,useLayoutEffect:r0,useMemo:a0,useReducer:qc,useRef:e0,useState:function(){return qc(Eo)},useDebugValue:Gc,useDeferredValue:function(i){var o=Tn();return Tt===null?o.memoizedState=i:u0(o,Tt.memoizedState,i)},useTransition:function(){var i=qc(Eo)[0],o=Tn().memoizedState;return[i,o]},useMutableSource:Km,useSyncExternalStore:qm,useId:l0,unstable_isNewReconciler:!1};function os(i,o){try{var l="",f=o;do l+=Me(f),f=f.return;while(f);var y=l}catch(E){y=`
Error generating stack: `+E.message+`
`+E.stack}return{value:i,source:o,stack:y,digest:null}}function Qc(i,o,l){return{value:i,source:null,stack:l??null,digest:o??null}}function Xc(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var Px=typeof WeakMap=="function"?WeakMap:Map;function f0(i,o,l){l=ur(-1,l),l.tag=3,l.payload={element:null};var f=o.value;return l.callback=function(){vu||(vu=!0,hd=f),Xc(i,o)},l}function p0(i,o,l){l=ur(-1,l),l.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var y=o.value;l.payload=function(){return f(y)},l.callback=function(){Xc(i,o)}}var E=i.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(l.callback=function(){Xc(i,o),typeof f!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var k=o.stack;this.componentDidCatch(o.value,{componentStack:k!==null?k:""})}),l}function m0(i,o,l){var f=i.pingCache;if(f===null){f=i.pingCache=new Px;var y=new Set;f.set(o,y)}else y=f.get(o),y===void 0&&(y=new Set,f.set(o,y));y.has(l)||(y.add(l),i=qx.bind(null,i,o,l),o.then(i,i))}function g0(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function y0(i,o,l,f,y){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=ur(-1,1),o.tag=2,Rr(l,o,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=y,i)}var Lx=j.ReactCurrentOwner,Jt=!1;function $t(i,o,l,f){o.child=i===null?$m(o,null,l,f):is(o,i.child,l,f)}function b0(i,o,l,f,y){l=l.render;var E=o.ref;return rs(o,y),f=$c(i,o,l,f,E,y),l=Wc(),i!==null&&!Jt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~y,lr(i,o,y)):(rt&&l&&kc(o),o.flags|=1,$t(i,o,f,y),o.child)}function E0(i,o,l,f,y){if(i===null){var E=l.type;return typeof E=="function"&&!Ed(E)&&E.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=E,T0(i,o,E,f,y)):(i=Cu(l.type,null,f,o,o.mode,y),i.ref=o.ref,i.return=o,o.child=i)}if(E=i.child,(i.lanes&y)===0){var k=E.memoizedProps;if(l=l.compare,l=l!==null?l:so,l(k,f)&&i.ref===o.ref)return lr(i,o,y)}return o.flags|=1,i=Fr(E,f),i.ref=o.ref,i.return=o,o.child=i}function T0(i,o,l,f,y){if(i!==null){var E=i.memoizedProps;if(so(E,f)&&i.ref===o.ref)if(Jt=!1,o.pendingProps=f=E,(i.lanes&y)!==0)(i.flags&131072)!==0&&(Jt=!0);else return o.lanes=i.lanes,lr(i,o,y)}return Jc(i,o,l,f,y)}function _0(i,o,l){var f=o.pendingProps,y=f.children,E=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(us,dn),dn|=l;else{if((l&1073741824)===0)return i=E!==null?E.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Qe(us,dn),dn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=E!==null?E.baseLanes:l,Qe(us,dn),dn|=f}else E!==null?(f=E.baseLanes|l,o.memoizedState=null):f=l,Qe(us,dn),dn|=f;return $t(i,o,y,l),o.child}function v0(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function Jc(i,o,l,f,y){var E=Xt(l)?ai:Mt.current;return E=Ji(o,E),rs(o,y),l=$c(i,o,l,f,E,y),f=Wc(),i!==null&&!Jt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~y,lr(i,o,y)):(rt&&f&&kc(o),o.flags|=1,$t(i,o,l,y),o.child)}function x0(i,o,l,f,y){if(Xt(l)){var E=!0;Za(o)}else E=!1;if(rs(o,y),o.stateNode===null)yu(i,o),Um(o,l,f),Bc(o,l,f,y),f=!0;else if(i===null){var k=o.stateNode,L=o.memoizedProps;k.props=L;var F=k.context,Y=l.contextType;typeof Y=="object"&&Y!==null?Y=En(Y):(Y=Xt(l)?ai:Mt.current,Y=Ji(o,Y));var ae=l.getDerivedStateFromProps,le=typeof ae=="function"||typeof k.getSnapshotBeforeUpdate=="function";le||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(L!==f||F!==Y)&&Hm(o,k,f,Y),Or=!1;var ie=o.memoizedState;k.state=ie,au(o,f,k,y),F=o.memoizedState,L!==f||ie!==F||Qt.current||Or?(typeof ae=="function"&&(Mc(o,l,ae,f),F=o.memoizedState),(L=Or||jm(o,l,L,f,ie,F,Y))?(le||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(o.flags|=4194308)):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=F),k.props=f,k.state=F,k.context=Y,f=L):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{k=o.stateNode,Dm(i,o),L=o.memoizedProps,Y=o.type===o.elementType?L:Rn(o.type,L),k.props=Y,le=o.pendingProps,ie=k.context,F=l.contextType,typeof F=="object"&&F!==null?F=En(F):(F=Xt(l)?ai:Mt.current,F=Ji(o,F));var ge=l.getDerivedStateFromProps;(ae=typeof ge=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(L!==le||ie!==F)&&Hm(o,k,f,F),Or=!1,ie=o.memoizedState,k.state=ie,au(o,f,k,y);var be=o.memoizedState;L!==le||ie!==be||Qt.current||Or?(typeof ge=="function"&&(Mc(o,l,ge,f),be=o.memoizedState),(Y=Or||jm(o,l,Y,f,ie,be,F)||!1)?(ae||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(f,be,F),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(f,be,F)),typeof k.componentDidUpdate=="function"&&(o.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof k.componentDidUpdate!="function"||L===i.memoizedProps&&ie===i.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&ie===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=be),k.props=f,k.state=be,k.context=F,f=Y):(typeof k.componentDidUpdate!="function"||L===i.memoizedProps&&ie===i.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&ie===i.memoizedState||(o.flags|=1024),f=!1)}return Zc(i,o,l,f,E,y)}function Zc(i,o,l,f,y,E){v0(i,o);var k=(o.flags&128)!==0;if(!f&&!k)return y&&Am(o,l,!1),lr(i,o,E);f=o.stateNode,Lx.current=o;var L=k&&typeof l.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,i!==null&&k?(o.child=is(o,i.child,null,E),o.child=is(o,null,L,E)):$t(i,o,L,E),o.memoizedState=f.state,y&&Am(o,l,!0),o.child}function w0(i){var o=i.stateNode;o.pendingContext?km(i,o.pendingContext,o.pendingContext!==o.context):o.context&&km(i,o.context,!1),Fc(i,o.containerInfo)}function k0(i,o,l,f,y){return ts(),Nc(y),o.flags|=256,$t(i,o,l,f),o.child}var ed={dehydrated:null,treeContext:null,retryLane:0};function td(i){return{baseLanes:i,cachePool:null,transitions:null}}function S0(i,o,l){var f=o.pendingProps,y=ot.current,E=!1,k=(o.flags&128)!==0,L;if((L=k)||(L=i!==null&&i.memoizedState===null?!1:(y&2)!==0),L?(E=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(y|=1),Qe(ot,y&1),i===null)return Cc(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(k=f.children,i=f.fallback,E?(f=o.mode,E=o.child,k={mode:"hidden",children:k},(f&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=k):E=Nu(k,f,0,null),i=yi(i,f,l,null),E.return=o,i.return=o,E.sibling=i,o.child=E,o.child.memoizedState=td(l),o.memoizedState=ed,i):nd(o,k));if(y=i.memoizedState,y!==null&&(L=y.dehydrated,L!==null))return Dx(i,o,k,f,L,y,l);if(E){E=f.fallback,k=o.mode,y=i.child,L=y.sibling;var F={mode:"hidden",children:f.children};return(k&1)===0&&o.child!==y?(f=o.child,f.childLanes=0,f.pendingProps=F,o.deletions=null):(f=Fr(y,F),f.subtreeFlags=y.subtreeFlags&14680064),L!==null?E=Fr(L,E):(E=yi(E,k,l,null),E.flags|=2),E.return=o,f.return=o,f.sibling=E,o.child=f,f=E,E=o.child,k=i.child.memoizedState,k=k===null?td(l):{baseLanes:k.baseLanes|l,cachePool:null,transitions:k.transitions},E.memoizedState=k,E.childLanes=i.childLanes&~l,o.memoizedState=ed,f}return E=i.child,i=E.sibling,f=Fr(E,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=l),f.return=o,f.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=f,o.memoizedState=null,f}function nd(i,o){return o=Nu({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function gu(i,o,l,f){return f!==null&&Nc(f),is(o,i.child,null,l),i=nd(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Dx(i,o,l,f,y,E,k){if(l)return o.flags&256?(o.flags&=-257,f=Qc(Error(n(422))),gu(i,o,k,f)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(E=f.fallback,y=o.mode,f=Nu({mode:"visible",children:f.children},y,0,null),E=yi(E,y,k,null),E.flags|=2,f.return=o,E.return=o,f.sibling=E,o.child=f,(o.mode&1)!==0&&is(o,i.child,null,k),o.child.memoizedState=td(k),o.memoizedState=ed,E);if((o.mode&1)===0)return gu(i,o,k,null);if(y.data==="$!"){if(f=y.nextSibling&&y.nextSibling.dataset,f)var L=f.dgst;return f=L,E=Error(n(419)),f=Qc(E,f,void 0),gu(i,o,k,f)}if(L=(k&i.childLanes)!==0,Jt||L){if(f=kt,f!==null){switch(k&-k){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(f.suspendedLanes|k))!==0?0:y,y!==0&&y!==E.retryLane&&(E.retryLane=y,ar(i,y),Dn(f,i,y,-1))}return bd(),f=Qc(Error(n(421))),gu(i,o,k,f)}return y.data==="$?"?(o.flags|=128,o.child=i.child,o=Yx.bind(null,i),y._reactRetry=o,null):(i=E.treeContext,cn=Ar(y.nextSibling),ln=o,rt=!0,On=null,i!==null&&(yn[bn++]=sr,yn[bn++]=or,yn[bn++]=ui,sr=i.id,or=i.overflow,ui=o),o=nd(o,f.children),o.flags|=4096,o)}function A0(i,o,l){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),Pc(i.return,o,l)}function rd(i,o,l,f,y){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:y}:(E.isBackwards=o,E.rendering=null,E.renderingStartTime=0,E.last=f,E.tail=l,E.tailMode=y)}function C0(i,o,l){var f=o.pendingProps,y=f.revealOrder,E=f.tail;if($t(i,o,f.children,l),f=ot.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&A0(i,l,o);else if(i.tag===19)A0(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(Qe(ot,f),(o.mode&1)===0)o.memoizedState=null;else switch(y){case"forwards":for(l=o.child,y=null;l!==null;)i=l.alternate,i!==null&&cu(i)===null&&(y=l),l=l.sibling;l=y,l===null?(y=o.child,o.child=null):(y=l.sibling,l.sibling=null),rd(o,!1,y,l,E);break;case"backwards":for(l=null,y=o.child,o.child=null;y!==null;){if(i=y.alternate,i!==null&&cu(i)===null){o.child=y;break}i=y.sibling,y.sibling=l,l=y,y=i}rd(o,!0,l,null,E);break;case"together":rd(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function yu(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function lr(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),fi|=o.lanes,(l&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(n(153));if(o.child!==null){for(i=o.child,l=Fr(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=Fr(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function Mx(i,o,l){switch(o.tag){case 3:w0(o),ts();break;case 5:Wm(o);break;case 1:Xt(o.type)&&Za(o);break;case 4:Fc(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,y=o.memoizedProps.value;Qe(iu,f._currentValue),f._currentValue=y;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(Qe(ot,ot.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?S0(i,o,l):(Qe(ot,ot.current&1),i=lr(i,o,l),i!==null?i.sibling:null);Qe(ot,ot.current&1);break;case 19:if(f=(l&o.childLanes)!==0,(i.flags&128)!==0){if(f)return C0(i,o,l);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Qe(ot,ot.current),f)break;return null;case 22:case 23:return o.lanes=0,_0(i,o,l)}return lr(i,o,l)}var N0,id,I0,O0;N0=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},id=function(){},I0=function(i,o,l,f){var y=i.memoizedProps;if(y!==f){i=o.stateNode,di(Kn.current);var E=null;switch(l){case"input":y=br(i,y),f=br(i,f),E=[];break;case"select":y=_({},y,{value:void 0}),f=_({},f,{value:void 0}),E=[];break;case"textarea":y=ri(i,y),f=ri(i,f),E=[];break;default:typeof y.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Qa)}It(l,f);var k;l=null;for(Y in y)if(!f.hasOwnProperty(Y)&&y.hasOwnProperty(Y)&&y[Y]!=null)if(Y==="style"){var L=y[Y];for(k in L)L.hasOwnProperty(k)&&(l||(l={}),l[k]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?E||(E=[]):(E=E||[]).push(Y,null));for(Y in f){var F=f[Y];if(L=y!=null?y[Y]:void 0,f.hasOwnProperty(Y)&&F!==L&&(F!=null||L!=null))if(Y==="style")if(L){for(k in L)!L.hasOwnProperty(k)||F&&F.hasOwnProperty(k)||(l||(l={}),l[k]="");for(k in F)F.hasOwnProperty(k)&&L[k]!==F[k]&&(l||(l={}),l[k]=F[k])}else l||(E||(E=[]),E.push(Y,l)),l=F;else Y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,L=L?L.__html:void 0,F!=null&&L!==F&&(E=E||[]).push(Y,F)):Y==="children"?typeof F!="string"&&typeof F!="number"||(E=E||[]).push(Y,""+F):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(F!=null&&Y==="onScroll"&&et("scroll",i),E||L===F||(E=[])):(E=E||[]).push(Y,F))}l&&(E=E||[]).push("style",l);var Y=E;(o.updateQueue=Y)&&(o.flags|=4)}},O0=function(i,o,l,f){l!==f&&(o.flags|=4)};function _o(i,o){if(!rt)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Ft(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,f=0;if(o)for(var y=i.child;y!==null;)l|=y.lanes|y.childLanes,f|=y.subtreeFlags&14680064,f|=y.flags&14680064,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)l|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=f,i.childLanes=l,o}function Bx(i,o,l){var f=o.pendingProps;switch(Sc(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(o),null;case 1:return Xt(o.type)&&Ja(),Ft(o),null;case 3:return f=o.stateNode,ss(),tt(Qt),tt(Mt),Hc(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(ru(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,On!==null&&(md(On),On=null))),id(i,o),Ft(o),null;case 5:jc(o);var y=di(go.current);if(l=o.type,i!==null&&o.stateNode!=null)I0(i,o,l,f,y),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(n(166));return Ft(o),null}if(i=di(Kn.current),ru(o)){f=o.stateNode,l=o.type;var E=o.memoizedProps;switch(f[Wn]=o,f[co]=E,i=(o.mode&1)!==0,l){case"dialog":et("cancel",f),et("close",f);break;case"iframe":case"object":case"embed":et("load",f);break;case"video":case"audio":for(y=0;y<ao.length;y++)et(ao[y],f);break;case"source":et("error",f);break;case"img":case"image":case"link":et("error",f),et("load",f);break;case"details":et("toggle",f);break;case"input":We(f,E),et("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!E.multiple},et("invalid",f);break;case"textarea":Et(f,E),et("invalid",f)}It(l,E),y=null;for(var k in E)if(E.hasOwnProperty(k)){var L=E[k];k==="children"?typeof L=="string"?f.textContent!==L&&(E.suppressHydrationWarning!==!0&&Ga(f.textContent,L,i),y=["children",L]):typeof L=="number"&&f.textContent!==""+L&&(E.suppressHydrationWarning!==!0&&Ga(f.textContent,L,i),y=["children",""+L]):s.hasOwnProperty(k)&&L!=null&&k==="onScroll"&&et("scroll",f)}switch(l){case"input":mn(f),ni(f,E,!0);break;case"textarea":mn(f),Ca(f);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(f.onclick=Qa)}f=y,o.updateQueue=f,f!==null&&(o.flags|=4)}else{k=y.nodeType===9?y:y.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=ee(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=k.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=k.createElement(l,{is:f.is}):(i=k.createElement(l),l==="select"&&(k=i,f.multiple?k.multiple=!0:f.size&&(k.size=f.size))):i=k.createElementNS(i,l),i[Wn]=o,i[co]=f,N0(i,o,!1,!1),o.stateNode=i;e:{switch(k=Vn(l,f),l){case"dialog":et("cancel",i),et("close",i),y=f;break;case"iframe":case"object":case"embed":et("load",i),y=f;break;case"video":case"audio":for(y=0;y<ao.length;y++)et(ao[y],i);y=f;break;case"source":et("error",i),y=f;break;case"img":case"image":case"link":et("error",i),et("load",i),y=f;break;case"details":et("toggle",i),y=f;break;case"input":We(i,f),y=br(i,f),et("invalid",i);break;case"option":y=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},y=_({},f,{value:void 0}),et("invalid",i);break;case"textarea":Et(i,f),y=ri(i,f),et("invalid",i);break;default:y=f}It(l,y),L=y;for(E in L)if(L.hasOwnProperty(E)){var F=L[E];E==="style"?Tr(i,F):E==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Be(i,F)):E==="children"?typeof F=="string"?(l!=="textarea"||F!=="")&&Ve(i,F):typeof F=="number"&&Ve(i,""+F):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(s.hasOwnProperty(E)?F!=null&&E==="onScroll"&&et("scroll",i):F!=null&&C(i,E,F,k))}switch(l){case"input":mn(i),ni(i,f,!1);break;case"textarea":mn(i),Ca(i);break;case"option":f.value!=null&&i.setAttribute("value",""+Re(f.value));break;case"select":i.multiple=!!f.multiple,E=f.value,E!=null?on(i,!!f.multiple,E,!1):f.defaultValue!=null&&on(i,!!f.multiple,f.defaultValue,!0);break;default:typeof y.onClick=="function"&&(i.onclick=Qa)}switch(l){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Ft(o),null;case 6:if(i&&o.stateNode!=null)O0(i,o,i.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(n(166));if(l=di(go.current),di(Kn.current),ru(o)){if(f=o.stateNode,l=o.memoizedProps,f[Wn]=o,(E=f.nodeValue!==l)&&(i=ln,i!==null))switch(i.tag){case 3:Ga(f.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Ga(f.nodeValue,l,(i.mode&1)!==0)}E&&(o.flags|=4)}else f=(l.nodeType===9?l:l.ownerDocument).createTextNode(f),f[Wn]=o,o.stateNode=f}return Ft(o),null;case 13:if(tt(ot),f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(rt&&cn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Pm(),ts(),o.flags|=98560,E=!1;else if(E=ru(o),f!==null&&f.dehydrated!==null){if(i===null){if(!E)throw Error(n(318));if(E=o.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(n(317));E[Wn]=o}else ts(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ft(o),E=!1}else On!==null&&(md(On),On=null),E=!0;if(!E)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(ot.current&1)!==0?_t===0&&(_t=3):bd())),o.updateQueue!==null&&(o.flags|=4),Ft(o),null);case 4:return ss(),id(i,o),i===null&&uo(o.stateNode.containerInfo),Ft(o),null;case 10:return Rc(o.type._context),Ft(o),null;case 17:return Xt(o.type)&&Ja(),Ft(o),null;case 19:if(tt(ot),E=o.memoizedState,E===null)return Ft(o),null;if(f=(o.flags&128)!==0,k=E.rendering,k===null)if(f)_o(E,!1);else{if(_t!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(k=cu(i),k!==null){for(o.flags|=128,_o(E,!1),f=k.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=l,l=o.child;l!==null;)E=l,i=f,E.flags&=14680066,k=E.alternate,k===null?(E.childLanes=0,E.lanes=i,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=k.childLanes,E.lanes=k.lanes,E.child=k.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=k.memoizedProps,E.memoizedState=k.memoizedState,E.updateQueue=k.updateQueue,E.type=k.type,i=k.dependencies,E.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return Qe(ot,ot.current&1|2),o.child}i=i.sibling}E.tail!==null&&ht()>ls&&(o.flags|=128,f=!0,_o(E,!1),o.lanes=4194304)}else{if(!f)if(i=cu(k),i!==null){if(o.flags|=128,f=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),_o(E,!0),E.tail===null&&E.tailMode==="hidden"&&!k.alternate&&!rt)return Ft(o),null}else 2*ht()-E.renderingStartTime>ls&&l!==1073741824&&(o.flags|=128,f=!0,_o(E,!1),o.lanes=4194304);E.isBackwards?(k.sibling=o.child,o.child=k):(l=E.last,l!==null?l.sibling=k:o.child=k,E.last=k)}return E.tail!==null?(o=E.tail,E.rendering=o,E.tail=o.sibling,E.renderingStartTime=ht(),o.sibling=null,l=ot.current,Qe(ot,f?l&1|2:l&1),o):(Ft(o),null);case 22:case 23:return yd(),f=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(dn&1073741824)!==0&&(Ft(o),o.subtreeFlags&6&&(o.flags|=8192)):Ft(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function Fx(i,o){switch(Sc(o),o.tag){case 1:return Xt(o.type)&&Ja(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ss(),tt(Qt),tt(Mt),Hc(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return jc(o),null;case 13:if(tt(ot),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(n(340));ts()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return tt(ot),null;case 4:return ss(),null;case 10:return Rc(o.type._context),null;case 22:case 23:return yd(),null;case 24:return null;default:return null}}var bu=!1,jt=!1,jx=typeof WeakSet=="function"?WeakSet:Set,ye=null;function as(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(f){lt(i,o,f)}else l.current=null}function sd(i,o,l){try{l()}catch(f){lt(i,o,f)}}var R0=!1;function Ux(i,o){if(yc=Fa,i=lm(),lc(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var y=f.anchorOffset,E=f.focusNode;f=f.focusOffset;try{l.nodeType,E.nodeType}catch{l=null;break e}var k=0,L=-1,F=-1,Y=0,ae=0,le=i,ie=null;t:for(;;){for(var ge;le!==l||y!==0&&le.nodeType!==3||(L=k+y),le!==E||f!==0&&le.nodeType!==3||(F=k+f),le.nodeType===3&&(k+=le.nodeValue.length),(ge=le.firstChild)!==null;)ie=le,le=ge;for(;;){if(le===i)break t;if(ie===l&&++Y===y&&(L=k),ie===E&&++ae===f&&(F=k),(ge=le.nextSibling)!==null)break;le=ie,ie=le.parentNode}le=ge}l=L===-1||F===-1?null:{start:L,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(bc={focusedElem:i,selectionRange:l},Fa=!1,ye=o;ye!==null;)if(o=ye,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ye=i;else for(;ye!==null;){o=ye;try{var be=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(be!==null){var _e=be.memoizedProps,ft=be.memoizedState,z=o.stateNode,U=z.getSnapshotBeforeUpdate(o.elementType===o.type?_e:Rn(o.type,_e),ft);z.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var $=o.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(fe){lt(o,o.return,fe)}if(i=o.sibling,i!==null){i.return=o.return,ye=i;break}ye=o.return}return be=R0,R0=!1,be}function vo(i,o,l){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&i)===i){var E=y.destroy;y.destroy=void 0,E!==void 0&&sd(o,l,E)}y=y.next}while(y!==f)}}function Eu(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var f=l.create;l.destroy=f()}l=l.next}while(l!==o)}}function od(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function P0(i){var o=i.alternate;o!==null&&(i.alternate=null,P0(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Wn],delete o[co],delete o[vc],delete o[vx],delete o[xx])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function L0(i){return i.tag===5||i.tag===3||i.tag===4}function D0(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||L0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ad(i,o,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Qa));else if(f!==4&&(i=i.child,i!==null))for(ad(i,o,l),i=i.sibling;i!==null;)ad(i,o,l),i=i.sibling}function ud(i,o,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(ud(i,o,l),i=i.sibling;i!==null;)ud(i,o,l),i=i.sibling}var Ot=null,Pn=!1;function Pr(i,o,l){for(l=l.child;l!==null;)M0(i,o,l),l=l.sibling}function M0(i,o,l){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(Ra,l)}catch{}switch(l.tag){case 5:jt||as(l,o);case 6:var f=Ot,y=Pn;Ot=null,Pr(i,o,l),Ot=f,Pn=y,Ot!==null&&(Pn?(i=Ot,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):Ot.removeChild(l.stateNode));break;case 18:Ot!==null&&(Pn?(i=Ot,l=l.stateNode,i.nodeType===8?_c(i.parentNode,l):i.nodeType===1&&_c(i,l),Zs(i)):_c(Ot,l.stateNode));break;case 4:f=Ot,y=Pn,Ot=l.stateNode.containerInfo,Pn=!0,Pr(i,o,l),Ot=f,Pn=y;break;case 0:case 11:case 14:case 15:if(!jt&&(f=l.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){y=f=f.next;do{var E=y,k=E.destroy;E=E.tag,k!==void 0&&((E&2)!==0||(E&4)!==0)&&sd(l,o,k),y=y.next}while(y!==f)}Pr(i,o,l);break;case 1:if(!jt&&(as(l,o),f=l.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=l.memoizedProps,f.state=l.memoizedState,f.componentWillUnmount()}catch(L){lt(l,o,L)}Pr(i,o,l);break;case 21:Pr(i,o,l);break;case 22:l.mode&1?(jt=(f=jt)||l.memoizedState!==null,Pr(i,o,l),jt=f):Pr(i,o,l);break;default:Pr(i,o,l)}}function B0(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new jx),o.forEach(function(f){var y=Gx.bind(null,i,f);l.has(f)||(l.add(f),f.then(y,y))})}}function Ln(i,o){var l=o.deletions;if(l!==null)for(var f=0;f<l.length;f++){var y=l[f];try{var E=i,k=o,L=k;e:for(;L!==null;){switch(L.tag){case 5:Ot=L.stateNode,Pn=!1;break e;case 3:Ot=L.stateNode.containerInfo,Pn=!0;break e;case 4:Ot=L.stateNode.containerInfo,Pn=!0;break e}L=L.return}if(Ot===null)throw Error(n(160));M0(E,k,y),Ot=null,Pn=!1;var F=y.alternate;F!==null&&(F.return=null),y.return=null}catch(Y){lt(y,o,Y)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)F0(o,i),o=o.sibling}function F0(i,o){var l=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Ln(o,i),Yn(i),f&4){try{vo(3,i,i.return),Eu(3,i)}catch(_e){lt(i,i.return,_e)}try{vo(5,i,i.return)}catch(_e){lt(i,i.return,_e)}}break;case 1:Ln(o,i),Yn(i),f&512&&l!==null&&as(l,l.return);break;case 5:if(Ln(o,i),Yn(i),f&512&&l!==null&&as(l,l.return),i.flags&32){var y=i.stateNode;try{Ve(y,"")}catch(_e){lt(i,i.return,_e)}}if(f&4&&(y=i.stateNode,y!=null)){var E=i.memoizedProps,k=l!==null?l.memoizedProps:E,L=i.type,F=i.updateQueue;if(i.updateQueue=null,F!==null)try{L==="input"&&E.type==="radio"&&E.name!=null&&Gt(y,E),Vn(L,k);var Y=Vn(L,E);for(k=0;k<F.length;k+=2){var ae=F[k],le=F[k+1];ae==="style"?Tr(y,le):ae==="dangerouslySetInnerHTML"?Be(y,le):ae==="children"?Ve(y,le):C(y,ae,le,Y)}switch(L){case"input":qe(y,E);break;case"textarea":Aa(y,E);break;case"select":var ie=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!E.multiple;var ge=E.value;ge!=null?on(y,!!E.multiple,ge,!1):ie!==!!E.multiple&&(E.defaultValue!=null?on(y,!!E.multiple,E.defaultValue,!0):on(y,!!E.multiple,E.multiple?[]:"",!1))}y[co]=E}catch(_e){lt(i,i.return,_e)}}break;case 6:if(Ln(o,i),Yn(i),f&4){if(i.stateNode===null)throw Error(n(162));y=i.stateNode,E=i.memoizedProps;try{y.nodeValue=E}catch(_e){lt(i,i.return,_e)}}break;case 3:if(Ln(o,i),Yn(i),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Zs(o.containerInfo)}catch(_e){lt(i,i.return,_e)}break;case 4:Ln(o,i),Yn(i);break;case 13:Ln(o,i),Yn(i),y=i.child,y.flags&8192&&(E=y.memoizedState!==null,y.stateNode.isHidden=E,!E||y.alternate!==null&&y.alternate.memoizedState!==null||(dd=ht())),f&4&&B0(i);break;case 22:if(ae=l!==null&&l.memoizedState!==null,i.mode&1?(jt=(Y=jt)||ae,Ln(o,i),jt=Y):Ln(o,i),Yn(i),f&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!ae&&(i.mode&1)!==0)for(ye=i,ae=i.child;ae!==null;){for(le=ye=ae;ye!==null;){switch(ie=ye,ge=ie.child,ie.tag){case 0:case 11:case 14:case 15:vo(4,ie,ie.return);break;case 1:as(ie,ie.return);var be=ie.stateNode;if(typeof be.componentWillUnmount=="function"){f=ie,l=ie.return;try{o=f,be.props=o.memoizedProps,be.state=o.memoizedState,be.componentWillUnmount()}catch(_e){lt(f,l,_e)}}break;case 5:as(ie,ie.return);break;case 22:if(ie.memoizedState!==null){H0(le);continue}}ge!==null?(ge.return=ie,ye=ge):H0(le)}ae=ae.sibling}e:for(ae=null,le=i;;){if(le.tag===5){if(ae===null){ae=le;try{y=le.stateNode,Y?(E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(L=le.stateNode,F=le.memoizedProps.style,k=F!=null&&F.hasOwnProperty("display")?F.display:null,L.style.display=gn("display",k))}catch(_e){lt(i,i.return,_e)}}}else if(le.tag===6){if(ae===null)try{le.stateNode.nodeValue=Y?"":le.memoizedProps}catch(_e){lt(i,i.return,_e)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===i)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===i)break e;for(;le.sibling===null;){if(le.return===null||le.return===i)break e;ae===le&&(ae=null),le=le.return}ae===le&&(ae=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Ln(o,i),Yn(i),f&4&&B0(i);break;case 21:break;default:Ln(o,i),Yn(i)}}function Yn(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(L0(l)){var f=l;break e}l=l.return}throw Error(n(160))}switch(f.tag){case 5:var y=f.stateNode;f.flags&32&&(Ve(y,""),f.flags&=-33);var E=D0(i);ud(i,E,y);break;case 3:case 4:var k=f.stateNode.containerInfo,L=D0(i);ad(i,L,k);break;default:throw Error(n(161))}}catch(F){lt(i,i.return,F)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Hx(i,o,l){ye=i,j0(i)}function j0(i,o,l){for(var f=(i.mode&1)!==0;ye!==null;){var y=ye,E=y.child;if(y.tag===22&&f){var k=y.memoizedState!==null||bu;if(!k){var L=y.alternate,F=L!==null&&L.memoizedState!==null||jt;L=bu;var Y=jt;if(bu=k,(jt=F)&&!Y)for(ye=y;ye!==null;)k=ye,F=k.child,k.tag===22&&k.memoizedState!==null?z0(y):F!==null?(F.return=k,ye=F):z0(y);for(;E!==null;)ye=E,j0(E),E=E.sibling;ye=y,bu=L,jt=Y}U0(i)}else(y.subtreeFlags&8772)!==0&&E!==null?(E.return=y,ye=E):U0(i)}}function U0(i){for(;ye!==null;){var o=ye;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:jt||Eu(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!jt)if(l===null)f.componentDidMount();else{var y=o.elementType===o.type?l.memoizedProps:Rn(o.type,l.memoizedProps);f.componentDidUpdate(y,l.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var E=o.updateQueue;E!==null&&Bm(o,E,f);break;case 3:var k=o.updateQueue;if(k!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}Bm(o,k,l)}break;case 5:var L=o.stateNode;if(l===null&&o.flags&4){l=L;var F=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&l.focus();break;case"img":F.src&&(l.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Y=o.alternate;if(Y!==null){var ae=Y.memoizedState;if(ae!==null){var le=ae.dehydrated;le!==null&&Zs(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}jt||o.flags&512&&od(o)}catch(ie){lt(o,o.return,ie)}}if(o===i){ye=null;break}if(l=o.sibling,l!==null){l.return=o.return,ye=l;break}ye=o.return}}function H0(i){for(;ye!==null;){var o=ye;if(o===i){ye=null;break}var l=o.sibling;if(l!==null){l.return=o.return,ye=l;break}ye=o.return}}function z0(i){for(;ye!==null;){var o=ye;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{Eu(4,o)}catch(F){lt(o,l,F)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var y=o.return;try{f.componentDidMount()}catch(F){lt(o,y,F)}}var E=o.return;try{od(o)}catch(F){lt(o,E,F)}break;case 5:var k=o.return;try{od(o)}catch(F){lt(o,k,F)}}}catch(F){lt(o,o.return,F)}if(o===i){ye=null;break}var L=o.sibling;if(L!==null){L.return=o.return,ye=L;break}ye=o.return}}var zx=Math.ceil,Tu=j.ReactCurrentDispatcher,ld=j.ReactCurrentOwner,_n=j.ReactCurrentBatchConfig,$e=0,kt=null,mt=null,Rt=0,dn=0,us=Cr(0),_t=0,xo=null,fi=0,_u=0,cd=0,wo=null,Zt=null,dd=0,ls=1/0,cr=null,vu=!1,hd=null,Lr=null,xu=!1,Dr=null,wu=0,ko=0,fd=null,ku=-1,Su=0;function Wt(){return($e&6)!==0?ht():ku!==-1?ku:ku=ht()}function Mr(i){return(i.mode&1)===0?1:($e&2)!==0&&Rt!==0?Rt&-Rt:kx.transition!==null?(Su===0&&(Su=Lp()),Su):(i=Ye,i!==0||(i=window.event,i=i===void 0?16:Vp(i.type)),i)}function Dn(i,o,l,f){if(50<ko)throw ko=0,fd=null,Error(n(185));Ys(i,l,f),(($e&2)===0||i!==kt)&&(i===kt&&(($e&2)===0&&(_u|=l),_t===4&&Br(i,Rt)),en(i,f),l===1&&$e===0&&(o.mode&1)===0&&(ls=ht()+500,eu&&Ir()))}function en(i,o){var l=i.callbackNode;kv(i,o);var f=Da(i,i===kt?Rt:0);if(f===0)l!==null&&Op(l),i.callbackNode=null,i.callbackPriority=0;else if(o=f&-f,i.callbackPriority!==o){if(l!=null&&Op(l),o===1)i.tag===0?wx($0.bind(null,i)):Cm($0.bind(null,i)),Tx(function(){($e&6)===0&&Ir()}),l=null;else{switch(Dp(f)){case 1:l=Kl;break;case 4:l=Rp;break;case 16:l=Oa;break;case 536870912:l=Pp;break;default:l=Oa}l=J0(l,V0.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function V0(i,o){if(ku=-1,Su=0,($e&6)!==0)throw Error(n(327));var l=i.callbackNode;if(cs()&&i.callbackNode!==l)return null;var f=Da(i,i===kt?Rt:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||o)o=Au(i,f);else{o=f;var y=$e;$e|=2;var E=K0();(kt!==i||Rt!==o)&&(cr=null,ls=ht()+500,mi(i,o));do try{Wx();break}catch(L){W0(i,L)}while(!0);Oc(),Tu.current=E,$e=y,mt!==null?o=0:(kt=null,Rt=0,o=_t)}if(o!==0){if(o===2&&(y=ql(i),y!==0&&(f=y,o=pd(i,y))),o===1)throw l=xo,mi(i,0),Br(i,f),en(i,ht()),l;if(o===6)Br(i,f);else{if(y=i.current.alternate,(f&30)===0&&!Vx(y)&&(o=Au(i,f),o===2&&(E=ql(i),E!==0&&(f=E,o=pd(i,E))),o===1))throw l=xo,mi(i,0),Br(i,f),en(i,ht()),l;switch(i.finishedWork=y,i.finishedLanes=f,o){case 0:case 1:throw Error(n(345));case 2:gi(i,Zt,cr);break;case 3:if(Br(i,f),(f&130023424)===f&&(o=dd+500-ht(),10<o)){if(Da(i,0)!==0)break;if(y=i.suspendedLanes,(y&f)!==f){Wt(),i.pingedLanes|=i.suspendedLanes&y;break}i.timeoutHandle=Tc(gi.bind(null,i,Zt,cr),o);break}gi(i,Zt,cr);break;case 4:if(Br(i,f),(f&4194240)===f)break;for(o=i.eventTimes,y=-1;0<f;){var k=31-Nn(f);E=1<<k,k=o[k],k>y&&(y=k),f&=~E}if(f=y,f=ht()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*zx(f/1960))-f,10<f){i.timeoutHandle=Tc(gi.bind(null,i,Zt,cr),f);break}gi(i,Zt,cr);break;case 5:gi(i,Zt,cr);break;default:throw Error(n(329))}}}return en(i,ht()),i.callbackNode===l?V0.bind(null,i):null}function pd(i,o){var l=wo;return i.current.memoizedState.isDehydrated&&(mi(i,o).flags|=256),i=Au(i,o),i!==2&&(o=Zt,Zt=l,o!==null&&md(o)),i}function md(i){Zt===null?Zt=i:Zt.push.apply(Zt,i)}function Vx(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var f=0;f<l.length;f++){var y=l[f],E=y.getSnapshot;y=y.value;try{if(!In(E(),y))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Br(i,o){for(o&=~cd,o&=~_u,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-Nn(o),f=1<<l;i[l]=-1,o&=~f}}function $0(i){if(($e&6)!==0)throw Error(n(327));cs();var o=Da(i,0);if((o&1)===0)return en(i,ht()),null;var l=Au(i,o);if(i.tag!==0&&l===2){var f=ql(i);f!==0&&(o=f,l=pd(i,f))}if(l===1)throw l=xo,mi(i,0),Br(i,o),en(i,ht()),l;if(l===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,gi(i,Zt,cr),en(i,ht()),null}function gd(i,o){var l=$e;$e|=1;try{return i(o)}finally{$e=l,$e===0&&(ls=ht()+500,eu&&Ir())}}function pi(i){Dr!==null&&Dr.tag===0&&($e&6)===0&&cs();var o=$e;$e|=1;var l=_n.transition,f=Ye;try{if(_n.transition=null,Ye=1,i)return i()}finally{Ye=f,_n.transition=l,$e=o,($e&6)===0&&Ir()}}function yd(){dn=us.current,tt(us)}function mi(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,Ex(l)),mt!==null)for(l=mt.return;l!==null;){var f=l;switch(Sc(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Ja();break;case 3:ss(),tt(Qt),tt(Mt),Hc();break;case 5:jc(f);break;case 4:ss();break;case 13:tt(ot);break;case 19:tt(ot);break;case 10:Rc(f.type._context);break;case 22:case 23:yd()}l=l.return}if(kt=i,mt=i=Fr(i.current,null),Rt=dn=o,_t=0,xo=null,cd=_u=fi=0,Zt=wo=null,ci!==null){for(o=0;o<ci.length;o++)if(l=ci[o],f=l.interleaved,f!==null){l.interleaved=null;var y=f.next,E=l.pending;if(E!==null){var k=E.next;E.next=y,f.next=k}l.pending=f}ci=null}return i}function W0(i,o){do{var l=mt;try{if(Oc(),du.current=mu,hu){for(var f=at.memoizedState;f!==null;){var y=f.queue;y!==null&&(y.pending=null),f=f.next}hu=!1}if(hi=0,wt=Tt=at=null,yo=!1,bo=0,ld.current=null,l===null||l.return===null){_t=1,xo=o,mt=null;break}e:{var E=i,k=l.return,L=l,F=o;if(o=Rt,L.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var Y=F,ae=L,le=ae.tag;if((ae.mode&1)===0&&(le===0||le===11||le===15)){var ie=ae.alternate;ie?(ae.updateQueue=ie.updateQueue,ae.memoizedState=ie.memoizedState,ae.lanes=ie.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var ge=g0(k);if(ge!==null){ge.flags&=-257,y0(ge,k,L,E,o),ge.mode&1&&m0(E,Y,o),o=ge,F=Y;var be=o.updateQueue;if(be===null){var _e=new Set;_e.add(F),o.updateQueue=_e}else be.add(F);break e}else{if((o&1)===0){m0(E,Y,o),bd();break e}F=Error(n(426))}}else if(rt&&L.mode&1){var ft=g0(k);if(ft!==null){(ft.flags&65536)===0&&(ft.flags|=256),y0(ft,k,L,E,o),Nc(os(F,L));break e}}E=F=os(F,L),_t!==4&&(_t=2),wo===null?wo=[E]:wo.push(E),E=k;do{switch(E.tag){case 3:E.flags|=65536,o&=-o,E.lanes|=o;var z=f0(E,F,o);Mm(E,z);break e;case 1:L=F;var U=E.type,$=E.stateNode;if((E.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Lr===null||!Lr.has($)))){E.flags|=65536,o&=-o,E.lanes|=o;var fe=p0(E,L,o);Mm(E,fe);break e}}E=E.return}while(E!==null)}Y0(l)}catch(ve){o=ve,mt===l&&l!==null&&(mt=l=l.return);continue}break}while(!0)}function K0(){var i=Tu.current;return Tu.current=mu,i===null?mu:i}function bd(){(_t===0||_t===3||_t===2)&&(_t=4),kt===null||(fi&268435455)===0&&(_u&268435455)===0||Br(kt,Rt)}function Au(i,o){var l=$e;$e|=2;var f=K0();(kt!==i||Rt!==o)&&(cr=null,mi(i,o));do try{$x();break}catch(y){W0(i,y)}while(!0);if(Oc(),$e=l,Tu.current=f,mt!==null)throw Error(n(261));return kt=null,Rt=0,_t}function $x(){for(;mt!==null;)q0(mt)}function Wx(){for(;mt!==null&&!gv();)q0(mt)}function q0(i){var o=X0(i.alternate,i,dn);i.memoizedProps=i.pendingProps,o===null?Y0(i):mt=o,ld.current=null}function Y0(i){var o=i;do{var l=o.alternate;if(i=o.return,(o.flags&32768)===0){if(l=Bx(l,o,dn),l!==null){mt=l;return}}else{if(l=Fx(l,o),l!==null){l.flags&=32767,mt=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{_t=6,mt=null;return}}if(o=o.sibling,o!==null){mt=o;return}mt=o=i}while(o!==null);_t===0&&(_t=5)}function gi(i,o,l){var f=Ye,y=_n.transition;try{_n.transition=null,Ye=1,Kx(i,o,l,f)}finally{_n.transition=y,Ye=f}return null}function Kx(i,o,l,f){do cs();while(Dr!==null);if(($e&6)!==0)throw Error(n(327));l=i.finishedWork;var y=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var E=l.lanes|l.childLanes;if(Sv(i,E),i===kt&&(mt=kt=null,Rt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||xu||(xu=!0,J0(Oa,function(){return cs(),null})),E=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||E){E=_n.transition,_n.transition=null;var k=Ye;Ye=1;var L=$e;$e|=4,ld.current=null,Ux(i,l),F0(l,i),hx(bc),Fa=!!yc,bc=yc=null,i.current=l,Hx(l),yv(),$e=L,Ye=k,_n.transition=E}else i.current=l;if(xu&&(xu=!1,Dr=i,wu=y),E=i.pendingLanes,E===0&&(Lr=null),Tv(l.stateNode),en(i,ht()),o!==null)for(f=i.onRecoverableError,l=0;l<o.length;l++)y=o[l],f(y.value,{componentStack:y.stack,digest:y.digest});if(vu)throw vu=!1,i=hd,hd=null,i;return(wu&1)!==0&&i.tag!==0&&cs(),E=i.pendingLanes,(E&1)!==0?i===fd?ko++:(ko=0,fd=i):ko=0,Ir(),null}function cs(){if(Dr!==null){var i=Dp(wu),o=_n.transition,l=Ye;try{if(_n.transition=null,Ye=16>i?16:i,Dr===null)var f=!1;else{if(i=Dr,Dr=null,wu=0,($e&6)!==0)throw Error(n(331));var y=$e;for($e|=4,ye=i.current;ye!==null;){var E=ye,k=E.child;if((ye.flags&16)!==0){var L=E.deletions;if(L!==null){for(var F=0;F<L.length;F++){var Y=L[F];for(ye=Y;ye!==null;){var ae=ye;switch(ae.tag){case 0:case 11:case 15:vo(8,ae,E)}var le=ae.child;if(le!==null)le.return=ae,ye=le;else for(;ye!==null;){ae=ye;var ie=ae.sibling,ge=ae.return;if(P0(ae),ae===Y){ye=null;break}if(ie!==null){ie.return=ge,ye=ie;break}ye=ge}}}var be=E.alternate;if(be!==null){var _e=be.child;if(_e!==null){be.child=null;do{var ft=_e.sibling;_e.sibling=null,_e=ft}while(_e!==null)}}ye=E}}if((E.subtreeFlags&2064)!==0&&k!==null)k.return=E,ye=k;else e:for(;ye!==null;){if(E=ye,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:vo(9,E,E.return)}var z=E.sibling;if(z!==null){z.return=E.return,ye=z;break e}ye=E.return}}var U=i.current;for(ye=U;ye!==null;){k=ye;var $=k.child;if((k.subtreeFlags&2064)!==0&&$!==null)$.return=k,ye=$;else e:for(k=U;ye!==null;){if(L=ye,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:Eu(9,L)}}catch(ve){lt(L,L.return,ve)}if(L===k){ye=null;break e}var fe=L.sibling;if(fe!==null){fe.return=L.return,ye=fe;break e}ye=L.return}}if($e=y,Ir(),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(Ra,i)}catch{}f=!0}return f}finally{Ye=l,_n.transition=o}}return!1}function G0(i,o,l){o=os(l,o),o=f0(i,o,1),i=Rr(i,o,1),o=Wt(),i!==null&&(Ys(i,1,o),en(i,o))}function lt(i,o,l){if(i.tag===3)G0(i,i,l);else for(;o!==null;){if(o.tag===3){G0(o,i,l);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Lr===null||!Lr.has(f))){i=os(l,i),i=p0(o,i,1),o=Rr(o,i,1),i=Wt(),o!==null&&(Ys(o,1,i),en(o,i));break}}o=o.return}}function qx(i,o,l){var f=i.pingCache;f!==null&&f.delete(o),o=Wt(),i.pingedLanes|=i.suspendedLanes&l,kt===i&&(Rt&l)===l&&(_t===4||_t===3&&(Rt&130023424)===Rt&&500>ht()-dd?mi(i,0):cd|=l),en(i,o)}function Q0(i,o){o===0&&((i.mode&1)===0?o=1:(o=La,La<<=1,(La&130023424)===0&&(La=4194304)));var l=Wt();i=ar(i,o),i!==null&&(Ys(i,o,l),en(i,l))}function Yx(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),Q0(i,l)}function Gx(i,o){var l=0;switch(i.tag){case 13:var f=i.stateNode,y=i.memoizedState;y!==null&&(l=y.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(n(314))}f!==null&&f.delete(o),Q0(i,l)}var X0;X0=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||Qt.current)Jt=!0;else{if((i.lanes&l)===0&&(o.flags&128)===0)return Jt=!1,Mx(i,o,l);Jt=(i.flags&131072)!==0}else Jt=!1,rt&&(o.flags&1048576)!==0&&Nm(o,nu,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;yu(i,o),i=o.pendingProps;var y=Ji(o,Mt.current);rs(o,l),y=$c(null,o,f,i,y,l);var E=Wc();return o.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Xt(f)?(E=!0,Za(o)):E=!1,o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Dc(o),y.updater=uu,o.stateNode=y,y._reactInternals=o,Bc(o,f,i,l),o=Zc(null,o,f,!0,E,l)):(o.tag=0,rt&&E&&kc(o),$t(null,o,y,l),o=o.child),o;case 16:f=o.elementType;e:{switch(yu(i,o),i=o.pendingProps,y=f._init,f=y(f._payload),o.type=f,y=o.tag=Xx(f),i=Rn(f,i),y){case 0:o=Jc(null,o,f,i,l);break e;case 1:o=x0(null,o,f,i,l);break e;case 11:o=b0(null,o,f,i,l);break e;case 14:o=E0(null,o,f,Rn(f.type,i),l);break e}throw Error(n(306,f,""))}return o;case 0:return f=o.type,y=o.pendingProps,y=o.elementType===f?y:Rn(f,y),Jc(i,o,f,y,l);case 1:return f=o.type,y=o.pendingProps,y=o.elementType===f?y:Rn(f,y),x0(i,o,f,y,l);case 3:e:{if(w0(o),i===null)throw Error(n(387));f=o.pendingProps,E=o.memoizedState,y=E.element,Dm(i,o),au(o,f,null,l);var k=o.memoizedState;if(f=k.element,E.isDehydrated)if(E={element:f,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},o.updateQueue.baseState=E,o.memoizedState=E,o.flags&256){y=os(Error(n(423)),o),o=k0(i,o,f,l,y);break e}else if(f!==y){y=os(Error(n(424)),o),o=k0(i,o,f,l,y);break e}else for(cn=Ar(o.stateNode.containerInfo.firstChild),ln=o,rt=!0,On=null,l=$m(o,null,f,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ts(),f===y){o=lr(i,o,l);break e}$t(i,o,f,l)}o=o.child}return o;case 5:return Wm(o),i===null&&Cc(o),f=o.type,y=o.pendingProps,E=i!==null?i.memoizedProps:null,k=y.children,Ec(f,y)?k=null:E!==null&&Ec(f,E)&&(o.flags|=32),v0(i,o),$t(i,o,k,l),o.child;case 6:return i===null&&Cc(o),null;case 13:return S0(i,o,l);case 4:return Fc(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=is(o,null,f,l):$t(i,o,f,l),o.child;case 11:return f=o.type,y=o.pendingProps,y=o.elementType===f?y:Rn(f,y),b0(i,o,f,y,l);case 7:return $t(i,o,o.pendingProps,l),o.child;case 8:return $t(i,o,o.pendingProps.children,l),o.child;case 12:return $t(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(f=o.type._context,y=o.pendingProps,E=o.memoizedProps,k=y.value,Qe(iu,f._currentValue),f._currentValue=k,E!==null)if(In(E.value,k)){if(E.children===y.children&&!Qt.current){o=lr(i,o,l);break e}}else for(E=o.child,E!==null&&(E.return=o);E!==null;){var L=E.dependencies;if(L!==null){k=E.child;for(var F=L.firstContext;F!==null;){if(F.context===f){if(E.tag===1){F=ur(-1,l&-l),F.tag=2;var Y=E.updateQueue;if(Y!==null){Y=Y.shared;var ae=Y.pending;ae===null?F.next=F:(F.next=ae.next,ae.next=F),Y.pending=F}}E.lanes|=l,F=E.alternate,F!==null&&(F.lanes|=l),Pc(E.return,l,o),L.lanes|=l;break}F=F.next}}else if(E.tag===10)k=E.type===o.type?null:E.child;else if(E.tag===18){if(k=E.return,k===null)throw Error(n(341));k.lanes|=l,L=k.alternate,L!==null&&(L.lanes|=l),Pc(k,l,o),k=E.sibling}else k=E.child;if(k!==null)k.return=E;else for(k=E;k!==null;){if(k===o){k=null;break}if(E=k.sibling,E!==null){E.return=k.return,k=E;break}k=k.return}E=k}$t(i,o,y.children,l),o=o.child}return o;case 9:return y=o.type,f=o.pendingProps.children,rs(o,l),y=En(y),f=f(y),o.flags|=1,$t(i,o,f,l),o.child;case 14:return f=o.type,y=Rn(f,o.pendingProps),y=Rn(f.type,y),E0(i,o,f,y,l);case 15:return T0(i,o,o.type,o.pendingProps,l);case 17:return f=o.type,y=o.pendingProps,y=o.elementType===f?y:Rn(f,y),yu(i,o),o.tag=1,Xt(f)?(i=!0,Za(o)):i=!1,rs(o,l),Um(o,f,y),Bc(o,f,y,l),Zc(null,o,f,!0,i,l);case 19:return C0(i,o,l);case 22:return _0(i,o,l)}throw Error(n(156,o.tag))};function J0(i,o){return Ip(i,o)}function Qx(i,o,l,f){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(i,o,l,f){return new Qx(i,o,l,f)}function Ed(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Xx(i){if(typeof i=="function")return Ed(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Z)return 11;if(i===re)return 14}return 2}function Fr(i,o){var l=i.alternate;return l===null?(l=vn(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function Cu(i,o,l,f,y,E){var k=2;if(f=i,typeof i=="function")Ed(i)&&(k=1);else if(typeof i=="string")k=5;else e:switch(i){case Q:return yi(l.children,y,E,o);case W:k=8,y|=8;break;case te:return i=vn(12,l,o,y|2),i.elementType=te,i.lanes=E,i;case de:return i=vn(13,l,o,y),i.elementType=de,i.lanes=E,i;case ue:return i=vn(19,l,o,y),i.elementType=ue,i.lanes=E,i;case K:return Nu(l,y,E,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:k=10;break e;case q:k=9;break e;case Z:k=11;break e;case re:k=14;break e;case ne:k=16,f=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return o=vn(k,l,o,y),o.elementType=i,o.type=f,o.lanes=E,o}function yi(i,o,l,f){return i=vn(7,i,f,o),i.lanes=l,i}function Nu(i,o,l,f){return i=vn(22,i,f,o),i.elementType=K,i.lanes=l,i.stateNode={isHidden:!1},i}function Td(i,o,l){return i=vn(6,i,null,o),i.lanes=l,i}function _d(i,o,l){return o=vn(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function Jx(i,o,l,f,y){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yl(0),this.expirationTimes=Yl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yl(0),this.identifierPrefix=f,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function vd(i,o,l,f,y,E,k,L,F){return i=new Jx(i,o,l,L,F),o===1?(o=1,E===!0&&(o|=8)):o=0,E=vn(3,null,null,o),i.current=E,E.stateNode=i,E.memoizedState={element:f,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dc(E),i}function Zx(i,o,l){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:f==null?null:""+f,children:i,containerInfo:o,implementation:l}}function Z0(i){if(!i)return Nr;i=i._reactInternals;e:{if(si(i)!==i||i.tag!==1)throw Error(n(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Xt(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(i.tag===1){var l=i.type;if(Xt(l))return Sm(i,l,o)}return o}function eg(i,o,l,f,y,E,k,L,F){return i=vd(l,f,!0,i,y,E,k,L,F),i.context=Z0(null),l=i.current,f=Wt(),y=Mr(l),E=ur(f,y),E.callback=o??null,Rr(l,E,y),i.current.lanes=y,Ys(i,y,f),en(i,f),i}function Iu(i,o,l,f){var y=o.current,E=Wt(),k=Mr(y);return l=Z0(l),o.context===null?o.context=l:o.pendingContext=l,o=ur(E,k),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=Rr(y,o,k),i!==null&&(Dn(i,y,k,E),ou(i,y,k)),k}function Ou(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function tg(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function xd(i,o){tg(i,o),(i=i.alternate)&&tg(i,o)}function ew(){return null}var ng=typeof reportError=="function"?reportError:function(i){console.error(i)};function wd(i){this._internalRoot=i}Ru.prototype.render=wd.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(n(409));Iu(i,o,null,null)},Ru.prototype.unmount=wd.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;pi(function(){Iu(null,i,null,null)}),o[rr]=null}};function Ru(i){this._internalRoot=i}Ru.prototype.unstable_scheduleHydration=function(i){if(i){var o=Fp();i={blockedOn:null,target:i,priority:o};for(var l=0;l<wr.length&&o!==0&&o<wr[l].priority;l++);wr.splice(l,0,i),l===0&&Hp(i)}};function kd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Pu(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function rg(){}function tw(i,o,l,f,y){if(y){if(typeof f=="function"){var E=f;f=function(){var Y=Ou(k);E.call(Y)}}var k=eg(o,f,i,0,null,!1,!1,"",rg);return i._reactRootContainer=k,i[rr]=k.current,uo(i.nodeType===8?i.parentNode:i),pi(),k}for(;y=i.lastChild;)i.removeChild(y);if(typeof f=="function"){var L=f;f=function(){var Y=Ou(F);L.call(Y)}}var F=vd(i,0,!1,null,null,!1,!1,"",rg);return i._reactRootContainer=F,i[rr]=F.current,uo(i.nodeType===8?i.parentNode:i),pi(function(){Iu(o,F,l,f)}),F}function Lu(i,o,l,f,y){var E=l._reactRootContainer;if(E){var k=E;if(typeof y=="function"){var L=y;y=function(){var F=Ou(k);L.call(F)}}Iu(o,k,i,y)}else k=tw(l,o,i,y,f);return Ou(k)}Mp=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=qs(o.pendingLanes);l!==0&&(Gl(o,l|1),en(o,ht()),($e&6)===0&&(ls=ht()+500,Ir()))}break;case 13:pi(function(){var f=ar(i,1);if(f!==null){var y=Wt();Dn(f,i,1,y)}}),xd(i,1)}},Ql=function(i){if(i.tag===13){var o=ar(i,134217728);if(o!==null){var l=Wt();Dn(o,i,134217728,l)}xd(i,134217728)}},Bp=function(i){if(i.tag===13){var o=Mr(i),l=ar(i,o);if(l!==null){var f=Wt();Dn(l,i,o,f)}xd(i,o)}},Fp=function(){return Ye},jp=function(i,o){var l=Ye;try{return Ye=i,o()}finally{Ye=l}},zl=function(i,o,l){switch(o){case"input":if(qe(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var f=l[o];if(f!==i&&f.form===i.form){var y=Xa(f);if(!y)throw Error(n(90));ti(f),qe(f,y)}}}break;case"textarea":Aa(i,l);break;case"select":o=l.value,o!=null&&on(i,!!l.multiple,o,!1)}},xp=gd,wp=pi;var nw={usingClientEntryPoint:!1,Events:[ho,Qi,Xa,_p,vp,gd]},So={findFiberByHostInstance:oi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rw={bundleType:So.bundleType,version:So.version,rendererPackageName:So.rendererPackageName,rendererConfig:So.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Cp(i),i===null?null:i.stateNode},findFiberByHostInstance:So.findFiberByHostInstance||ew,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Du.isDisabled&&Du.supportsFiber)try{Ra=Du.inject(rw),$n=Du}catch{}}return tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nw,tn.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kd(o))throw Error(n(200));return Zx(i,o,null,l)},tn.createRoot=function(i,o){if(!kd(i))throw Error(n(299));var l=!1,f="",y=ng;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(y=o.onRecoverableError)),o=vd(i,1,!1,null,null,l,!1,f,y),i[rr]=o.current,uo(i.nodeType===8?i.parentNode:i),new wd(o)},tn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=Cp(o),i=i===null?null:i.stateNode,i},tn.flushSync=function(i){return pi(i)},tn.hydrate=function(i,o,l){if(!Pu(o))throw Error(n(200));return Lu(null,i,o,!0,l)},tn.hydrateRoot=function(i,o,l){if(!kd(i))throw Error(n(405));var f=l!=null&&l.hydratedSources||null,y=!1,E="",k=ng;if(l!=null&&(l.unstable_strictMode===!0&&(y=!0),l.identifierPrefix!==void 0&&(E=l.identifierPrefix),l.onRecoverableError!==void 0&&(k=l.onRecoverableError)),o=eg(o,null,i,1,l??null,y,!1,E,k),i[rr]=o.current,uo(i),f)for(i=0;i<f.length;i++)l=f[i],y=l._getVersion,y=y(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,y]:o.mutableSourceEagerHydrationData.push(l,y);return new Ru(o)},tn.render=function(i,o,l){if(!Pu(o))throw Error(n(200));return Lu(null,i,o,!1,l)},tn.unmountComponentAtNode=function(i){if(!Pu(i))throw Error(n(40));return i._reactRootContainer?(pi(function(){Lu(null,null,i,!1,function(){i._reactRootContainer=null,i[rr]=null})}),!0):!1},tn.unstable_batchedUpdates=gd,tn.unstable_renderSubtreeIntoContainer=function(i,o,l,f){if(!Pu(l))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return Lu(i,o,l,!1,f)},tn.version="18.2.0-next-9e3b772b8-20220608",tn}var dg;function hw(){if(dg)return Cd.exports;dg=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Cd.exports=dw(),Cd.exports}var hg;function fw(){if(hg)return Mu;hg=1;var e=hw();return Mu.createRoot=e.createRoot,Mu.hydrateRoot=e.hydrateRoot,Mu}var pw=fw();const uM=_l(pw);function vl(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function mw(e,t,n,r){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function c(p){try{h(r.next(p))}catch(m){u(m)}}function d(p){try{h(r.throw(p))}catch(m){u(m)}}function h(p){p.done?a(p.value):s(p.value).then(c,d)}h((r=r.apply(e,t||[])).next())})}const gw=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class _f extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class yw extends _f{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class fg extends _f{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class pg extends _f{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var kh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(kh||(kh={}));class bw{constructor(t,{headers:n={},customFetch:r,region:s=kh.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=gw(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return mw(this,arguments,void 0,function*(n,r={}){var s;let a,u;try{const{headers:c,method:d,body:h,signal:p,timeout:m}=r;let b={},{region:T}=r;T||(T=this.region);const w=new URL(`${this.url}/${n}`);T&&T!=="any"&&(b["x-region"]=T,w.searchParams.set("forceFunctionRegion",T));let A;h&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",A=h):typeof h=="string"?(b["Content-Type"]="text/plain",A=h):typeof FormData<"u"&&h instanceof FormData?A=h:(b["Content-Type"]="application/json",A=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?A=JSON.stringify(h):A=h;let S=p;m&&(u=new AbortController,a=setTimeout(()=>u.abort(),m),p?(S=u.signal,p.addEventListener("abort",()=>u.abort())):S=u.signal);const x=yield this.fetch(w.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),c),body:A,signal:S}).catch(M=>{throw new yw(M)}),R=x.headers.get("x-relay-error");if(R&&R==="true")throw new fg(x);if(!x.ok)throw new pg(x);let C=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),j;return C==="application/json"?j=yield x.json():C==="application/octet-stream"||C==="application/pdf"?j=yield x.blob():C==="text/event-stream"?j=x:C==="multipart/form-data"?j=yield x.formData():j=yield x.text(),{data:j,error:null,response:x}}catch(c){return{data:null,error:c,response:c instanceof pg||c instanceof fg?c.context:void 0}}finally{a&&clearTimeout(a)}})}}var Ew=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Tw=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let u=null,c=null,d=null,h=a.status,p=a.statusText;if(a.ok){var m,b;if(n.method!=="HEAD"){var T;const x=await a.text();x===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((T=n.headers.get("Accept"))===null||T===void 0)&&T.includes("application/vnd.pgrst.plan+text"))?c=x:c=JSON.parse(x))}const A=(m=n.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),S=(b=a.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");A&&S&&S.length>1&&(d=parseInt(S[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,h=406,p="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{var w;const A=await a.text();try{u=JSON.parse(A),Array.isArray(u)&&a.status===404&&(c=[],u=null,h=200,p="OK")}catch{a.status===404&&A===""?(h=204,p="No Content"):u={message:A}}if(u&&n.isMaybeSingle&&(!(u==null||(w=u.details)===null||w===void 0)&&w.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&n.shouldThrowOnError)throw new Ew(u)}return{error:u,data:c,count:d,status:h,statusText:p}});return this.shouldThrowOnError||(s=s.catch(a=>{var u;let c="";const d=a==null?void 0:a.cause;if(d){var h,p,m,b;const w=(h=d==null?void 0:d.message)!==null&&h!==void 0?h:"",A=(p=d==null?void 0:d.code)!==null&&p!==void 0?p:"";c=`${(m=a==null?void 0:a.name)!==null&&m!==void 0?m:"FetchError"}: ${a==null?void 0:a.message}`,c+=`

Caused by: ${(b=d==null?void 0:d.name)!==null&&b!==void 0?b:"Error"}: ${w}`,A&&(c+=` (${A})`),d!=null&&d.stack&&(c+=`
${d.stack}`)}else{var T;c=(T=a==null?void 0:a.stack)!==null&&T!==void 0?T:""}return{error:{message:`${(u=a==null?void 0:a.name)!==null&&u!==void 0?u:"FetchError"}: ${a==null?void 0:a.message}`,details:c,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},_w=class extends Tw{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.order`:"order",u=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${u?`${u},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:a="text"}={}){var u;const c=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),d=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${d}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const mg=new RegExp("[,()]");var Es=class extends _w{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&mg.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&mg.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},vw=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=t??{},s=n?"HEAD":"GET";let a=!1;const u=(e??"*").split("").map(h=>/\s/.test(h)&&!a?"":(h==='"'&&(a=!a),h)).join(""),{url:c,headers:d}=this.cloneRequestState();return c.searchParams.set("select",u),r&&d.append("Prefer",`count=${r}`),new Es({method:s,url:c,headers:d,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const s="POST",{url:a,headers:u}=this.cloneRequestState();if(t&&u.append("Prefer",`count=${t}`),n||u.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);a.searchParams.set("columns",d.join(","))}}return new Es({method:s,url:a,headers:u,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var a;const u="POST",{url:c,headers:d}=this.cloneRequestState();if(d.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&c.searchParams.set("on_conflict",t),r&&d.append("Prefer",`count=${r}`),s||d.append("Prefer","missing=default"),Array.isArray(e)){const h=e.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(h.length>0){const p=[...new Set(h)].map(m=>`"${m}"`);c.searchParams.set("columns",p.join(","))}}return new Es({method:u,url:c,headers:d,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var n;const r="PATCH",{url:s,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new Es({method:r,url:s,headers:a,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE",{url:r,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Es({method:n,url:r,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},xw=class mb{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new vw(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new mb(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:a}={}){var u;let c;const d=new URL(`${this.url}/rpc/${t}`);let h;const p=T=>T!==null&&typeof T=="object"&&(!Array.isArray(T)||T.some(p)),m=r&&Object.values(n).some(p);m?(c="POST",h=n):r||s?(c=r?"HEAD":"GET",Object.entries(n).filter(([T,w])=>w!==void 0).map(([T,w])=>[T,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([T,w])=>{d.searchParams.append(T,w)})):(c="POST",h=n);const b=new Headers(this.headers);return m?b.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&b.set("Prefer",`count=${a}`),new Es({method:c,url:d,headers:b,schema:this.schemaName,body:h,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};class ww{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const kw="2.93.1",Sw=`realtime-js/${kw}`,Aw="1.0.0",gb="2.0.0",gg=gb,Sh=1e4,Cw=1e3,Nw=100;var Wr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Wr||(Wr={}));var vt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(vt||(vt={}));var jn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(jn||(jn={}));var Ah;(function(e){e.websocket="websocket"})(Ah||(Ah={}));var Ni;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ni||(Ni={}));class Iw{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},u=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(t,n,r){var s,a;const u=t.topic,c=(s=t.ref)!==null&&s!==void 0?s:"",d=(a=t.join_ref)!==null&&a!==void 0?a:"",h=t.payload.event,p=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},m=Object.keys(p).length===0?"":JSON.stringify(p);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+c.length+u.length+h.length+m.length,T=new ArrayBuffer(this.HEADER_LENGTH+b);let w=new DataView(T),A=0;w.setUint8(A++,this.KINDS.userBroadcastPush),w.setUint8(A++,d.length),w.setUint8(A++,c.length),w.setUint8(A++,u.length),w.setUint8(A++,h.length),w.setUint8(A++,m.length),w.setUint8(A++,n),Array.from(d,x=>w.setUint8(A++,x.charCodeAt(0))),Array.from(c,x=>w.setUint8(A++,x.charCodeAt(0))),Array.from(u,x=>w.setUint8(A++,x.charCodeAt(0))),Array.from(h,x=>w.setUint8(A++,x.charCodeAt(0))),Array.from(m,x=>w.setUint8(A++,x.charCodeAt(0)));var S=new Uint8Array(T.byteLength+r.byteLength);return S.set(new Uint8Array(T),0),S.set(new Uint8Array(r),T.byteLength),S.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[s,a,u,c,d]=r;return n({join_ref:s,ref:a,topic:u,event:c,payload:d})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,s)}}_decodeUserBroadcast(t,n,r){const s=n.getUint8(1),a=n.getUint8(2),u=n.getUint8(3),c=n.getUint8(4);let d=this.HEADER_LENGTH+4;const h=r.decode(t.slice(d,d+s));d=d+s;const p=r.decode(t.slice(d,d+a));d=d+a;const m=r.decode(t.slice(d,d+u));d=d+u;const b=t.slice(d,t.byteLength),T=c===this.JSON_ENCODING?JSON.parse(r.decode(b)):b,w={type:this.BROADCAST_EVENT,event:p,payload:T};return u>0&&(w.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class yb{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Xe||(Xe={}));const yg=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((a,u)=>(a[u]=Ow(u,e,t,s),a),{}):{}},Ow=(e,t,n,r)=>{const s=t.find(c=>c.name===e),a=s==null?void 0:s.type,u=n[e];return a&&!r.includes(a)?bb(a,u):Ch(u)},bb=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Dw(t,n)}switch(e){case Xe.bool:return Rw(t);case Xe.float4:case Xe.float8:case Xe.int2:case Xe.int4:case Xe.int8:case Xe.numeric:case Xe.oid:return Pw(t);case Xe.json:case Xe.jsonb:return Lw(t);case Xe.timestamp:return Mw(t);case Xe.abstime:case Xe.date:case Xe.daterange:case Xe.int4range:case Xe.int8range:case Xe.money:case Xe.reltime:case Xe.text:case Xe.time:case Xe.timestamptz:case Xe.timetz:case Xe.tsrange:case Xe.tstzrange:return Ch(t);default:return Ch(t)}},Ch=e=>e,Rw=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Pw=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Lw=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},Dw=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const u=e.slice(1,n);try{a=JSON.parse("["+u+"]")}catch{a=u?u.split(","):[]}return a.map(c=>bb(t,c))}return e},Mw=e=>typeof e=="string"?e.replace(" ","T"):e,Eb=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Od{constructor(t,n,r={},s=Sh){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var bg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(bg||(bg={}));class Uo{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:u,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Uo.syncState(this.state,s,a,u),this.pendingDiffs.forEach(d=>{this.state=Uo.syncDiff(this.state,d,a,u)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:u,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Uo.syncDiff(this.state,s,a,u),c())}),this.onJoin((s,a,u)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:u})}),this.onLeave((s,a,u)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const a=this.cloneDeep(t),u=this.transformState(n),c={},d={};return this.map(a,(h,p)=>{u[h]||(d[h]=p)}),this.map(u,(h,p)=>{const m=a[h];if(m){const b=p.map(S=>S.presence_ref),T=m.map(S=>S.presence_ref),w=p.filter(S=>T.indexOf(S.presence_ref)<0),A=m.filter(S=>b.indexOf(S.presence_ref)<0);w.length>0&&(c[h]=w),A.length>0&&(d[h]=A)}else c[h]=p}),this.syncDiff(a,{joins:c,leaves:d},r,s)}static syncDiff(t,n,r,s){const{joins:a,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(c,d)=>{var h;const p=(h=t[c])!==null&&h!==void 0?h:[];if(t[c]=this.cloneDeep(d),p.length>0){const m=t[c].map(T=>T.presence_ref),b=p.filter(T=>m.indexOf(T.presence_ref)<0);t[c].unshift(...b)}r(c,p,d)}),this.map(u,(c,d)=>{let h=t[c];if(!h)return;const p=d.map(m=>m.presence_ref);h=h.filter(m=>p.indexOf(m.presence_ref)<0),t[c]=h,s(c,h,d),h.length===0&&delete t[c]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Eg;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Eg||(Eg={}));var Ho;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ho||(Ho={}));var dr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(dr||(dr={}));class xs{constructor(t,n={config:{}},r){var s,a;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Od(this,jn.join,this.params,this.timeout),this.rejoinTimer=new yb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vt.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(jn.reply,{},(u,c)=>{this._trigger(this._replyEventName(c),u)}),this.presence=new Uo(this),this.broadcastEndpointURL=Eb(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==vt.closed){const{config:{broadcast:u,presence:c,private:d}}=this.params,h=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(T=>T.filter))!==null&&s!==void 0?s:[],p=!!this.bindings[Ho.PRESENCE]&&this.bindings[Ho.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,m={},b={broadcast:u,presence:Object.assign(Object.assign({},c),{enabled:p}),postgres_changes:h,private:d};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(T=>t==null?void 0:t(dr.CHANNEL_ERROR,T)),this._onClose(()=>t==null?void 0:t(dr.CLOSED)),this.updateJoinPayload(Object.assign({config:b},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:T})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),T===void 0){t==null||t(dr.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,S=(w=A==null?void 0:A.length)!==null&&w!==void 0?w:0,x=[];for(let R=0;R<S;R++){const C=A[R],{filter:{event:j,schema:M,table:I,filter:Q}}=C,W=T&&T[R];if(W&&W.event===j&&xs.isFilterValueEqual(W.schema,M)&&xs.isFilterValueEqual(W.table,I)&&xs.isFilterValueEqual(W.filter,Q))x.push(Object.assign(Object.assign({},C),{id:W.id}));else{this.unsubscribe(),this.state=vt.errored,t==null||t(dr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(dr.SUBSCRIBED);return}}).receive("error",T=>{this.state=vt.errored,t==null||t(dr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(dr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===vt.joined&&t===Ho.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(c.status===202)return{success:!0};let d=c.statusText;try{const h=await c.json();d=h.error||h.message||d}catch{}return Promise.reject(new Error(d))}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:u}=t,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:u,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var u,c,d;const h=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(c=(u=this.params)===null||u===void 0?void 0:u.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),h.receive("ok",()=>a("ok")),h.receive("error",()=>a("error")),h.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=vt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(jn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Od(this,jn.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=vt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),u=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),u}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Od(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Nw){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,a;const u=t.toLocaleLowerCase(),{close:c,error:d,leave:h,join:p}=jn;if(r&&[c,d,h,p].indexOf(u)>=0&&r!==this._joinRef())return;let b=this._onMessage(u,n,r);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(T=>{var w,A,S;return((w=T.filter)===null||w===void 0?void 0:w.event)==="*"||((S=(A=T.filter)===null||A===void 0?void 0:A.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===u}).map(T=>T.callback(b,r)):(a=this.bindings[u])===null||a===void 0||a.filter(T=>{var w,A,S,x,R,C;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in T){const j=T.id,M=(w=T.filter)===null||w===void 0?void 0:w.event;return j&&((A=n.ids)===null||A===void 0?void 0:A.includes(j))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const j=(R=(x=T==null?void 0:T.filter)===null||x===void 0?void 0:x.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return j==="*"||j===((C=n==null?void 0:n.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===u}).map(T=>{if(typeof b=="object"&&"ids"in b){const w=b.data,{schema:A,table:S,commit_timestamp:x,type:R,errors:C}=w;b=Object.assign(Object.assign({},{schema:A,table:S,commit_timestamp:x,eventType:R,new:{},old:{},errors:C}),this._getPayloadRecords(w))}T.callback(b,r)})}_isClosed(){return this.state===vt.closed}_isJoined(){return this.state===vt.joined}_isJoining(){return this.state===vt.joining}_isLeaving(){return this.state===vt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&xs.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(jn.close,{},t)}_onError(t){this._on(jn.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=yg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=yg(t.columns,t.old_record)),n}}const Rd=()=>{},Bu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Bw=[1e3,2e3,5e3,1e4],Fw=1e4,jw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Uw{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Sh,this.transport=null,this.heartbeatIntervalMs=Bu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Rd,this.ref=0,this.reconnectTimer=null,this.vsn=gg,this.logger=Rd,this.conn=null,this.sendBuffer=[],this.serializer=new Iw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Ah.websocket}`,this.httpEndpoint=Eb(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ww.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Wr.connecting:return Ni.Connecting;case Wr.open:return Ni.Open;case Wr.closing:return Ni.Closing;default:return Ni.Closed}}isConnected(){return this.connectionState()===Ni.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===r);if(s)return s;{const a=new xs(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:s,ref:a}=t,u=()=>{this.encode(t,c=>{var d;(d=this.conn)===null||d===void 0||d.send(c)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Cw,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Bu.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",h)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:a,ref:u}=n,c=u?`(${u})`:"",d=a.status||"";this.log("receive",`${d} ${r} ${s} ${c}`.trim(),a),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(s,a,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Wr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Wr.open||this.conn.readyState===Wr.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(jn.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([jw],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const a={access_token:n,version:Sw};n&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(jn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new yb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Bu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,a,u,c,d,h,p,m,b,T;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Sh,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Bu.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(u=t==null?void 0:t.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(c=t==null?void 0:t.heartbeatCallback)!==null&&c!==void 0?c:Rd,this.vsn=(d=t==null?void 0:t.vsn)!==null&&d!==void 0?d:gg,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=t==null?void 0:t.reconnectAfterMs)!==null&&h!==void 0?h:(w=>Bw[w-1]||Fw),this.vsn){case Aw:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:((w,A)=>A(JSON.stringify(w))),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:((w,A)=>A(JSON.parse(w)));break;case gb:this.encode=(b=t==null?void 0:t.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(T=t==null?void 0:t.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var ea=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Hw(e,t,n){const r=new URL(t,e);if(n)for(const[s,a]of Object.entries(n))a!==void 0&&r.searchParams.set(s,a);return r.toString()}async function zw(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Vw(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:a,headers:u}){const c=Hw(e.baseUrl,r,s),d=await zw(e.auth),h=await t(c,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...d,...u},body:a?JSON.stringify(a):void 0}),p=await h.text(),m=(h.headers.get("content-type")||"").includes("application/json"),b=m&&p?JSON.parse(p):p;if(!h.ok){const T=m?b:void 0,w=T==null?void 0:T.error;throw new ea((w==null?void 0:w.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:w==null?void 0:w.type,icebergCode:w==null?void 0:w.code,details:T})}return{status:h.status,headers:h.headers,data:b}}}}function Fu(e){return e.join("")}var $w=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Fu(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fu(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fu(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fu(e.namespace)}`}),!0}catch(t){if(t instanceof ea&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof ea&&n.status===409)return;throw n}}};function ds(e){return e.join("")}var Ww=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ds(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ds(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ds(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ds(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ds(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ds(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof ea&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof ea&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},Kw=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Vw({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new $w(this.client,t),this.tableOps=new Ww(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},xl=class extends Error{constructor(e,t="storage",n,r){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function wl(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var ju=class extends xl{constructor(e,t,n,r="storage"){super(e,r,t,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Tb=class extends xl{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const qw=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Yw=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Nh=e=>{if(Array.isArray(e))return e.map(n=>Nh(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=Nh(r)}),t},Gw=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function ta(e){"@babel/helpers - typeof";return ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ta(e)}function Qw(e,t){if(ta(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ta(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xw(e){var t=Qw(e,"string");return ta(t)=="symbol"?t:t+""}function Jw(e,t,n){return(t=Xw(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Tg(Object(n),!0).forEach(function(r){Jw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tg(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const _g=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Zw=async(e,t,n,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const s=e,a=s.status||500;if(typeof s.json=="function")s.json().then(u=>{const c=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||a+"";t(new ju(_g(u),a,c,r))}).catch(()=>{if(r==="vectors"){const u=a+"";t(new ju(s.statusText||`HTTP ${a} error`,a,u,r))}else{const u=a+"";t(new ju(s.statusText||`HTTP ${a} error`,a,u,r))}});else{const u=a+"";t(new ju(s.statusText||`HTTP ${a} error`,a,u,r))}}else t(new Tb(_g(e),e,r))},ek=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!r?Ne(Ne({},s),n):(Yw(r)?(s.headers=Ne({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Ne(Ne({},s),n))};async function Co(e,t,n,r,s,a,u){return new Promise((c,d)=>{e(n,ek(t,r,s,a)).then(h=>{if(!h.ok)throw h;if(r!=null&&r.noResolveJson)return h;if(u==="vectors"){const p=h.headers.get("content-type");if(!p||!p.includes("application/json"))return{}}return h.json()}).then(h=>c(h)).catch(h=>Zw(h,d,r,u))})}function tk(e="storage"){return{get:async(t,n,r,s)=>Co(t,"GET",n,r,s,void 0,e),post:async(t,n,r,s,a)=>Co(t,"POST",n,s,a,r,e),put:async(t,n,r,s,a)=>Co(t,"PUT",n,s,a,r,e),head:async(t,n,r,s)=>Co(t,"HEAD",n,Ne(Ne({},r),{},{noResolveJson:!0}),s,void 0,e),remove:async(t,n,r,s,a)=>Co(t,"DELETE",n,s,a,r,e)}}const nk=tk("storage"),{get:na,post:st,put:Ih,head:rk,remove:vf}=nk;var Ds=class{constructor(e,t={},n,r="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=qw(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(wl(n))return{data:null,error:n};throw n}}},ik=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(wl(t))return{data:null,error:t};throw t}}};let _b;_b=Symbol.toStringTag;var sk=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[_b]="BlobDownloadBuilder",this.promise=null}asStream(){return new ik(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(wl(t))return{data:null,error:t};throw t}}};const ok={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var ak=class extends Ds{constructor(e,t={},n,r){super(e,t,r,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,r){var s=this;return s.handleOperation(async()=>{let a;const u=Ne(Ne({},vg),r);let c=Ne(Ne({},s.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const d=u.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),d&&a.append("metadata",s.encodeMetadata(d)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",u.cacheControl),d&&!a.has("metadata")&&a.append("metadata",s.encodeMetadata(d))):(a=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType,d&&(c["x-metadata"]=s.toBase64(s.encodeMetadata(d))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!u.duplex&&(u.duplex="half")),r!=null&&r.headers&&(c=Ne(Ne({},c),r.headers));const h=s._removeEmptyFolders(t),p=s._getFinalPath(h),m=await(e=="PUT"?Ih:st)(s.fetch,`${s.url}/object/${p}`,a,Ne({headers:c},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{path:h,id:m.Id,fullPath:m.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var s=this;const a=s._removeEmptyFolders(e),u=s._getFinalPath(a),c=new URL(s.url+`/object/upload/sign/${u}`);return c.searchParams.set("token",t),s.handleOperation(async()=>{let d;const h=Ne({upsert:vg.upsert},r),p=Ne(Ne({},s.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",h.cacheControl)):(d=n,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType),{path:a,fullPath:(await Ih(s.fetch,c.toString(),d,{headers:p})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(e);const s=Ne({},n.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const a=await st(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),u=new URL(n.url+a.url),c=u.searchParams.get("token");if(!c)throw new xl("No token returned by API");return{signedUrl:u.toString(),path:e,token:c}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;return r.handleOperation(async()=>await st(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(e,t,n){var r=this;return r.handleOperation(async()=>({path:(await st(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(e,t,n){var r=this;return r.handleOperation(async()=>{let s=r._getFinalPath(e),a=await st(r.fetch,`${r.url}/object/sign/${s}`,Ne({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const u=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${a.signedURL}${u}`)}})}async createSignedUrls(e,t,n){var r=this;return r.handleOperation(async()=>{const s=await st(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s.map(u=>Ne(Ne({},u),{},{signedUrl:u.signedURL?encodeURI(`${r.url}${u.signedURL}${a}`):null}))})}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=r?`?${r}`:"",a=this._getFinalPath(e),u=()=>na(this.fetch,`${this.url}/${n}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new sk(u,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);return t.handleOperation(async()=>Nh(await na(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await rk(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(wl(r)&&r instanceof Tb){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});u!==""&&r.push(u);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await vf(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var r=this;return r.handleOperation(async()=>{const s=Ne(Ne(Ne({},ok),t),{},{prefix:e||""});return await st(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{const r=Ne({},e);return await st(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const uk="2.93.1",ma={"X-Client-Info":`storage-js/${uk}`};var lk=class extends Ds{constructor(e,t={},n,r){const s=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const a=s.href.replace(/\/$/,""),u=Ne(Ne({},ma),t);super(a,u,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=t.listBucketOptionsToQueryString(e);return await na(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await na(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await st(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await Ih(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await st(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await vf(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},ck=class extends Ds{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=Ne(Ne({},ma),t);super(r,s,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await st(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return await na(t.fetch,s,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await vf(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!Gw(e))throw new xl("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Kw({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,a){const u=s[a];return typeof u!="function"?u:async(...c)=>{try{return{data:await u.apply(s,c),error:null}}catch(d){if(r)throw d;return{data:null,error:d}}}}})}},dk=class extends Ds{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=Ne(Ne({},ma),{},{"Content-Type":"application/json"},t);super(r,s,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await st(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await st(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await st(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await st(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},hk=class extends Ds{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=Ne(Ne({},ma),{},{"Content-Type":"application/json"},t);super(r,s,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await st(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await st(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await st(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await st(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await st(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},fk=class extends Ds{constructor(e,t={},n){const r=e.replace(/\/$/,""),s=Ne(Ne({},ma),{},{"Content-Type":"application/json"},t);super(r,s,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await st(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await st(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await st(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await st(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},pk=class extends fk{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new mk(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},mk=class extends dk{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,Ne(Ne({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,Ne(Ne({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new gk(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},gk=class extends hk{constructor(e,t,n,r,s){super(e,t,s),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,Ne(Ne({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,Ne(Ne({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,Ne(Ne({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,Ne(Ne({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,Ne(Ne({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},yk=class extends lk{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new ak(this.url,this.headers,e,this.fetch)}get vectors(){return new pk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ck(this.url+"/iceberg",this.headers,this.fetch)}};const vb="2.93.1",Ts=30*1e3,Oh=3,Pd=Oh*Ts,bk="http://localhost:9999",Ek="supabase.auth.token",Tk={"X-Client-Info":`gotrue-js/${vb}`},Rh="X-Supabase-Api-Version",xb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_k=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,vk=600*1e3;class ra extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function xe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class xk extends ra{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function wk(e){return xe(e)&&e.name==="AuthApiError"}class Ii extends ra{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class mr extends ra{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class hn extends mr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ld(e){return xe(e)&&e.name==="AuthSessionMissingError"}class hs extends mr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Uu extends mr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Hu extends mr{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function kk(e){return xe(e)&&e.name==="AuthImplicitGrantRedirectError"}class xg extends mr{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Sk extends mr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ph extends mr{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Dd(e){return xe(e)&&e.name==="AuthRetryableFetchError"}class wg extends mr{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Lh extends mr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const il="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),kg=` 	
\r=`.split(""),Ak=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<kg.length;t+=1)e[kg[t].charCodeAt(0)]=-2;for(let t=0;t<il.length;t+=1)e[il[t].charCodeAt(0)]=t;return e})();function Sg(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(il[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(il[r]),t.queuedBits-=6}}function wb(e,t,n){const r=Ak[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Ag(e){const t=[],n=u=>{t.push(String.fromCodePoint(u))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=u=>{Ik(u,r,n)};for(let u=0;u<e.length;u+=1)wb(e.charCodeAt(u),s,a);return t.join("")}function Ck(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Nk(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Ck(r,t)}}function Ik(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Ns(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)wb(e.charCodeAt(s),n,r);return new Uint8Array(t)}function Ok(e){const t=[];return Nk(e,n=>t.push(n)),new Uint8Array(t)}function Oi(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Sg(s,n,r)),Sg(null,n,r),t.join("")}function Rk(e){return Math.round(Date.now()/1e3)+e}function Pk(){return Symbol("auth-callback")}const Lt=()=>typeof window<"u"&&typeof document<"u",bi={tested:!1,writable:!1},kb=()=>{if(!Lt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bi.tested)return bi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),bi.tested=!0,bi.writable=!0}catch{bi.tested=!0,bi.writable=!1}return bi.writable};function Lk(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Sb=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Dk=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",_s=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ei=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Pt=async(e,t)=>{await e.removeItem(t)};class kl{constructor(){this.promise=new kl.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}kl.promiseConstructor=Promise;function zu(e){const t=e.split(".");if(t.length!==3)throw new Lh("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!_k.test(t[r]))throw new Lh("JWT not in base64url format");return{header:JSON.parse(Ag(t[0])),payload:JSON.parse(Ag(t[1])),signature:Ns(t[2]),raw:{header:t[0],payload:t[1]}}}async function Mk(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Bk(e,t){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const u=await e(a);if(!t(a,null,u)){r(u);return}}catch(u){if(!t(a,u)){s(u);return}}})()})}function Fk(e){return("0"+e.toString(16)).substr(-2)}function jk(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,Fk).join("")}async function Uk(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function Hk(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await Uk(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function fs(e,t,n=!1){const r=jk();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await _s(e,`${t}-code-verifier`,s);const a=await Hk(r);return[a,r===a?"plain":"s256"]}const zk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Vk(e){const t=e.headers.get(Rh);if(!t||!t.match(zk))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function $k(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Wk(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Kk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ps(e){if(!Kk.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Md(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function qk(e,t){return new Proxy(e,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,s)}})}function Cg(e){return JSON.parse(JSON.stringify(e))}const xi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Yk=[502,503,504];async function Ng(e){var t;if(!Dk(e))throw new Ph(xi(e),0);if(Yk.includes(e.status))throw new Ph(xi(e),e.status);let n;try{n=await e.json()}catch(a){throw new Ii(xi(a),a)}let r;const s=Vk(e);if(s&&s.getTime()>=xb["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new wg(xi(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new hn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,u)=>a&&typeof u=="string",!0))throw new wg(xi(n),e.status,n.weak_password.reasons);throw new xk(xi(n),e.status||500,r)}const Gk=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ce(e,t,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[Rh]||(a[Rh]=xb["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const u=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(u.redirect_to=r.redirectTo);const c=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",d=await Qk(e,t,n+c,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function Qk(e,t,n,r,s,a){const u=Gk(t,r,s,a);let c;try{c=await e(n,Object.assign({},u))}catch(d){throw console.error(d),new Ph(xi(d),0)}if(c.ok||await Ng(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(d){await Ng(d)}}function Bn(e){var t;let n=null;Zk(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Rk(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Ig(e){const t=Bn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function qr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Xk(e){return{data:e,error:null}}function Jk(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=e,u=vl(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},d=Object.assign({},u);return{data:{properties:c,user:d},error:null}}function Og(e){return e}function Zk(e){return e.access_token&&e.refresh_token&&e.expires_in}const Bd=["global","local","others"];class e2{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Sb(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Bd[0]){if(Bd.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Bd.join(", ")}`);try{return await Ce(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:qr})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=vl(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Jk,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(xe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:qr})}catch(n){if(xe(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,a,u,c,d;try{const h={nextPage:null,lastPage:0,total:0},p=await Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Og});if(p.error)throw p.error;const m=await p.json(),b=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,T=(d=(c=p.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return T.length>0&&(T.forEach(w=>{const A=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(w.split(";")[1].split("=")[1]);h[`${S}Page`]=A}),h.total=parseInt(b)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(xe(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){ps(t);try{return await Ce(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:qr})}catch(n){if(xe(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ps(t);try{return await Ce(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:qr})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){ps(t);try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:qr})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){ps(t.userId);try{const{data:n,error:r}=await Ce(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(xe(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ps(t.userId),ps(t.id);try{return{data:await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,a,u,c,d;try{const h={nextPage:null,lastPage:0,total:0},p=await Ce(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Og});if(p.error)throw p.error;const m=await p.json(),b=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,T=(d=(c=p.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return T.length>0&&(T.forEach(w=>{const A=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(w.split(";")[1].split("=")[1]);h[`${S}Page`]=A}),h.total=parseInt(b)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(xe(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(t){try{return await Ce(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(xe(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Ce(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(xe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await Ce(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Ce(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(xe(n))return{data:null,error:n};throw n}}}function Rg(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const ms={debug:!!(globalThis&&kb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ab extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class t2 extends Ab{}async function n2(e,t,n){ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),ms.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new t2(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ms.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function r2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Cb(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function i2(e){return parseInt(e,16)}function s2(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function o2(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:a=new Date,nonce:u,notBefore:c,requestId:d,resources:h,scheme:p,uri:m,version:b}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const T=Cb(e.address),w=p?`${p}://${r}`:r,A=e.statement?`${e.statement}
`:"",S=`${w} wants you to sign in with your Ethereum account:
${T}

${A}`;let x=`URI: ${m}
Version: ${b}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${a.toISOString()}`;if(s&&(x+=`
Expiration Time: ${s.toISOString()}`),c&&(x+=`
Not Before: ${c.toISOString()}`),d&&(x+=`
Request ID: ${d}`),h){let R=`
Resources:`;for(const C of h){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);R+=`
- ${C}`}x+=R}return`${S}
${x}`}class yt extends Error{constructor({message:t,code:n,cause:r,name:s}){var a;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=s??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class sl extends yt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function a2({error:e,options:t}){var n,r,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new yt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new yt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new yt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new yt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new yt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new yt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new yt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new yt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const u=window.location.hostname;if(Nb(u)){if(a.rp.id!==u)return new yt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new yt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new yt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function u2({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new yt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new yt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(Nb(r)){if(n.rpId!==r)return new yt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new yt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class l2{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const c2=new l2;function d2(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=vl(e,["challenge","user","excludeCredentials"]),a=Ns(t).buffer,u=Object.assign(Object.assign({},n),{id:Ns(n.id).buffer}),c=Object.assign(Object.assign({},s),{challenge:a,user:u});if(r&&r.length>0){c.excludeCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const h=r[d];c.excludeCredentials[d]=Object.assign(Object.assign({},h),{id:Ns(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return c}function h2(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=vl(e,["challenge","allowCredentials"]),s=Ns(t).buffer,a=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const c=n[u];a.allowCredentials[u]=Object.assign(Object.assign({},c),{id:Ns(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function f2(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Oi(new Uint8Array(e.response.attestationObject)),clientDataJSON:Oi(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function p2(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Oi(new Uint8Array(s.authenticatorData)),clientDataJSON:Oi(new Uint8Array(s.clientDataJSON)),signature:Oi(new Uint8Array(s.signature)),userHandle:s.userHandle?Oi(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Nb(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Pg(){var e,t;return!!(Lt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function m2(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new sl("Browser returned unexpected credential type",t)}:{data:null,error:new sl("Empty credential response",t)}}catch(t){return{data:null,error:a2({error:t,options:e})}}}async function g2(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new sl("Browser returned unexpected credential type",t)}:{data:null,error:new sl("Empty credential response",t)}}catch(t){return{data:null,error:u2({error:t,options:e})}}}const y2={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},b2={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ol(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const a in s){const u=s[a];if(u!==void 0)if(Array.isArray(u))r[a]=u;else if(n(u))r[a]=u;else if(t(u)){const c=r[a];t(c)?r[a]=ol(c,u):r[a]=ol(u)}else r[a]=u}return r}function E2(e,t){return ol(y2,e,t||{})}function T2(e,t){return ol(b2,e,t||{})}class _2{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},a){try{const{data:u,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!u)return{data:null,error:c};const d=s??c2.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:h}=u.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${r}`),h.displayName||(h.displayName=h.name)}switch(u.webauthn.type){case"create":{const h=E2(u.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:p,error:m}=await m2({publicKey:h,signal:d});return p?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:p}},error:null}:{data:null,error:m}}case"request":{const h=T2(u.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:p,error:m}=await g2(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:h,signal:d}));return p?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:p}},error:null}:{data:null,error:m}}}}catch(u){return xe(u)?{data:null,error:u}:{data:null,error:new Ii("Unexpected error in challenge",u)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new ra("rpId is required for WebAuthn authentication")};try{if(!Pg())return{data:null,error:new Ii("Browser does not support WebAuthn",null)};const{data:u,error:c}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:a});if(!u)return{data:null,error:c};const{webauthn:d}=u;return this._verify({factorId:t,challengeId:u.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:r,credential_response:d.credential_response}})}catch(u){return xe(u)?{data:null,error:u}:{data:null,error:new Ii("Unexpected error in authenticate",u)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new ra("rpId is required for WebAuthn registration")};try{if(!Pg())return{data:null,error:new Ii("Browser does not support WebAuthn",null)};const{data:u,error:c}=await this._enroll({friendlyName:t});if(!u)return await this.client.mfa.listFactors().then(p=>{var m;return(m=p.data)===null||m===void 0?void 0:m.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===t&&b.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:c};const{data:d,error:h}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:a});return d?this._verify({factorId:u.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:r,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:h}}catch(u){return xe(u)?{data:null,error:u}:{data:null,error:new Ii("Unexpected error in register",u)}}}}r2();const v2={url:bk,storageKey:Ek,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Tk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Lg(e,t,n){return await n()}const gs={};class ia{get jwks(){var t,n;return(n=(t=gs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){gs[this.storageKey]=Object.assign(Object.assign({},gs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=gs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){gs[this.storageKey]=Object.assign(Object.assign({},gs[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},v2),t);if(this.storageKey=a.storageKey,this.instanceID=(n=ia.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,ia.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Lt()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new e2({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Sb(a.fetch),this.lock=a.lock||Lg,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&Lt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=n2:this.lock=Lg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new _2(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:kb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Rg(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Rg(this.memoryStorage)),Lt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u);try{await this._notifyAllSubscribers(u.data.event,u.data.session,!1)}catch(c){this._debug("#broadcastChannel","error",c)}})}this.initialize().catch(u=>{this._debug("#initialize()","error",u)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${vb}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Lt()&&(n=Lk(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Lt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),kk(a)){const d=(t=a.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:u,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",u,"redirect type",c),await this._saveSession(u),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return xe(n)?this._returnResult({error:n}):this._returnResult({error:new Ii("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const a=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Bn}),{data:u,error:c}=a;if(c||!u)return this._returnResult({data:{user:null,session:null},error:c});const d=u.session,h=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(a){if(xe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var n,r,s;try{let a;if("email"in t){const{email:p,password:m,options:b}=t;let T=null,w=null;this.flowType==="pkce"&&([T,w]=await fs(this.storage,this.storageKey)),a=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:p,password:m,data:(n=b==null?void 0:b.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:T,code_challenge_method:w},xform:Bn})}else if("phone"in t){const{phone:p,password:m,options:b}=t;a=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(r=b==null?void 0:b.data)!==null&&r!==void 0?r:{},channel:(s=b==null?void 0:b.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:Bn})}else throw new Uu("You must provide either an email or phone number and a password");const{data:u,error:c}=a;if(c||!u)return await Pt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const d=u.session,h=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(a){if(await Pt(this.storage,`${this.storageKey}-code-verifier`),xe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:u,options:c}=t;n=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:u,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Ig})}else if("phone"in t){const{phone:a,password:u,options:c}=t;n=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:u,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Ig})}else throw new Uu("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const a=new hs;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,a,u,c,d,h,p,m,b;let T,w;if("message"in t)T=t.message,w=t.signature;else{const{chain:A,wallet:S,statement:x,options:R}=t;let C;if(Lt())if(typeof S=="object")C=S;else{const te=window;if("ethereum"in te&&typeof te.ethereum=="object"&&"request"in te.ethereum&&typeof te.ethereum.request=="function")C=te.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=S}const j=new URL((n=R==null?void 0:R.url)!==null&&n!==void 0?n:window.location.href),M=await C.request({method:"eth_requestAccounts"}).then(te=>te).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=Cb(M[0]);let Q=(r=R==null?void 0:R.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!Q){const te=await C.request({method:"eth_chainId"});Q=i2(te)}const W={domain:j.host,address:I,statement:x,uri:j.href,version:"1",chainId:Q,nonce:(s=R==null?void 0:R.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(u=(a=R==null?void 0:R.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(c=R==null?void 0:R.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(d=R==null?void 0:R.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(h=R==null?void 0:R.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=R==null?void 0:R.signInWithEthereum)===null||p===void 0?void 0:p.resources};T=o2(W),w=await C.request({method:"personal_sign",params:[s2(T),I]})}try{const{data:A,error:S}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:w},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Bn});if(S)throw S;if(!A||!A.session||!A.user){const x=new hs;return this._returnResult({data:{user:null,session:null},error:x})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:S})}catch(A){if(xe(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(t){var n,r,s,a,u,c,d,h,p,m,b,T;let w,A;if("message"in t)w=t.message,A=t.signature;else{const{chain:S,wallet:x,statement:R,options:C}=t;let j;if(Lt())if(typeof x=="object")j=x;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))j=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const M=new URL((n=C==null?void 0:C.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const I=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),R?{statement:R}:null));let Q;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")Q=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)Q=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Q&&"signature"in Q&&(typeof Q.signedMessage=="string"||Q.signedMessage instanceof Uint8Array)&&Q.signature instanceof Uint8Array)w=typeof Q.signedMessage=="string"?Q.signedMessage:new TextDecoder().decode(Q.signedMessage),A=Q.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${M.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(s=(r=C==null?void 0:C.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=C==null?void 0:C.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((u=C==null?void 0:C.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((c=C==null?void 0:C.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((d=C==null?void 0:C.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((h=C==null?void 0:C.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((m=(p=C==null?void 0:C.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||m===void 0)&&m.length?["Resources",...C.signInWithSolana.resources.map(Q=>`- ${Q}`)]:[]].join(`
`);const I=await j.signMessage(new TextEncoder().encode(w),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=I}}try{const{data:S,error:x}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Oi(A)},!((b=t.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(T=t.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:Bn});if(x)throw x;if(!S||!S.session||!S.user){const R=new hs;return this._returnResult({data:{user:null,session:null},error:R})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:x})}catch(S){if(xe(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async _exchangeCodeForSession(t){const n=await Ei(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new Sk;const{data:a,error:u}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Bn});if(await Pt(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!a||!a.session||!a.user){const c=new hs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:u})}catch(a){if(await Pt(this.storage,`${this.storageKey}-code-verifier`),xe(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:a,nonce:u}=t,c=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Bn}),{data:d,error:h}=c;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d||!d.session||!d.user){const p=new hs;return this._returnResult({data:{user:null,session:null},error:p})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:h})}catch(n){if(xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,s,a,u;try{if("email"in t){const{email:c,options:d}=t;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await fs(this.storage,this.storageKey));const{error:m}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in t){const{phone:c,options:d}=t,{data:h,error:p}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(u=d==null?void 0:d.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p})}throw new Uu("You must provide either an email or phone number.")}catch(c){if(await Pt(this.storage,`${this.storageKey}-code-verifier`),xe(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(t){var n,r;try{let s,a;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:c}=await Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Bn});if(c)throw c;if(!u)throw new Error("An error occurred on token verification.");const d=u.session,h=u.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(s){if(xe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var n,r,s,a,u;try{let c=null,d=null;this.flowType==="pkce"&&([c,d]=await fs(this.storage,this.storageKey));const h=await Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:d}),headers:this.headers,xform:Xk});return!((a=h.data)===null||a===void 0)&&a.url&&Lt()&&!(!((u=t.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(c){if(await Pt(this.storage,`${this.storageKey}-code-verifier`),xe(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new hn;const{error:s}=await Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(xe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:a}=t,{error:u}=await Ce(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in t){const{phone:r,type:s,options:a}=t,{data:u,error:c}=await Ce(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new Uu("You must provide either an email or phone number and a type")}catch(n){if(xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ei(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Pd:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const u=await Ei(this.userStorage,this.storageKey+"-user");u!=null&&u.user?t.user=u.user:t.user=Md()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};t.user=qk(t.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:qr}):await this._useSession(async n=>{var r,s,a;const{data:u,error:c}=n;if(c)throw c;return!(!((r=u.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new hn}:await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=u.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:qr})})}catch(n){if(xe(n))return Ld(n)&&(await this._removeSession(),await Pt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new hn;const u=s.session;let c=null,d=null;this.flowType==="pkce"&&t.email!=null&&([c,d]=await fs(this.storage,this.storageKey));const{data:h,error:p}=await Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:d}),jwt:u.access_token,xform:qr});if(p)throw p;return u.user=h.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(r){if(await Pt(this.storage,`${this.storageKey}-code-verifier`),xe(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new hn;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:u}=zu(t.access_token);if(u.exp&&(r=u.exp,s=r<=n),s){const{data:c,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:d}=await this._getUser(t.access_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});a={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(xe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:u,error:c}=n;if(c)throw c;t=(r=u.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new hn;const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Lt())throw new Hu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Hu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new xg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new xg("No code detected.");const{data:R,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:u,expires_in:c,expires_at:d,token_type:h}=t;if(!a||!c||!u||!h)throw new Hu("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(c);let b=p+m;d&&(b=parseInt(d));const T=b-p;T*1e3<=Ts&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${m}s`);const w=b-m;p-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,b,p):p-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,b,p);const{data:A,error:S}=await this._getUser(a);if(S)throw S;const x={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:m,expires_at:b,refresh_token:u,token_type:h,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:t.type},error:null})}catch(r){if(xe(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ei(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a&&!Ld(a))return this._returnResult({error:a});const u=(r=s.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:c}=await this.admin.signOut(u,t);if(c&&!(wk(c)&&(c.status===404||c.status===401||c.status===403)||Ld(c)))return this._returnResult({error:c})}return t!=="others"&&(await this._removeSession(),await Pt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=Pk(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:u}=n;if(u)throw u;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await fs(this.storage,this.storageKey,!0));try{return await Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await Pt(this.storage,`${this.storageKey}-code-verifier`),xe(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var u,c,d,h,p;const{data:m,error:b}=a;if(b)throw b;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Ce(this.fetch,"GET",T,{headers:this.headers,jwt:(p=(h=m.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(s)throw s;return Lt()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(xe(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:a}}=n;if(s)throw s;const{options:u,provider:c,token:d,access_token:h,nonce:p}=t,m=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:c,id_token:d,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Bn}),{data:b,error:T}=m;return T?this._returnResult({data:{user:null,session:null},error:T}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new hs}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:T}))}catch(s){if(await Pt(this.storage,`${this.storageKey}-code-verifier`),xe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:u}=n;if(u)throw u;return await Ce(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Bk(async s=>(s>0&&await Mk(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Bn})),(s,a)=>{const u=200*Math.pow(2,s);return a&&Dd(a)&&Date.now()+u-r<Ts})}catch(r){if(this._debug(n,"error",r),xe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Lt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Ei(this.storage,this.storageKey);if(s&&this.userStorage){let u=await Ei(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:s.user},await _s(this.userStorage,this.storageKey+"-user",u)),s.user=(t=u==null?void 0:u.user)!==null&&t!==void 0?t:Md()}else if(s&&!s.user&&!s.user){const u=await Ei(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(s.user=u.user,await Pt(this.storage,this.storageKey+"-user"),await _s(this.storage,this.storageKey,s)):s.user=Md()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Pd;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Pd}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:u}=await this._callRefreshToken(s.refresh_token);u&&(console.error(u),Dd(u)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:c}=await this._getUser(s.access_token);!c&&(u!=null&&u.user)?(s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(r,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new hn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new kl;const{data:a,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!a.session)throw new hn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={data:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(s,"error",a),xe(a)){const u={data:null,error:a};return Dd(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],u=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(t,n)}catch(d){a.push(d)}});if(await Promise.all(u),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Pt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await _s(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=Cg(s);await _s(this.storage,this.storageKey,a)}else{const s=Cg(n);await _s(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Pt(this.storage,this.storageKey),await Pt(this.storage,this.storageKey+"-code-verifier"),await Pt(this.storage,this.storageKey+"-user"),this.userStorage&&await Pt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Lt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ts);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Ts);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ts}ms, refresh threshold is ${Oh} ticks`),s<=Oh&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Ab)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Lt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,u]=await fs(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(u)}`});s.push(c.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?this._returnResult({data:null,error:a}):await Ce(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:u}=n;if(u)return this._returnResult({data:null,error:u});const c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:h}=await Ce(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(t.factorType==="totp"&&d.type==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const u=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?f2(t.webauthn.credential_response):p2(t.webauthn.credential_response)})}:{code:t.code}),{data:c,error:d}=await Ce(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:u,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:d}))})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const u=await Ce(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(u.error)return u;const{data:c}=u;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:d2(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:h2(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(t){var n,r,s,a;if(t)try{const{payload:T}=zu(t);let w=null;T.aal&&(w=T.aal);let A=w;const{data:{user:S},error:x}=await this.getUser(t);if(x)return this._returnResult({data:null,error:x});((r=(n=S==null?void 0:S.factors)===null||n===void 0?void 0:n.filter(j=>j.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(A="aal2");const C=T.amr||[];return{data:{currentLevel:w,nextLevel:A,currentAuthenticationMethods:C},error:null}}catch(T){if(xe(T))return this._returnResult({data:null,error:T});throw T}const{data:{session:u},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=zu(u.access_token);let h=null;d.aal&&(h=d.aal);let p=h;((a=(s=u.user.factors)===null||s===void 0?void 0:s.filter(T=>T.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(p="aal2");const b=d.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:b},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await Ce(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new hn})})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new hn});const u=await Ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return u.data&&u.data.redirect_url&&Lt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new hn});const u=await Ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return u.data&&u.data.redirect_url&&Lt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await Ce(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new hn})})}catch(t){if(xe(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await Ce(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new hn})})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(c=>c.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(c=>c.kid===t),r&&this.jwks_cached_at+vk>s)return r;const{data:a,error:u}=await Ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,r=a.keys.find(c=>c.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:T,error:w}=await this.getSession();if(w||!T.session)return this._returnResult({data:null,error:w});r=T.session.access_token}const{header:s,payload:a,signature:u,raw:{header:c,payload:d}}=zu(r);n!=null&&n.allowExpired||$k(a.exp);const h=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!h){const{error:T}=await this.getUser(r);if(T)throw T;return{data:{claims:a,header:s,signature:u},error:null}}const p=Wk(s.alg),m=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,m,u,Ok(`${c}.${d}`)))throw new Lh("Invalid JWT signature");return{data:{claims:a,header:s,signature:u},error:null}}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}}}ia.nextInstanceID={};const x2=ia,w2="2.93.1";let Mo="";typeof Deno<"u"?Mo="deno":typeof document<"u"?Mo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Mo="react-native":Mo="node";function k2(){const e=globalThis.process;if(e&&e.platform){const t=e.platform;if(t==="darwin")return"macOS";if(t==="win32")return"Windows";if(t==="linux")return"Linux";if(t==="android")return"Android"}if(typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platform){const t=navigator.userAgentData.platform;if(t==="macOS")return"macOS";if(t==="Windows")return"Windows";if(t==="Linux")return"Linux";if(t==="Android")return"Android";if(t==="iOS")return"iOS"}return null}function S2(){const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node&&typeof window>"u")try{const n=globalThis.require;if(n)return n("os").release()}catch{return null}}if(typeof Deno<"u"&&Deno.osRelease)try{return Deno.osRelease()}catch{return null}return typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platformVersion?navigator.userAgentData.platformVersion:null}function A2(){if(typeof Deno<"u")return"deno";if(typeof Bun<"u")return"bun";const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node)return"node"}return null}function C2(){if(typeof Deno<"u"&&Deno.version)return Deno.version.deno;if(typeof Bun<"u"&&Bun.version)return Bun.version;const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node)return t.node}return null}function N2(){const e={"X-Client-Info":`supabase-js-${Mo}/${w2}`},t=k2();t&&(e["X-Supabase-Client-Platform"]=t);const n=S2();n&&(e["X-Supabase-Client-Platform-Version"]=n);const r=A2();r&&(e["X-Supabase-Client-Runtime"]=r);const s=C2();return s&&(e["X-Supabase-Client-Runtime-Version"]=s),e}const I2=N2(),O2={headers:I2},R2={schema:"public"},P2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},L2={};function sa(e){"@babel/helpers - typeof";return sa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sa(e)}function D2(e,t){if(sa(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(sa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function M2(e){var t=D2(e,"string");return sa(t)=="symbol"?t:t+""}function B2(e,t,n){return(t=M2(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dg(Object(n),!0).forEach(function(r){B2(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dg(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const F2=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),j2=()=>Headers,U2=(e,t,n)=>{const r=F2(n),s=j2();return async(a,u)=>{var c;const d=(c=await t())!==null&&c!==void 0?c:e;let h=new s(u==null?void 0:u.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${d}`),r(a,ct(ct({},u),{},{headers:h}))}};function H2(e){return e.endsWith("/")?e:e+"/"}function z2(e,t){var n,r;const{db:s,auth:a,realtime:u,global:c}=e,{db:d,auth:h,realtime:p,global:m}=t,b={db:ct(ct({},d),s),auth:ct(ct({},h),a),realtime:ct(ct({},p),u),storage:{},global:ct(ct(ct({},m),c),{},{headers:ct(ct({},(n=m==null?void 0:m.headers)!==null&&n!==void 0?n:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?b.accessToken=e.accessToken:delete b.accessToken,b}function V2(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(H2(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var $2=class extends x2{constructor(e){super(e)}},W2=class{constructor(e,t,n){var r,s;this.supabaseUrl=e,this.supabaseKey=t;const a=V2(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const u=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:R2,realtime:L2,auth:ct(ct({},P2),{},{storageKey:u}),global:O2},d=z2(n??{},c);if(this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=d.auth)!==null&&h!==void 0?h:{},this.headers,d.global.fetch)}this.fetch=U2(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(ct({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new xw(new URL("rest/v1",a).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new yk(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new bw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:a,flowType:u,lock:c,debug:d,throwOnError:h},p,m){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $2({url:this.authUrl.href,headers:ct(ct({},b),p),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,flowType:u,lock:c,debug:d,throwOnError:h,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(T=>T.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Uw(this.realtimeUrl.href,ct(ct({},e),{},{params:ct(ct({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const K2=(e,t,n)=>new W2(e,t,n);function q2(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}q2()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ib="https://modopafybeslbcqjxsve.supabase.co",Ob="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1vZG9wYWZ5YmVzbGJjcWp4c3ZlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyNTM0MjEsImV4cCI6MjA3MDgyOTQyMX0.8gxL0b9flTUyoltiEIJx8Djuiyx16rySlffHkd_nm1U",Ze=K2(Ib,Ob,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}),lM=Object.freeze(Object.defineProperty({__proto__:null,supabase:Ze,supabaseKey:Ob,supabaseUrl:Ib},Symbol.toStringTag,{value:"Module"}));function Mg(e){const t=[],n=String(e||"");let r=n.indexOf(","),s=0,a=!1;for(;!a;){r===-1&&(r=n.length,a=!0);const u=n.slice(s,r).trim();(u||!a)&&t.push(u),s=r+1,r=n.indexOf(",",s)}return t}function Rb(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Y2=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,G2=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Q2={};function Bg(e,t){return(Q2.jsx?G2:Y2).test(e)}const X2=/[ \t\n\f\r]/g;function J2(e){return typeof e=="object"?e.type==="text"?Fg(e.value):!1:Fg(e)}function Fg(e){return e.replace(X2,"")===""}class ga{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}ga.prototype.normal={};ga.prototype.property={};ga.prototype.space=void 0;function Pb(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new ga(n,r,t)}function oa(e){return e.toLowerCase()}class sn{constructor(t,n){this.attribute=n,this.property=t}}sn.prototype.attribute="";sn.prototype.booleanish=!1;sn.prototype.boolean=!1;sn.prototype.commaOrSpaceSeparated=!1;sn.prototype.commaSeparated=!1;sn.prototype.defined=!1;sn.prototype.mustUseProperty=!1;sn.prototype.number=!1;sn.prototype.overloadedBoolean=!1;sn.prototype.property="";sn.prototype.spaceSeparated=!1;sn.prototype.space=void 0;let Z2=0;const De=ji(),gt=ji(),Dh=ji(),he=ji(),Je=ji(),Is=ji(),fn=ji();function ji(){return 2**++Z2}const Mh=Object.freeze(Object.defineProperty({__proto__:null,boolean:De,booleanish:gt,commaOrSpaceSeparated:fn,commaSeparated:Is,number:he,overloadedBoolean:Dh,spaceSeparated:Je},Symbol.toStringTag,{value:"Module"})),Fd=Object.keys(Mh);class xf extends sn{constructor(t,n,r,s){let a=-1;if(super(t,n),jg(this,"space",s),typeof r=="number")for(;++a<Fd.length;){const u=Fd[a];jg(this,Fd[a],(r&Mh[u])===Mh[u])}}}xf.prototype.defined=!0;function jg(e,t,n){n&&(e[t]=n)}function Ms(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const a=new xf(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[oa(r)]=r,n[oa(a.attribute)]=r}return new ga(t,n,e.space)}const Lb=Ms({properties:{ariaActiveDescendant:null,ariaAtomic:gt,ariaAutoComplete:null,ariaBusy:gt,ariaChecked:gt,ariaColCount:he,ariaColIndex:he,ariaColSpan:he,ariaControls:Je,ariaCurrent:null,ariaDescribedBy:Je,ariaDetails:null,ariaDisabled:gt,ariaDropEffect:Je,ariaErrorMessage:null,ariaExpanded:gt,ariaFlowTo:Je,ariaGrabbed:gt,ariaHasPopup:null,ariaHidden:gt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Je,ariaLevel:he,ariaLive:null,ariaModal:gt,ariaMultiLine:gt,ariaMultiSelectable:gt,ariaOrientation:null,ariaOwns:Je,ariaPlaceholder:null,ariaPosInSet:he,ariaPressed:gt,ariaReadOnly:gt,ariaRelevant:null,ariaRequired:gt,ariaRoleDescription:Je,ariaRowCount:he,ariaRowIndex:he,ariaRowSpan:he,ariaSelected:gt,ariaSetSize:he,ariaSort:null,ariaValueMax:he,ariaValueMin:he,ariaValueNow:he,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Db(e,t){return t in e?e[t]:t}function Mb(e,t){return Db(e,t.toLowerCase())}const eS=Ms({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Is,acceptCharset:Je,accessKey:Je,action:null,allow:null,allowFullScreen:De,allowPaymentRequest:De,allowUserMedia:De,alt:null,as:null,async:De,autoCapitalize:null,autoComplete:Je,autoFocus:De,autoPlay:De,blocking:Je,capture:null,charSet:null,checked:De,cite:null,className:Je,cols:he,colSpan:null,content:null,contentEditable:gt,controls:De,controlsList:Je,coords:he|Is,crossOrigin:null,data:null,dateTime:null,decoding:null,default:De,defer:De,dir:null,dirName:null,disabled:De,download:Dh,draggable:gt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:De,formTarget:null,headers:Je,height:he,hidden:Dh,high:he,href:null,hrefLang:null,htmlFor:Je,httpEquiv:Je,id:null,imageSizes:null,imageSrcSet:null,inert:De,inputMode:null,integrity:null,is:null,isMap:De,itemId:null,itemProp:Je,itemRef:Je,itemScope:De,itemType:Je,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:De,low:he,manifest:null,max:null,maxLength:he,media:null,method:null,min:null,minLength:he,multiple:De,muted:De,name:null,nonce:null,noModule:De,noValidate:De,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:De,optimum:he,pattern:null,ping:Je,placeholder:null,playsInline:De,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:De,referrerPolicy:null,rel:Je,required:De,reversed:De,rows:he,rowSpan:he,sandbox:Je,scope:null,scoped:De,seamless:De,selected:De,shadowRootClonable:De,shadowRootDelegatesFocus:De,shadowRootMode:null,shape:null,size:he,sizes:null,slot:null,span:he,spellCheck:gt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:he,step:null,style:null,tabIndex:he,target:null,title:null,translate:null,type:null,typeMustMatch:De,useMap:null,value:gt,width:he,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Je,axis:null,background:null,bgColor:null,border:he,borderColor:null,bottomMargin:he,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:De,declare:De,event:null,face:null,frame:null,frameBorder:null,hSpace:he,leftMargin:he,link:null,longDesc:null,lowSrc:null,marginHeight:he,marginWidth:he,noResize:De,noHref:De,noShade:De,noWrap:De,object:null,profile:null,prompt:null,rev:null,rightMargin:he,rules:null,scheme:null,scrolling:gt,standby:null,summary:null,text:null,topMargin:he,valueType:null,version:null,vAlign:null,vLink:null,vSpace:he,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:De,disableRemotePlayback:De,prefix:null,property:null,results:he,security:null,unselectable:null},space:"html",transform:Mb}),tS=Ms({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:fn,accentHeight:he,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:he,amplitude:he,arabicForm:null,ascent:he,attributeName:null,attributeType:null,azimuth:he,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:he,by:null,calcMode:null,capHeight:he,className:Je,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:he,diffuseConstant:he,direction:null,display:null,dur:null,divisor:he,dominantBaseline:null,download:De,dx:null,dy:null,edgeMode:null,editable:null,elevation:he,enableBackground:null,end:null,event:null,exponent:he,externalResourcesRequired:null,fill:null,fillOpacity:he,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Is,g2:Is,glyphName:Is,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:he,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:he,horizOriginX:he,horizOriginY:he,id:null,ideographic:he,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:he,k:he,k1:he,k2:he,k3:he,k4:he,kernelMatrix:fn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:he,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:he,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:he,overlineThickness:he,paintOrder:null,panose1:null,path:null,pathLength:he,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Je,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:he,pointsAtY:he,pointsAtZ:he,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:fn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:fn,rev:fn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:fn,requiredFeatures:fn,requiredFonts:fn,requiredFormats:fn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:he,specularExponent:he,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:he,strikethroughThickness:he,string:null,stroke:null,strokeDashArray:fn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:he,strokeOpacity:he,strokeWidth:null,style:null,surfaceScale:he,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:fn,tabIndex:he,tableValues:null,target:null,targetX:he,targetY:he,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:fn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:he,underlineThickness:he,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:he,values:null,vAlphabetic:he,vMathematical:he,vectorEffect:null,vHanging:he,vIdeographic:he,version:null,vertAdvY:he,vertOriginX:he,vertOriginY:he,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:he,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Db}),Bb=Ms({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Fb=Ms({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Mb}),jb=Ms({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),nS={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},rS=/[A-Z]/g,Ug=/-[a-z]/g,iS=/^data[-\w.:]+$/i;function Sl(e,t){const n=oa(t);let r=t,s=sn;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&iS.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(Ug,oS);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!Ug.test(a)){let u=a.replace(rS,sS);u.charAt(0)!=="-"&&(u="-"+u),t="data"+u}}s=xf}return new s(r,t)}function sS(e){return"-"+e.toLowerCase()}function oS(e){return e.charAt(1).toUpperCase()}const ya=Pb([Lb,eS,Bb,Fb,jb],"html"),Jr=Pb([Lb,tS,Bb,Fb,jb],"svg");function Hg(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function Ub(e){return e.join(" ").trim()}var ys={},jd,zg;function aS(){if(zg)return jd;zg=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,u=/^[;\s]*/,c=/^\s+|\s+$/g,d=`
`,h="/",p="*",m="",b="comment",T="declaration";function w(S,x){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];x=x||{};var R=1,C=1;function j(ue){var re=ue.match(t);re&&(R+=re.length);var ne=ue.lastIndexOf(d);C=~ne?ue.length-ne:C+ue.length}function M(){var ue={line:R,column:C};return function(re){return re.position=new I(ue),te(),re}}function I(ue){this.start=ue,this.end={line:R,column:C},this.source=x.source}I.prototype.content=S;function Q(ue){var re=new Error(x.source+":"+R+":"+C+": "+ue);if(re.reason=ue,re.filename=x.source,re.line=R,re.column=C,re.source=S,!x.silent)throw re}function W(ue){var re=ue.exec(S);if(re){var ne=re[0];return j(ne),S=S.slice(ne.length),re}}function te(){W(n)}function B(ue){var re;for(ue=ue||[];re=q();)re!==!1&&ue.push(re);return ue}function q(){var ue=M();if(!(h!=S.charAt(0)||p!=S.charAt(1))){for(var re=2;m!=S.charAt(re)&&(p!=S.charAt(re)||h!=S.charAt(re+1));)++re;if(re+=2,m===S.charAt(re-1))return Q("End of comment missing");var ne=S.slice(2,re-2);return C+=2,j(ne),S=S.slice(re),C+=2,ue({type:b,comment:ne})}}function Z(){var ue=M(),re=W(r);if(re){if(q(),!W(s))return Q("property missing ':'");var ne=W(a),K=ue({type:T,property:A(re[0].replace(e,m)),value:ne?A(ne[0].replace(e,m)):m});return W(u),K}}function de(){var ue=[];B(ue);for(var re;re=Z();)re!==!1&&(ue.push(re),B(ue));return ue}return te(),de()}function A(S){return S?S.replace(c,m):m}return jd=w,jd}var Vg;function uS(){if(Vg)return ys;Vg=1;var e=ys&&ys.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ys,"__esModule",{value:!0}),ys.default=n;const t=e(aS());function n(r,s){let a=null;if(!r||typeof r!="string")return a;const u=(0,t.default)(r),c=typeof s=="function";return u.forEach(d=>{if(d.type!=="declaration")return;const{property:h,value:p}=d;c?s(h,p,d):p&&(a=a||{},a[h]=p)}),a}return ys}var No={},$g;function lS(){if($g)return No;$g=1,Object.defineProperty(No,"__esModule",{value:!0}),No.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(h){return!h||n.test(h)||e.test(h)},u=function(h,p){return p.toUpperCase()},c=function(h,p){return"".concat(p,"-")},d=function(h,p){return p===void 0&&(p={}),a(h)?h:(h=h.toLowerCase(),p.reactCompat?h=h.replace(s,c):h=h.replace(r,c),h.replace(t,u))};return No.camelCase=d,No}var Io,Wg;function cS(){if(Wg)return Io;Wg=1;var e=Io&&Io.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},t=e(uS()),n=lS();function r(s,a){var u={};return!s||typeof s!="string"||(0,t.default)(s,function(c,d){c&&d&&(u[(0,n.camelCase)(c,a)]=d)}),u}return r.default=r,Io=r,Io}var dS=cS();const hS=_l(dS),Al=Hb("end"),Zn=Hb("start");function Hb(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function zb(e){const t=Zn(e),n=Al(e);if(t&&n)return{start:t,end:n}}function zo(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Kg(e.position):"start"in e||"end"in e?Kg(e):"line"in e||"column"in e?Bh(e):""}function Bh(e){return qg(e&&e.line)+":"+qg(e&&e.column)}function Kg(e){return Bh(e&&e.start)+"-"+Bh(e&&e.end)}function qg(e){return e&&typeof e=="number"?e:1}class zt extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},u=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?s=t:!a.cause&&t&&(u=!0,s=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof r=="string"){const d=r.indexOf(":");d===-1?a.ruleId=r:(a.source=r.slice(0,d),a.ruleId=r.slice(d+1))}if(!a.place&&a.ancestors&&a.ancestors){const d=a.ancestors[a.ancestors.length-1];d&&(a.place=d.position)}const c=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=c?c.line:void 0,this.name=zo(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=u&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}zt.prototype.file="";zt.prototype.name="";zt.prototype.reason="";zt.prototype.message="";zt.prototype.stack="";zt.prototype.column=void 0;zt.prototype.line=void 0;zt.prototype.ancestors=void 0;zt.prototype.cause=void 0;zt.prototype.fatal=void 0;zt.prototype.place=void 0;zt.prototype.ruleId=void 0;zt.prototype.source=void 0;const wf={}.hasOwnProperty,fS=new Map,pS=/[A-Z]/g,mS=new Set(["table","tbody","thead","tfoot","tr"]),gS=new Set(["td","th"]),Vb="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function yS(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=kS(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=wS(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Jr:ya,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=$b(s,e,void 0);return a&&typeof a!="string"?a:s.create(e,s.Fragment,{children:a||void 0},void 0)}function $b(e,t,n){if(t.type==="element")return bS(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return ES(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return _S(e,t,n);if(t.type==="mdxjsEsm")return TS(e,t);if(t.type==="root")return vS(e,t,n);if(t.type==="text")return xS(e,t)}function bS(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Jr,e.schema=s),e.ancestors.push(t);const a=Kb(e,t.tagName,!1),u=SS(e,t);let c=Sf(e,t);return mS.has(t.tagName)&&(c=c.filter(function(d){return typeof d=="string"?!J2(d):!0})),Wb(e,u,a,t),kf(u,c),e.ancestors.pop(),e.schema=r,e.create(t,a,u,n)}function ES(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}aa(e,t.position)}function TS(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);aa(e,t.position)}function _S(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=Jr,e.schema=s),e.ancestors.push(t);const a=t.name===null?e.Fragment:Kb(e,t.name,!0),u=AS(e,t),c=Sf(e,t);return Wb(e,u,a,t),kf(u,c),e.ancestors.pop(),e.schema=r,e.create(t,a,u,n)}function vS(e,t,n){const r={};return kf(r,Sf(e,t)),e.create(t,e.Fragment,r,n)}function xS(e,t){return t.value}function Wb(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function kf(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function wS(e,t,n){return r;function r(s,a,u,c){const h=Array.isArray(u.children)?n:t;return c?h(a,u,c):h(a,u)}}function kS(e,t){return n;function n(r,s,a,u){const c=Array.isArray(a.children),d=Zn(r);return t(s,a,u,c,{columnNumber:d?d.column-1:void 0,fileName:e,lineNumber:d?d.line:void 0},void 0)}}function SS(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&wf.call(t.properties,s)){const a=CS(e,s,t.properties[s]);if(a){const[u,c]=a;e.tableCellAlignToStyle&&u==="align"&&typeof c=="string"&&gS.has(t.tagName)?r=c:n[u]=c}}if(r){const a=n.style||(n.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function AS(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const a=r.data.estree.body[0];a.type;const u=a.expression;u.type;const c=u.properties[0];c.type,Object.assign(n,e.evaluater.evaluateExpression(c.argument))}else aa(e,t.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const c=r.value.data.estree.body[0];c.type,a=e.evaluater.evaluateExpression(c.expression)}else aa(e,t.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function Sf(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:fS;for(;++r<t.children.length;){const a=t.children[r];let u;if(e.passKeys){const d=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(d){const h=s.get(d)||0;u=d+"-"+h,s.set(d,h+1)}}const c=$b(e,a,u);c!==void 0&&n.push(c)}return n}function CS(e,t,n){const r=Sl(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Rb(n):Ub(n)),r.property==="style"){let s=typeof n=="object"?n:NS(e,String(n));return e.stylePropertyNameCase==="css"&&(s=IS(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?nS[r.property]||r.property:r.attribute,n]}}function NS(e,t){try{return hS(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new zt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=Vb+"#cannot-parse-style-attribute",s}}function Kb(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let a=-1,u;for(;++a<s.length;){const c=Bg(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};u=u?{type:"MemberExpression",object:u,property:c,computed:!!(a&&c.type==="Literal"),optional:!1}:c}r=u}else r=Bg(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return wf.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);aa(e)}function aa(e,t){const n=new zt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Vb+"#cannot-handle-mdx-estrees-without-createevaluater",n}function IS(e){const t={};let n;for(n in e)wf.call(e,n)&&(t[OS(n)]=e[n]);return t}function OS(e){let t=e.replace(pS,RS);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function RS(e){return"-"+e.toLowerCase()}const Ud={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},PS={};function Af(e,t){const n=PS,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return qb(e,r,s)}function qb(e,t,n){if(LS(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Yg(e.children,t,n)}return Array.isArray(e)?Yg(e,t,n):""}function Yg(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=qb(e[s],t,n);return r.join("")}function LS(e){return!!(e&&typeof e=="object")}const Gg=document.createElement("i");function Cf(e){const t="&"+e+";";Gg.innerHTML=t;const n=Gg.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function pn(e,t,n,r){const s=e.length;let a=0,u;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)u=Array.from(r),u.unshift(t,n),e.splice(...u);else for(n&&e.splice(t,n);a<r.length;)u=r.slice(a,a+1e4),u.unshift(t,0),e.splice(...u),a+=1e4,t+=1e4}function wn(e,t){return e.length>0?(pn(e,e.length,0,t),e):t}const Qg={}.hasOwnProperty;function Yb(e){const t={};let n=-1;for(;++n<e.length;)DS(t,e[n]);return t}function DS(e,t){let n;for(n in t){const s=(Qg.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let u;if(a)for(u in a){Qg.call(s,u)||(s[u]=[]);const c=a[u];MS(s[u],Array.isArray(c)?c:c?[c]:[])}}}function MS(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);pn(e,0,0,r)}function Gb(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Un(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Kt=Zr(/[A-Za-z]/),Ut=Zr(/[\dA-Za-z]/),BS=Zr(/[#-'*+\--9=?A-Z^-~]/);function al(e){return e!==null&&(e<32||e===127)}const Fh=Zr(/\d/),FS=Zr(/[\dA-Fa-f]/),jS=Zr(/[!-/:-@[-`{-~]/);function Ae(e){return e!==null&&e<-2}function Ge(e){return e!==null&&(e<0||e===32)}function He(e){return e===-2||e===-1||e===32}const Cl=Zr(new RegExp("\\p{P}|\\p{S}","u")),Bi=Zr(/\s/);function Zr(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Bs(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const a=e.charCodeAt(n);let u="";if(a===37&&Ut(e.charCodeAt(n+1))&&Ut(e.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(u=String.fromCharCode(a));else if(a>55295&&a<57344){const c=e.charCodeAt(n+1);a<56320&&c>56319&&c<57344?(u=String.fromCharCode(a,c),s=1):u=""}else u=String.fromCharCode(a);u&&(t.push(e.slice(r,n),encodeURIComponent(u)),r=n+s+1,u=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function ze(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return u;function u(d){return He(d)?(e.enter(n),c(d)):t(d)}function c(d){return He(d)&&a++<s?(e.consume(d),c):(e.exit(n),t(d))}}const US={tokenize:HS};function HS(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(c){if(c===null){e.consume(c);return}return e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),ze(e,t,"linePrefix")}function s(c){return e.enter("paragraph"),a(c)}function a(c){const d=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=d),n=d,u(c)}function u(c){if(c===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(c);return}return Ae(c)?(e.consume(c),e.exit("chunkText"),a):(e.consume(c),u)}}const zS={tokenize:VS},Xg={tokenize:$S};function VS(e){const t=this,n=[];let r=0,s,a,u;return c;function c(C){if(r<n.length){const j=n[r];return t.containerState=j[1],e.attempt(j[0].continuation,d,h)(C)}return h(C)}function d(C){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&R();const j=t.events.length;let M=j,I;for(;M--;)if(t.events[M][0]==="exit"&&t.events[M][1].type==="chunkFlow"){I=t.events[M][1].end;break}x(r);let Q=j;for(;Q<t.events.length;)t.events[Q][1].end={...I},Q++;return pn(t.events,M+1,0,t.events.slice(j)),t.events.length=Q,h(C)}return c(C)}function h(C){if(r===n.length){if(!s)return b(C);if(s.currentConstruct&&s.currentConstruct.concrete)return w(C);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Xg,p,m)(C)}function p(C){return s&&R(),x(r),b(C)}function m(C){return t.parser.lazy[t.now().line]=r!==n.length,u=t.now().offset,w(C)}function b(C){return t.containerState={},e.attempt(Xg,T,w)(C)}function T(C){return r++,n.push([t.currentConstruct,t.containerState]),b(C)}function w(C){if(C===null){s&&R(),x(0),e.consume(C);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),A(C)}function A(C){if(C===null){S(e.exit("chunkFlow"),!0),x(0),e.consume(C);return}return Ae(C)?(e.consume(C),S(e.exit("chunkFlow")),r=0,t.interrupt=void 0,c):(e.consume(C),A)}function S(C,j){const M=t.sliceStream(C);if(j&&M.push(null),C.previous=a,a&&(a.next=C),a=C,s.defineSkip(C.start),s.write(M),t.parser.lazy[C.start.line]){let I=s.events.length;for(;I--;)if(s.events[I][1].start.offset<u&&(!s.events[I][1].end||s.events[I][1].end.offset>u))return;const Q=t.events.length;let W=Q,te,B;for(;W--;)if(t.events[W][0]==="exit"&&t.events[W][1].type==="chunkFlow"){if(te){B=t.events[W][1].end;break}te=!0}for(x(r),I=Q;I<t.events.length;)t.events[I][1].end={...B},I++;pn(t.events,W+1,0,t.events.slice(Q)),t.events.length=I}}function x(C){let j=n.length;for(;j-- >C;){const M=n[j];t.containerState=M[1],M[0].exit.call(t,e)}n.length=C}function R(){s.write([null]),a=void 0,s=void 0,t.containerState._closeFlow=void 0}}function $S(e,t,n){return ze(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Rs(e){if(e===null||Ge(e)||Bi(e))return 1;if(Cl(e))return 2}function Nl(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const a=e[s].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const jh={name:"attention",resolveAll:WS,tokenize:KS};function WS(e,t){let n=-1,r,s,a,u,c,d,h,p;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;d=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const m={...e[r][1].end},b={...e[n][1].start};Jg(m,-d),Jg(b,d),u={type:d>1?"strongSequence":"emphasisSequence",start:m,end:{...e[r][1].end}},c={type:d>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:b},a={type:d>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:d>1?"strong":"emphasis",start:{...u.start},end:{...c.end}},e[r][1].end={...u.start},e[n][1].start={...c.end},h=[],e[r][1].end.offset-e[r][1].start.offset&&(h=wn(h,[["enter",e[r][1],t],["exit",e[r][1],t]])),h=wn(h,[["enter",s,t],["enter",u,t],["exit",u,t],["enter",a,t]]),h=wn(h,Nl(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),h=wn(h,[["exit",a,t],["enter",c,t],["exit",c,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(p=2,h=wn(h,[["enter",e[n][1],t],["exit",e[n][1],t]])):p=0,pn(e,r-1,n-r+3,h),n=r+h.length-p-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function KS(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Rs(r);let a;return u;function u(d){return a=d,e.enter("attentionSequence"),c(d)}function c(d){if(d===a)return e.consume(d),c;const h=e.exit("attentionSequence"),p=Rs(d),m=!p||p===2&&s||n.includes(d),b=!s||s===2&&p||n.includes(r);return h._open=!!(a===42?m:m&&(s||!b)),h._close=!!(a===42?b:b&&(p||!m)),t(d)}}function Jg(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const qS={name:"autolink",tokenize:YS};function YS(e,t,n){let r=0;return s;function s(T){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(T),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(T){return Kt(T)?(e.consume(T),u):T===64?n(T):h(T)}function u(T){return T===43||T===45||T===46||Ut(T)?(r=1,c(T)):h(T)}function c(T){return T===58?(e.consume(T),r=0,d):(T===43||T===45||T===46||Ut(T))&&r++<32?(e.consume(T),c):(r=0,h(T))}function d(T){return T===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(T),e.exit("autolinkMarker"),e.exit("autolink"),t):T===null||T===32||T===60||al(T)?n(T):(e.consume(T),d)}function h(T){return T===64?(e.consume(T),p):BS(T)?(e.consume(T),h):n(T)}function p(T){return Ut(T)?m(T):n(T)}function m(T){return T===46?(e.consume(T),r=0,p):T===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(T),e.exit("autolinkMarker"),e.exit("autolink"),t):b(T)}function b(T){if((T===45||Ut(T))&&r++<63){const w=T===45?b:m;return e.consume(T),w}return n(T)}}const ba={partial:!0,tokenize:GS};function GS(e,t,n){return r;function r(a){return He(a)?ze(e,s,"linePrefix")(a):s(a)}function s(a){return a===null||Ae(a)?t(a):n(a)}}const Qb={continuation:{tokenize:XS},exit:JS,name:"blockQuote",tokenize:QS};function QS(e,t,n){const r=this;return s;function s(u){if(u===62){const c=r.containerState;return c.open||(e.enter("blockQuote",{_container:!0}),c.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(u),e.exit("blockQuoteMarker"),a}return n(u)}function a(u){return He(u)?(e.enter("blockQuotePrefixWhitespace"),e.consume(u),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(u))}}function XS(e,t,n){const r=this;return s;function s(u){return He(u)?ze(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u):a(u)}function a(u){return e.attempt(Qb,t,n)(u)}}function JS(e){e.exit("blockQuote")}const Xb={name:"characterEscape",tokenize:ZS};function ZS(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),s}function s(a){return jS(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const Jb={name:"characterReference",tokenize:eA};function eA(e,t,n){const r=this;let s=0,a,u;return c;function c(m){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),d}function d(m){return m===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(m),e.exit("characterReferenceMarkerNumeric"),h):(e.enter("characterReferenceValue"),a=31,u=Ut,p(m))}function h(m){return m===88||m===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(m),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,u=FS,p):(e.enter("characterReferenceValue"),a=7,u=Fh,p(m))}function p(m){if(m===59&&s){const b=e.exit("characterReferenceValue");return u===Ut&&!Cf(r.sliceSerialize(b))?n(m):(e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return u(m)&&s++<a?(e.consume(m),p):n(m)}}const Zg={partial:!0,tokenize:nA},ey={concrete:!0,name:"codeFenced",tokenize:tA};function tA(e,t,n){const r=this,s={partial:!0,tokenize:M};let a=0,u=0,c;return d;function d(I){return h(I)}function h(I){const Q=r.events[r.events.length-1];return a=Q&&Q[1].type==="linePrefix"?Q[2].sliceSerialize(Q[1],!0).length:0,c=I,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),p(I)}function p(I){return I===c?(u++,e.consume(I),p):u<3?n(I):(e.exit("codeFencedFenceSequence"),He(I)?ze(e,m,"whitespace")(I):m(I))}function m(I){return I===null||Ae(I)?(e.exit("codeFencedFence"),r.interrupt?t(I):e.check(Zg,A,j)(I)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),b(I))}function b(I){return I===null||Ae(I)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),m(I)):He(I)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ze(e,T,"whitespace")(I)):I===96&&I===c?n(I):(e.consume(I),b)}function T(I){return I===null||Ae(I)?m(I):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),w(I))}function w(I){return I===null||Ae(I)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),m(I)):I===96&&I===c?n(I):(e.consume(I),w)}function A(I){return e.attempt(s,j,S)(I)}function S(I){return e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),x}function x(I){return a>0&&He(I)?ze(e,R,"linePrefix",a+1)(I):R(I)}function R(I){return I===null||Ae(I)?e.check(Zg,A,j)(I):(e.enter("codeFlowValue"),C(I))}function C(I){return I===null||Ae(I)?(e.exit("codeFlowValue"),R(I)):(e.consume(I),C)}function j(I){return e.exit("codeFenced"),t(I)}function M(I,Q,W){let te=0;return B;function B(re){return I.enter("lineEnding"),I.consume(re),I.exit("lineEnding"),q}function q(re){return I.enter("codeFencedFence"),He(re)?ze(I,Z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(re):Z(re)}function Z(re){return re===c?(I.enter("codeFencedFenceSequence"),de(re)):W(re)}function de(re){return re===c?(te++,I.consume(re),de):te>=u?(I.exit("codeFencedFenceSequence"),He(re)?ze(I,ue,"whitespace")(re):ue(re)):W(re)}function ue(re){return re===null||Ae(re)?(I.exit("codeFencedFence"),Q(re)):W(re)}}}function nA(e,t,n){const r=this;return s;function s(u){return u===null?n(u):(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),a)}function a(u){return r.parser.lazy[r.now().line]?n(u):t(u)}}const Hd={name:"codeIndented",tokenize:iA},rA={partial:!0,tokenize:sA};function iA(e,t,n){const r=this;return s;function s(h){return e.enter("codeIndented"),ze(e,a,"linePrefix",5)(h)}function a(h){const p=r.events[r.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?u(h):n(h)}function u(h){return h===null?d(h):Ae(h)?e.attempt(rA,u,d)(h):(e.enter("codeFlowValue"),c(h))}function c(h){return h===null||Ae(h)?(e.exit("codeFlowValue"),u(h)):(e.consume(h),c)}function d(h){return e.exit("codeIndented"),t(h)}}function sA(e,t,n){const r=this;return s;function s(u){return r.parser.lazy[r.now().line]?n(u):Ae(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),s):ze(e,a,"linePrefix",5)(u)}function a(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(u):Ae(u)?s(u):n(u)}}const oA={name:"codeText",previous:uA,resolve:aA,tokenize:lA};function aA(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function uA(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function lA(e,t,n){let r=0,s,a;return u;function u(m){return e.enter("codeText"),e.enter("codeTextSequence"),c(m)}function c(m){return m===96?(e.consume(m),r++,c):(e.exit("codeTextSequence"),d(m))}function d(m){return m===null?n(m):m===32?(e.enter("space"),e.consume(m),e.exit("space"),d):m===96?(a=e.enter("codeTextSequence"),s=0,p(m)):Ae(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),d):(e.enter("codeTextData"),h(m))}function h(m){return m===null||m===32||m===96||Ae(m)?(e.exit("codeTextData"),d(m)):(e.consume(m),h)}function p(m){return m===96?(e.consume(m),s++,p):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(m)):(a.type="codeTextData",h(m))}}class cA{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&Oo(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Oo(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Oo(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Oo(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Oo(this.left,n.reverse())}}}function Oo(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Zb(e){const t={};let n=-1,r,s,a,u,c,d,h;const p=new cA(e);for(;++n<p.length;){for(;n in t;)n=t[n];if(r=p.get(n),n&&r[1].type==="chunkFlow"&&p.get(n-1)[1].type==="listItemPrefix"&&(d=r[1]._tokenizer.events,a=0,a<d.length&&d[a][1].type==="lineEndingBlank"&&(a+=2),a<d.length&&d[a][1].type==="content"))for(;++a<d.length&&d[a][1].type!=="content";)d[a][1].type==="chunkText"&&(d[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,dA(p,n)),n=t[n],h=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(u=p.get(a),u[1].type==="lineEnding"||u[1].type==="lineEndingBlank")u[0]==="enter"&&(s&&(p.get(s)[1].type="lineEndingBlank"),u[1].type="lineEnding",s=a);else if(!(u[1].type==="linePrefix"||u[1].type==="listItemIndent"))break;s&&(r[1].end={...p.get(s)[1].start},c=p.slice(s,n),c.unshift(r),p.splice(s,n-s+1,c))}}return pn(e,0,Number.POSITIVE_INFINITY,p.slice(0)),!h}function dA(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const a=[];let u=n._tokenizer;u||(u=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(u._contentTypeTextTrailing=!0));const c=u.events,d=[],h={};let p,m,b=-1,T=n,w=0,A=0;const S=[A];for(;T;){for(;e.get(++s)[1]!==T;);a.push(s),T._tokenizer||(p=r.sliceStream(T),T.next||p.push(null),m&&u.defineSkip(T.start),T._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=!0),u.write(p),T._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=void 0)),m=T,T=T.next}for(T=n;++b<c.length;)c[b][0]==="exit"&&c[b-1][0]==="enter"&&c[b][1].type===c[b-1][1].type&&c[b][1].start.line!==c[b][1].end.line&&(A=b+1,S.push(A),T._tokenizer=void 0,T.previous=void 0,T=T.next);for(u.events=[],T?(T._tokenizer=void 0,T.previous=void 0):S.pop(),b=S.length;b--;){const x=c.slice(S[b],S[b+1]),R=a.pop();d.push([R,R+x.length-1]),e.splice(R,2,x)}for(d.reverse(),b=-1;++b<d.length;)h[w+d[b][0]]=w+d[b][1],w+=d[b][1]-d[b][0]-1;return h}const hA={resolve:pA,tokenize:mA},fA={partial:!0,tokenize:gA};function pA(e){return Zb(e),e}function mA(e,t){let n;return r;function r(c){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(c)}function s(c){return c===null?a(c):Ae(c)?e.check(fA,u,a)(c):(e.consume(c),s)}function a(c){return e.exit("chunkContent"),e.exit("content"),t(c)}function u(c){return e.consume(c),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function gA(e,t,n){const r=this;return s;function s(u){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),ze(e,a,"linePrefix")}function a(u){if(u===null||Ae(u))return n(u);const c=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(u):e.interrupt(r.parser.constructs.flow,n,t)(u)}}function eE(e,t,n,r,s,a,u,c,d){const h=d||Number.POSITIVE_INFINITY;let p=0;return m;function m(x){return x===60?(e.enter(r),e.enter(s),e.enter(a),e.consume(x),e.exit(a),b):x===null||x===32||x===41||al(x)?n(x):(e.enter(r),e.enter(u),e.enter(c),e.enter("chunkString",{contentType:"string"}),A(x))}function b(x){return x===62?(e.enter(a),e.consume(x),e.exit(a),e.exit(s),e.exit(r),t):(e.enter(c),e.enter("chunkString",{contentType:"string"}),T(x))}function T(x){return x===62?(e.exit("chunkString"),e.exit(c),b(x)):x===null||x===60||Ae(x)?n(x):(e.consume(x),x===92?w:T)}function w(x){return x===60||x===62||x===92?(e.consume(x),T):T(x)}function A(x){return!p&&(x===null||x===41||Ge(x))?(e.exit("chunkString"),e.exit(c),e.exit(u),e.exit(r),t(x)):p<h&&x===40?(e.consume(x),p++,A):x===41?(e.consume(x),p--,A):x===null||x===32||x===40||al(x)?n(x):(e.consume(x),x===92?S:A)}function S(x){return x===40||x===41||x===92?(e.consume(x),A):A(x)}}function tE(e,t,n,r,s,a){const u=this;let c=0,d;return h;function h(T){return e.enter(r),e.enter(s),e.consume(T),e.exit(s),e.enter(a),p}function p(T){return c>999||T===null||T===91||T===93&&!d||T===94&&!c&&"_hiddenFootnoteSupport"in u.parser.constructs?n(T):T===93?(e.exit(a),e.enter(s),e.consume(T),e.exit(s),e.exit(r),t):Ae(T)?(e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),p):(e.enter("chunkString",{contentType:"string"}),m(T))}function m(T){return T===null||T===91||T===93||Ae(T)||c++>999?(e.exit("chunkString"),p(T)):(e.consume(T),d||(d=!He(T)),T===92?b:m)}function b(T){return T===91||T===92||T===93?(e.consume(T),c++,m):m(T)}}function nE(e,t,n,r,s,a){let u;return c;function c(b){return b===34||b===39||b===40?(e.enter(r),e.enter(s),e.consume(b),e.exit(s),u=b===40?41:b,d):n(b)}function d(b){return b===u?(e.enter(s),e.consume(b),e.exit(s),e.exit(r),t):(e.enter(a),h(b))}function h(b){return b===u?(e.exit(a),d(u)):b===null?n(b):Ae(b)?(e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),ze(e,h,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),p(b))}function p(b){return b===u||b===null||Ae(b)?(e.exit("chunkString"),h(b)):(e.consume(b),b===92?m:p)}function m(b){return b===u||b===92?(e.consume(b),p):p(b)}}function Vo(e,t){let n;return r;function r(s){return Ae(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):He(s)?ze(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const yA={name:"definition",tokenize:EA},bA={partial:!0,tokenize:TA};function EA(e,t,n){const r=this;let s;return a;function a(T){return e.enter("definition"),u(T)}function u(T){return tE.call(r,e,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(T)}function c(T){return s=Un(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),T===58?(e.enter("definitionMarker"),e.consume(T),e.exit("definitionMarker"),d):n(T)}function d(T){return Ge(T)?Vo(e,h)(T):h(T)}function h(T){return eE(e,p,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(T)}function p(T){return e.attempt(bA,m,m)(T)}function m(T){return He(T)?ze(e,b,"whitespace")(T):b(T)}function b(T){return T===null||Ae(T)?(e.exit("definition"),r.parser.defined.push(s),t(T)):n(T)}}function TA(e,t,n){return r;function r(c){return Ge(c)?Vo(e,s)(c):n(c)}function s(c){return nE(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function a(c){return He(c)?ze(e,u,"whitespace")(c):u(c)}function u(c){return c===null||Ae(c)?t(c):n(c)}}const _A={name:"hardBreakEscape",tokenize:vA};function vA(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),s}function s(a){return Ae(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const xA={name:"headingAtx",resolve:wA,tokenize:kA};function wA(e,t){let n=e.length-2,r=3,s,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},pn(e,r,n-r+1,[["enter",s,t],["enter",a,t],["exit",a,t],["exit",s,t]])),e}function kA(e,t,n){let r=0;return s;function s(p){return e.enter("atxHeading"),a(p)}function a(p){return e.enter("atxHeadingSequence"),u(p)}function u(p){return p===35&&r++<6?(e.consume(p),u):p===null||Ge(p)?(e.exit("atxHeadingSequence"),c(p)):n(p)}function c(p){return p===35?(e.enter("atxHeadingSequence"),d(p)):p===null||Ae(p)?(e.exit("atxHeading"),t(p)):He(p)?ze(e,c,"whitespace")(p):(e.enter("atxHeadingText"),h(p))}function d(p){return p===35?(e.consume(p),d):(e.exit("atxHeadingSequence"),c(p))}function h(p){return p===null||p===35||Ge(p)?(e.exit("atxHeadingText"),c(p)):(e.consume(p),h)}}const SA=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ty=["pre","script","style","textarea"],AA={concrete:!0,name:"htmlFlow",resolveTo:IA,tokenize:OA},CA={partial:!0,tokenize:PA},NA={partial:!0,tokenize:RA};function IA(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function OA(e,t,n){const r=this;let s,a,u,c,d;return h;function h(P){return p(P)}function p(P){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(P),m}function m(P){return P===33?(e.consume(P),b):P===47?(e.consume(P),a=!0,A):P===63?(e.consume(P),s=3,r.interrupt?t:_):Kt(P)?(e.consume(P),u=String.fromCharCode(P),S):n(P)}function b(P){return P===45?(e.consume(P),s=2,T):P===91?(e.consume(P),s=5,c=0,w):Kt(P)?(e.consume(P),s=4,r.interrupt?t:_):n(P)}function T(P){return P===45?(e.consume(P),r.interrupt?t:_):n(P)}function w(P){const Te="CDATA[";return P===Te.charCodeAt(c++)?(e.consume(P),c===Te.length?r.interrupt?t:Z:w):n(P)}function A(P){return Kt(P)?(e.consume(P),u=String.fromCharCode(P),S):n(P)}function S(P){if(P===null||P===47||P===62||Ge(P)){const Te=P===47,Me=u.toLowerCase();return!Te&&!a&&ty.includes(Me)?(s=1,r.interrupt?t(P):Z(P)):SA.includes(u.toLowerCase())?(s=6,Te?(e.consume(P),x):r.interrupt?t(P):Z(P)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(P):a?R(P):C(P))}return P===45||Ut(P)?(e.consume(P),u+=String.fromCharCode(P),S):n(P)}function x(P){return P===62?(e.consume(P),r.interrupt?t:Z):n(P)}function R(P){return He(P)?(e.consume(P),R):B(P)}function C(P){return P===47?(e.consume(P),B):P===58||P===95||Kt(P)?(e.consume(P),j):He(P)?(e.consume(P),C):B(P)}function j(P){return P===45||P===46||P===58||P===95||Ut(P)?(e.consume(P),j):M(P)}function M(P){return P===61?(e.consume(P),I):He(P)?(e.consume(P),M):C(P)}function I(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),d=P,Q):He(P)?(e.consume(P),I):W(P)}function Q(P){return P===d?(e.consume(P),d=null,te):P===null||Ae(P)?n(P):(e.consume(P),Q)}function W(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||Ge(P)?M(P):(e.consume(P),W)}function te(P){return P===47||P===62||He(P)?C(P):n(P)}function B(P){return P===62?(e.consume(P),q):n(P)}function q(P){return P===null||Ae(P)?Z(P):He(P)?(e.consume(P),q):n(P)}function Z(P){return P===45&&s===2?(e.consume(P),ne):P===60&&s===1?(e.consume(P),K):P===62&&s===4?(e.consume(P),X):P===63&&s===3?(e.consume(P),_):P===93&&s===5?(e.consume(P),G):Ae(P)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(CA,me,de)(P)):P===null||Ae(P)?(e.exit("htmlFlowData"),de(P)):(e.consume(P),Z)}function de(P){return e.check(NA,ue,me)(P)}function ue(P){return e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),re}function re(P){return P===null||Ae(P)?de(P):(e.enter("htmlFlowData"),Z(P))}function ne(P){return P===45?(e.consume(P),_):Z(P)}function K(P){return P===47?(e.consume(P),u="",H):Z(P)}function H(P){if(P===62){const Te=u.toLowerCase();return ty.includes(Te)?(e.consume(P),X):Z(P)}return Kt(P)&&u.length<8?(e.consume(P),u+=String.fromCharCode(P),H):Z(P)}function G(P){return P===93?(e.consume(P),_):Z(P)}function _(P){return P===62?(e.consume(P),X):P===45&&s===2?(e.consume(P),_):Z(P)}function X(P){return P===null||Ae(P)?(e.exit("htmlFlowData"),me(P)):(e.consume(P),X)}function me(P){return e.exit("htmlFlow"),t(P)}}function RA(e,t,n){const r=this;return s;function s(u){return Ae(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),a):n(u)}function a(u){return r.parser.lazy[r.now().line]?n(u):t(u)}}function PA(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(ba,t,n)}}const LA={name:"htmlText",tokenize:DA};function DA(e,t,n){const r=this;let s,a,u;return c;function c(_){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(_),d}function d(_){return _===33?(e.consume(_),h):_===47?(e.consume(_),M):_===63?(e.consume(_),C):Kt(_)?(e.consume(_),W):n(_)}function h(_){return _===45?(e.consume(_),p):_===91?(e.consume(_),a=0,w):Kt(_)?(e.consume(_),R):n(_)}function p(_){return _===45?(e.consume(_),T):n(_)}function m(_){return _===null?n(_):_===45?(e.consume(_),b):Ae(_)?(u=m,K(_)):(e.consume(_),m)}function b(_){return _===45?(e.consume(_),T):m(_)}function T(_){return _===62?ne(_):_===45?b(_):m(_)}function w(_){const X="CDATA[";return _===X.charCodeAt(a++)?(e.consume(_),a===X.length?A:w):n(_)}function A(_){return _===null?n(_):_===93?(e.consume(_),S):Ae(_)?(u=A,K(_)):(e.consume(_),A)}function S(_){return _===93?(e.consume(_),x):A(_)}function x(_){return _===62?ne(_):_===93?(e.consume(_),x):A(_)}function R(_){return _===null||_===62?ne(_):Ae(_)?(u=R,K(_)):(e.consume(_),R)}function C(_){return _===null?n(_):_===63?(e.consume(_),j):Ae(_)?(u=C,K(_)):(e.consume(_),C)}function j(_){return _===62?ne(_):C(_)}function M(_){return Kt(_)?(e.consume(_),I):n(_)}function I(_){return _===45||Ut(_)?(e.consume(_),I):Q(_)}function Q(_){return Ae(_)?(u=Q,K(_)):He(_)?(e.consume(_),Q):ne(_)}function W(_){return _===45||Ut(_)?(e.consume(_),W):_===47||_===62||Ge(_)?te(_):n(_)}function te(_){return _===47?(e.consume(_),ne):_===58||_===95||Kt(_)?(e.consume(_),B):Ae(_)?(u=te,K(_)):He(_)?(e.consume(_),te):ne(_)}function B(_){return _===45||_===46||_===58||_===95||Ut(_)?(e.consume(_),B):q(_)}function q(_){return _===61?(e.consume(_),Z):Ae(_)?(u=q,K(_)):He(_)?(e.consume(_),q):te(_)}function Z(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(e.consume(_),s=_,de):Ae(_)?(u=Z,K(_)):He(_)?(e.consume(_),Z):(e.consume(_),ue)}function de(_){return _===s?(e.consume(_),s=void 0,re):_===null?n(_):Ae(_)?(u=de,K(_)):(e.consume(_),de)}function ue(_){return _===null||_===34||_===39||_===60||_===61||_===96?n(_):_===47||_===62||Ge(_)?te(_):(e.consume(_),ue)}function re(_){return _===47||_===62||Ge(_)?te(_):n(_)}function ne(_){return _===62?(e.consume(_),e.exit("htmlTextData"),e.exit("htmlText"),t):n(_)}function K(_){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),H}function H(_){return He(_)?ze(e,G,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):G(_)}function G(_){return e.enter("htmlTextData"),u(_)}}const Nf={name:"labelEnd",resolveAll:jA,resolveTo:UA,tokenize:HA},MA={tokenize:zA},BA={tokenize:VA},FA={tokenize:$A};function jA(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&pn(e,0,e.length,n),e}function UA(e,t){let n=e.length,r=0,s,a,u,c;for(;n--;)if(s=e[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(u){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(u=n);const d={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},h={type:"label",start:{...e[a][1].start},end:{...e[u][1].end}},p={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[u-2][1].start}};return c=[["enter",d,t],["enter",h,t]],c=wn(c,e.slice(a+1,a+r+3)),c=wn(c,[["enter",p,t]]),c=wn(c,Nl(t.parser.constructs.insideSpan.null,e.slice(a+r+4,u-3),t)),c=wn(c,[["exit",p,t],e[u-2],e[u-1],["exit",h,t]]),c=wn(c,e.slice(u+1)),c=wn(c,[["exit",d,t]]),pn(e,a,e.length,c),e}function HA(e,t,n){const r=this;let s=r.events.length,a,u;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return c;function c(b){return a?a._inactive?m(b):(u=r.parser.defined.includes(Un(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(b),e.exit("labelMarker"),e.exit("labelEnd"),d):n(b)}function d(b){return b===40?e.attempt(MA,p,u?p:m)(b):b===91?e.attempt(BA,p,u?h:m)(b):u?p(b):m(b)}function h(b){return e.attempt(FA,p,m)(b)}function p(b){return t(b)}function m(b){return a._balanced=!0,n(b)}}function zA(e,t,n){return r;function r(m){return e.enter("resource"),e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),s}function s(m){return Ge(m)?Vo(e,a)(m):a(m)}function a(m){return m===41?p(m):eE(e,u,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function u(m){return Ge(m)?Vo(e,d)(m):p(m)}function c(m){return n(m)}function d(m){return m===34||m===39||m===40?nE(e,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):p(m)}function h(m){return Ge(m)?Vo(e,p)(m):p(m)}function p(m){return m===41?(e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),e.exit("resource"),t):n(m)}}function VA(e,t,n){const r=this;return s;function s(c){return tE.call(r,e,a,u,"reference","referenceMarker","referenceString")(c)}function a(c){return r.parser.defined.includes(Un(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(c):n(c)}function u(c){return n(c)}}function $A(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),s}function s(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const WA={name:"labelStartImage",resolveAll:Nf.resolveAll,tokenize:KA};function KA(e,t,n){const r=this;return s;function s(c){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(c),e.exit("labelImageMarker"),a}function a(c){return c===91?(e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelImage"),u):n(c)}function u(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):t(c)}}const qA={name:"labelStartLink",resolveAll:Nf.resolveAll,tokenize:YA};function YA(e,t,n){const r=this;return s;function s(u){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelLink"),a}function a(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):t(u)}}const zd={name:"lineEnding",tokenize:GA};function GA(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ze(e,t,"linePrefix")}}const Xu={name:"thematicBreak",tokenize:QA};function QA(e,t,n){let r=0,s;return a;function a(h){return e.enter("thematicBreak"),u(h)}function u(h){return s=h,c(h)}function c(h){return h===s?(e.enter("thematicBreakSequence"),d(h)):r>=3&&(h===null||Ae(h))?(e.exit("thematicBreak"),t(h)):n(h)}function d(h){return h===s?(e.consume(h),r++,d):(e.exit("thematicBreakSequence"),He(h)?ze(e,c,"whitespace")(h):c(h))}}const rn={continuation:{tokenize:eC},exit:nC,name:"list",tokenize:ZA},XA={partial:!0,tokenize:rC},JA={partial:!0,tokenize:tC};function ZA(e,t,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,u=0;return c;function c(T){const w=r.containerState.type||(T===42||T===43||T===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!r.containerState.marker||T===r.containerState.marker:Fh(T)){if(r.containerState.type||(r.containerState.type=w,e.enter(w,{_container:!0})),w==="listUnordered")return e.enter("listItemPrefix"),T===42||T===45?e.check(Xu,n,h)(T):h(T);if(!r.interrupt||T===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),d(T)}return n(T)}function d(T){return Fh(T)&&++u<10?(e.consume(T),d):(!r.interrupt||u<2)&&(r.containerState.marker?T===r.containerState.marker:T===41||T===46)?(e.exit("listItemValue"),h(T)):n(T)}function h(T){return e.enter("listItemMarker"),e.consume(T),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||T,e.check(ba,r.interrupt?n:p,e.attempt(XA,b,m))}function p(T){return r.containerState.initialBlankLine=!0,a++,b(T)}function m(T){return He(T)?(e.enter("listItemPrefixWhitespace"),e.consume(T),e.exit("listItemPrefixWhitespace"),b):n(T)}function b(T){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(T)}}function eC(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(ba,s,a);function s(c){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ze(e,t,"listItemIndent",r.containerState.size+1)(c)}function a(c){return r.containerState.furtherBlankLines||!He(c)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,u(c)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(JA,t,u)(c))}function u(c){return r.containerState._closeFlow=!0,r.interrupt=void 0,ze(e,e.attempt(rn,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function tC(e,t,n){const r=this;return ze(e,s,"listItemIndent",r.containerState.size+1);function s(a){const u=r.events[r.events.length-1];return u&&u[1].type==="listItemIndent"&&u[2].sliceSerialize(u[1],!0).length===r.containerState.size?t(a):n(a)}}function nC(e){e.exit(this.containerState.type)}function rC(e,t,n){const r=this;return ze(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const u=r.events[r.events.length-1];return!He(a)&&u&&u[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const ny={name:"setextUnderline",resolveTo:iC,tokenize:sC};function iC(e,t){let n=e.length,r,s,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const u={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",a?(e.splice(s,0,["enter",u,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end={...e[a][1].end}):e[r][1]=u,e.push(["exit",u,t]),e}function sC(e,t,n){const r=this;let s;return a;function a(h){let p=r.events.length,m;for(;p--;)if(r.events[p][1].type!=="lineEnding"&&r.events[p][1].type!=="linePrefix"&&r.events[p][1].type!=="content"){m=r.events[p][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||m)?(e.enter("setextHeadingLine"),s=h,u(h)):n(h)}function u(h){return e.enter("setextHeadingLineSequence"),c(h)}function c(h){return h===s?(e.consume(h),c):(e.exit("setextHeadingLineSequence"),He(h)?ze(e,d,"lineSuffix")(h):d(h))}function d(h){return h===null||Ae(h)?(e.exit("setextHeadingLine"),t(h)):n(h)}}const oC={tokenize:aC};function aC(e){const t=this,n=e.attempt(ba,r,e.attempt(this.parser.constructs.flowInitial,s,ze(e,e.attempt(this.parser.constructs.flow,s,e.attempt(hA,s)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const uC={resolveAll:iE()},lC=rE("string"),cC=rE("text");function rE(e){return{resolveAll:iE(e==="text"?dC:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],a=n.attempt(s,u,c);return u;function u(p){return h(p)?a(p):c(p)}function c(p){if(p===null){n.consume(p);return}return n.enter("data"),n.consume(p),d}function d(p){return h(p)?(n.exit("data"),a(p)):(n.consume(p),d)}function h(p){if(p===null)return!0;const m=s[p];let b=-1;if(m)for(;++b<m.length;){const T=m[b];if(!T.previous||T.previous.call(r,r.previous))return!0}return!1}}}function iE(e){return t;function t(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return e?e(n,r):n}}function dC(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let a=s.length,u=-1,c=0,d;for(;a--;){const h=s[a];if(typeof h=="string"){for(u=h.length;h.charCodeAt(u-1)===32;)c++,u--;if(u)break;u=-1}else if(h===-2)d=!0,c++;else if(h!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(c=0),c){const h={type:n===e.length||d||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?u:r.start._bufferIndex+u,_index:r.start._index+a,line:r.end.line,column:r.end.column-c,offset:r.end.offset-c},end:{...r.end}};r.end={...h.start},r.start.offset===r.end.offset?Object.assign(r,h):(e.splice(n,0,["enter",h,t],["exit",h,t]),n+=2)}n++}return e}const hC={42:rn,43:rn,45:rn,48:rn,49:rn,50:rn,51:rn,52:rn,53:rn,54:rn,55:rn,56:rn,57:rn,62:Qb},fC={91:yA},pC={[-2]:Hd,[-1]:Hd,32:Hd},mC={35:xA,42:Xu,45:[ny,Xu],60:AA,61:ny,95:Xu,96:ey,126:ey},gC={38:Jb,92:Xb},yC={[-5]:zd,[-4]:zd,[-3]:zd,33:WA,38:Jb,42:jh,60:[qS,LA],91:qA,92:[_A,Xb],93:Nf,95:jh,96:oA},bC={null:[jh,uC]},EC={null:[42,95]},TC={null:[]},_C=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:EC,contentInitial:fC,disable:TC,document:hC,flow:mC,flowInitial:pC,insideSpan:bC,string:gC,text:yC},Symbol.toStringTag,{value:"Module"}));function vC(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let u=[],c=[];const d={attempt:Q(M),check:Q(I),consume:R,enter:C,exit:j,interrupt:Q(I,{interrupt:!0})},h={code:null,containerState:{},defineSkip:A,events:[],now:w,parser:e,previous:null,sliceSerialize:b,sliceStream:T,write:m};let p=t.tokenize.call(h,d);return t.resolveAll&&a.push(t),h;function m(q){return u=wn(u,q),S(),u[u.length-1]!==null?[]:(W(t,0),h.events=Nl(a,h.events,h),h.events)}function b(q,Z){return wC(T(q),Z)}function T(q){return xC(u,q)}function w(){const{_bufferIndex:q,_index:Z,line:de,column:ue,offset:re}=r;return{_bufferIndex:q,_index:Z,line:de,column:ue,offset:re}}function A(q){s[q.line]=q.column,B()}function S(){let q;for(;r._index<u.length;){const Z=u[r._index];if(typeof Z=="string")for(q=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===q&&r._bufferIndex<Z.length;)x(Z.charCodeAt(r._bufferIndex));else x(Z)}}function x(q){p=p(q)}function R(q){Ae(q)?(r.line++,r.column=1,r.offset+=q===-3?2:1,B()):q!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===u[r._index].length&&(r._bufferIndex=-1,r._index++)),h.previous=q}function C(q,Z){const de=Z||{};return de.type=q,de.start=w(),h.events.push(["enter",de,h]),c.push(de),de}function j(q){const Z=c.pop();return Z.end=w(),h.events.push(["exit",Z,h]),Z}function M(q,Z){W(q,Z.from)}function I(q,Z){Z.restore()}function Q(q,Z){return de;function de(ue,re,ne){let K,H,G,_;return Array.isArray(ue)?me(ue):"tokenize"in ue?me([ue]):X(ue);function X(we){return Pe;function Pe(Re){const Le=Re!==null&&we[Re],zn=Re!==null&&we.null,mn=[...Array.isArray(Le)?Le:Le?[Le]:[],...Array.isArray(zn)?zn:zn?[zn]:[]];return me(mn)(Re)}}function me(we){return K=we,H=0,we.length===0?ne:P(we[H])}function P(we){return Pe;function Pe(Re){return _=te(),G=we,we.partial||(h.currentConstruct=we),we.name&&h.parser.constructs.disable.null.includes(we.name)?Me():we.tokenize.call(Z?Object.assign(Object.create(h),Z):h,d,Te,Me)(Re)}}function Te(we){return q(G,_),re}function Me(we){return _.restore(),++H<K.length?P(K[H]):ne}}}function W(q,Z){q.resolveAll&&!a.includes(q)&&a.push(q),q.resolve&&pn(h.events,Z,h.events.length-Z,q.resolve(h.events.slice(Z),h)),q.resolveTo&&(h.events=q.resolveTo(h.events,h))}function te(){const q=w(),Z=h.previous,de=h.currentConstruct,ue=h.events.length,re=Array.from(c);return{from:ue,restore:ne};function ne(){r=q,h.previous=Z,h.currentConstruct=de,h.events.length=ue,c=re,B()}}function B(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function xC(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,a=t.end._bufferIndex;let u;if(n===s)u=[e[n].slice(r,a)];else{if(u=e.slice(n,s),r>-1){const c=u[0];typeof c=="string"?u[0]=c.slice(r):u.shift()}a>0&&u.push(e[s].slice(0,a))}return u}function wC(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const a=e[n];let u;if(typeof a=="string")u=a;else switch(a){case-5:{u="\r";break}case-4:{u=`
`;break}case-3:{u=`\r
`;break}case-2:{u=t?" ":"	";break}case-1:{if(!t&&s)continue;u=" ";break}default:u=String.fromCharCode(a)}s=a===-2,r.push(u)}return r.join("")}function kC(e){const r={constructs:Yb([_C,...(e||{}).extensions||[]]),content:s(US),defined:[],document:s(zS),flow:s(oC),lazy:{},string:s(lC),text:s(cC)};return r;function s(a){return u;function u(c){return vC(r,a,c)}}}function SC(e){for(;!Zb(e););return e}const ry=/[\0\t\n\r]/g;function AC(){let e=1,t="",n=!0,r;return s;function s(a,u,c){const d=[];let h,p,m,b,T;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(u||void 0).decode(a)),m=0,t="",n&&(a.charCodeAt(0)===65279&&m++,n=void 0);m<a.length;){if(ry.lastIndex=m,h=ry.exec(a),b=h&&h.index!==void 0?h.index:a.length,T=a.charCodeAt(b),!h){t=a.slice(m);break}if(T===10&&m===b&&r)d.push(-3),r=void 0;else switch(r&&(d.push(-5),r=void 0),m<b&&(d.push(a.slice(m,b)),e+=b-m),T){case 0:{d.push(65533),e++;break}case 9:{for(p=Math.ceil(e/4)*4,d.push(-2);e++<p;)d.push(-1);break}case 10:{d.push(-4),e=1;break}default:r=!0,e=1}m=b+1}return c&&(r&&d.push(-5),t&&d.push(t),d.push(null)),d}}const CC=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function NC(e){return e.replace(CC,IC)}function IC(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return Gb(n.slice(a?2:1),a?16:10)}return Cf(n)||e}const sE={}.hasOwnProperty;function OC(e,t,n){return typeof t!="string"&&(n=t,t=void 0),RC(n)(SC(kC(n).document().write(AC()(e,t,!0))))}function RC(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Er),autolinkProtocol:te,autolinkEmail:te,atxHeading:a(We),blockQuote:a(zn),characterEscape:te,characterReference:te,codeFenced:a(mn),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:a(mn,u),codeText:a(ti,u),codeTextData:te,data:te,codeFlowValue:te,definition:a(yr),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:a(br),hardBreakEscape:a(Gt),hardBreakTrailing:a(Gt),htmlFlow:a(qe,u),htmlFlowData:te,htmlText:a(qe,u),htmlTextData:te,image:a(ni),label:u,link:a(Er),listItem:a(on),listItemValue:b,listOrdered:a(tr,m),listUnordered:a(tr),paragraph:a(ri),reference:P,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:a(We),strong:a(Et),thematicBreak:a(Ca)},exit:{atxHeading:d(),atxHeadingSequence:M,autolink:d(),autolinkEmail:Le,autolinkProtocol:Re,blockQuote:d(),characterEscapeValue:B,characterReferenceMarkerHexadecimal:Me,characterReferenceMarkerNumeric:Me,characterReferenceValue:we,characterReference:Pe,codeFenced:d(S),codeFencedFence:A,codeFencedFenceInfo:T,codeFencedFenceMeta:w,codeFlowValue:B,codeIndented:d(x),codeText:d(re),codeTextData:B,data:B,definition:d(),definitionDestinationString:j,definitionLabelString:R,definitionTitleString:C,emphasis:d(),hardBreakEscape:d(Z),hardBreakTrailing:d(Z),htmlFlow:d(de),htmlFlowData:B,htmlText:d(ue),htmlTextData:B,image:d(K),label:G,labelText:H,lineEnding:q,link:d(ne),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:Te,resourceDestinationString:_,resourceTitleString:X,resource:me,setextHeading:d(W),setextHeadingLineSequence:Q,setextHeadingText:I,strong:d(),thematicBreak:d()}};oE(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ee){let pe={type:"root",children:[]};const Ie={stack:[pe],tokenStack:[],config:t,enter:c,exit:h,buffer:u,resume:p,data:n},Be=[];let Ve=-1;for(;++Ve<ee.length;)if(ee[Ve][1].type==="listOrdered"||ee[Ve][1].type==="listUnordered")if(ee[Ve][0]==="enter")Be.push(Ve);else{const Nt=Be.pop();Ve=s(ee,Nt,Ve)}for(Ve=-1;++Ve<ee.length;){const Nt=t[ee[Ve][0]];sE.call(Nt,ee[Ve][1].type)&&Nt[ee[Ve][1].type].call(Object.assign({sliceSerialize:ee[Ve][2].sliceSerialize},Ie),ee[Ve][1])}if(Ie.tokenStack.length>0){const Nt=Ie.tokenStack[Ie.tokenStack.length-1];(Nt[1]||iy).call(Ie,void 0,Nt[0])}for(pe.position={start:Ur(ee.length>0?ee[0][1].start:{line:1,column:1,offset:0}),end:Ur(ee.length>0?ee[ee.length-2][1].end:{line:1,column:1,offset:0})},Ve=-1;++Ve<t.transforms.length;)pe=t.transforms[Ve](pe)||pe;return pe}function s(ee,pe,Ie){let Be=pe-1,Ve=-1,Nt=!1,nr,gn,Tr,ii;for(;++Be<=Ie;){const It=ee[Be];switch(It[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{It[0]==="enter"?Ve++:Ve--,ii=void 0;break}case"lineEndingBlank":{It[0]==="enter"&&(nr&&!ii&&!Ve&&!Tr&&(Tr=Be),ii=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ii=void 0}if(!Ve&&It[0]==="enter"&&It[1].type==="listItemPrefix"||Ve===-1&&It[0]==="exit"&&(It[1].type==="listUnordered"||It[1].type==="listOrdered")){if(nr){let Vn=Be;for(gn=void 0;Vn--;){const an=ee[Vn];if(an[1].type==="lineEnding"||an[1].type==="lineEndingBlank"){if(an[0]==="exit")continue;gn&&(ee[gn][1].type="lineEndingBlank",Nt=!0),an[1].type="lineEnding",gn=Vn}else if(!(an[1].type==="linePrefix"||an[1].type==="blockQuotePrefix"||an[1].type==="blockQuotePrefixWhitespace"||an[1].type==="blockQuoteMarker"||an[1].type==="listItemIndent"))break}Tr&&(!gn||Tr<gn)&&(nr._spread=!0),nr.end=Object.assign({},gn?ee[gn][1].start:It[1].end),ee.splice(gn||Be,0,["exit",nr,It[2]]),Be++,Ie++}if(It[1].type==="listItemPrefix"){const Vn={type:"listItem",_spread:!1,start:Object.assign({},It[1].start),end:void 0};nr=Vn,ee.splice(Be,0,["enter",Vn,It[2]]),Be++,Ie++,Tr=void 0,ii=!0}}}return ee[pe][1]._spread=Nt,Ie}function a(ee,pe){return Ie;function Ie(Be){c.call(this,ee(Be),Be),pe&&pe.call(this,Be)}}function u(){this.stack.push({type:"fragment",children:[]})}function c(ee,pe,Ie){this.stack[this.stack.length-1].children.push(ee),this.stack.push(ee),this.tokenStack.push([pe,Ie||void 0]),ee.position={start:Ur(pe.start),end:void 0}}function d(ee){return pe;function pe(Ie){ee&&ee.call(this,Ie),h.call(this,Ie)}}function h(ee,pe){const Ie=this.stack.pop(),Be=this.tokenStack.pop();if(Be)Be[0].type!==ee.type&&(pe?pe.call(this,ee,Be[0]):(Be[1]||iy).call(this,ee,Be[0]));else throw new Error("Cannot close `"+ee.type+"` ("+zo({start:ee.start,end:ee.end})+"): its not open");Ie.position.end=Ur(ee.end)}function p(){return Af(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function b(ee){if(this.data.expectingFirstListItemValue){const pe=this.stack[this.stack.length-2];pe.start=Number.parseInt(this.sliceSerialize(ee),10),this.data.expectingFirstListItemValue=void 0}}function T(){const ee=this.resume(),pe=this.stack[this.stack.length-1];pe.lang=ee}function w(){const ee=this.resume(),pe=this.stack[this.stack.length-1];pe.meta=ee}function A(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const ee=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ee.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const ee=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ee.replace(/(\r?\n|\r)$/g,"")}function R(ee){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.label=pe,Ie.identifier=Un(this.sliceSerialize(ee)).toLowerCase()}function C(){const ee=this.resume(),pe=this.stack[this.stack.length-1];pe.title=ee}function j(){const ee=this.resume(),pe=this.stack[this.stack.length-1];pe.url=ee}function M(ee){const pe=this.stack[this.stack.length-1];if(!pe.depth){const Ie=this.sliceSerialize(ee).length;pe.depth=Ie}}function I(){this.data.setextHeadingSlurpLineEnding=!0}function Q(ee){const pe=this.stack[this.stack.length-1];pe.depth=this.sliceSerialize(ee).codePointAt(0)===61?1:2}function W(){this.data.setextHeadingSlurpLineEnding=void 0}function te(ee){const Ie=this.stack[this.stack.length-1].children;let Be=Ie[Ie.length-1];(!Be||Be.type!=="text")&&(Be=Aa(),Be.position={start:Ur(ee.start),end:void 0},Ie.push(Be)),this.stack.push(Be)}function B(ee){const pe=this.stack.pop();pe.value+=this.sliceSerialize(ee),pe.position.end=Ur(ee.end)}function q(ee){const pe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ie=pe.children[pe.children.length-1];Ie.position.end=Ur(ee.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(pe.type)&&(te.call(this,ee),B.call(this,ee))}function Z(){this.data.atHardBreak=!0}function de(){const ee=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ee}function ue(){const ee=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ee}function re(){const ee=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ee}function ne(){const ee=this.stack[this.stack.length-1];if(this.data.inReference){const pe=this.data.referenceType||"shortcut";ee.type+="Reference",ee.referenceType=pe,delete ee.url,delete ee.title}else delete ee.identifier,delete ee.label;this.data.referenceType=void 0}function K(){const ee=this.stack[this.stack.length-1];if(this.data.inReference){const pe=this.data.referenceType||"shortcut";ee.type+="Reference",ee.referenceType=pe,delete ee.url,delete ee.title}else delete ee.identifier,delete ee.label;this.data.referenceType=void 0}function H(ee){const pe=this.sliceSerialize(ee),Ie=this.stack[this.stack.length-2];Ie.label=NC(pe),Ie.identifier=Un(pe).toLowerCase()}function G(){const ee=this.stack[this.stack.length-1],pe=this.resume(),Ie=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ie.type==="link"){const Be=ee.children;Ie.children=Be}else Ie.alt=pe}function _(){const ee=this.resume(),pe=this.stack[this.stack.length-1];pe.url=ee}function X(){const ee=this.resume(),pe=this.stack[this.stack.length-1];pe.title=ee}function me(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function Te(ee){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.label=pe,Ie.identifier=Un(this.sliceSerialize(ee)).toLowerCase(),this.data.referenceType="full"}function Me(ee){this.data.characterReferenceType=ee.type}function we(ee){const pe=this.sliceSerialize(ee),Ie=this.data.characterReferenceType;let Be;Ie?(Be=Gb(pe,Ie==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Be=Cf(pe);const Ve=this.stack[this.stack.length-1];Ve.value+=Be}function Pe(ee){const pe=this.stack.pop();pe.position.end=Ur(ee.end)}function Re(ee){B.call(this,ee);const pe=this.stack[this.stack.length-1];pe.url=this.sliceSerialize(ee)}function Le(ee){B.call(this,ee);const pe=this.stack[this.stack.length-1];pe.url="mailto:"+this.sliceSerialize(ee)}function zn(){return{type:"blockquote",children:[]}}function mn(){return{type:"code",lang:null,meta:null,value:""}}function ti(){return{type:"inlineCode",value:""}}function yr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function br(){return{type:"emphasis",children:[]}}function We(){return{type:"heading",depth:0,children:[]}}function Gt(){return{type:"break"}}function qe(){return{type:"html",value:""}}function ni(){return{type:"image",title:null,url:"",alt:null}}function Er(){return{type:"link",title:null,url:"",children:[]}}function tr(ee){return{type:"list",ordered:ee.type==="listOrdered",start:null,spread:ee._spread,children:[]}}function on(ee){return{type:"listItem",spread:ee._spread,checked:null,children:[]}}function ri(){return{type:"paragraph",children:[]}}function Et(){return{type:"strong",children:[]}}function Aa(){return{type:"text",value:""}}function Ca(){return{type:"thematicBreak"}}}function Ur(e){return{line:e.line,column:e.column,offset:e.offset}}function oE(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?oE(e,r):PC(e,r)}}function PC(e,t){let n;for(n in t)if(sE.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function iy(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+zo({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+zo({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+zo({start:t.start,end:t.end})+") is still open")}function LC(e){const t=this;t.parser=n;function n(r){return OC(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function DC(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function MC(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function BC(e,t){const n=t.value?t.value+`
`:"",r={},s=t.lang?t.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function FC(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function jC(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function UC(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=Bs(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let u,c=e.footnoteCounts.get(r);c===void 0?(c=0,e.footnoteOrder.push(r),u=e.footnoteOrder.length):u=a+1,c+=1,e.footnoteCounts.set(r,c);const d={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(u)}]};e.patch(t,d);const h={type:"element",tagName:"sup",properties:{},children:[d]};return e.patch(t,h),e.applyData(t,h)}function HC(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function zC(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function aE(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const u=s[s.length-1];return u&&u.type==="text"?u.value+=r:s.push({type:"text",value:r}),s}function VC(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return aE(e,t);const s={src:Bs(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,a),e.applyData(t,a)}function $C(e,t){const n={src:Bs(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function WC(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function KC(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return aE(e,t);const s={href:Bs(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function qC(e,t){const n={href:Bs(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function YC(e,t,n){const r=e.all(t),s=n?GC(n):uE(t),a={},u=[];if(typeof t.checked=="boolean"){const p=r[0];let m;p&&p.type==="element"&&p.tagName==="p"?m=p:(m={type:"element",tagName:"p",properties:{},children:[]},r.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let c=-1;for(;++c<r.length;){const p=r[c];(s||c!==0||p.type!=="element"||p.tagName!=="p")&&u.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!s?u.push(...p.children):u.push(p)}const d=r[r.length-1];d&&(s||d.type!=="element"||d.tagName!=="p")&&u.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:a,children:u};return e.patch(t,h),e.applyData(t,h)}function GC(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=uE(n[r])}return t}function uE(e){const t=e.spread;return t??e.children.length>1}function QC(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const u=r[s];if(u.type==="element"&&u.tagName==="li"&&u.properties&&Array.isArray(u.properties.className)&&u.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function XC(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function JC(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function ZC(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function eN(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const u={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],u),s.push(u)}if(n.length>0){const u={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},c=Zn(t.children[1]),d=Al(t.children[t.children.length-1]);c&&d&&(u.position={start:c,end:d}),s.push(u)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,a),e.applyData(t,a)}function tN(e,t,n){const r=n?n.children:void 0,a=(r?r.indexOf(t):1)===0?"th":"td",u=n&&n.type==="table"?n.align:void 0,c=u?u.length:t.children.length;let d=-1;const h=[];for(;++d<c;){const m=t.children[d],b={},T=u?u[d]:void 0;T&&(b.align=T);let w={type:"element",tagName:a,properties:b,children:[]};m&&(w.children=e.all(m),e.patch(m,w),w=e.applyData(m,w)),h.push(w)}const p={type:"element",tagName:"tr",properties:{},children:e.wrap(h,!0)};return e.patch(t,p),e.applyData(t,p)}function nN(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const sy=9,oy=32;function rN(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const a=[];for(;r;)a.push(ay(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return a.push(ay(t.slice(s),s>0,!1)),a.join("")}function ay(e,t,n){let r=0,s=e.length;if(t){let a=e.codePointAt(r);for(;a===sy||a===oy;)r++,a=e.codePointAt(r)}if(n){let a=e.codePointAt(s-1);for(;a===sy||a===oy;)s--,a=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function iN(e,t){const n={type:"text",value:rN(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function sN(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const oN={blockquote:DC,break:MC,code:BC,delete:FC,emphasis:jC,footnoteReference:UC,heading:HC,html:zC,imageReference:VC,image:$C,inlineCode:WC,linkReference:KC,link:qC,listItem:YC,list:QC,paragraph:XC,root:JC,strong:ZC,table:eN,tableCell:nN,tableRow:tN,text:iN,thematicBreak:sN,toml:Vu,yaml:Vu,definition:Vu,footnoteDefinition:Vu};function Vu(){}const lE=-1,Il=0,$o=1,ul=2,If=3,Of=4,Rf=5,Pf=6,cE=7,dE=8,uy=typeof self=="object"?self:globalThis,aN=(e,t)=>{const n=(s,a)=>(e.set(a,s),s),r=s=>{if(e.has(s))return e.get(s);const[a,u]=t[s];switch(a){case Il:case lE:return n(u,s);case $o:{const c=n([],s);for(const d of u)c.push(r(d));return c}case ul:{const c=n({},s);for(const[d,h]of u)c[r(d)]=r(h);return c}case If:return n(new Date(u),s);case Of:{const{source:c,flags:d}=u;return n(new RegExp(c,d),s)}case Rf:{const c=n(new Map,s);for(const[d,h]of u)c.set(r(d),r(h));return c}case Pf:{const c=n(new Set,s);for(const d of u)c.add(r(d));return c}case cE:{const{name:c,message:d}=u;return n(new uy[c](d),s)}case dE:return n(BigInt(u),s);case"BigInt":return n(Object(BigInt(u)),s);case"ArrayBuffer":return n(new Uint8Array(u).buffer,u);case"DataView":{const{buffer:c}=new Uint8Array(u);return n(new DataView(c),u)}}return n(new uy[a](u),s)};return r},ly=e=>aN(new Map,e)(0),bs="",{toString:uN}={},{keys:lN}=Object,Ro=e=>{const t=typeof e;if(t!=="object"||!e)return[Il,t];const n=uN.call(e).slice(8,-1);switch(n){case"Array":return[$o,bs];case"Object":return[ul,bs];case"Date":return[If,bs];case"RegExp":return[Of,bs];case"Map":return[Rf,bs];case"Set":return[Pf,bs];case"DataView":return[$o,n]}return n.includes("Array")?[$o,n]:n.includes("Error")?[cE,n]:[ul,n]},$u=([e,t])=>e===Il&&(t==="function"||t==="symbol"),cN=(e,t,n,r)=>{const s=(u,c)=>{const d=r.push(u)-1;return n.set(c,d),d},a=u=>{if(n.has(u))return n.get(u);let[c,d]=Ro(u);switch(c){case Il:{let p=u;switch(d){case"bigint":c=dE,p=u.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+d);p=null;break;case"undefined":return s([lE],u)}return s([c,p],u)}case $o:{if(d){let b=u;return d==="DataView"?b=new Uint8Array(u.buffer):d==="ArrayBuffer"&&(b=new Uint8Array(u)),s([d,[...b]],u)}const p=[],m=s([c,p],u);for(const b of u)p.push(a(b));return m}case ul:{if(d)switch(d){case"BigInt":return s([d,u.toString()],u);case"Boolean":case"Number":case"String":return s([d,u.valueOf()],u)}if(t&&"toJSON"in u)return a(u.toJSON());const p=[],m=s([c,p],u);for(const b of lN(u))(e||!$u(Ro(u[b])))&&p.push([a(b),a(u[b])]);return m}case If:return s([c,u.toISOString()],u);case Of:{const{source:p,flags:m}=u;return s([c,{source:p,flags:m}],u)}case Rf:{const p=[],m=s([c,p],u);for(const[b,T]of u)(e||!($u(Ro(b))||$u(Ro(T))))&&p.push([a(b),a(T)]);return m}case Pf:{const p=[],m=s([c,p],u);for(const b of u)(e||!$u(Ro(b)))&&p.push(a(b));return m}}const{message:h}=u;return s([c,{name:d,message:h}],u)};return a},cy=(e,{json:t,lossy:n}={})=>{const r=[];return cN(!(t||n),!!t,new Map,r)(e),r},Fi=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?ly(cy(e,t)):structuredClone(e):(e,t)=>ly(cy(e,t));function dN(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function hN(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function fN(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||dN,r=e.options.footnoteBackLabel||hN,s=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",u=e.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let d=-1;for(;++d<e.footnoteOrder.length;){const h=e.footnoteById.get(e.footnoteOrder[d]);if(!h)continue;const p=e.all(h),m=String(h.identifier).toUpperCase(),b=Bs(m.toLowerCase());let T=0;const w=[],A=e.footnoteCounts.get(m);for(;A!==void 0&&++T<=A;){w.length>0&&w.push({type:"text",value:" "});let R=typeof n=="string"?n:n(d,T);typeof R=="string"&&(R={type:"text",value:R}),w.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+b+(T>1?"-"+T:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(d,T),className:["data-footnote-backref"]},children:Array.isArray(R)?R:[R]})}const S=p[p.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const R=S.children[S.children.length-1];R&&R.type==="text"?R.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...w)}else p.push(...w);const x={type:"element",tagName:"li",properties:{id:t+"fn-"+b},children:e.wrap(p,!0)};e.patch(h,x),c.push(x)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Fi(u),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(c,!0)},{type:"text",value:`
`}]}}const Ol=(function(e){if(e==null)return yN;if(typeof e=="function")return Rl(e);if(typeof e=="object")return Array.isArray(e)?pN(e):mN(e);if(typeof e=="string")return gN(e);throw new Error("Expected function, string, or object as test")});function pN(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Ol(e[n]);return Rl(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function mN(e){const t=e;return Rl(n);function n(r){const s=r;let a;for(a in e)if(s[a]!==t[a])return!1;return!0}}function gN(e){return Rl(t);function t(n){return n&&n.type===e}}function Rl(e){return t;function t(n,r,s){return!!(bN(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function yN(){return!0}function bN(e){return e!==null&&typeof e=="object"&&"type"in e}const hE=[],EN=!0,Uh=!1,TN="skip";function fE(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const a=Ol(s),u=r?-1:1;c(e,void 0,[])();function c(d,h,p){const m=d&&typeof d=="object"?d:{};if(typeof m.type=="string"){const T=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(d.type+(T?"<"+T+">":""))+")"})}return b;function b(){let T=hE,w,A,S;if((!t||a(d,h,p[p.length-1]||void 0))&&(T=_N(n(d,p)),T[0]===Uh))return T;if("children"in d&&d.children){const x=d;if(x.children&&T[0]!==TN)for(A=(r?x.children.length:-1)+u,S=p.concat(x);A>-1&&A<x.children.length;){const R=x.children[A];if(w=c(R,A,S)(),w[0]===Uh)return w;A=typeof w[1]=="number"?w[1]:A+u}}return T}}}function _N(e){return Array.isArray(e)?e:typeof e=="number"?[EN,e]:e==null?hE:[e]}function Pl(e,t,n,r){let s,a,u;typeof t=="function"&&typeof n!="function"?(a=void 0,u=t,s=n):(a=t,u=n,s=r),fE(e,a,c,s);function c(d,h){const p=h[h.length-1],m=p?p.children.indexOf(d):void 0;return u(d,m,p)}}const Hh={}.hasOwnProperty,vN={};function xN(e,t){const n=t||vN,r=new Map,s=new Map,a=new Map,u={...oN,...n.handlers},c={all:h,applyData:kN,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:u,one:d,options:n,patch:wN,wrap:AN};return Pl(e,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){const m=p.type==="definition"?r:s,b=String(p.identifier).toUpperCase();m.has(b)||m.set(b,p)}}),c;function d(p,m){const b=p.type,T=c.handlers[b];if(Hh.call(c.handlers,b)&&T)return T(c,p,m);if(c.options.passThrough&&c.options.passThrough.includes(b)){if("children"in p){const{children:A,...S}=p,x=Fi(S);return x.children=c.all(p),x}return Fi(p)}return(c.options.unknownHandler||SN)(c,p,m)}function h(p){const m=[];if("children"in p){const b=p.children;let T=-1;for(;++T<b.length;){const w=c.one(b[T],p);if(w){if(T&&b[T-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=dy(w.value)),!Array.isArray(w)&&w.type==="element")){const A=w.children[0];A&&A.type==="text"&&(A.value=dy(A.value))}Array.isArray(w)?m.push(...w):m.push(w)}}}return m}}function wN(e,t){e.position&&(t.position=zb(e))}function kN(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,a=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const u="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:u}}n.type==="element"&&a&&Object.assign(n.properties,Fi(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function SN(e,t){const n=t.data||{},r="value"in t&&!(Hh.call(n,"hProperties")||Hh.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function AN(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function dy(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function hy(e,t){const n=xN(e,t),r=n.one(e,void 0),s=fN(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function CN(e,t){return e&&"run"in e?async function(n,r){const s=hy(n,{file:r,...t});await e.run(s,r)}:function(n,r){return hy(n,{file:r,...e||t})}}function fy(e){if(e)throw e}var Vd,py;function NN(){if(py)return Vd;py=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(h){return typeof Array.isArray=="function"?Array.isArray(h):t.call(h)==="[object Array]"},a=function(h){if(!h||t.call(h)!=="[object Object]")return!1;var p=e.call(h,"constructor"),m=h.constructor&&h.constructor.prototype&&e.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!p&&!m)return!1;var b;for(b in h);return typeof b>"u"||e.call(h,b)},u=function(h,p){n&&p.name==="__proto__"?n(h,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):h[p.name]=p.newValue},c=function(h,p){if(p==="__proto__")if(e.call(h,p)){if(r)return r(h,p).value}else return;return h[p]};return Vd=function d(){var h,p,m,b,T,w,A=arguments[0],S=1,x=arguments.length,R=!1;for(typeof A=="boolean"&&(R=A,A=arguments[1]||{},S=2),(A==null||typeof A!="object"&&typeof A!="function")&&(A={});S<x;++S)if(h=arguments[S],h!=null)for(p in h)m=c(A,p),b=c(h,p),A!==b&&(R&&b&&(a(b)||(T=s(b)))?(T?(T=!1,w=m&&s(m)?m:[]):w=m&&a(m)?m:{},u(A,{name:p,newValue:d(R,w,b)})):typeof b<"u"&&u(A,{name:p,newValue:b}));return A},Vd}var IN=NN();const $d=_l(IN);function zh(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function ON(){const e=[],t={run:n,use:r};return t;function n(...s){let a=-1;const u=s.pop();if(typeof u!="function")throw new TypeError("Expected function as last argument, not "+u);c(null,...s);function c(d,...h){const p=e[++a];let m=-1;if(d){u(d);return}for(;++m<s.length;)(h[m]===null||h[m]===void 0)&&(h[m]=s[m]);s=h,p?RN(p,c)(...h):u(null,...h)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function RN(e,t){let n;return r;function r(...u){const c=e.length>u.length;let d;c&&u.push(s);try{d=e.apply(this,u)}catch(h){const p=h;if(c&&n)throw p;return s(p)}c||(d&&d.then&&typeof d.then=="function"?d.then(a,s):d instanceof Error?s(d):a(d))}function s(u,...c){n||(n=!0,t(u,...c))}function a(u){s(null,u)}}const Gn={basename:PN,dirname:LN,extname:DN,join:MN,sep:"/"};function PN(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ea(e);let n=0,r=-1,s=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let u=-1,c=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else u<0&&(a=!0,u=s+1),c>-1&&(e.codePointAt(s)===t.codePointAt(c--)?c<0&&(r=s):(c=-1,r=u));return n===r?r=u:r<0&&(r=e.length),e.slice(n,r)}function LN(e){if(Ea(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function DN(e){Ea(e);let t=e.length,n=-1,r=0,s=-1,a=0,u;for(;t--;){const c=e.codePointAt(t);if(c===47){if(u){r=t+1;break}continue}n<0&&(u=!0,n=t+1),c===46?s<0?s=t:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function MN(...e){let t=-1,n;for(;++t<e.length;)Ea(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":BN(n)}function BN(e){Ea(e);const t=e.codePointAt(0)===47;let n=FN(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function FN(e,t){let n="",r=0,s=-1,a=0,u=-1,c,d;for(;++u<=e.length;){if(u<e.length)c=e.codePointAt(u);else{if(c===47)break;c=47}if(c===47){if(!(s===u-1||a===1))if(s!==u-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(d=n.lastIndexOf("/"),d!==n.length-1){d<0?(n="",r=0):(n=n.slice(0,d),r=n.length-1-n.lastIndexOf("/")),s=u,a=0;continue}}else if(n.length>0){n="",r=0,s=u,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,u):n=e.slice(s+1,u),r=u-s-1;s=u,a=0}else c===46&&a>-1?a++:a=-1}return n}function Ea(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const jN={cwd:UN};function UN(){return"/"}function Vh(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function HN(e){if(typeof e=="string")e=new URL(e);else if(!Vh(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return zN(e)}function zN(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const Wd=["history","path","basename","stem","extname","dirname"];class pE{constructor(t){let n;t?Vh(t)?n={path:t}:typeof t=="string"||VN(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":jN.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Wd.length;){const a=Wd[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)Wd.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Gn.basename(this.path):void 0}set basename(t){qd(t,"basename"),Kd(t,"basename"),this.path=Gn.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Gn.dirname(this.path):void 0}set dirname(t){my(this.basename,"dirname"),this.path=Gn.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Gn.extname(this.path):void 0}set extname(t){if(Kd(t,"extname"),my(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Gn.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Vh(t)&&(t=HN(t)),qd(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Gn.basename(this.path,this.extname):void 0}set stem(t){qd(t,"stem"),Kd(t,"stem"),this.path=Gn.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new zt(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Kd(e,t){if(e&&e.includes(Gn.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Gn.sep+"`")}function qd(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function my(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function VN(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const $N=(function(e){const r=this.constructor.prototype,s=r[e],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),WN={}.hasOwnProperty;class Lf extends $N{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=ON()}copy(){const t=new Lf;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data($d(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Qd("data",this.frozen),this.namespace[t]=n,this):WN.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Qd("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Wu(t),r=this.parser||this.Parser;return Yd("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Yd("process",this.parser||this.Parser),Gd("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,u){const c=Wu(t),d=r.parse(c);r.run(d,c,function(p,m,b){if(p||!m||!b)return h(p);const T=m,w=r.stringify(T,b);YN(w)?b.value=w:b.result=w,h(p,b)});function h(p,m){p||!m?u(p):a?a(m):n(void 0,m)}}}processSync(t){let n=!1,r;return this.freeze(),Yd("processSync",this.parser||this.Parser),Gd("processSync",this.compiler||this.Compiler),this.process(t,s),yy("processSync","process",n),r;function s(a,u){n=!0,fy(a),r=u}}run(t,n,r){gy(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(u,c){const d=Wu(n);s.run(t,d,h);function h(p,m,b){const T=m||t;p?c(p):u?u(T):r(void 0,T,b)}}}runSync(t,n){let r=!1,s;return this.run(t,n,a),yy("runSync","run",r),s;function a(u,c){fy(u),s=c,r=!0}}stringify(t,n){this.freeze();const r=Wu(n),s=this.compiler||this.Compiler;return Gd("stringify",s),gy(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(Qd("use",this.frozen),t!=null)if(typeof t=="function")d(t,n);else if(typeof t=="object")Array.isArray(t)?c(t):u(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(h){if(typeof h=="function")d(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[p,...m]=h;d(p,m)}else u(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function u(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(h.plugins),h.settings&&(s.settings=$d(!0,s.settings,h.settings))}function c(h){let p=-1;if(h!=null)if(Array.isArray(h))for(;++p<h.length;){const m=h[p];a(m)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function d(h,p){let m=-1,b=-1;for(;++m<r.length;)if(r[m][0]===h){b=m;break}if(b===-1)r.push([h,...p]);else if(p.length>0){let[T,...w]=p;const A=r[b][1];zh(A)&&zh(T)&&(T=$d(!0,A,T)),r[b]=[h,T,...w]}}}}const KN=new Lf().freeze();function Yd(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Gd(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Qd(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function gy(e){if(!zh(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function yy(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Wu(e){return qN(e)?e:new pE(e)}function qN(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function YN(e){return typeof e=="string"||GN(e)}function GN(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const QN="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",by=[],Ey={allowDangerousHtml:!0},XN=/^(https?|ircs?|mailto|xmpp)$/i,JN=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function wi(e){const t=ZN(e),n=eI(e);return tI(t.runSync(t.parse(n),n),e)}function ZN(e){const t=e.rehypePlugins||by,n=e.remarkPlugins||by,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Ey}:Ey;return KN().use(LC).use(n).use(CN,r).use(t)}function eI(e){const t=e.children||"",n=new pE;return typeof t=="string"&&(n.value=t),n}function tI(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,a=t.disallowedElements,u=t.skipHtml,c=t.unwrapDisallowed,d=t.urlTransform||nI;for(const p of JN)Object.hasOwn(t,p.from)&&(""+p.from+(p.to?"use `"+p.to+"` instead":"remove it")+QN+p.id,void 0);return Pl(e,h),yS(e,{Fragment:v.Fragment,components:s,ignoreInvalidStyle:!0,jsx:v.jsx,jsxs:v.jsxs,passKeys:!0,passNode:!0});function h(p,m,b){if(p.type==="raw"&&b&&typeof m=="number")return u?b.children.splice(m,1):b.children[m]={type:"text",value:p.value},m;if(p.type==="element"){let T;for(T in Ud)if(Object.hasOwn(Ud,T)&&Object.hasOwn(p.properties,T)){const w=p.properties[T],A=Ud[T];(A===null||A.includes(p.tagName))&&(p.properties[T]=d(String(w||""),T,p))}}if(p.type==="element"){let T=n?!n.includes(p.tagName):a?a.includes(p.tagName):!1;if(!T&&r&&typeof m=="number"&&(T=!r(p,m,b)),T&&b&&typeof m=="number")return c&&p.children?b.children.splice(m,1,...p.children):b.children.splice(m,1),m}}}function nI(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||n!==-1&&t>n||r!==-1&&t>r||XN.test(e.slice(0,t))?e:""}function Ty(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(t);for(;s!==-1;)r++,s=n.indexOf(t,s+t.length);return r}function rI(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function iI(e,t,n){const s=Ol((n||{}).ignore||[]),a=sI(t);let u=-1;for(;++u<a.length;)fE(e,"text",c);function c(h,p){let m=-1,b;for(;++m<p.length;){const T=p[m],w=b?b.children:void 0;if(s(T,w?w.indexOf(T):void 0,b))return;b=T}if(b)return d(h,p)}function d(h,p){const m=p[p.length-1],b=a[u][0],T=a[u][1];let w=0;const S=m.children.indexOf(h);let x=!1,R=[];b.lastIndex=0;let C=b.exec(h.value);for(;C;){const j=C.index,M={index:C.index,input:C.input,stack:[...p,h]};let I=T(...C,M);if(typeof I=="string"&&(I=I.length>0?{type:"text",value:I}:void 0),I===!1?b.lastIndex=j+1:(w!==j&&R.push({type:"text",value:h.value.slice(w,j)}),Array.isArray(I)?R.push(...I):I&&R.push(I),w=j+C[0].length,x=!0),!b.global)break;C=b.exec(h.value)}return x?(w<h.value.length&&R.push({type:"text",value:h.value.slice(w)}),m.children.splice(S,1,...R)):R=[h],S+R.length}}function sI(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const s=n[r];t.push([oI(s[0]),aI(s[1])])}return t}function oI(e){return typeof e=="string"?new RegExp(rI(e),"g"):e}function aI(e){return typeof e=="function"?e:function(){return e}}const Xd="phrasing",Jd=["autolink","link","image","label"];function uI(){return{transforms:[mI],enter:{literalAutolink:cI,literalAutolinkEmail:Zd,literalAutolinkHttp:Zd,literalAutolinkWww:Zd},exit:{literalAutolink:pI,literalAutolinkEmail:fI,literalAutolinkHttp:dI,literalAutolinkWww:hI}}}function lI(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Xd,notInConstruct:Jd},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Xd,notInConstruct:Jd},{character:":",before:"[ps]",after:"\\/",inConstruct:Xd,notInConstruct:Jd}]}}function cI(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Zd(e){this.config.enter.autolinkProtocol.call(this,e)}function dI(e){this.config.exit.autolinkProtocol.call(this,e)}function hI(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function fI(e){this.config.exit.autolinkEmail.call(this,e)}function pI(e){this.exit(e)}function mI(e){iI(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,gI],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),yI]],{ignore:["link","linkReference"]})}function gI(e,t,n,r,s){let a="";if(!mE(s)||(/^w/i.test(t)&&(n=t+n,t="",a="http://"),!bI(n)))return!1;const u=EI(n+r);if(!u[0])return!1;const c={type:"link",title:null,url:a+t+u[0],children:[{type:"text",value:t+u[0]}]};return u[1]?[c,{type:"text",value:u[1]}]:c}function yI(e,t,n,r){return!mE(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function bI(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function EI(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const s=Ty(e,"(");let a=Ty(e,")");for(;r!==-1&&s>a;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[e,n]}function mE(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Bi(n)||Cl(n))&&(!t||n!==47)}gE.peek=CI;function TI(){this.buffer()}function _I(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function vI(){this.buffer()}function xI(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function wI(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Un(this.sliceSerialize(e)).toLowerCase(),n.label=t}function kI(e){this.exit(e)}function SI(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Un(this.sliceSerialize(e)).toLowerCase(),n.label=t}function AI(e){this.exit(e)}function CI(){return"["}function gE(e,t,n,r){const s=n.createTracker(r);let a=s.move("[^");const u=n.enter("footnoteReference"),c=n.enter("reference");return a+=s.move(n.safe(n.associationId(e),{after:"]",before:a})),c(),u(),a+=s.move("]"),a}function NI(){return{enter:{gfmFootnoteCallString:TI,gfmFootnoteCall:_I,gfmFootnoteDefinitionLabelString:vI,gfmFootnoteDefinition:xI},exit:{gfmFootnoteCallString:wI,gfmFootnoteCall:kI,gfmFootnoteDefinitionLabelString:SI,gfmFootnoteDefinition:AI}}}function II(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:gE},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,a,u){const c=a.createTracker(u);let d=c.move("[^");const h=a.enter("footnoteDefinition"),p=a.enter("label");return d+=c.move(a.safe(a.associationId(r),{before:d,after:"]"})),p(),d+=c.move("]:"),r.children&&r.children.length>0&&(c.shift(4),d+=c.move((t?`
`:" ")+a.indentLines(a.containerFlow(r,c.current()),t?yE:OI))),h(),d}}function OI(e,t,n){return t===0?e:yE(e,t,n)}function yE(e,t,n){return(n?"":"    ")+e}const RI=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];bE.peek=BI;function PI(){return{canContainEols:["delete"],enter:{strikethrough:DI},exit:{strikethrough:MI}}}function LI(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:RI}],handlers:{delete:bE}}}function DI(e){this.enter({type:"delete",children:[]},e)}function MI(e){this.exit(e)}function bE(e,t,n,r){const s=n.createTracker(r),a=n.enter("strikethrough");let u=s.move("~~");return u+=n.containerPhrasing(e,{...s.current(),before:u,after:"~"}),u+=s.move("~~"),a(),u}function BI(){return"~"}function FI(e){return e.length}function jI(e,t){const n=t||{},r=(n.align||[]).concat(),s=n.stringLength||FI,a=[],u=[],c=[],d=[];let h=0,p=-1;for(;++p<e.length;){const A=[],S=[];let x=-1;for(e[p].length>h&&(h=e[p].length);++x<e[p].length;){const R=UI(e[p][x]);if(n.alignDelimiters!==!1){const C=s(R);S[x]=C,(d[x]===void 0||C>d[x])&&(d[x]=C)}A.push(R)}u[p]=A,c[p]=S}let m=-1;if(typeof r=="object"&&"length"in r)for(;++m<h;)a[m]=_y(r[m]);else{const A=_y(r);for(;++m<h;)a[m]=A}m=-1;const b=[],T=[];for(;++m<h;){const A=a[m];let S="",x="";A===99?(S=":",x=":"):A===108?S=":":A===114&&(x=":");let R=n.alignDelimiters===!1?1:Math.max(1,d[m]-S.length-x.length);const C=S+"-".repeat(R)+x;n.alignDelimiters!==!1&&(R=S.length+R+x.length,R>d[m]&&(d[m]=R),T[m]=R),b[m]=C}u.splice(1,0,b),c.splice(1,0,T),p=-1;const w=[];for(;++p<u.length;){const A=u[p],S=c[p];m=-1;const x=[];for(;++m<h;){const R=A[m]||"";let C="",j="";if(n.alignDelimiters!==!1){const M=d[m]-(S[m]||0),I=a[m];I===114?C=" ".repeat(M):I===99?M%2?(C=" ".repeat(M/2+.5),j=" ".repeat(M/2-.5)):(C=" ".repeat(M/2),j=C):j=" ".repeat(M)}n.delimiterStart!==!1&&!m&&x.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&R==="")&&(n.delimiterStart!==!1||m)&&x.push(" "),n.alignDelimiters!==!1&&x.push(C),x.push(R),n.alignDelimiters!==!1&&x.push(j),n.padding!==!1&&x.push(" "),(n.delimiterEnd!==!1||m!==h-1)&&x.push("|")}w.push(n.delimiterEnd===!1?x.join("").replace(/ +$/,""):x.join(""))}return w.join(`
`)}function UI(e){return e==null?"":String(e)}function _y(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const vy={}.hasOwnProperty;function EE(e,t){const n=t||{};function r(s,...a){let u=r.invalid;const c=r.handlers;if(s&&vy.call(s,e)){const d=String(s[e]);u=vy.call(c,d)?c[d]:r.unknown}if(u)return u.call(this,s,...a)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}function HI(e,t,n,r){const s=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const u=n.indentLines(n.containerFlow(e,a.current()),zI);return s(),u}function zI(e,t,n){return">"+(n?"":" ")+e}function VI(e,t){return xy(e,t.inConstruct,!0)&&!xy(e,t.notInConstruct,!1)}function xy(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function wy(e,t,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&VI(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function $I(e,t){const n=String(e);let r=n.indexOf(t),s=r,a=0,u=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++a>u&&(u=a):a=1,s=r+t.length,r=n.indexOf(t,s);return u}function WI(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function KI(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function qI(e,t,n,r){const s=KI(n),a=e.value||"",u=s==="`"?"GraveAccent":"Tilde";if(WI(e,n)){const m=n.enter("codeIndented"),b=n.indentLines(a,YI);return m(),b}const c=n.createTracker(r),d=s.repeat(Math.max($I(a,s)+1,3)),h=n.enter("codeFenced");let p=c.move(d);if(e.lang){const m=n.enter(`codeFencedLang${u}`);p+=c.move(n.safe(e.lang,{before:p,after:" ",encode:["`"],...c.current()})),m()}if(e.lang&&e.meta){const m=n.enter(`codeFencedMeta${u}`);p+=c.move(" "),p+=c.move(n.safe(e.meta,{before:p,after:`
`,encode:["`"],...c.current()})),m()}return p+=c.move(`
`),a&&(p+=c.move(a+`
`)),p+=c.move(d),h(),p}function YI(e,t,n){return(n?"":"    ")+e}function Df(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function GI(e,t,n,r){const s=Df(n),a=s==='"'?"Quote":"Apostrophe",u=n.enter("definition");let c=n.enter("label");const d=n.createTracker(r);let h=d.move("[");return h+=d.move(n.safe(n.associationId(e),{before:h,after:"]",...d.current()})),h+=d.move("]: "),c(),!e.url||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),h+=d.move("<"),h+=d.move(n.safe(e.url,{before:h,after:">",...d.current()})),h+=d.move(">")):(c=n.enter("destinationRaw"),h+=d.move(n.safe(e.url,{before:h,after:e.title?" ":`
`,...d.current()}))),c(),e.title&&(c=n.enter(`title${a}`),h+=d.move(" "+s),h+=d.move(n.safe(e.title,{before:h,after:s,...d.current()})),h+=d.move(s),c()),u(),h}function QI(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function ua(e){return"&#x"+e.toString(16).toUpperCase()+";"}function ll(e,t,n){const r=Rs(e),s=Rs(t);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}TE.peek=XI;function TE(e,t,n,r){const s=QI(n),a=n.enter("emphasis"),u=n.createTracker(r),c=u.move(s);let d=u.move(n.containerPhrasing(e,{after:s,before:c,...u.current()}));const h=d.charCodeAt(0),p=ll(r.before.charCodeAt(r.before.length-1),h,s);p.inside&&(d=ua(h)+d.slice(1));const m=d.charCodeAt(d.length-1),b=ll(r.after.charCodeAt(0),m,s);b.inside&&(d=d.slice(0,-1)+ua(m));const T=u.move(s);return a(),n.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},c+d+T}function XI(e,t,n){return n.options.emphasis||"*"}function JI(e,t){let n=!1;return Pl(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Uh}),!!((!e.depth||e.depth<3)&&Af(e)&&(t.options.setext||n))}function ZI(e,t,n,r){const s=Math.max(Math.min(6,e.depth||1),1),a=n.createTracker(r);if(JI(e,n)){const p=n.enter("headingSetext"),m=n.enter("phrasing"),b=n.containerPhrasing(e,{...a.current(),before:`
`,after:`
`});return m(),p(),b+`
`+(s===1?"=":"-").repeat(b.length-(Math.max(b.lastIndexOf("\r"),b.lastIndexOf(`
`))+1))}const u="#".repeat(s),c=n.enter("headingAtx"),d=n.enter("phrasing");a.move(u+" ");let h=n.containerPhrasing(e,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(h)&&(h=ua(h.charCodeAt(0))+h.slice(1)),h=h?u+" "+h:u,n.options.closeAtx&&(h+=" "+u),d(),c(),h}_E.peek=e3;function _E(e){return e.value||""}function e3(){return"<"}vE.peek=t3;function vE(e,t,n,r){const s=Df(n),a=s==='"'?"Quote":"Apostrophe",u=n.enter("image");let c=n.enter("label");const d=n.createTracker(r);let h=d.move("![");return h+=d.move(n.safe(e.alt,{before:h,after:"]",...d.current()})),h+=d.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),h+=d.move("<"),h+=d.move(n.safe(e.url,{before:h,after:">",...d.current()})),h+=d.move(">")):(c=n.enter("destinationRaw"),h+=d.move(n.safe(e.url,{before:h,after:e.title?" ":")",...d.current()}))),c(),e.title&&(c=n.enter(`title${a}`),h+=d.move(" "+s),h+=d.move(n.safe(e.title,{before:h,after:s,...d.current()})),h+=d.move(s),c()),h+=d.move(")"),u(),h}function t3(){return"!"}xE.peek=n3;function xE(e,t,n,r){const s=e.referenceType,a=n.enter("imageReference");let u=n.enter("label");const c=n.createTracker(r);let d=c.move("![");const h=n.safe(e.alt,{before:d,after:"]",...c.current()});d+=c.move(h+"]["),u();const p=n.stack;n.stack=[],u=n.enter("reference");const m=n.safe(n.associationId(e),{before:d,after:"]",...c.current()});return u(),n.stack=p,a(),s==="full"||!h||h!==m?d+=c.move(m+"]"):s==="shortcut"?d=d.slice(0,-1):d+=c.move("]"),d}function n3(){return"!"}wE.peek=r3;function wE(e,t,n){let r=e.value||"",s="`",a=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const u=n.unsafe[a],c=n.compilePattern(u);let d;if(u.atBreak)for(;d=c.exec(r);){let h=d.index;r.charCodeAt(h)===10&&r.charCodeAt(h-1)===13&&h--,r=r.slice(0,h)+" "+r.slice(d.index+1)}}return s+r+s}function r3(){return"`"}function kE(e,t){const n=Af(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}SE.peek=i3;function SE(e,t,n,r){const s=Df(n),a=s==='"'?"Quote":"Apostrophe",u=n.createTracker(r);let c,d;if(kE(e,n)){const p=n.stack;n.stack=[],c=n.enter("autolink");let m=u.move("<");return m+=u.move(n.containerPhrasing(e,{before:m,after:">",...u.current()})),m+=u.move(">"),c(),n.stack=p,m}c=n.enter("link"),d=n.enter("label");let h=u.move("[");return h+=u.move(n.containerPhrasing(e,{before:h,after:"](",...u.current()})),h+=u.move("]("),d(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(d=n.enter("destinationLiteral"),h+=u.move("<"),h+=u.move(n.safe(e.url,{before:h,after:">",...u.current()})),h+=u.move(">")):(d=n.enter("destinationRaw"),h+=u.move(n.safe(e.url,{before:h,after:e.title?" ":")",...u.current()}))),d(),e.title&&(d=n.enter(`title${a}`),h+=u.move(" "+s),h+=u.move(n.safe(e.title,{before:h,after:s,...u.current()})),h+=u.move(s),d()),h+=u.move(")"),c(),h}function i3(e,t,n){return kE(e,n)?"<":"["}AE.peek=s3;function AE(e,t,n,r){const s=e.referenceType,a=n.enter("linkReference");let u=n.enter("label");const c=n.createTracker(r);let d=c.move("[");const h=n.containerPhrasing(e,{before:d,after:"]",...c.current()});d+=c.move(h+"]["),u();const p=n.stack;n.stack=[],u=n.enter("reference");const m=n.safe(n.associationId(e),{before:d,after:"]",...c.current()});return u(),n.stack=p,a(),s==="full"||!h||h!==m?d+=c.move(m+"]"):s==="shortcut"?d=d.slice(0,-1):d+=c.move("]"),d}function s3(){return"["}function Mf(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function o3(e){const t=Mf(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function a3(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function CE(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function u3(e,t,n,r){const s=n.enter("list"),a=n.bulletCurrent;let u=e.ordered?a3(n):Mf(n);const c=e.ordered?u==="."?")":".":o3(n);let d=t&&n.bulletLastUsed?u===n.bulletLastUsed:!1;if(!e.ordered){const p=e.children?e.children[0]:void 0;if((u==="*"||u==="-")&&p&&(!p.children||!p.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(d=!0),CE(n)===u&&p){let m=-1;for(;++m<e.children.length;){const b=e.children[m];if(b&&b.type==="listItem"&&b.children&&b.children[0]&&b.children[0].type==="thematicBreak"){d=!0;break}}}}d&&(u=c),n.bulletCurrent=u;const h=n.containerFlow(e,r);return n.bulletLastUsed=u,n.bulletCurrent=a,s(),h}function l3(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function c3(e,t,n,r){const s=l3(n);let a=n.bulletCurrent||Mf(n);t&&t.type==="list"&&t.ordered&&(a=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+a);let u=a.length+1;(s==="tab"||s==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(u=Math.ceil(u/4)*4);const c=n.createTracker(r);c.move(a+" ".repeat(u-a.length)),c.shift(u);const d=n.enter("listItem"),h=n.indentLines(n.containerFlow(e,c.current()),p);return d(),h;function p(m,b,T){return b?(T?"":" ".repeat(u))+m:(T?a:a+" ".repeat(u-a.length))+m}}function d3(e,t,n,r){const s=n.enter("paragraph"),a=n.enter("phrasing"),u=n.containerPhrasing(e,r);return a(),s(),u}const h3=Ol(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function f3(e,t,n,r){return(e.children.some(function(u){return h3(u)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function p3(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}NE.peek=m3;function NE(e,t,n,r){const s=p3(n),a=n.enter("strong"),u=n.createTracker(r),c=u.move(s+s);let d=u.move(n.containerPhrasing(e,{after:s,before:c,...u.current()}));const h=d.charCodeAt(0),p=ll(r.before.charCodeAt(r.before.length-1),h,s);p.inside&&(d=ua(h)+d.slice(1));const m=d.charCodeAt(d.length-1),b=ll(r.after.charCodeAt(0),m,s);b.inside&&(d=d.slice(0,-1)+ua(m));const T=u.move(s+s);return a(),n.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},c+d+T}function m3(e,t,n){return n.options.strong||"*"}function g3(e,t,n,r){return n.safe(e.value,r)}function y3(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function b3(e,t,n){const r=(CE(n)+(n.options.ruleSpaces?" ":"")).repeat(y3(n));return n.options.ruleSpaces?r.slice(0,-1):r}const IE={blockquote:HI,break:wy,code:qI,definition:GI,emphasis:TE,hardBreak:wy,heading:ZI,html:_E,image:vE,imageReference:xE,inlineCode:wE,link:SE,linkReference:AE,list:u3,listItem:c3,paragraph:d3,root:f3,strong:NE,text:g3,thematicBreak:b3};function E3(){return{enter:{table:T3,tableData:ky,tableHeader:ky,tableRow:v3},exit:{codeText:x3,table:_3,tableData:eh,tableHeader:eh,tableRow:eh}}}function T3(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function _3(e){this.exit(e),this.data.inTable=void 0}function v3(e){this.enter({type:"tableRow",children:[]},e)}function eh(e){this.exit(e)}function ky(e){this.enter({type:"tableCell",children:[]},e)}function x3(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,w3));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function w3(e,t){return t==="|"?t:e}function k3(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,s=t.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:b,table:u,tableCell:d,tableRow:c}};function u(T,w,A,S){return h(p(T,A,S),T.align)}function c(T,w,A,S){const x=m(T,A,S),R=h([x]);return R.slice(0,R.indexOf(`
`))}function d(T,w,A,S){const x=A.enter("tableCell"),R=A.enter("phrasing"),C=A.containerPhrasing(T,{...S,before:a,after:a});return R(),x(),C}function h(T,w){return jI(T,{align:w,alignDelimiters:r,padding:n,stringLength:s})}function p(T,w,A){const S=T.children;let x=-1;const R=[],C=w.enter("table");for(;++x<S.length;)R[x]=m(S[x],w,A);return C(),R}function m(T,w,A){const S=T.children;let x=-1;const R=[],C=w.enter("tableRow");for(;++x<S.length;)R[x]=d(S[x],T,w,A);return C(),R}function b(T,w,A){let S=IE.inlineCode(T,w,A);return A.stack.includes("tableCell")&&(S=S.replace(/\|/g,"\\$&")),S}}function S3(){return{exit:{taskListCheckValueChecked:Sy,taskListCheckValueUnchecked:Sy,paragraph:C3}}}function A3(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:N3}}}function Sy(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function C3(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=t.children;let a=-1,u;for(;++a<s.length;){const c=s[a];if(c.type==="paragraph"){u=c;break}}u===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function N3(e,t,n,r){const s=e.children[0],a=typeof e.checked=="boolean"&&s&&s.type==="paragraph",u="["+(e.checked?"x":" ")+"] ",c=n.createTracker(r);a&&c.move(u);let d=IE.listItem(e,t,n,{...r,...c.current()});return a&&(d=d.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),d;function h(p){return p+u}}function I3(){return[uI(),NI(),PI(),E3(),S3()]}function O3(e){return{extensions:[lI(),II(e),LI(),k3(e),A3()]}}const R3={tokenize:F3,partial:!0},OE={tokenize:j3,partial:!0},RE={tokenize:U3,partial:!0},PE={tokenize:H3,partial:!0},P3={tokenize:z3,partial:!0},LE={name:"wwwAutolink",tokenize:M3,previous:ME},DE={name:"protocolAutolink",tokenize:B3,previous:BE},gr={name:"emailAutolink",tokenize:D3,previous:FE},er={};function L3(){return{text:er}}let Ti=48;for(;Ti<123;)er[Ti]=gr,Ti++,Ti===58?Ti=65:Ti===91&&(Ti=97);er[43]=gr;er[45]=gr;er[46]=gr;er[95]=gr;er[72]=[gr,DE];er[104]=[gr,DE];er[87]=[gr,LE];er[119]=[gr,LE];function D3(e,t,n){const r=this;let s,a;return u;function u(m){return!$h(m)||!FE.call(r,r.previous)||Bf(r.events)?n(m):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),c(m))}function c(m){return $h(m)?(e.consume(m),c):m===64?(e.consume(m),d):n(m)}function d(m){return m===46?e.check(P3,p,h)(m):m===45||m===95||Ut(m)?(a=!0,e.consume(m),d):p(m)}function h(m){return e.consume(m),s=!0,d}function p(m){return a&&s&&Kt(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(m)):n(m)}}function M3(e,t,n){const r=this;return s;function s(u){return u!==87&&u!==119||!ME.call(r,r.previous)||Bf(r.events)?n(u):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(R3,e.attempt(OE,e.attempt(RE,a),n),n)(u))}function a(u){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(u)}}function B3(e,t,n){const r=this;let s="",a=!1;return u;function u(m){return(m===72||m===104)&&BE.call(r,r.previous)&&!Bf(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(m),e.consume(m),c):n(m)}function c(m){if(Kt(m)&&s.length<5)return s+=String.fromCodePoint(m),e.consume(m),c;if(m===58){const b=s.toLowerCase();if(b==="http"||b==="https")return e.consume(m),d}return n(m)}function d(m){return m===47?(e.consume(m),a?h:(a=!0,d)):n(m)}function h(m){return m===null||al(m)||Ge(m)||Bi(m)||Cl(m)?n(m):e.attempt(OE,e.attempt(RE,p),n)(m)}function p(m){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(m)}}function F3(e,t,n){let r=0;return s;function s(u){return(u===87||u===119)&&r<3?(r++,e.consume(u),s):u===46&&r===3?(e.consume(u),a):n(u)}function a(u){return u===null?n(u):t(u)}}function j3(e,t,n){let r,s,a;return u;function u(h){return h===46||h===95?e.check(PE,d,c)(h):h===null||Ge(h)||Bi(h)||h!==45&&Cl(h)?d(h):(a=!0,e.consume(h),u)}function c(h){return h===95?r=!0:(s=r,r=void 0),e.consume(h),u}function d(h){return s||r||!a?n(h):t(h)}}function U3(e,t){let n=0,r=0;return s;function s(u){return u===40?(n++,e.consume(u),s):u===41&&r<n?a(u):u===33||u===34||u===38||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===60||u===63||u===93||u===95||u===126?e.check(PE,t,a)(u):u===null||Ge(u)||Bi(u)?t(u):(e.consume(u),s)}function a(u){return u===41&&r++,e.consume(u),s}}function H3(e,t,n){return r;function r(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(e.consume(c),r):c===38?(e.consume(c),a):c===93?(e.consume(c),s):c===60||c===null||Ge(c)||Bi(c)?t(c):n(c)}function s(c){return c===null||c===40||c===91||Ge(c)||Bi(c)?t(c):r(c)}function a(c){return Kt(c)?u(c):n(c)}function u(c){return c===59?(e.consume(c),r):Kt(c)?(e.consume(c),u):n(c)}}function z3(e,t,n){return r;function r(a){return e.consume(a),s}function s(a){return Ut(a)?n(a):t(a)}}function ME(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Ge(e)}function BE(e){return!Kt(e)}function FE(e){return!(e===47||$h(e))}function $h(e){return e===43||e===45||e===46||e===95||Ut(e)}function Bf(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const V3={tokenize:X3,partial:!0};function $3(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Y3,continuation:{tokenize:G3},exit:Q3}},text:{91:{name:"gfmFootnoteCall",tokenize:q3},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:W3,resolveTo:K3}}}}function W3(e,t,n){const r=this;let s=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let u;for(;s--;){const d=r.events[s][1];if(d.type==="labelImage"){u=d;break}if(d.type==="gfmFootnoteCall"||d.type==="labelLink"||d.type==="label"||d.type==="image"||d.type==="link")break}return c;function c(d){if(!u||!u._balanced)return n(d);const h=Un(r.sliceSerialize({start:u.end,end:r.now()}));return h.codePointAt(0)!==94||!a.includes(h.slice(1))?n(d):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),t(d))}}function K3(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},u={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},c=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",s,t],["exit",s,t],["enter",a,t],["enter",u,t],["exit",u,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...c),e}function q3(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,u;return c;function c(m){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(m),e.exit("gfmFootnoteCallLabelMarker"),d}function d(m){return m!==94?n(m):(e.enter("gfmFootnoteCallMarker"),e.consume(m),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",h)}function h(m){if(a>999||m===93&&!u||m===null||m===91||Ge(m))return n(m);if(m===93){e.exit("chunkString");const b=e.exit("gfmFootnoteCallString");return s.includes(Un(r.sliceSerialize(b)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(m),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(m)}return Ge(m)||(u=!0),a++,e.consume(m),m===92?p:h}function p(m){return m===91||m===92||m===93?(e.consume(m),a++,h):h(m)}}function Y3(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,u=0,c;return d;function d(w){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(w){return w===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",p):n(w)}function p(w){if(u>999||w===93&&!c||w===null||w===91||Ge(w))return n(w);if(w===93){e.exit("chunkString");const A=e.exit("gfmFootnoteDefinitionLabelString");return a=Un(r.sliceSerialize(A)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),b}return Ge(w)||(c=!0),u++,e.consume(w),w===92?m:p}function m(w){return w===91||w===92||w===93?(e.consume(w),u++,p):p(w)}function b(w){return w===58?(e.enter("definitionMarker"),e.consume(w),e.exit("definitionMarker"),s.includes(a)||s.push(a),ze(e,T,"gfmFootnoteDefinitionWhitespace")):n(w)}function T(w){return t(w)}}function G3(e,t,n){return e.check(ba,t,e.attempt(V3,t,n))}function Q3(e){e.exit("gfmFootnoteDefinition")}function X3(e,t,n){const r=this;return ze(e,s,"gfmFootnoteDefinitionIndent",5);function s(a){const u=r.events[r.events.length-1];return u&&u[1].type==="gfmFootnoteDefinitionIndent"&&u[2].sliceSerialize(u[1],!0).length===4?t(a):n(a)}}function J3(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(u,c){let d=-1;for(;++d<u.length;)if(u[d][0]==="enter"&&u[d][1].type==="strikethroughSequenceTemporary"&&u[d][1]._close){let h=d;for(;h--;)if(u[h][0]==="exit"&&u[h][1].type==="strikethroughSequenceTemporary"&&u[h][1]._open&&u[d][1].end.offset-u[d][1].start.offset===u[h][1].end.offset-u[h][1].start.offset){u[d][1].type="strikethroughSequence",u[h][1].type="strikethroughSequence";const p={type:"strikethrough",start:Object.assign({},u[h][1].start),end:Object.assign({},u[d][1].end)},m={type:"strikethroughText",start:Object.assign({},u[h][1].end),end:Object.assign({},u[d][1].start)},b=[["enter",p,c],["enter",u[h][1],c],["exit",u[h][1],c],["enter",m,c]],T=c.parser.constructs.insideSpan.null;T&&pn(b,b.length,0,Nl(T,u.slice(h+1,d),c)),pn(b,b.length,0,[["exit",m,c],["enter",u[d][1],c],["exit",u[d][1],c],["exit",p,c]]),pn(u,h-1,d-h+3,b),d=h+b.length-2;break}}for(d=-1;++d<u.length;)u[d][1].type==="strikethroughSequenceTemporary"&&(u[d][1].type="data");return u}function a(u,c,d){const h=this.previous,p=this.events;let m=0;return b;function b(w){return h===126&&p[p.length-1][1].type!=="characterEscape"?d(w):(u.enter("strikethroughSequenceTemporary"),T(w))}function T(w){const A=Rs(h);if(w===126)return m>1?d(w):(u.consume(w),m++,T);if(m<2&&!n)return d(w);const S=u.exit("strikethroughSequenceTemporary"),x=Rs(w);return S._open=!x||x===2&&!!A,S._close=!A||A===2&&!!x,c(w)}}}class Z3{constructor(){this.map=[]}add(t,n,r){eO(this,t,n,r)}consume(t){if(this.map.sort(function(a,u){return a[0]-u[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let s=r.pop();for(;s;){for(const a of s)t.push(a);s=r.pop()}this.map.length=0}}function eO(e,t,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<e.map.length;){if(e.map[s][0]===t){e.map[s][1]+=n,e.map[s][2].push(...r);return}s+=1}e.map.push([t,n,r])}}function tO(e,t){let n=!1;const r=[];for(;t<e.length;){const s=e[t];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function nO(){return{flow:{null:{name:"table",tokenize:rO,resolveAll:iO}}}}function rO(e,t,n){const r=this;let s=0,a=0,u;return c;function c(B){let q=r.events.length-1;for(;q>-1;){const ue=r.events[q][1].type;if(ue==="lineEnding"||ue==="linePrefix")q--;else break}const Z=q>-1?r.events[q][1].type:null,de=Z==="tableHead"||Z==="tableRow"?I:d;return de===I&&r.parser.lazy[r.now().line]?n(B):de(B)}function d(B){return e.enter("tableHead"),e.enter("tableRow"),h(B)}function h(B){return B===124||(u=!0,a+=1),p(B)}function p(B){return B===null?n(B):Ae(B)?a>1?(a=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),T):n(B):He(B)?ze(e,p,"whitespace")(B):(a+=1,u&&(u=!1,s+=1),B===124?(e.enter("tableCellDivider"),e.consume(B),e.exit("tableCellDivider"),u=!0,p):(e.enter("data"),m(B)))}function m(B){return B===null||B===124||Ge(B)?(e.exit("data"),p(B)):(e.consume(B),B===92?b:m)}function b(B){return B===92||B===124?(e.consume(B),m):m(B)}function T(B){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(B):(e.enter("tableDelimiterRow"),u=!1,He(B)?ze(e,w,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):w(B))}function w(B){return B===45||B===58?S(B):B===124?(u=!0,e.enter("tableCellDivider"),e.consume(B),e.exit("tableCellDivider"),A):M(B)}function A(B){return He(B)?ze(e,S,"whitespace")(B):S(B)}function S(B){return B===58?(a+=1,u=!0,e.enter("tableDelimiterMarker"),e.consume(B),e.exit("tableDelimiterMarker"),x):B===45?(a+=1,x(B)):B===null||Ae(B)?j(B):M(B)}function x(B){return B===45?(e.enter("tableDelimiterFiller"),R(B)):M(B)}function R(B){return B===45?(e.consume(B),R):B===58?(u=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(B),e.exit("tableDelimiterMarker"),C):(e.exit("tableDelimiterFiller"),C(B))}function C(B){return He(B)?ze(e,j,"whitespace")(B):j(B)}function j(B){return B===124?w(B):B===null||Ae(B)?!u||s!==a?M(B):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(B)):M(B)}function M(B){return n(B)}function I(B){return e.enter("tableRow"),Q(B)}function Q(B){return B===124?(e.enter("tableCellDivider"),e.consume(B),e.exit("tableCellDivider"),Q):B===null||Ae(B)?(e.exit("tableRow"),t(B)):He(B)?ze(e,Q,"whitespace")(B):(e.enter("data"),W(B))}function W(B){return B===null||B===124||Ge(B)?(e.exit("data"),Q(B)):(e.consume(B),B===92?te:W)}function te(B){return B===92||B===124?(e.consume(B),W):W(B)}}function iO(e,t){let n=-1,r=!0,s=0,a=[0,0,0,0],u=[0,0,0,0],c=!1,d=0,h,p,m;const b=new Z3;for(;++n<e.length;){const T=e[n],w=T[1];T[0]==="enter"?w.type==="tableHead"?(c=!1,d!==0&&(Ay(b,t,d,h,p),p=void 0,d=0),h={type:"table",start:Object.assign({},w.start),end:Object.assign({},w.end)},b.add(n,0,[["enter",h,t]])):w.type==="tableRow"||w.type==="tableDelimiterRow"?(r=!0,m=void 0,a=[0,0,0,0],u=[0,n+1,0,0],c&&(c=!1,p={type:"tableBody",start:Object.assign({},w.start),end:Object.assign({},w.end)},b.add(n,0,[["enter",p,t]])),s=w.type==="tableDelimiterRow"?2:p?3:1):s&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")?(r=!1,u[2]===0&&(a[1]!==0&&(u[0]=u[1],m=Ku(b,t,a,s,void 0,m),a=[0,0,0,0]),u[2]=n)):w.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(u[0]=u[1],m=Ku(b,t,a,s,void 0,m)),a=u,u=[a[1],n,0,0])):w.type==="tableHead"?(c=!0,d=n):w.type==="tableRow"||w.type==="tableDelimiterRow"?(d=n,a[1]!==0?(u[0]=u[1],m=Ku(b,t,a,s,n,m)):u[1]!==0&&(m=Ku(b,t,u,s,n,m)),s=0):s&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")&&(u[3]=n)}for(d!==0&&Ay(b,t,d,h,p),b.consume(t.events),n=-1;++n<t.events.length;){const T=t.events[n];T[0]==="enter"&&T[1].type==="table"&&(T[1]._align=tO(t.events,n))}return e}function Ku(e,t,n,r,s,a){const u=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",c="tableContent";n[0]!==0&&(a.end=Object.assign({},vs(t.events,n[0])),e.add(n[0],0,[["exit",a,t]]));const d=vs(t.events,n[1]);if(a={type:u,start:Object.assign({},d),end:Object.assign({},d)},e.add(n[1],0,[["enter",a,t]]),n[2]!==0){const h=vs(t.events,n[2]),p=vs(t.events,n[3]),m={type:c,start:Object.assign({},h),end:Object.assign({},p)};if(e.add(n[2],0,[["enter",m,t]]),r!==2){const b=t.events[n[2]],T=t.events[n[3]];if(b[1].end=Object.assign({},T[1].end),b[1].type="chunkText",b[1].contentType="text",n[3]>n[2]+1){const w=n[2]+1,A=n[3]-n[2]-1;e.add(w,A,[])}}e.add(n[3]+1,0,[["exit",m,t]])}return s!==void 0&&(a.end=Object.assign({},vs(t.events,s)),e.add(s,0,[["exit",a,t]]),a=void 0),a}function Ay(e,t,n,r,s){const a=[],u=vs(t.events,n);s&&(s.end=Object.assign({},u),a.push(["exit",s,t])),r.end=Object.assign({},u),a.push(["exit",r,t]),e.add(n+1,0,a)}function vs(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const sO={name:"tasklistCheck",tokenize:aO};function oO(){return{text:{91:sO}}}function aO(e,t,n){const r=this;return s;function s(d){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(d):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),a)}function a(d){return Ge(d)?(e.enter("taskListCheckValueUnchecked"),e.consume(d),e.exit("taskListCheckValueUnchecked"),u):d===88||d===120?(e.enter("taskListCheckValueChecked"),e.consume(d),e.exit("taskListCheckValueChecked"),u):n(d)}function u(d){return d===93?(e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),c):n(d)}function c(d){return Ae(d)?t(d):He(d)?e.check({tokenize:uO},t,n)(d):n(d)}}function uO(e,t,n){return ze(e,r,"whitespace");function r(s){return s===null?n(s):t(s)}}function lO(e){return Yb([L3(),$3(),J3(e),nO(),oO()])}const cO={};function ki(e){const t=this,n=e||cO,r=t.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),u=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(lO(n)),a.push(I3()),u.push(O3(n))}const Cy=/[#.]/g;function dO(e,t){const n=e||"",r={};let s=0,a,u;for(;s<n.length;){Cy.lastIndex=s;const c=Cy.exec(n),d=n.slice(s,c?c.index:n.length);d&&(a?a==="#"?r.id=d:Array.isArray(r.className)?r.className.push(d):r.className=[d]:u=d,s+=d.length),c&&(a=c[0],s++)}return{type:"element",tagName:u||t||"div",properties:r,children:[]}}function jE(e,t,n){const r=n?mO(n):void 0;function s(a,u,...c){let d;if(a==null){d={type:"root",children:[]};const h=u;c.unshift(h)}else{d=dO(a,t);const h=d.tagName.toLowerCase(),p=r?r.get(h):void 0;if(d.tagName=p||h,hO(u))c.unshift(u);else for(const[m,b]of Object.entries(u))fO(e,d.properties,m,b)}for(const h of c)Wh(d.children,h);return d.type==="element"&&d.tagName==="template"&&(d.content={type:"root",children:d.children},d.children=[]),d}return s}function hO(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,n=Object.keys(e);for(const r of n){const s=t[r];if(s&&typeof s=="object"){if(!Array.isArray(s))return!0;const a=s;for(const u of a)if(typeof u!="number"&&typeof u!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function fO(e,t,n,r){const s=Sl(e,n);let a;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;a=r}else typeof r=="boolean"?a=r:typeof r=="string"?s.spaceSeparated?a=Hg(r):s.commaSeparated?a=Mg(r):s.commaOrSpaceSeparated?a=Hg(Mg(r).join(" ")):a=Ny(s,s.property,r):Array.isArray(r)?a=[...r]:a=s.property==="style"?pO(r):String(r);if(Array.isArray(a)){const u=[];for(const c of a)u.push(Ny(s,s.property,c));a=u}s.property==="className"&&Array.isArray(t.className)&&(a=t.className.concat(a)),t[s.property]=a}}function Wh(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const n of t)Wh(e,n);else if(typeof t=="object"&&"type"in t)t.type==="root"?Wh(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Ny(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||oa(n)===oa(t)))return!0}return n}function pO(e){const t=[];for(const[n,r]of Object.entries(e))t.push([n,r].join(": "));return t.join("; ")}function mO(e){const t=new Map;for(const n of e)t.set(n.toLowerCase(),n);return t}const gO=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],yO=jE(ya,"div"),bO=jE(Jr,"g",gO);function EO(e){const t=String(e),n=[];return{toOffset:s,toPoint:r};function r(a){if(typeof a=="number"&&a>-1&&a<=t.length){let u=0;for(;;){let c=n[u];if(c===void 0){const d=Iy(t,n[u-1]);c=d===-1?t.length+1:d+1,n[u]=c}if(c>a)return{line:u+1,column:a-(u>0?n[u-1]:0)+1,offset:a};u++}}}function s(a){if(a&&typeof a.line=="number"&&typeof a.column=="number"&&!Number.isNaN(a.line)&&!Number.isNaN(a.column)){for(;n.length<a.line;){const c=n[n.length-1],d=Iy(t,c),h=d===-1?t.length+1:d+1;if(c===h)break;n.push(h)}const u=(a.line>1?n[a.line-2]:0)+a.column-1;if(u<n[a.line-1])return u}}}function Iy(e,t){const n=e.indexOf("\r",t),r=e.indexOf(`
`,t);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const Ri={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},UE={}.hasOwnProperty,TO=Object.prototype;function _O(e,t){const n=t||{};return Ff({file:n.file||void 0,location:!1,schema:n.space==="svg"?Jr:ya,verbose:n.verbose||!1},e)}function Ff(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},Ju(e,r,n),n}case"#document":case"#document-fragment":{const r=t,s="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:HE(e,t.childNodes),data:{quirksMode:s}},e.file&&e.location){const a=String(e.file),u=EO(a),c=u.toPoint(0),d=u.toPoint(a.length);n.position={start:c,end:d}}return n}case"#documentType":{const r=t;return n={type:"doctype"},Ju(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},Ju(e,r,n),n}default:return n=vO(e,t),n}}function HE(e,t){let n=-1;const r=[];for(;++n<t.length;){const s=Ff(e,t[n]);r.push(s)}return r}function vO(e,t){const n=e.schema;e.schema=t.namespaceURI===Ri.svg?Jr:ya;let r=-1;const s={};for(;++r<t.attrs.length;){const c=t.attrs[r],d=(c.prefix?c.prefix+":":"")+c.name;UE.call(TO,d)||(s[d]=c.value)}const u=(e.schema.space==="svg"?bO:yO)(t.tagName,s,HE(e,t.childNodes));if(Ju(e,t,u),u.tagName==="template"){const c=t,d=c.sourceCodeLocation,h=d&&d.startTag&&ws(d.startTag),p=d&&d.endTag&&ws(d.endTag),m=Ff(e,c.content);h&&p&&e.file&&(m.position={start:h.end,end:p.start}),u.content=m}return e.schema=n,u}function Ju(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=xO(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function xO(e,t,n){const r=ws(n);if(t.type==="element"){const s=t.children[t.children.length-1];if(r&&!n.endTag&&s&&s.position&&s.position.end&&(r.end=Object.assign({},s.position.end)),e.verbose){const a={};let u;if(n.attrs)for(u in n.attrs)UE.call(n.attrs,u)&&(a[Sl(e.schema,u).property]=ws(n.attrs[u]));n.startTag;const c=ws(n.startTag),d=n.endTag?ws(n.endTag):void 0,h={opening:c};d&&(h.closing=d),h.properties=a,t.data={position:h}}}return r}function ws(e){const t=Oy({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Oy({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Oy(e){return e.line&&e.column?e:void 0}const wO={},kO={}.hasOwnProperty,zE=EE("type",{handlers:{root:AO,element:RO,text:IO,comment:OO,doctype:NO}});function SO(e,t){const r=(t||wO).space;return zE(e,r==="svg"?Jr:ya)}function AO(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=jf(e.children,n,t),Fs(e,n),n}function CO(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=jf(e.children,n,t),Fs(e,n),n}function NO(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Fs(e,t),t}function IO(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Fs(e,t),t}function OO(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Fs(e,t),t}function RO(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Jr);const s=[];let a;if(e.properties){for(a in e.properties)if(a!=="children"&&kO.call(e.properties,a)){const d=PO(r,a,e.properties[a]);d&&s.push(d)}}const u=r.space,c={nodeName:e.tagName,tagName:e.tagName,attrs:s,namespaceURI:Ri[u],childNodes:[],parentNode:null};return c.childNodes=jf(e.children,c,r),Fs(e,c),e.tagName==="template"&&e.content&&(c.content=CO(e.content,r)),c}function PO(e,t,n){const r=Sl(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?Rb(n):Ub(n));const s={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const a=s.name.indexOf(":");a<0?s.prefix="":(s.name=s.name.slice(a+1),s.prefix=r.attribute.slice(0,a)),s.namespace=Ri[r.space]}return s}function jf(e,t,n){let r=-1;const s=[];if(e)for(;++r<e.length;){const a=zE(e[r],n);a.parentNode=t,s.push(a)}return s}function Fs(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const LO=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],DO=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),it="";var N;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(N||(N={}));const nn={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function VE(e){return e>=55296&&e<=57343}function MO(e){return e>=56320&&e<=57343}function BO(e,t){return(e-55296)*1024+9216+t}function $E(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function WE(e){return e>=64976&&e<=65007||DO.has(e)}var J;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(J||(J={}));const FO=65536;class jO{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=FO,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,n){const{line:r,col:s,offset:a}=this,u=s+n,c=a+n;return{code:t,startLine:r,endLine:r,startCol:u,endCol:u,startOffset:c,endOffset:c}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(MO(n))return this.pos++,this._addGap(),BO(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,N.EOF;return this._err(J.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,N.EOF;const r=this.html.charCodeAt(n);return r===N.CARRIAGE_RETURN?N.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,N.EOF;let t=this.html.charCodeAt(this.pos);return t===N.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,N.LINE_FEED):t===N.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,VE(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===N.LINE_FEED||t===N.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){$E(t)?this._err(J.controlCharacterInInputStream):WE(t)&&this._err(J.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Fe;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Fe||(Fe={}));function KE(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const UO=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),HO=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function zO(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=HO.get(e))!==null&&t!==void 0?t:e}var Ct;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Ct||(Ct={}));const VO=32;var Yr;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Yr||(Yr={}));function Kh(e){return e>=Ct.ZERO&&e<=Ct.NINE}function $O(e){return e>=Ct.UPPER_A&&e<=Ct.UPPER_F||e>=Ct.LOWER_A&&e<=Ct.LOWER_F}function WO(e){return e>=Ct.UPPER_A&&e<=Ct.UPPER_Z||e>=Ct.LOWER_A&&e<=Ct.LOWER_Z||Kh(e)}function KO(e){return e===Ct.EQUALS||WO(e)}var At;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(At||(At={}));var hr;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(hr||(hr={}));class qO{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=At.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=hr.Strict}startEntity(t){this.decodeMode=t,this.state=At.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case At.EntityStart:return t.charCodeAt(n)===Ct.NUM?(this.state=At.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=At.NamedEntity,this.stateNamedEntity(t,n));case At.NumericStart:return this.stateNumericStart(t,n);case At.NumericDecimal:return this.stateNumericDecimal(t,n);case At.NumericHex:return this.stateNumericHex(t,n);case At.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|VO)===Ct.LOWER_X?(this.state=At.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=At.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,s){if(n!==r){const a=r-n;this.result=this.result*Math.pow(s,a)+Number.parseInt(t.substr(n,a),s),this.consumed+=a}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const s=t.charCodeAt(n);if(Kh(s)||$O(s))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const s=t.charCodeAt(n);if(Kh(s))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Ct.SEMI)this.consumed+=1;else if(this.decodeMode===hr.Strict)return 0;return this.emitCodePoint(zO(this.result),this.consumed),this.errors&&(t!==Ct.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let s=r[this.treeIndex],a=(s&Yr.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const u=t.charCodeAt(n);if(this.treeIndex=YO(r,s,this.treeIndex+Math.max(1,a),u),this.treeIndex<0)return this.result===0||this.decodeMode===hr.Attribute&&(a===0||KO(u))?0:this.emitNotTerminatedNamedEntity();if(s=r[this.treeIndex],a=(s&Yr.VALUE_LENGTH)>>14,a!==0){if(u===Ct.SEMI)return this.emitNamedEntityData(this.treeIndex,a,this.consumed+this.excess);this.decodeMode!==hr.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,s=(r[n]&Yr.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[t]&~Yr.VALUE_LENGTH:s[t+1],r),n===3&&this.emitCodePoint(s[t+2],r),r}end(){var t;switch(this.state){case At.NamedEntity:return this.result!==0&&(this.decodeMode!==hr.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case At.NumericDecimal:return this.emitNumericEntity(0,2);case At.NumericHex:return this.emitNumericEntity(0,3);case At.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case At.EntityStart:return 0}}}function YO(e,t,n,r){const s=(t&Yr.BRANCH_LENGTH)>>7,a=t&Yr.JUMP_TABLE;if(s===0)return a!==0&&r===a?n:-1;if(a){const d=r-a;return d<0||d>=s?-1:e[n+d]-1}let u=n,c=u+s-1;for(;u<=c;){const d=u+c>>>1,h=e[d];if(h<r)u=d+1;else if(h>r)c=d-1;else return e[d+s]}return-1}var oe;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(oe||(oe={}));var Di;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(Di||(Di={}));var kn;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(kn||(kn={}));var V;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(V||(V={}));var g;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(g||(g={}));const GO=new Map([[V.A,g.A],[V.ADDRESS,g.ADDRESS],[V.ANNOTATION_XML,g.ANNOTATION_XML],[V.APPLET,g.APPLET],[V.AREA,g.AREA],[V.ARTICLE,g.ARTICLE],[V.ASIDE,g.ASIDE],[V.B,g.B],[V.BASE,g.BASE],[V.BASEFONT,g.BASEFONT],[V.BGSOUND,g.BGSOUND],[V.BIG,g.BIG],[V.BLOCKQUOTE,g.BLOCKQUOTE],[V.BODY,g.BODY],[V.BR,g.BR],[V.BUTTON,g.BUTTON],[V.CAPTION,g.CAPTION],[V.CENTER,g.CENTER],[V.CODE,g.CODE],[V.COL,g.COL],[V.COLGROUP,g.COLGROUP],[V.DD,g.DD],[V.DESC,g.DESC],[V.DETAILS,g.DETAILS],[V.DIALOG,g.DIALOG],[V.DIR,g.DIR],[V.DIV,g.DIV],[V.DL,g.DL],[V.DT,g.DT],[V.EM,g.EM],[V.EMBED,g.EMBED],[V.FIELDSET,g.FIELDSET],[V.FIGCAPTION,g.FIGCAPTION],[V.FIGURE,g.FIGURE],[V.FONT,g.FONT],[V.FOOTER,g.FOOTER],[V.FOREIGN_OBJECT,g.FOREIGN_OBJECT],[V.FORM,g.FORM],[V.FRAME,g.FRAME],[V.FRAMESET,g.FRAMESET],[V.H1,g.H1],[V.H2,g.H2],[V.H3,g.H3],[V.H4,g.H4],[V.H5,g.H5],[V.H6,g.H6],[V.HEAD,g.HEAD],[V.HEADER,g.HEADER],[V.HGROUP,g.HGROUP],[V.HR,g.HR],[V.HTML,g.HTML],[V.I,g.I],[V.IMG,g.IMG],[V.IMAGE,g.IMAGE],[V.INPUT,g.INPUT],[V.IFRAME,g.IFRAME],[V.KEYGEN,g.KEYGEN],[V.LABEL,g.LABEL],[V.LI,g.LI],[V.LINK,g.LINK],[V.LISTING,g.LISTING],[V.MAIN,g.MAIN],[V.MALIGNMARK,g.MALIGNMARK],[V.MARQUEE,g.MARQUEE],[V.MATH,g.MATH],[V.MENU,g.MENU],[V.META,g.META],[V.MGLYPH,g.MGLYPH],[V.MI,g.MI],[V.MO,g.MO],[V.MN,g.MN],[V.MS,g.MS],[V.MTEXT,g.MTEXT],[V.NAV,g.NAV],[V.NOBR,g.NOBR],[V.NOFRAMES,g.NOFRAMES],[V.NOEMBED,g.NOEMBED],[V.NOSCRIPT,g.NOSCRIPT],[V.OBJECT,g.OBJECT],[V.OL,g.OL],[V.OPTGROUP,g.OPTGROUP],[V.OPTION,g.OPTION],[V.P,g.P],[V.PARAM,g.PARAM],[V.PLAINTEXT,g.PLAINTEXT],[V.PRE,g.PRE],[V.RB,g.RB],[V.RP,g.RP],[V.RT,g.RT],[V.RTC,g.RTC],[V.RUBY,g.RUBY],[V.S,g.S],[V.SCRIPT,g.SCRIPT],[V.SEARCH,g.SEARCH],[V.SECTION,g.SECTION],[V.SELECT,g.SELECT],[V.SOURCE,g.SOURCE],[V.SMALL,g.SMALL],[V.SPAN,g.SPAN],[V.STRIKE,g.STRIKE],[V.STRONG,g.STRONG],[V.STYLE,g.STYLE],[V.SUB,g.SUB],[V.SUMMARY,g.SUMMARY],[V.SUP,g.SUP],[V.TABLE,g.TABLE],[V.TBODY,g.TBODY],[V.TEMPLATE,g.TEMPLATE],[V.TEXTAREA,g.TEXTAREA],[V.TFOOT,g.TFOOT],[V.TD,g.TD],[V.TH,g.TH],[V.THEAD,g.THEAD],[V.TITLE,g.TITLE],[V.TR,g.TR],[V.TRACK,g.TRACK],[V.TT,g.TT],[V.U,g.U],[V.UL,g.UL],[V.SVG,g.SVG],[V.VAR,g.VAR],[V.WBR,g.WBR],[V.XMP,g.XMP]]);function js(e){var t;return(t=GO.get(e))!==null&&t!==void 0?t:g.UNKNOWN}const ce=g,QO={[oe.HTML]:new Set([ce.ADDRESS,ce.APPLET,ce.AREA,ce.ARTICLE,ce.ASIDE,ce.BASE,ce.BASEFONT,ce.BGSOUND,ce.BLOCKQUOTE,ce.BODY,ce.BR,ce.BUTTON,ce.CAPTION,ce.CENTER,ce.COL,ce.COLGROUP,ce.DD,ce.DETAILS,ce.DIR,ce.DIV,ce.DL,ce.DT,ce.EMBED,ce.FIELDSET,ce.FIGCAPTION,ce.FIGURE,ce.FOOTER,ce.FORM,ce.FRAME,ce.FRAMESET,ce.H1,ce.H2,ce.H3,ce.H4,ce.H5,ce.H6,ce.HEAD,ce.HEADER,ce.HGROUP,ce.HR,ce.HTML,ce.IFRAME,ce.IMG,ce.INPUT,ce.LI,ce.LINK,ce.LISTING,ce.MAIN,ce.MARQUEE,ce.MENU,ce.META,ce.NAV,ce.NOEMBED,ce.NOFRAMES,ce.NOSCRIPT,ce.OBJECT,ce.OL,ce.P,ce.PARAM,ce.PLAINTEXT,ce.PRE,ce.SCRIPT,ce.SECTION,ce.SELECT,ce.SOURCE,ce.STYLE,ce.SUMMARY,ce.TABLE,ce.TBODY,ce.TD,ce.TEMPLATE,ce.TEXTAREA,ce.TFOOT,ce.TH,ce.THEAD,ce.TITLE,ce.TR,ce.TRACK,ce.UL,ce.WBR,ce.XMP]),[oe.MATHML]:new Set([ce.MI,ce.MO,ce.MN,ce.MS,ce.MTEXT,ce.ANNOTATION_XML]),[oe.SVG]:new Set([ce.TITLE,ce.FOREIGN_OBJECT,ce.DESC]),[oe.XLINK]:new Set,[oe.XML]:new Set,[oe.XMLNS]:new Set},qh=new Set([ce.H1,ce.H2,ce.H3,ce.H4,ce.H5,ce.H6]);V.STYLE,V.SCRIPT,V.XMP,V.IFRAME,V.NOEMBED,V.NOFRAMES,V.PLAINTEXT;var O;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(O||(O={}));const pt={DATA:O.DATA,RCDATA:O.RCDATA,RAWTEXT:O.RAWTEXT,SCRIPT_DATA:O.SCRIPT_DATA,PLAINTEXT:O.PLAINTEXT,CDATA_SECTION:O.CDATA_SECTION};function XO(e){return e>=N.DIGIT_0&&e<=N.DIGIT_9}function Bo(e){return e>=N.LATIN_CAPITAL_A&&e<=N.LATIN_CAPITAL_Z}function JO(e){return e>=N.LATIN_SMALL_A&&e<=N.LATIN_SMALL_Z}function zr(e){return JO(e)||Bo(e)}function Ry(e){return zr(e)||XO(e)}function qu(e){return e+32}function qE(e){return e===N.SPACE||e===N.LINE_FEED||e===N.TABULATION||e===N.FORM_FEED}function Py(e){return qE(e)||e===N.SOLIDUS||e===N.GREATER_THAN_SIGN}function ZO(e){return e===N.NULL?J.nullCharacterReference:e>1114111?J.characterReferenceOutsideUnicodeRange:VE(e)?J.surrogateCharacterReference:WE(e)?J.noncharacterCharacterReference:$E(e)||e===N.CARRIAGE_RETURN?J.controlCharacterReference:null}class eR{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=O.DATA,this.returnState=O.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new jO(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new qO(UO,(r,s)=>{this.preprocessor.pos=this.entityStartPos+s-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(J.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(J.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const s=ZO(r);s&&this._err(s,1)}}:void 0)}_err(t,n=0){var r,s;(s=(r=this.handler).onParseError)===null||s===void 0||s.call(r,this.preprocessor.getError(t,n))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Fe.START_TAG,tagName:"",tagID:g.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Fe.END_TAG,tagName:"",tagID:g.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Fe.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Fe.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(KE(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const s=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);s[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(J.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=js(t.tagName),t.type===Fe.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(J.endTagWithAttributes),t.selfClosing&&this._err(J.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Fe.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Fe.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Fe.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Fe.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===t){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(t,n)}_emitCodePoint(t){const n=qE(t)?Fe.WHITESPACE_CHARACTER:t===N.NULL?Fe.NULL_CHARACTER:Fe.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Fe.CHARACTER,t)}_startCharacterReference(){this.returnState=this.state,this.state=O.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?hr.Attribute:hr.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===O.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===O.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===O.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case O.DATA:{this._stateData(t);break}case O.RCDATA:{this._stateRcdata(t);break}case O.RAWTEXT:{this._stateRawtext(t);break}case O.SCRIPT_DATA:{this._stateScriptData(t);break}case O.PLAINTEXT:{this._statePlaintext(t);break}case O.TAG_OPEN:{this._stateTagOpen(t);break}case O.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case O.TAG_NAME:{this._stateTagName(t);break}case O.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case O.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case O.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case O.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case O.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case O.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case O.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case O.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case O.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case O.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case O.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case O.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case O.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case O.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case O.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case O.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case O.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case O.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case O.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case O.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case O.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case O.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case O.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case O.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case O.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case O.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case O.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case O.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case O.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case O.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case O.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case O.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case O.BOGUS_COMMENT:{this._stateBogusComment(t);break}case O.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case O.COMMENT_START:{this._stateCommentStart(t);break}case O.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case O.COMMENT:{this._stateComment(t);break}case O.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case O.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case O.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case O.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case O.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case O.COMMENT_END:{this._stateCommentEnd(t);break}case O.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case O.DOCTYPE:{this._stateDoctype(t);break}case O.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case O.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case O.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case O.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case O.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case O.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case O.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case O.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case O.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case O.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case O.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case O.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case O.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case O.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case O.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case O.CDATA_SECTION:{this._stateCdataSection(t);break}case O.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case O.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case O.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case O.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case N.LESS_THAN_SIGN:{this.state=O.TAG_OPEN;break}case N.AMPERSAND:{this._startCharacterReference();break}case N.NULL:{this._err(J.unexpectedNullCharacter),this._emitCodePoint(t);break}case N.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case N.AMPERSAND:{this._startCharacterReference();break}case N.LESS_THAN_SIGN:{this.state=O.RCDATA_LESS_THAN_SIGN;break}case N.NULL:{this._err(J.unexpectedNullCharacter),this._emitChars(it);break}case N.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case N.LESS_THAN_SIGN:{this.state=O.RAWTEXT_LESS_THAN_SIGN;break}case N.NULL:{this._err(J.unexpectedNullCharacter),this._emitChars(it);break}case N.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case N.LESS_THAN_SIGN:{this.state=O.SCRIPT_DATA_LESS_THAN_SIGN;break}case N.NULL:{this._err(J.unexpectedNullCharacter),this._emitChars(it);break}case N.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case N.NULL:{this._err(J.unexpectedNullCharacter),this._emitChars(it);break}case N.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(zr(t))this._createStartTagToken(),this.state=O.TAG_NAME,this._stateTagName(t);else switch(t){case N.EXCLAMATION_MARK:{this.state=O.MARKUP_DECLARATION_OPEN;break}case N.SOLIDUS:{this.state=O.END_TAG_OPEN;break}case N.QUESTION_MARK:{this._err(J.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=O.BOGUS_COMMENT,this._stateBogusComment(t);break}case N.EOF:{this._err(J.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(J.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=O.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(zr(t))this._createEndTagToken(),this.state=O.TAG_NAME,this._stateTagName(t);else switch(t){case N.GREATER_THAN_SIGN:{this._err(J.missingEndTagName),this.state=O.DATA;break}case N.EOF:{this._err(J.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(J.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=O.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case N.SPACE:case N.LINE_FEED:case N.TABULATION:case N.FORM_FEED:{this.state=O.BEFORE_ATTRIBUTE_NAME;break}case N.SOLIDUS:{this.state=O.SELF_CLOSING_START_TAG;break}case N.GREATER_THAN_SIGN:{this.state=O.DATA,this.emitCurrentTagToken();break}case N.NULL:{this._err(J.unexpectedNullCharacter),n.tagName+=it;break}case N.EOF:{this._err(J.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Bo(t)?qu(t):t)}}_stateRcdataLessThanSign(t){t===N.SOLIDUS?this.state=O.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=O.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){zr(t)?(this.state=O.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=O.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case N.SPACE:case N.LINE_FEED:case N.TABULATION:case N.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=O.BEFORE_ATTRIBUTE_NAME,!1;case N.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=O.SELF_CLOSING_START_TAG,!1;case N.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=O.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=O.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===N.SOLIDUS?this.state=O.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=O.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){zr(t)?(this.state=O.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=O.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=O.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case N.SOLIDUS:{this.state=O.SCRIPT_DATA_END_TAG_OPEN;break}case N.EXCLAMATION_MARK:{this.state=O.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=O.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){zr(t)?(this.state=O.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=O.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=O.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===N.HYPHEN_MINUS?(this.state=O.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=O.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===N.HYPHEN_MINUS?(this.state=O.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=O.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case N.HYPHEN_MINUS:{this.state=O.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case N.LESS_THAN_SIGN:{this.state=O.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case N.NULL:{this._err(J.unexpectedNullCharacter),this._emitChars(it);break}case N.EOF:{this._err(J.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case N.HYPHEN_MINUS:{this.state=O.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case N.LESS_THAN_SIGN:{this.state=O.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case N.NULL:{this._err(J.unexpectedNullCharacter),this.state=O.SCRIPT_DATA_ESCAPED,this._emitChars(it);break}case N.EOF:{this._err(J.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=O.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case N.HYPHEN_MINUS:{this._emitChars("-");break}case N.LESS_THAN_SIGN:{this.state=O.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case N.GREATER_THAN_SIGN:{this.state=O.SCRIPT_DATA,this._emitChars(">");break}case N.NULL:{this._err(J.unexpectedNullCharacter),this.state=O.SCRIPT_DATA_ESCAPED,this._emitChars(it);break}case N.EOF:{this._err(J.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=O.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===N.SOLIDUS?this.state=O.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:zr(t)?(this._emitChars("<"),this.state=O.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=O.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){zr(t)?(this.state=O.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=O.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=O.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(nn.SCRIPT,!1)&&Py(this.preprocessor.peek(nn.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<nn.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=O.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case N.HYPHEN_MINUS:{this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case N.LESS_THAN_SIGN:{this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case N.NULL:{this._err(J.unexpectedNullCharacter),this._emitChars(it);break}case N.EOF:{this._err(J.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case N.HYPHEN_MINUS:{this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case N.LESS_THAN_SIGN:{this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case N.NULL:{this._err(J.unexpectedNullCharacter),this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(it);break}case N.EOF:{this._err(J.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case N.HYPHEN_MINUS:{this._emitChars("-");break}case N.LESS_THAN_SIGN:{this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case N.GREATER_THAN_SIGN:{this.state=O.SCRIPT_DATA,this._emitChars(">");break}case N.NULL:{this._err(J.unexpectedNullCharacter),this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(it);break}case N.EOF:{this._err(J.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===N.SOLIDUS?(this.state=O.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(nn.SCRIPT,!1)&&Py(this.preprocessor.peek(nn.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<nn.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=O.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case N.SPACE:case N.LINE_FEED:case N.TABULATION:case N.FORM_FEED:break;case N.SOLIDUS:case N.GREATER_THAN_SIGN:case N.EOF:{this.state=O.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case N.EQUALS_SIGN:{this._err(J.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=O.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=O.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case N.SPACE:case N.LINE_FEED:case N.TABULATION:case N.FORM_FEED:case N.SOLIDUS:case N.GREATER_THAN_SIGN:case N.EOF:{this._leaveAttrName(),this.state=O.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case N.EQUALS_SIGN:{this._leaveAttrName(),this.state=O.BEFORE_ATTRIBUTE_VALUE;break}case N.QUOTATION_MARK:case N.APOSTROPHE:case N.LESS_THAN_SIGN:{this._err(J.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case N.NULL:{this._err(J.unexpectedNullCharacter),this.currentAttr.name+=it;break}default:this.currentAttr.name+=String.fromCodePoint(Bo(t)?qu(t):t)}}_stateAfterAttributeName(t){switch(t){case N.SPACE:case N.LINE_FEED:case N.TABULATION:case N.FORM_FEED:break;case N.SOLIDUS:{this.state=O.SELF_CLOSING_START_TAG;break}case N.EQUALS_SIGN:{this.state=O.BEFORE_ATTRIBUTE_VALUE;break}case N.GREATER_THAN_SIGN:{this.state=O.DATA,this.emitCurrentTagToken();break}case N.EOF:{this._err(J.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=O.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case N.SPACE:case N.LINE_FEED:case N.TABULATION:case N.FORM_FEED:break;case N.QUOTATION_MARK:{this.state=O.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case N.APOSTROPHE:{this.state=O.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case N.GREATER_THAN_SIGN:{this._err(J.missingAttributeValue),this.state=O.DATA,this.emitCurrentTagToken();break}default:this.state=O.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case N.QUOTATION_MARK:{this.state=O.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case N.AMPERSAND:{this._startCharacterReference();break}case N.NULL:{this._err(J.unexpectedNullCharacter),this.currentAttr.value+=it;break}case N.EOF:{this._err(J.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case N.APOSTROPHE:{this.state=O.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case N.AMPERSAND:{this._startCharacterReference();break}case N.NULL:{this._err(J.unexpectedNullCharacter),this.currentAttr.value+=it;break}case N.EOF:{this._err(J.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case N.SPACE:case N.LINE_FEED:case N.TABULATION:case N.FORM_FEED:{this._leaveAttrValue(),this.state=O.BEFORE_ATTRIBUTE_NAME;break}case N.AMPERSAND:{this._startCharacterReference();break}case N.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=O.DATA,this.emitCurrentTagToken();break}case N.NULL:{this._err(J.unexpectedNullCharacter),this.currentAttr.value+=it;break}case N.QUOTATION_MARK:case N.APOSTROPHE:case N.LESS_THAN_SIGN:case N.EQUALS_SIGN:case N.GRAVE_ACCENT:{this._err(J.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case N.EOF:{this._err(J.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case N.SPACE:case N.LINE_FEED:case N.TABULATION:case N.FORM_FEED:{this._leaveAttrValue(),this.state=O.BEFORE_ATTRIBUTE_NAME;break}case N.SOLIDUS:{this._leaveAttrValue(),this.state=O.SELF_CLOSING_START_TAG;break}case N.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=O.DATA,this.emitCurrentTagToken();break}case N.EOF:{this._err(J.eofInTag),this._emitEOFToken();break}default:this._err(J.missingWhitespaceBetweenAttributes),this.state=O.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case N.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=O.DATA,this.emitCurrentTagToken();break}case N.EOF:{this._err(J.eofInTag),this._emitEOFToken();break}default:this._err(J.unexpectedSolidusInTag),this.state=O.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case N.GREATER_THAN_SIGN:{this.state=O.DATA,this.emitCurrentComment(n);break}case N.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case N.NULL:{this._err(J.unexpectedNullCharacter),n.data+=it;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(nn.DASH_DASH,!0)?(this._createCommentToken(nn.DASH_DASH.length+1),this.state=O.COMMENT_START):this._consumeSequenceIfMatch(nn.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(nn.DOCTYPE.length+1),this.state=O.DOCTYPE):this._consumeSequenceIfMatch(nn.CDATA_START,!0)?this.inForeignNode?this.state=O.CDATA_SECTION:(this._err(J.cdataInHtmlContent),this._createCommentToken(nn.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=O.BOGUS_COMMENT):this._ensureHibernation()||(this._err(J.incorrectlyOpenedComment),this._createCommentToken(2),this.state=O.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case N.HYPHEN_MINUS:{this.state=O.COMMENT_START_DASH;break}case N.GREATER_THAN_SIGN:{this._err(J.abruptClosingOfEmptyComment),this.state=O.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=O.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case N.HYPHEN_MINUS:{this.state=O.COMMENT_END;break}case N.GREATER_THAN_SIGN:{this._err(J.abruptClosingOfEmptyComment),this.state=O.DATA,this.emitCurrentComment(n);break}case N.EOF:{this._err(J.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=O.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case N.HYPHEN_MINUS:{this.state=O.COMMENT_END_DASH;break}case N.LESS_THAN_SIGN:{n.data+="<",this.state=O.COMMENT_LESS_THAN_SIGN;break}case N.NULL:{this._err(J.unexpectedNullCharacter),n.data+=it;break}case N.EOF:{this._err(J.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case N.EXCLAMATION_MARK:{n.data+="!",this.state=O.COMMENT_LESS_THAN_SIGN_BANG;break}case N.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=O.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===N.HYPHEN_MINUS?this.state=O.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=O.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===N.HYPHEN_MINUS?this.state=O.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=O.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==N.GREATER_THAN_SIGN&&t!==N.EOF&&this._err(J.nestedComment),this.state=O.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case N.HYPHEN_MINUS:{this.state=O.COMMENT_END;break}case N.EOF:{this._err(J.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=O.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case N.GREATER_THAN_SIGN:{this.state=O.DATA,this.emitCurrentComment(n);break}case N.EXCLAMATION_MARK:{this.state=O.COMMENT_END_BANG;break}case N.HYPHEN_MINUS:{n.data+="-";break}case N.EOF:{this._err(J.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=O.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case N.HYPHEN_MINUS:{n.data+="--!",this.state=O.COMMENT_END_DASH;break}case N.GREATER_THAN_SIGN:{this._err(J.incorrectlyClosedComment),this.state=O.DATA,this.emitCurrentComment(n);break}case N.EOF:{this._err(J.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=O.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case N.SPACE:case N.LINE_FEED:case N.TABULATION:case N.FORM_FEED:{this.state=O.BEFORE_DOCTYPE_NAME;break}case N.GREATER_THAN_SIGN:{this.state=O.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case N.EOF:{this._err(J.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(J.missingWhitespaceBeforeDoctypeName),this.state=O.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(Bo(t))this._createDoctypeToken(String.fromCharCode(qu(t))),this.state=O.DOCTYPE_NAME;else switch(t){case N.SPACE:case N.LINE_FEED:case N.TABULATION:case N.FORM_FEED:break;case N.NULL:{this._err(J.unexpectedNullCharacter),this._createDoctypeToken(it),this.state=O.DOCTYPE_NAME;break}case N.GREATER_THAN_SIGN:{this._err(J.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=O.DATA;break}case N.EOF:{this._err(J.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=O.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case N.SPACE:case N.LINE_FEED:case N.TABULATION:case N.FORM_FEED:{this.state=O.AFTER_DOCTYPE_NAME;break}case N.GREATER_THAN_SIGN:{this.state=O.DATA,this.emitCurrentDoctype(n);break}case N.NULL:{this._err(J.unexpectedNullCharacter),n.name+=it;break}case N.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Bo(t)?qu(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case N.SPACE:case N.LINE_FEED:case N.TABULATION:case N.FORM_FEED:break;case N.GREATER_THAN_SIGN:{this.state=O.DATA,this.emitCurrentDoctype(n);break}case N.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(nn.PUBLIC,!1)?this.state=O.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(nn.SYSTEM,!1)?this.state=O.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(J.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=O.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case N.SPACE:case N.LINE_FEED:case N.TABULATION:case N.FORM_FEED:{this.state=O.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case N.QUOTATION_MARK:{this._err(J.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=O.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case N.APOSTROPHE:{this._err(J.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=O.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case N.GREATER_THAN_SIGN:{this._err(J.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=O.DATA,this.emitCurrentDoctype(n);break}case N.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(J.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=O.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case N.SPACE:case N.LINE_FEED:case N.TABULATION:case N.FORM_FEED:break;case N.QUOTATION_MARK:{n.publicId="",this.state=O.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case N.APOSTROPHE:{n.publicId="",this.state=O.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case N.GREATER_THAN_SIGN:{this._err(J.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=O.DATA,this.emitCurrentDoctype(n);break}case N.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(J.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=O.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case N.QUOTATION_MARK:{this.state=O.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case N.NULL:{this._err(J.unexpectedNullCharacter),n.publicId+=it;break}case N.GREATER_THAN_SIGN:{this._err(J.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=O.DATA;break}case N.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case N.APOSTROPHE:{this.state=O.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case N.NULL:{this._err(J.unexpectedNullCharacter),n.publicId+=it;break}case N.GREATER_THAN_SIGN:{this._err(J.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=O.DATA;break}case N.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case N.SPACE:case N.LINE_FEED:case N.TABULATION:case N.FORM_FEED:{this.state=O.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case N.GREATER_THAN_SIGN:{this.state=O.DATA,this.emitCurrentDoctype(n);break}case N.QUOTATION_MARK:{this._err(J.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=O.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case N.APOSTROPHE:{this._err(J.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=O.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case N.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(J.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=O.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case N.SPACE:case N.LINE_FEED:case N.TABULATION:case N.FORM_FEED:break;case N.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=O.DATA;break}case N.QUOTATION_MARK:{n.systemId="",this.state=O.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case N.APOSTROPHE:{n.systemId="",this.state=O.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case N.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(J.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=O.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case N.SPACE:case N.LINE_FEED:case N.TABULATION:case N.FORM_FEED:{this.state=O.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case N.QUOTATION_MARK:{this._err(J.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=O.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case N.APOSTROPHE:{this._err(J.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=O.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case N.GREATER_THAN_SIGN:{this._err(J.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=O.DATA,this.emitCurrentDoctype(n);break}case N.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(J.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=O.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case N.SPACE:case N.LINE_FEED:case N.TABULATION:case N.FORM_FEED:break;case N.QUOTATION_MARK:{n.systemId="",this.state=O.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case N.APOSTROPHE:{n.systemId="",this.state=O.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case N.GREATER_THAN_SIGN:{this._err(J.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=O.DATA,this.emitCurrentDoctype(n);break}case N.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(J.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=O.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case N.QUOTATION_MARK:{this.state=O.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case N.NULL:{this._err(J.unexpectedNullCharacter),n.systemId+=it;break}case N.GREATER_THAN_SIGN:{this._err(J.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=O.DATA;break}case N.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case N.APOSTROPHE:{this.state=O.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case N.NULL:{this._err(J.unexpectedNullCharacter),n.systemId+=it;break}case N.GREATER_THAN_SIGN:{this._err(J.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=O.DATA;break}case N.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case N.SPACE:case N.LINE_FEED:case N.TABULATION:case N.FORM_FEED:break;case N.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=O.DATA;break}case N.EOF:{this._err(J.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(J.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=O.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case N.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=O.DATA;break}case N.NULL:{this._err(J.unexpectedNullCharacter);break}case N.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case N.RIGHT_SQUARE_BRACKET:{this.state=O.CDATA_SECTION_BRACKET;break}case N.EOF:{this._err(J.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===N.RIGHT_SQUARE_BRACKET?this.state=O.CDATA_SECTION_END:(this._emitChars("]"),this.state=O.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case N.GREATER_THAN_SIGN:{this.state=O.DATA;break}case N.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=O.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(){let t=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(t<0)if(this.preprocessor.lastChunkWritten)t=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}t===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(N.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&Ry(this.preprocessor.peek(1))?O.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(t){Ry(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===N.SEMICOLON&&this._err(J.unknownNamedCharacterReference),this.state=this.returnState,this._callState(t))}}const YE=new Set([g.DD,g.DT,g.LI,g.OPTGROUP,g.OPTION,g.P,g.RB,g.RP,g.RT,g.RTC]),Ly=new Set([...YE,g.CAPTION,g.COLGROUP,g.TBODY,g.TD,g.TFOOT,g.TH,g.THEAD,g.TR]),cl=new Set([g.APPLET,g.CAPTION,g.HTML,g.MARQUEE,g.OBJECT,g.TABLE,g.TD,g.TEMPLATE,g.TH]),tR=new Set([...cl,g.OL,g.UL]),nR=new Set([...cl,g.BUTTON]),Dy=new Set([g.ANNOTATION_XML,g.MI,g.MN,g.MO,g.MS,g.MTEXT]),My=new Set([g.DESC,g.FOREIGN_OBJECT,g.TITLE]),rR=new Set([g.TR,g.TEMPLATE,g.HTML]),iR=new Set([g.TBODY,g.TFOOT,g.THEAD,g.TEMPLATE,g.HTML]),sR=new Set([g.TABLE,g.TEMPLATE,g.HTML]),oR=new Set([g.TD,g.TH]);class aR{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=g.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===g.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===oe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const s=this._indexOf(t)+1;this.items.splice(s,0,n),this.tagIDs.splice(s,0,r),this.stackTop++,s===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,s===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==oe.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(Math.max(n,0))}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(qh,oe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(oR,oe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(sR,oe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(iR,oe.HTML)}clearBackToTableRowContext(){this.clearBackTo(rR,oe.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===g.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===g.HTML}hasInDynamicScope(t,n){for(let r=this.stackTop;r>=0;r--){const s=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case oe.HTML:{if(s===t)return!0;if(n.has(s))return!1;break}case oe.SVG:{if(My.has(s))return!1;break}case oe.MATHML:{if(Dy.has(s))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,cl)}hasInListItemScope(t){return this.hasInDynamicScope(t,tR)}hasInButtonScope(t){return this.hasInDynamicScope(t,nR)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case oe.HTML:{if(qh.has(n))return!0;if(cl.has(n))return!1;break}case oe.SVG:{if(My.has(n))return!1;break}case oe.MATHML:{if(Dy.has(n))return!1;break}}}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===oe.HTML)switch(this.tagIDs[n]){case t:return!0;case g.TABLE:case g.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===oe.HTML)switch(this.tagIDs[t]){case g.TBODY:case g.THEAD:case g.TFOOT:return!0;case g.TABLE:case g.HTML:return!1}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===oe.HTML)switch(this.tagIDs[n]){case t:return!0;case g.OPTION:case g.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&YE.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&Ly.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&Ly.has(this.currentTagId);)this.pop()}}const th=3;var Qn;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Qn||(Qn={}));const By={type:Qn.Marker};class uR{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],s=n.length,a=this.treeAdapter.getTagName(t),u=this.treeAdapter.getNamespaceURI(t);for(let c=0;c<this.entries.length;c++){const d=this.entries[c];if(d.type===Qn.Marker)break;const{element:h}=d;if(this.treeAdapter.getTagName(h)===a&&this.treeAdapter.getNamespaceURI(h)===u){const p=this.treeAdapter.getAttrList(h);p.length===s&&r.push({idx:c,attrs:p})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<th)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<th)return;const s=new Map(n.map(u=>[u.name,u.value]));let a=0;for(let u=0;u<r.length;u++){const c=r[u];c.attrs.every(d=>s.get(d.name)===d.value)&&(a+=1,a>=th&&this.entries.splice(c.idx,1))}}insertMarker(){this.entries.unshift(By)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Qn.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Qn.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(By);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Qn.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Qn.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Qn.Element&&n.element===t)}}const Vr={createDocument(){return{nodeName:"#document",mode:kn.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const s=e.childNodes.find(a=>a.nodeName==="#documentType");if(s)s.name=t,s.publicId=n,s.systemId=r;else{const a={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};Vr.appendChild(e,a)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(Vr.isTextNode(n)){n.value+=t;return}}Vr.appendChild(e,Vr.createTextNode(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&Vr.isTextNode(r)?r.value+=t:Vr.insertBefore(e,Vr.createTextNode(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},GE="html",lR="about:legacy-compat",cR="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",QE=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],dR=[...QE,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],hR=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),XE=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],fR=[...XE,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Fy(e,t){return t.some(n=>e.startsWith(n))}function pR(e){return e.name===GE&&e.publicId===null&&(e.systemId===null||e.systemId===lR)}function mR(e){if(e.name!==GE)return kn.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===cR)return kn.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),hR.has(n))return kn.QUIRKS;let r=t===null?dR:QE;if(Fy(n,r))return kn.QUIRKS;if(r=t===null?XE:fR,Fy(n,r))return kn.LIMITED_QUIRKS}return kn.NO_QUIRKS}const jy={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},gR="definitionurl",yR="definitionURL",bR=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),ER=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:oe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:oe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:oe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:oe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:oe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:oe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:oe.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:oe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:oe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:oe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:oe.XMLNS}]]),TR=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),_R=new Set([g.B,g.BIG,g.BLOCKQUOTE,g.BODY,g.BR,g.CENTER,g.CODE,g.DD,g.DIV,g.DL,g.DT,g.EM,g.EMBED,g.H1,g.H2,g.H3,g.H4,g.H5,g.H6,g.HEAD,g.HR,g.I,g.IMG,g.LI,g.LISTING,g.MENU,g.META,g.NOBR,g.OL,g.P,g.PRE,g.RUBY,g.S,g.SMALL,g.SPAN,g.STRONG,g.STRIKE,g.SUB,g.SUP,g.TABLE,g.TT,g.U,g.UL,g.VAR]);function vR(e){const t=e.tagID;return t===g.FONT&&e.attrs.some(({name:r})=>r===Di.COLOR||r===Di.SIZE||r===Di.FACE)||_R.has(t)}function JE(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===gR){e.attrs[t].name=yR;break}}function ZE(e){for(let t=0;t<e.attrs.length;t++){const n=bR.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function Uf(e){for(let t=0;t<e.attrs.length;t++){const n=ER.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function xR(e){const t=TR.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=js(e.tagName))}function wR(e,t){return t===oe.MATHML&&(e===g.MI||e===g.MO||e===g.MN||e===g.MS||e===g.MTEXT)}function kR(e,t,n){if(t===oe.MATHML&&e===g.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Di.ENCODING){const s=n[r].value.toLowerCase();return s===jy.TEXT_HTML||s===jy.APPLICATION_XML}}return t===oe.SVG&&(e===g.FOREIGN_OBJECT||e===g.DESC||e===g.TITLE)}function SR(e,t,n,r){return(!r||r===oe.HTML)&&kR(e,t,n)||(!r||r===oe.MATHML)&&wR(e,t)}const AR="hidden",CR=8,NR=3;var D;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(D||(D={}));const IR={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},eT=new Set([g.TABLE,g.TBODY,g.TFOOT,g.THEAD,g.TR]),Uy={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Vr,onParseError:null};class Hy{constructor(t,n,r=null,s=null){this.fragmentContext=r,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=D.INITIAL,this.originalInsertionMode=D.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Uy,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new eR(this.options,this),this.activeFormattingElements=new uR(this.treeAdapter),this.fragmentContextID=r?js(this.treeAdapter.getTagName(r)):g.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new aR(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Uy,...n};t??(t=r.treeAdapter.createElement(V.TEMPLATE,oe.HTML,[]));const s=r.treeAdapter.createElement("documentmock",oe.HTML,[]),a=new this(r,s,t);return a.fragmentContextID===g.TEMPLATE&&a.tmplInsertionModeStack.unshift(D.IN_TEMPLATE),a._initTokenizerForFragmentParsing(),a._insertFakeRootElement(),a._resetInsertionMode(),a._findFormInFragmentContext(),a}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var s;if(!this.onParseError)return;const a=(s=t.location)!==null&&s!==void 0?s:IR,u={code:n,startLine:a.startLine,startCol:a.startCol,startOffset:a.startOffset,endLine:r?a.startLine:a.endLine,endCol:r?a.startCol:a.endCol,endOffset:r?a.startOffset:a.endOffset};this.onParseError(u)}onItemPush(t,n,r){var s,a;(a=(s=this.treeAdapter).onItemPush)===null||a===void 0||a.call(s,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(s=(r=this.treeAdapter).onItemPop)===null||s===void 0||s.call(r,t,this.openElements.current),n){let a,u;this.openElements.stackTop===0&&this.fragmentContext?(a=this.fragmentContext,u=this.fragmentContextID):{current:a,currentTagId:u}=this.openElements,this._setContextModes(a,u)}}_setContextModes(t,n){const r=t===this.document||t&&this.treeAdapter.getNamespaceURI(t)===oe.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&t!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,oe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=D.TEXT}switchToPlaintextParsing(){this.insertionMode=D.TEXT,this.originalInsertionMode=D.IN_BODY,this.tokenizer.state=pt.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===V.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==oe.HTML))switch(this.fragmentContextID){case g.TITLE:case g.TEXTAREA:{this.tokenizer.state=pt.RCDATA;break}case g.STYLE:case g.XMP:case g.IFRAME:case g.NOEMBED:case g.NOFRAMES:case g.NOSCRIPT:{this.tokenizer.state=pt.RAWTEXT;break}case g.SCRIPT:{this.tokenizer.state=pt.SCRIPT_DATA;break}case g.PLAINTEXT:{this.tokenizer.state=pt.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",s=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,s),t.location){const u=this.treeAdapter.getChildNodes(this.document).find(c=>this.treeAdapter.isDocumentTypeNode(c));u&&this.treeAdapter.setNodeSourceCodeLocation(u,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,oe.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,oe.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(V.HTML,oe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,g.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const s=this.treeAdapter.getChildNodes(n),a=r?s.lastIndexOf(r):s.length,u=s[a-1];if(this.treeAdapter.getNodeSourceCodeLocation(u)){const{endLine:d,endCol:h,endOffset:p}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(u,{endLine:d,endCol:h,endOffset:p})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(u,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,s=this.treeAdapter.getTagName(t),a=n.type===Fe.END_TAG&&s===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,a)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===g.SVG&&this.treeAdapter.getTagName(n)===V.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===oe.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===g.MGLYPH||t.tagID===g.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,oe.HTML)}_processToken(t){switch(t.type){case Fe.CHARACTER:{this.onCharacter(t);break}case Fe.NULL_CHARACTER:{this.onNullCharacter(t);break}case Fe.COMMENT:{this.onComment(t);break}case Fe.DOCTYPE:{this.onDoctype(t);break}case Fe.START_TAG:{this._processStartTag(t);break}case Fe.END_TAG:{this.onEndTag(t);break}case Fe.EOF:{this.onEof(t);break}case Fe.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const s=this.treeAdapter.getNamespaceURI(n),a=this.treeAdapter.getAttrList(n);return SR(t,s,a,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(s=>s.type===Qn.Marker||this.openElements.contains(s.element)),r=n===-1?t-1:n-1;for(let s=r;s>=0;s--){const a=this.activeFormattingElements.entries[s];this._insertElement(a.token,this.treeAdapter.getNamespaceURI(a.element)),a.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=D.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(g.P),this.openElements.popUntilTagNamePopped(g.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case g.TR:{this.insertionMode=D.IN_ROW;return}case g.TBODY:case g.THEAD:case g.TFOOT:{this.insertionMode=D.IN_TABLE_BODY;return}case g.CAPTION:{this.insertionMode=D.IN_CAPTION;return}case g.COLGROUP:{this.insertionMode=D.IN_COLUMN_GROUP;return}case g.TABLE:{this.insertionMode=D.IN_TABLE;return}case g.BODY:{this.insertionMode=D.IN_BODY;return}case g.FRAMESET:{this.insertionMode=D.IN_FRAMESET;return}case g.SELECT:{this._resetInsertionModeForSelect(t);return}case g.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case g.HTML:{this.insertionMode=this.headElement?D.AFTER_HEAD:D.BEFORE_HEAD;return}case g.TD:case g.TH:{if(t>0){this.insertionMode=D.IN_CELL;return}break}case g.HEAD:{if(t>0){this.insertionMode=D.IN_HEAD;return}break}}this.insertionMode=D.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===g.TEMPLATE)break;if(r===g.TABLE){this.insertionMode=D.IN_SELECT_IN_TABLE;return}}this.insertionMode=D.IN_SELECT}_isElementCausesFosterParenting(t){return eT.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case g.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===oe.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case g.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return QO[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){o6(this,t);return}switch(this.insertionMode){case D.INITIAL:{Po(this,t);break}case D.BEFORE_HTML:{Wo(this,t);break}case D.BEFORE_HEAD:{Ko(this,t);break}case D.IN_HEAD:{qo(this,t);break}case D.IN_HEAD_NO_SCRIPT:{Yo(this,t);break}case D.AFTER_HEAD:{Go(this,t);break}case D.IN_BODY:case D.IN_CAPTION:case D.IN_CELL:case D.IN_TEMPLATE:{nT(this,t);break}case D.TEXT:case D.IN_SELECT:case D.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case D.IN_TABLE:case D.IN_TABLE_BODY:case D.IN_ROW:{nh(this,t);break}case D.IN_TABLE_TEXT:{uT(this,t);break}case D.IN_COLUMN_GROUP:{dl(this,t);break}case D.AFTER_BODY:{hl(this,t);break}case D.AFTER_AFTER_BODY:{Zu(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){s6(this,t);return}switch(this.insertionMode){case D.INITIAL:{Po(this,t);break}case D.BEFORE_HTML:{Wo(this,t);break}case D.BEFORE_HEAD:{Ko(this,t);break}case D.IN_HEAD:{qo(this,t);break}case D.IN_HEAD_NO_SCRIPT:{Yo(this,t);break}case D.AFTER_HEAD:{Go(this,t);break}case D.TEXT:{this._insertCharacters(t);break}case D.IN_TABLE:case D.IN_TABLE_BODY:case D.IN_ROW:{nh(this,t);break}case D.IN_COLUMN_GROUP:{dl(this,t);break}case D.AFTER_BODY:{hl(this,t);break}case D.AFTER_AFTER_BODY:{Zu(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){Yh(this,t);return}switch(this.insertionMode){case D.INITIAL:case D.BEFORE_HTML:case D.BEFORE_HEAD:case D.IN_HEAD:case D.IN_HEAD_NO_SCRIPT:case D.AFTER_HEAD:case D.IN_BODY:case D.IN_TABLE:case D.IN_CAPTION:case D.IN_COLUMN_GROUP:case D.IN_TABLE_BODY:case D.IN_ROW:case D.IN_CELL:case D.IN_SELECT:case D.IN_SELECT_IN_TABLE:case D.IN_TEMPLATE:case D.IN_FRAMESET:case D.AFTER_FRAMESET:{Yh(this,t);break}case D.IN_TABLE_TEXT:{Lo(this,t);break}case D.AFTER_BODY:{BR(this,t);break}case D.AFTER_AFTER_BODY:case D.AFTER_AFTER_FRAMESET:{FR(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case D.INITIAL:{jR(this,t);break}case D.BEFORE_HEAD:case D.IN_HEAD:case D.IN_HEAD_NO_SCRIPT:case D.AFTER_HEAD:{this._err(t,J.misplacedDoctype);break}case D.IN_TABLE_TEXT:{Lo(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,J.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?a6(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case D.INITIAL:{Po(this,t);break}case D.BEFORE_HTML:{UR(this,t);break}case D.BEFORE_HEAD:{zR(this,t);break}case D.IN_HEAD:{Hn(this,t);break}case D.IN_HEAD_NO_SCRIPT:{WR(this,t);break}case D.AFTER_HEAD:{qR(this,t);break}case D.IN_BODY:{Vt(this,t);break}case D.IN_TABLE:{Ps(this,t);break}case D.IN_TABLE_TEXT:{Lo(this,t);break}case D.IN_CAPTION:{VP(this,t);break}case D.IN_COLUMN_GROUP:{Vf(this,t);break}case D.IN_TABLE_BODY:{Ml(this,t);break}case D.IN_ROW:{Bl(this,t);break}case D.IN_CELL:{KP(this,t);break}case D.IN_SELECT:{dT(this,t);break}case D.IN_SELECT_IN_TABLE:{YP(this,t);break}case D.IN_TEMPLATE:{QP(this,t);break}case D.AFTER_BODY:{JP(this,t);break}case D.IN_FRAMESET:{ZP(this,t);break}case D.AFTER_FRAMESET:{t6(this,t);break}case D.AFTER_AFTER_BODY:{r6(this,t);break}case D.AFTER_AFTER_FRAMESET:{i6(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?u6(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case D.INITIAL:{Po(this,t);break}case D.BEFORE_HTML:{HR(this,t);break}case D.BEFORE_HEAD:{VR(this,t);break}case D.IN_HEAD:{$R(this,t);break}case D.IN_HEAD_NO_SCRIPT:{KR(this,t);break}case D.AFTER_HEAD:{YR(this,t);break}case D.IN_BODY:{Dl(this,t);break}case D.TEXT:{PP(this,t);break}case D.IN_TABLE:{la(this,t);break}case D.IN_TABLE_TEXT:{Lo(this,t);break}case D.IN_CAPTION:{$P(this,t);break}case D.IN_COLUMN_GROUP:{WP(this,t);break}case D.IN_TABLE_BODY:{Gh(this,t);break}case D.IN_ROW:{cT(this,t);break}case D.IN_CELL:{qP(this,t);break}case D.IN_SELECT:{hT(this,t);break}case D.IN_SELECT_IN_TABLE:{GP(this,t);break}case D.IN_TEMPLATE:{XP(this,t);break}case D.AFTER_BODY:{pT(this,t);break}case D.IN_FRAMESET:{e6(this,t);break}case D.AFTER_FRAMESET:{n6(this,t);break}case D.AFTER_AFTER_BODY:{Zu(this,t);break}}}onEof(t){switch(this.insertionMode){case D.INITIAL:{Po(this,t);break}case D.BEFORE_HTML:{Wo(this,t);break}case D.BEFORE_HEAD:{Ko(this,t);break}case D.IN_HEAD:{qo(this,t);break}case D.IN_HEAD_NO_SCRIPT:{Yo(this,t);break}case D.AFTER_HEAD:{Go(this,t);break}case D.IN_BODY:case D.IN_TABLE:case D.IN_CAPTION:case D.IN_COLUMN_GROUP:case D.IN_TABLE_BODY:case D.IN_ROW:case D.IN_CELL:case D.IN_SELECT:case D.IN_SELECT_IN_TABLE:{oT(this,t);break}case D.TEXT:{LP(this,t);break}case D.IN_TABLE_TEXT:{Lo(this,t);break}case D.IN_TEMPLATE:{fT(this,t);break}case D.AFTER_BODY:case D.IN_FRAMESET:case D.AFTER_FRAMESET:case D.AFTER_AFTER_BODY:case D.AFTER_AFTER_FRAMESET:{zf(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===N.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case D.IN_HEAD:case D.IN_HEAD_NO_SCRIPT:case D.AFTER_HEAD:case D.TEXT:case D.IN_COLUMN_GROUP:case D.IN_SELECT:case D.IN_SELECT_IN_TABLE:case D.IN_FRAMESET:case D.AFTER_FRAMESET:{this._insertCharacters(t);break}case D.IN_BODY:case D.IN_CAPTION:case D.IN_CELL:case D.IN_TEMPLATE:case D.AFTER_BODY:case D.AFTER_AFTER_BODY:case D.AFTER_AFTER_FRAMESET:{tT(this,t);break}case D.IN_TABLE:case D.IN_TABLE_BODY:case D.IN_ROW:{nh(this,t);break}case D.IN_TABLE_TEXT:{aT(this,t);break}}}}function OR(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):sT(e,t),n}function RR(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const s=e.openElements.items[r];if(s===t.element)break;e._isSpecialElement(s,e.openElements.tagIDs[r])&&(n=s)}return n||(e.openElements.shortenToLength(Math.max(r,0)),e.activeFormattingElements.removeEntry(t)),n}function PR(e,t,n){let r=t,s=e.openElements.getCommonAncestor(t);for(let a=0,u=s;u!==n;a++,u=s){s=e.openElements.getCommonAncestor(u);const c=e.activeFormattingElements.getElementEntry(u),d=c&&a>=NR;!c||d?(d&&e.activeFormattingElements.removeEntry(c),e.openElements.remove(u)):(u=LR(e,c),r===t&&(e.activeFormattingElements.bookmark=c),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(u,r),r=u)}return r}function LR(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function DR(e,t,n){const r=e.treeAdapter.getTagName(t),s=js(r);if(e._isElementCausesFosterParenting(s))e._fosterParentElement(n);else{const a=e.treeAdapter.getNamespaceURI(t);s===g.TEMPLATE&&a===oe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function MR(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:s}=n,a=e.treeAdapter.createElement(s.tagName,r,s.attrs);e._adoptNodes(t,a),e.treeAdapter.appendChild(t,a),e.activeFormattingElements.insertElementAfterBookmark(a,s),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,a,s.tagID)}function Hf(e,t){for(let n=0;n<CR;n++){const r=OR(e,t);if(!r)break;const s=RR(e,r);if(!s)break;e.activeFormattingElements.bookmark=r;const a=PR(e,s,r.element),u=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(a),u&&DR(e,u,a),MR(e,s,r)}}function Yh(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function BR(e,t){e._appendCommentNode(t,e.openElements.items[0])}function FR(e,t){e._appendCommentNode(t,e.document)}function zf(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],s=e.treeAdapter.getNodeSourceCodeLocation(r);if(s&&!s.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const a=e.openElements.items[1],u=e.treeAdapter.getNodeSourceCodeLocation(a);u&&!u.endTag&&e._setEndLocation(a,t)}}}}function jR(e,t){e._setDocumentType(t);const n=t.forceQuirks?kn.QUIRKS:mR(t);pR(t)||e._err(t,J.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=D.BEFORE_HTML}function Po(e,t){e._err(t,J.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,kn.QUIRKS),e.insertionMode=D.BEFORE_HTML,e._processToken(t)}function UR(e,t){t.tagID===g.HTML?(e._insertElement(t,oe.HTML),e.insertionMode=D.BEFORE_HEAD):Wo(e,t)}function HR(e,t){const n=t.tagID;(n===g.HTML||n===g.HEAD||n===g.BODY||n===g.BR)&&Wo(e,t)}function Wo(e,t){e._insertFakeRootElement(),e.insertionMode=D.BEFORE_HEAD,e._processToken(t)}function zR(e,t){switch(t.tagID){case g.HTML:{Vt(e,t);break}case g.HEAD:{e._insertElement(t,oe.HTML),e.headElement=e.openElements.current,e.insertionMode=D.IN_HEAD;break}default:Ko(e,t)}}function VR(e,t){const n=t.tagID;n===g.HEAD||n===g.BODY||n===g.HTML||n===g.BR?Ko(e,t):e._err(t,J.endTagWithoutMatchingOpenElement)}function Ko(e,t){e._insertFakeElement(V.HEAD,g.HEAD),e.headElement=e.openElements.current,e.insertionMode=D.IN_HEAD,e._processToken(t)}function Hn(e,t){switch(t.tagID){case g.HTML:{Vt(e,t);break}case g.BASE:case g.BASEFONT:case g.BGSOUND:case g.LINK:case g.META:{e._appendElement(t,oe.HTML),t.ackSelfClosing=!0;break}case g.TITLE:{e._switchToTextParsing(t,pt.RCDATA);break}case g.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,pt.RAWTEXT):(e._insertElement(t,oe.HTML),e.insertionMode=D.IN_HEAD_NO_SCRIPT);break}case g.NOFRAMES:case g.STYLE:{e._switchToTextParsing(t,pt.RAWTEXT);break}case g.SCRIPT:{e._switchToTextParsing(t,pt.SCRIPT_DATA);break}case g.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=D.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(D.IN_TEMPLATE);break}case g.HEAD:{e._err(t,J.misplacedStartTagForHeadElement);break}default:qo(e,t)}}function $R(e,t){switch(t.tagID){case g.HEAD:{e.openElements.pop(),e.insertionMode=D.AFTER_HEAD;break}case g.BODY:case g.BR:case g.HTML:{qo(e,t);break}case g.TEMPLATE:{Ui(e,t);break}default:e._err(t,J.endTagWithoutMatchingOpenElement)}}function Ui(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==g.TEMPLATE&&e._err(t,J.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(g.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,J.endTagWithoutMatchingOpenElement)}function qo(e,t){e.openElements.pop(),e.insertionMode=D.AFTER_HEAD,e._processToken(t)}function WR(e,t){switch(t.tagID){case g.HTML:{Vt(e,t);break}case g.BASEFONT:case g.BGSOUND:case g.HEAD:case g.LINK:case g.META:case g.NOFRAMES:case g.STYLE:{Hn(e,t);break}case g.NOSCRIPT:{e._err(t,J.nestedNoscriptInHead);break}default:Yo(e,t)}}function KR(e,t){switch(t.tagID){case g.NOSCRIPT:{e.openElements.pop(),e.insertionMode=D.IN_HEAD;break}case g.BR:{Yo(e,t);break}default:e._err(t,J.endTagWithoutMatchingOpenElement)}}function Yo(e,t){const n=t.type===Fe.EOF?J.openElementsLeftAfterEof:J.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=D.IN_HEAD,e._processToken(t)}function qR(e,t){switch(t.tagID){case g.HTML:{Vt(e,t);break}case g.BODY:{e._insertElement(t,oe.HTML),e.framesetOk=!1,e.insertionMode=D.IN_BODY;break}case g.FRAMESET:{e._insertElement(t,oe.HTML),e.insertionMode=D.IN_FRAMESET;break}case g.BASE:case g.BASEFONT:case g.BGSOUND:case g.LINK:case g.META:case g.NOFRAMES:case g.SCRIPT:case g.STYLE:case g.TEMPLATE:case g.TITLE:{e._err(t,J.abandonedHeadElementChild),e.openElements.push(e.headElement,g.HEAD),Hn(e,t),e.openElements.remove(e.headElement);break}case g.HEAD:{e._err(t,J.misplacedStartTagForHeadElement);break}default:Go(e,t)}}function YR(e,t){switch(t.tagID){case g.BODY:case g.HTML:case g.BR:{Go(e,t);break}case g.TEMPLATE:{Ui(e,t);break}default:e._err(t,J.endTagWithoutMatchingOpenElement)}}function Go(e,t){e._insertFakeElement(V.BODY,g.BODY),e.insertionMode=D.IN_BODY,Ll(e,t)}function Ll(e,t){switch(t.type){case Fe.CHARACTER:{nT(e,t);break}case Fe.WHITESPACE_CHARACTER:{tT(e,t);break}case Fe.COMMENT:{Yh(e,t);break}case Fe.START_TAG:{Vt(e,t);break}case Fe.END_TAG:{Dl(e,t);break}case Fe.EOF:{oT(e,t);break}}}function tT(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function nT(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function GR(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function QR(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function XR(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,oe.HTML),e.insertionMode=D.IN_FRAMESET)}function JR(e,t){e.openElements.hasInButtonScope(g.P)&&e._closePElement(),e._insertElement(t,oe.HTML)}function ZR(e,t){e.openElements.hasInButtonScope(g.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&qh.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,oe.HTML)}function eP(e,t){e.openElements.hasInButtonScope(g.P)&&e._closePElement(),e._insertElement(t,oe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function tP(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(g.P)&&e._closePElement(),e._insertElement(t,oe.HTML),n||(e.formElement=e.openElements.current))}function nP(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const s=e.openElements.tagIDs[r];if(n===g.LI&&s===g.LI||(n===g.DD||n===g.DT)&&(s===g.DD||s===g.DT)){e.openElements.generateImpliedEndTagsWithExclusion(s),e.openElements.popUntilTagNamePopped(s);break}if(s!==g.ADDRESS&&s!==g.DIV&&s!==g.P&&e._isSpecialElement(e.openElements.items[r],s))break}e.openElements.hasInButtonScope(g.P)&&e._closePElement(),e._insertElement(t,oe.HTML)}function rP(e,t){e.openElements.hasInButtonScope(g.P)&&e._closePElement(),e._insertElement(t,oe.HTML),e.tokenizer.state=pt.PLAINTEXT}function iP(e,t){e.openElements.hasInScope(g.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(g.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,oe.HTML),e.framesetOk=!1}function sP(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(V.A);n&&(Hf(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,oe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function oP(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,oe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function aP(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(g.NOBR)&&(Hf(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,oe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function uP(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,oe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function lP(e,t){e.treeAdapter.getDocumentMode(e.document)!==kn.QUIRKS&&e.openElements.hasInButtonScope(g.P)&&e._closePElement(),e._insertElement(t,oe.HTML),e.framesetOk=!1,e.insertionMode=D.IN_TABLE}function rT(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,oe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function iT(e){const t=KE(e,Di.TYPE);return t!=null&&t.toLowerCase()===AR}function cP(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,oe.HTML),iT(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function dP(e,t){e._appendElement(t,oe.HTML),t.ackSelfClosing=!0}function hP(e,t){e.openElements.hasInButtonScope(g.P)&&e._closePElement(),e._appendElement(t,oe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function fP(e,t){t.tagName=V.IMG,t.tagID=g.IMG,rT(e,t)}function pP(e,t){e._insertElement(t,oe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=pt.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=D.TEXT}function mP(e,t){e.openElements.hasInButtonScope(g.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,pt.RAWTEXT)}function gP(e,t){e.framesetOk=!1,e._switchToTextParsing(t,pt.RAWTEXT)}function zy(e,t){e._switchToTextParsing(t,pt.RAWTEXT)}function yP(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,oe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===D.IN_TABLE||e.insertionMode===D.IN_CAPTION||e.insertionMode===D.IN_TABLE_BODY||e.insertionMode===D.IN_ROW||e.insertionMode===D.IN_CELL?D.IN_SELECT_IN_TABLE:D.IN_SELECT}function bP(e,t){e.openElements.currentTagId===g.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,oe.HTML)}function EP(e,t){e.openElements.hasInScope(g.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,oe.HTML)}function TP(e,t){e.openElements.hasInScope(g.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(g.RTC),e._insertElement(t,oe.HTML)}function _P(e,t){e._reconstructActiveFormattingElements(),JE(t),Uf(t),t.selfClosing?e._appendElement(t,oe.MATHML):e._insertElement(t,oe.MATHML),t.ackSelfClosing=!0}function vP(e,t){e._reconstructActiveFormattingElements(),ZE(t),Uf(t),t.selfClosing?e._appendElement(t,oe.SVG):e._insertElement(t,oe.SVG),t.ackSelfClosing=!0}function Vy(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,oe.HTML)}function Vt(e,t){switch(t.tagID){case g.I:case g.S:case g.B:case g.U:case g.EM:case g.TT:case g.BIG:case g.CODE:case g.FONT:case g.SMALL:case g.STRIKE:case g.STRONG:{oP(e,t);break}case g.A:{sP(e,t);break}case g.H1:case g.H2:case g.H3:case g.H4:case g.H5:case g.H6:{ZR(e,t);break}case g.P:case g.DL:case g.OL:case g.UL:case g.DIV:case g.DIR:case g.NAV:case g.MAIN:case g.MENU:case g.ASIDE:case g.CENTER:case g.FIGURE:case g.FOOTER:case g.HEADER:case g.HGROUP:case g.DIALOG:case g.DETAILS:case g.ADDRESS:case g.ARTICLE:case g.SEARCH:case g.SECTION:case g.SUMMARY:case g.FIELDSET:case g.BLOCKQUOTE:case g.FIGCAPTION:{JR(e,t);break}case g.LI:case g.DD:case g.DT:{nP(e,t);break}case g.BR:case g.IMG:case g.WBR:case g.AREA:case g.EMBED:case g.KEYGEN:{rT(e,t);break}case g.HR:{hP(e,t);break}case g.RB:case g.RTC:{EP(e,t);break}case g.RT:case g.RP:{TP(e,t);break}case g.PRE:case g.LISTING:{eP(e,t);break}case g.XMP:{mP(e,t);break}case g.SVG:{vP(e,t);break}case g.HTML:{GR(e,t);break}case g.BASE:case g.LINK:case g.META:case g.STYLE:case g.TITLE:case g.SCRIPT:case g.BGSOUND:case g.BASEFONT:case g.TEMPLATE:{Hn(e,t);break}case g.BODY:{QR(e,t);break}case g.FORM:{tP(e,t);break}case g.NOBR:{aP(e,t);break}case g.MATH:{_P(e,t);break}case g.TABLE:{lP(e,t);break}case g.INPUT:{cP(e,t);break}case g.PARAM:case g.TRACK:case g.SOURCE:{dP(e,t);break}case g.IMAGE:{fP(e,t);break}case g.BUTTON:{iP(e,t);break}case g.APPLET:case g.OBJECT:case g.MARQUEE:{uP(e,t);break}case g.IFRAME:{gP(e,t);break}case g.SELECT:{yP(e,t);break}case g.OPTION:case g.OPTGROUP:{bP(e,t);break}case g.NOEMBED:case g.NOFRAMES:{zy(e,t);break}case g.FRAMESET:{XR(e,t);break}case g.TEXTAREA:{pP(e,t);break}case g.NOSCRIPT:{e.options.scriptingEnabled?zy(e,t):Vy(e,t);break}case g.PLAINTEXT:{rP(e,t);break}case g.COL:case g.TH:case g.TD:case g.TR:case g.HEAD:case g.FRAME:case g.TBODY:case g.TFOOT:case g.THEAD:case g.CAPTION:case g.COLGROUP:break;default:Vy(e,t)}}function xP(e,t){if(e.openElements.hasInScope(g.BODY)&&(e.insertionMode=D.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function wP(e,t){e.openElements.hasInScope(g.BODY)&&(e.insertionMode=D.AFTER_BODY,pT(e,t))}function kP(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function SP(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(g.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(g.FORM):n&&e.openElements.remove(n))}function AP(e){e.openElements.hasInButtonScope(g.P)||e._insertFakeElement(V.P,g.P),e._closePElement()}function CP(e){e.openElements.hasInListItemScope(g.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(g.LI),e.openElements.popUntilTagNamePopped(g.LI))}function NP(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function IP(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function OP(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function RP(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(V.BR,g.BR),e.openElements.pop(),e.framesetOk=!1}function sT(e,t){const n=t.tagName,r=t.tagID;for(let s=e.openElements.stackTop;s>0;s--){const a=e.openElements.items[s],u=e.openElements.tagIDs[s];if(r===u&&(r!==g.UNKNOWN||e.treeAdapter.getTagName(a)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=s&&e.openElements.shortenToLength(s);break}if(e._isSpecialElement(a,u))break}}function Dl(e,t){switch(t.tagID){case g.A:case g.B:case g.I:case g.S:case g.U:case g.EM:case g.TT:case g.BIG:case g.CODE:case g.FONT:case g.NOBR:case g.SMALL:case g.STRIKE:case g.STRONG:{Hf(e,t);break}case g.P:{AP(e);break}case g.DL:case g.UL:case g.OL:case g.DIR:case g.DIV:case g.NAV:case g.PRE:case g.MAIN:case g.MENU:case g.ASIDE:case g.BUTTON:case g.CENTER:case g.FIGURE:case g.FOOTER:case g.HEADER:case g.HGROUP:case g.DIALOG:case g.ADDRESS:case g.ARTICLE:case g.DETAILS:case g.SEARCH:case g.SECTION:case g.SUMMARY:case g.LISTING:case g.FIELDSET:case g.BLOCKQUOTE:case g.FIGCAPTION:{kP(e,t);break}case g.LI:{CP(e);break}case g.DD:case g.DT:{NP(e,t);break}case g.H1:case g.H2:case g.H3:case g.H4:case g.H5:case g.H6:{IP(e);break}case g.BR:{RP(e);break}case g.BODY:{xP(e,t);break}case g.HTML:{wP(e,t);break}case g.FORM:{SP(e);break}case g.APPLET:case g.OBJECT:case g.MARQUEE:{OP(e,t);break}case g.TEMPLATE:{Ui(e,t);break}default:sT(e,t)}}function oT(e,t){e.tmplInsertionModeStack.length>0?fT(e,t):zf(e,t)}function PP(e,t){var n;t.tagID===g.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function LP(e,t){e._err(t,J.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function nh(e,t){if(e.openElements.currentTagId!==void 0&&eT.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=D.IN_TABLE_TEXT,t.type){case Fe.CHARACTER:{uT(e,t);break}case Fe.WHITESPACE_CHARACTER:{aT(e,t);break}}else Ta(e,t)}function DP(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,oe.HTML),e.insertionMode=D.IN_CAPTION}function MP(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,oe.HTML),e.insertionMode=D.IN_COLUMN_GROUP}function BP(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(V.COLGROUP,g.COLGROUP),e.insertionMode=D.IN_COLUMN_GROUP,Vf(e,t)}function FP(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,oe.HTML),e.insertionMode=D.IN_TABLE_BODY}function jP(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(V.TBODY,g.TBODY),e.insertionMode=D.IN_TABLE_BODY,Ml(e,t)}function UP(e,t){e.openElements.hasInTableScope(g.TABLE)&&(e.openElements.popUntilTagNamePopped(g.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function HP(e,t){iT(t)?e._appendElement(t,oe.HTML):Ta(e,t),t.ackSelfClosing=!0}function zP(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,oe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function Ps(e,t){switch(t.tagID){case g.TD:case g.TH:case g.TR:{jP(e,t);break}case g.STYLE:case g.SCRIPT:case g.TEMPLATE:{Hn(e,t);break}case g.COL:{BP(e,t);break}case g.FORM:{zP(e,t);break}case g.TABLE:{UP(e,t);break}case g.TBODY:case g.TFOOT:case g.THEAD:{FP(e,t);break}case g.INPUT:{HP(e,t);break}case g.CAPTION:{DP(e,t);break}case g.COLGROUP:{MP(e,t);break}default:Ta(e,t)}}function la(e,t){switch(t.tagID){case g.TABLE:{e.openElements.hasInTableScope(g.TABLE)&&(e.openElements.popUntilTagNamePopped(g.TABLE),e._resetInsertionMode());break}case g.TEMPLATE:{Ui(e,t);break}case g.BODY:case g.CAPTION:case g.COL:case g.COLGROUP:case g.HTML:case g.TBODY:case g.TD:case g.TFOOT:case g.TH:case g.THEAD:case g.TR:break;default:Ta(e,t)}}function Ta(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,Ll(e,t),e.fosterParentingEnabled=n}function aT(e,t){e.pendingCharacterTokens.push(t)}function uT(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Lo(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)Ta(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const lT=new Set([g.CAPTION,g.COL,g.COLGROUP,g.TBODY,g.TD,g.TFOOT,g.TH,g.THEAD,g.TR]);function VP(e,t){const n=t.tagID;lT.has(n)?e.openElements.hasInTableScope(g.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(g.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=D.IN_TABLE,Ps(e,t)):Vt(e,t)}function $P(e,t){const n=t.tagID;switch(n){case g.CAPTION:case g.TABLE:{e.openElements.hasInTableScope(g.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(g.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=D.IN_TABLE,n===g.TABLE&&la(e,t));break}case g.BODY:case g.COL:case g.COLGROUP:case g.HTML:case g.TBODY:case g.TD:case g.TFOOT:case g.TH:case g.THEAD:case g.TR:break;default:Dl(e,t)}}function Vf(e,t){switch(t.tagID){case g.HTML:{Vt(e,t);break}case g.COL:{e._appendElement(t,oe.HTML),t.ackSelfClosing=!0;break}case g.TEMPLATE:{Hn(e,t);break}default:dl(e,t)}}function WP(e,t){switch(t.tagID){case g.COLGROUP:{e.openElements.currentTagId===g.COLGROUP&&(e.openElements.pop(),e.insertionMode=D.IN_TABLE);break}case g.TEMPLATE:{Ui(e,t);break}case g.COL:break;default:dl(e,t)}}function dl(e,t){e.openElements.currentTagId===g.COLGROUP&&(e.openElements.pop(),e.insertionMode=D.IN_TABLE,e._processToken(t))}function Ml(e,t){switch(t.tagID){case g.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,oe.HTML),e.insertionMode=D.IN_ROW;break}case g.TH:case g.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(V.TR,g.TR),e.insertionMode=D.IN_ROW,Bl(e,t);break}case g.CAPTION:case g.COL:case g.COLGROUP:case g.TBODY:case g.TFOOT:case g.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=D.IN_TABLE,Ps(e,t));break}default:Ps(e,t)}}function Gh(e,t){const n=t.tagID;switch(t.tagID){case g.TBODY:case g.TFOOT:case g.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=D.IN_TABLE);break}case g.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=D.IN_TABLE,la(e,t));break}case g.BODY:case g.CAPTION:case g.COL:case g.COLGROUP:case g.HTML:case g.TD:case g.TH:case g.TR:break;default:la(e,t)}}function Bl(e,t){switch(t.tagID){case g.TH:case g.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,oe.HTML),e.insertionMode=D.IN_CELL,e.activeFormattingElements.insertMarker();break}case g.CAPTION:case g.COL:case g.COLGROUP:case g.TBODY:case g.TFOOT:case g.THEAD:case g.TR:{e.openElements.hasInTableScope(g.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=D.IN_TABLE_BODY,Ml(e,t));break}default:Ps(e,t)}}function cT(e,t){switch(t.tagID){case g.TR:{e.openElements.hasInTableScope(g.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=D.IN_TABLE_BODY);break}case g.TABLE:{e.openElements.hasInTableScope(g.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=D.IN_TABLE_BODY,Gh(e,t));break}case g.TBODY:case g.TFOOT:case g.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(g.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=D.IN_TABLE_BODY,Gh(e,t));break}case g.BODY:case g.CAPTION:case g.COL:case g.COLGROUP:case g.HTML:case g.TD:case g.TH:break;default:la(e,t)}}function KP(e,t){const n=t.tagID;lT.has(n)?(e.openElements.hasInTableScope(g.TD)||e.openElements.hasInTableScope(g.TH))&&(e._closeTableCell(),Bl(e,t)):Vt(e,t)}function qP(e,t){const n=t.tagID;switch(n){case g.TD:case g.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=D.IN_ROW);break}case g.TABLE:case g.TBODY:case g.TFOOT:case g.THEAD:case g.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),cT(e,t));break}case g.BODY:case g.CAPTION:case g.COL:case g.COLGROUP:case g.HTML:break;default:Dl(e,t)}}function dT(e,t){switch(t.tagID){case g.HTML:{Vt(e,t);break}case g.OPTION:{e.openElements.currentTagId===g.OPTION&&e.openElements.pop(),e._insertElement(t,oe.HTML);break}case g.OPTGROUP:{e.openElements.currentTagId===g.OPTION&&e.openElements.pop(),e.openElements.currentTagId===g.OPTGROUP&&e.openElements.pop(),e._insertElement(t,oe.HTML);break}case g.HR:{e.openElements.currentTagId===g.OPTION&&e.openElements.pop(),e.openElements.currentTagId===g.OPTGROUP&&e.openElements.pop(),e._appendElement(t,oe.HTML),t.ackSelfClosing=!0;break}case g.INPUT:case g.KEYGEN:case g.TEXTAREA:case g.SELECT:{e.openElements.hasInSelectScope(g.SELECT)&&(e.openElements.popUntilTagNamePopped(g.SELECT),e._resetInsertionMode(),t.tagID!==g.SELECT&&e._processStartTag(t));break}case g.SCRIPT:case g.TEMPLATE:{Hn(e,t);break}}}function hT(e,t){switch(t.tagID){case g.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===g.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===g.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===g.OPTGROUP&&e.openElements.pop();break}case g.OPTION:{e.openElements.currentTagId===g.OPTION&&e.openElements.pop();break}case g.SELECT:{e.openElements.hasInSelectScope(g.SELECT)&&(e.openElements.popUntilTagNamePopped(g.SELECT),e._resetInsertionMode());break}case g.TEMPLATE:{Ui(e,t);break}}}function YP(e,t){const n=t.tagID;n===g.CAPTION||n===g.TABLE||n===g.TBODY||n===g.TFOOT||n===g.THEAD||n===g.TR||n===g.TD||n===g.TH?(e.openElements.popUntilTagNamePopped(g.SELECT),e._resetInsertionMode(),e._processStartTag(t)):dT(e,t)}function GP(e,t){const n=t.tagID;n===g.CAPTION||n===g.TABLE||n===g.TBODY||n===g.TFOOT||n===g.THEAD||n===g.TR||n===g.TD||n===g.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(g.SELECT),e._resetInsertionMode(),e.onEndTag(t)):hT(e,t)}function QP(e,t){switch(t.tagID){case g.BASE:case g.BASEFONT:case g.BGSOUND:case g.LINK:case g.META:case g.NOFRAMES:case g.SCRIPT:case g.STYLE:case g.TEMPLATE:case g.TITLE:{Hn(e,t);break}case g.CAPTION:case g.COLGROUP:case g.TBODY:case g.TFOOT:case g.THEAD:{e.tmplInsertionModeStack[0]=D.IN_TABLE,e.insertionMode=D.IN_TABLE,Ps(e,t);break}case g.COL:{e.tmplInsertionModeStack[0]=D.IN_COLUMN_GROUP,e.insertionMode=D.IN_COLUMN_GROUP,Vf(e,t);break}case g.TR:{e.tmplInsertionModeStack[0]=D.IN_TABLE_BODY,e.insertionMode=D.IN_TABLE_BODY,Ml(e,t);break}case g.TD:case g.TH:{e.tmplInsertionModeStack[0]=D.IN_ROW,e.insertionMode=D.IN_ROW,Bl(e,t);break}default:e.tmplInsertionModeStack[0]=D.IN_BODY,e.insertionMode=D.IN_BODY,Vt(e,t)}}function XP(e,t){t.tagID===g.TEMPLATE&&Ui(e,t)}function fT(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(g.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):zf(e,t)}function JP(e,t){t.tagID===g.HTML?Vt(e,t):hl(e,t)}function pT(e,t){var n;if(t.tagID===g.HTML){if(e.fragmentContext||(e.insertionMode=D.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===g.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else hl(e,t)}function hl(e,t){e.insertionMode=D.IN_BODY,Ll(e,t)}function ZP(e,t){switch(t.tagID){case g.HTML:{Vt(e,t);break}case g.FRAMESET:{e._insertElement(t,oe.HTML);break}case g.FRAME:{e._appendElement(t,oe.HTML),t.ackSelfClosing=!0;break}case g.NOFRAMES:{Hn(e,t);break}}}function e6(e,t){t.tagID===g.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==g.FRAMESET&&(e.insertionMode=D.AFTER_FRAMESET))}function t6(e,t){switch(t.tagID){case g.HTML:{Vt(e,t);break}case g.NOFRAMES:{Hn(e,t);break}}}function n6(e,t){t.tagID===g.HTML&&(e.insertionMode=D.AFTER_AFTER_FRAMESET)}function r6(e,t){t.tagID===g.HTML?Vt(e,t):Zu(e,t)}function Zu(e,t){e.insertionMode=D.IN_BODY,Ll(e,t)}function i6(e,t){switch(t.tagID){case g.HTML:{Vt(e,t);break}case g.NOFRAMES:{Hn(e,t);break}}}function s6(e,t){t.chars=it,e._insertCharacters(t)}function o6(e,t){e._insertCharacters(t),e.framesetOk=!1}function mT(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==oe.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function a6(e,t){if(vR(t))mT(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===oe.MATHML?JE(t):r===oe.SVG&&(xR(t),ZE(t)),Uf(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function u6(e,t){if(t.tagID===g.P||t.tagID===g.BR){mT(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===oe.HTML){e._endTagOutsideForeignContent(t);break}const s=e.treeAdapter.getTagName(r);if(s.toLowerCase()===t.tagName){t.tagName=s,e.openElements.shortenToLength(n);break}}}V.AREA,V.BASE,V.BASEFONT,V.BGSOUND,V.BR,V.COL,V.EMBED,V.FRAME,V.HR,V.IMG,V.INPUT,V.KEYGEN,V.LINK,V.META,V.PARAM,V.SOURCE,V.TRACK,V.WBR;const l6=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,c6=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),$y={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function gT(e,t){const n=T6(e),r=EE("type",{handlers:{root:d6,element:h6,text:f6,comment:bT,doctype:p6,raw:g6},unknown:y6}),s={parser:n?new Hy($y):Hy.getFragmentParser(void 0,$y),handle(c){r(c,s)},stitches:!1,options:t||{}};r(e,s),Us(s,Zn());const a=n?s.parser.document:s.parser.getFragment(),u=_O(a,{file:s.options.file});return s.stitches&&Pl(u,"comment",function(c,d,h){const p=c;if(p.value.stitch&&h&&d!==void 0){const m=h.children;return m[d]=p.value.stitch,d}}),u.type==="root"&&u.children.length===1&&u.children[0].type===e.type?u.children[0]:u}function yT(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function d6(e,t){yT(e.children,t)}function h6(e,t){b6(e,t),yT(e.children,t),E6(e,t)}function f6(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:Fe.CHARACTER,chars:e.value,location:_a(e)};Us(t,Zn(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function p6(e,t){const n={type:Fe.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:_a(e)};Us(t,Zn(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function m6(e,t){t.stitches=!0;const n=_6(e);if("children"in e&&"children"in n){const r=gT({type:"root",children:e.children},t.options);n.children=r.children}bT({type:"comment",value:{stitch:n}},t)}function bT(e,t){const n=e.value,r={type:Fe.COMMENT,data:n,location:_a(e)};Us(t,Zn(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function g6(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,ET(t,Zn(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(l6,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function y6(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))m6(n,t);else{let r="";throw c6.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Us(e,t){ET(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=pt.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function ET(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function b6(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===pt.PLAINTEXT)return;Us(t,Zn(e));const r=t.parser.openElements.current;let s="namespaceURI"in r?r.namespaceURI:Ri.html;s===Ri.html&&n==="svg"&&(s=Ri.svg);const a=SO({...e,children:[]},{space:s===Ri.svg?"svg":"html"}),u={type:Fe.START_TAG,tagName:n,tagID:js(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in a?a.attrs:[],location:_a(e)};t.parser.currentToken=u,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function E6(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&LO.includes(n)||t.parser.tokenizer.state===pt.PLAINTEXT)return;Us(t,Al(e));const r={type:Fe.END_TAG,tagName:n,tagID:js(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:_a(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===pt.RCDATA||t.parser.tokenizer.state===pt.RAWTEXT||t.parser.tokenizer.state===pt.SCRIPT_DATA)&&(t.parser.tokenizer.state=pt.DATA)}function T6(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function _a(e){const t=Zn(e)||{line:void 0,column:void 0,offset:void 0},n=Al(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function _6(e){return"children"in e?Fi({...e,children:[]}):Fi(e)}function Si(e){return function(t,n){return gT(t,{...e,file:n})}}const _i=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],Qh={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[..._i,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[..._i],h2:[["className","sr-only"]],img:[..._i,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[..._i,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[..._i],table:[..._i],ul:[..._i,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},Kr={}.hasOwnProperty;function v6(e,t){let n={type:"root",children:[]};const r={schema:t?{...Qh,...t}:Qh,stack:[]},s=TT(r,e);return s&&(Array.isArray(s)?s.length===1?n=s[0]:n.children=s:n=s),n}function TT(e,t){if(t&&typeof t=="object"){const n=t;switch(typeof n.type=="string"?n.type:""){case"comment":return x6(e,n);case"doctype":return w6(e,n);case"element":return k6(e,n);case"root":return S6(e,n);case"text":return A6(e,n)}}}function x6(e,t){if(e.schema.allowComments){const n=typeof t.value=="string"?t.value:"",r=n.indexOf("-->"),a={type:"comment",value:r<0?n:n.slice(0,r)};return va(a,t),a}}function w6(e,t){if(e.schema.allowDoctypes){const n={type:"doctype"};return va(n,t),n}}function k6(e,t){const n=typeof t.tagName=="string"?t.tagName:"";e.stack.push(n);const r=_T(e,t.children),s=C6(e,t.properties);e.stack.pop();let a=!1;if(n&&n!=="*"&&(!e.schema.tagNames||e.schema.tagNames.includes(n))&&(a=!0,e.schema.ancestors&&Kr.call(e.schema.ancestors,n))){const c=e.schema.ancestors[n];let d=-1;for(a=!1;++d<c.length;)e.stack.includes(c[d])&&(a=!0)}if(!a)return e.schema.strip&&!e.schema.strip.includes(n)?r:void 0;const u={type:"element",tagName:n,properties:s,children:r};return va(u,t),u}function S6(e,t){const r={type:"root",children:_T(e,t.children)};return va(r,t),r}function A6(e,t){const r={type:"text",value:typeof t.value=="string"?t.value:""};return va(r,t),r}function _T(e,t){const n=[];if(Array.isArray(t)){const r=t;let s=-1;for(;++s<r.length;){const a=TT(e,r[s]);a&&(Array.isArray(a)?n.push(...a):n.push(a))}}return n}function C6(e,t){const n=e.stack[e.stack.length-1],r=e.schema.attributes,s=e.schema.required,a=r&&Kr.call(r,n)?r[n]:void 0,u=r&&Kr.call(r,"*")?r["*"]:void 0,c=t&&typeof t=="object"?t:{},d={};let h;for(h in c)if(Kr.call(c,h)){const p=c[h];let m=Wy(e,Ky(a,h),h,p);m==null&&(m=Wy(e,Ky(u,h),h,p)),m!=null&&(d[h]=m)}if(s&&Kr.call(s,n)){const p=s[n];for(h in p)Kr.call(p,h)&&!Kr.call(d,h)&&(d[h]=p[h])}return d}function Wy(e,t,n,r){return t?Array.isArray(r)?N6(e,t,n,r):vT(e,t,n,r):void 0}function N6(e,t,n,r){let s=-1;const a=[];for(;++s<r.length;){const u=vT(e,t,n,r[s]);(typeof u=="number"||typeof u=="string")&&a.push(u)}return a}function vT(e,t,n,r){if(!(typeof r!="boolean"&&typeof r!="number"&&typeof r!="string")&&I6(e,n,r)){if(typeof t=="object"&&t.length>1){let s=!1,a=0;for(;++a<t.length;){const u=t[a];if(u&&typeof u=="object"&&"flags"in u){if(u.test(String(r))){s=!0;break}}else if(u===r){s=!0;break}}if(!s)return}return e.schema.clobber&&e.schema.clobberPrefix&&e.schema.clobber.includes(n)?e.schema.clobberPrefix+r:r}}function I6(e,t,n){const r=e.schema.protocols&&Kr.call(e.schema.protocols,t)?e.schema.protocols[t]:void 0;if(!r||r.length===0)return!0;const s=String(n),a=s.indexOf(":"),u=s.indexOf("?"),c=s.indexOf("#"),d=s.indexOf("/");if(a<0||d>-1&&a>d||u>-1&&a>u||c>-1&&a>c)return!0;let h=-1;for(;++h<r.length;){const p=r[h];if(a===p.length&&s.slice(0,p.length)===p)return!0}return!1}function va(e,t){const n=zb(t);t.data&&(e.data=Fi(t.data)),n&&(e.position=n)}function Ky(e,t){let n,r=-1;if(e)for(;++r<e.length;){const s=e[r],a=typeof s=="string"?s:s[0];if(a===t)return s;a==="data*"&&(n=s)}if(t.length>4&&t.slice(0,4).toLowerCase()==="data")return n}function Ai(e){return function(t){return v6(t,e)}}const O6="https://bewit.love/feeds/zbozi.xml",R6="https://bewit.love/feed/bewit?auth=xr32PRbrs554K",P6=()=>Ze.supabaseUrl;`${P6()}`;const L6=async()=>{try{const{data:{session:e}}=await Ze.auth.getSession(),t=e==null?void 0:e.access_token,{data:n,error:r}=await Ze.functions.invoke("sync-feed-2",{body:{}});if(r)throw r;return(n==null?void 0:n.ok)===!0}catch{return!1}},qy=async e=>{try{const{data:t,error:n}=await Ze.from("sync_logs").select("*").eq("sync_type",e).order("started_at",{ascending:!1}).limit(1).single();return n?null:t}catch{return null}},D6=()=>{const[e,t]=se.useState(!1),[n,r]=se.useState(!1),[s,a]=se.useState("feed_1"),[u,c]=se.useState(null),[d,h]=se.useState(0),[p,m]=se.useState(null),[b,T]=se.useState(0);se.useEffect(()=>{w(),S(),A(),x()},[]);const w=async()=>{try{const I=await qy("products_feed");c(I)}catch{}},A=async()=>{try{const I=await qy("product_feed_2");m(I)}catch{}},S=async()=>{try{const{count:I,error:Q}=await Ze.from("products").select("*",{count:"exact",head:!0});if(Q)return;h(I||0)}catch{}},x=async()=>{try{const{count:I,error:Q}=await Ze.from("product_feed_2").select("*",{count:"exact",head:!0});if(Q)return;T(I||0)}catch{}},R=async()=>{t(!0);try{const I=await fetch("https://modopafybeslbcqjxsve.supabase.co/functions/v1/sync-products",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1vZG9wYWZ5YmVzbGJjcWp4c3ZlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyNTM0MjEsImV4cCI6MjA3MDgyOTQyMX0.8gxL0b9flTUyoltiEIJx8Djuiyx16rySlffHkd_nm1U","Content-Type":"application/json","X-Triggered-By":"manual-button"},body:JSON.stringify({source:"manual_button",trigger_time:new Date().toISOString()})});if(!I.ok)throw new Error(`HTTP ${I.status}: ${I.statusText}`);const Q=await I.json();if(Q.ok){await w(),await S();const W=` Synchronizace spn!

 Zpracovno: ${Q.processed||0}
 Novch: ${Q.inserted||0}
 Aktualizovno: ${Q.updated||0}
 Chyb: ${Q.failed||0}`;alert(W)}else throw new Error(Q.error||"Neznm chyba z Edge Function")}catch(I){alert(" Chyba pi synchronizaci: "+(I instanceof Error?I.message:"Neznm chyba"))}finally{t(!1)}},C=async()=>{await R()},j=async()=>{r(!0);try{if(await L6()){alert(" Synchronizace Feed 2 byla sputna na pozad. Sledujte stav na tto strnce.");const Q=setInterval(async()=>{await A(),await x();const{data:W}=await Ze.from("sync_logs").select("*").eq("sync_type","product_feed_2").order("started_at",{ascending:!1}).limit(1).single();W&&W.status!=="running"&&(clearInterval(Q),r(!1),W.status==="success"?alert(` Synchronizace Feed 2 dokonena!

 Zpracovno: ${W.records_processed}
 Vloeno: ${W.records_inserted}
 Aktualizovno: ${W.records_updated}
 Selhalo: ${W.records_failed}`):alert(` Synchronizace Feed 2 selhala: ${W.error_message||"Neznm chyba"}`))},5e3);await A(),await x()}else throw new Error("Nepodailo se spustit synchronizaci Feed 2")}catch(I){alert(" Chyba pi spoutn synchronizace Feed 2: "+(I instanceof Error?I.message:"Neznm chyba")),r(!1)}},M=I=>new Date(I).toLocaleString("cs-CZ");return v.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 max-w-4xl mx-auto",children:[v.jsx("h2",{className:"text-2xl font-bold text-bewit-dark mb-6",children:" Synchronizace produkt BEWIT"}),v.jsxs("div",{className:"mb-6 flex gap-4 border-b border-gray-200",children:[v.jsx("button",{onClick:()=>a("feed_1"),className:`px-6 py-3 font-semibold border-b-2 transition-colors ${s==="feed_1"?"border-bewit-blue text-bewit-blue":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Feed 1 - zbozi.xml"}),v.jsx("button",{onClick:()=>a("feed_2"),className:`px-6 py-3 font-semibold border-b-2 transition-colors ${s==="feed_2"?"border-bewit-blue text-bewit-blue":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Feed 2 - Product Feed 2"})]}),s==="feed_1"&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[v.jsxs("div",{className:"bg-bewit-lightBlue rounded-lg p-4",children:[v.jsx("h3",{className:"text-lg font-semibold text-bewit-blue mb-2",children:"Produkty v databzi"}),v.jsx("p",{className:"text-3xl font-bold text-bewit-blue",children:d})]}),u&&v.jsxs("div",{className:`rounded-lg p-4 ${u.status==="success"?"bg-green-100":u.status==="error"?"bg-red-100":"bg-yellow-100"}`,children:[v.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Posledn synchronizace"}),v.jsxs("p",{className:"text-sm",children:[v.jsx("strong",{children:"Status:"})," ",u.status==="success"?" spch":u.status==="error"?" Chyba":" B"]}),v.jsxs("p",{className:"text-sm",children:[v.jsx("strong",{children:"as:"})," ",M(u.started_at)]}),u.status==="success"&&v.jsxs(v.Fragment,{children:[v.jsxs("p",{className:"text-sm",children:[v.jsx("strong",{children:"Zpracovno:"})," ",u.records_processed]}),v.jsxs("p",{className:"text-sm",children:[v.jsx("strong",{children:"Novch:"})," ",u.records_inserted,",",v.jsx("strong",{children:" Aktualizovno:"})," ",u.records_updated]})]}),u.error_message&&v.jsxs("p",{className:"text-sm text-red-600 mt-2",children:[v.jsx("strong",{children:"Chyba:"})," ",u.error_message]})]})]}),v.jsxs("div",{className:"flex gap-4",children:[v.jsx("button",{onClick:C,disabled:e,className:"flex-1 bg-bewit-blue text-white px-6 py-3 rounded-lg font-semibold hover:bg-bewit-blue/90 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:e?" Synchronizuji...":" Synchronizovat Feed 1 nyn"}),v.jsx("button",{onClick:()=>window.open(O6,"_blank"),className:"bg-gray-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-600 transition-colors",children:" Zobrazit feed"})]})]}),s==="feed_2"&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[v.jsxs("div",{className:"bg-purple-100 rounded-lg p-4",children:[v.jsx("h3",{className:"text-lg font-semibold text-purple-700 mb-2",children:"Produkty v databzi (Feed 2)"}),v.jsx("p",{className:"text-3xl font-bold text-purple-700",children:b}),v.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Tabulka: product_feed_2"})]}),p&&v.jsxs("div",{className:`rounded-lg p-4 ${p.status==="success"?"bg-green-100":p.status==="error"?"bg-red-100":"bg-yellow-100"}`,children:[v.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Posledn synchronizace"}),v.jsxs("p",{className:"text-sm",children:[v.jsx("strong",{children:"Status:"})," ",p.status==="success"?" spch":p.status==="error"?" Chyba":" B"]}),v.jsxs("p",{className:"text-sm",children:[v.jsx("strong",{children:"as:"})," ",M(p.started_at)]}),p.status==="success"&&v.jsxs(v.Fragment,{children:[v.jsxs("p",{className:"text-sm",children:[v.jsx("strong",{children:"Zpracovno:"})," ",p.records_processed]}),v.jsxs("p",{className:"text-sm",children:[v.jsx("strong",{children:"Novch:"})," ",p.records_inserted,",",v.jsx("strong",{children:" Aktualizovno:"})," ",p.records_updated]})]}),p.error_message&&v.jsxs("p",{className:"text-sm text-red-600 mt-2",children:[v.jsx("strong",{children:"Chyba:"})," ",p.error_message]})]})]}),v.jsxs("div",{className:"flex gap-4",children:[v.jsx("button",{onClick:j,disabled:n,className:"flex-1 bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:n?" Synchronizuji Feed 2...":" Synchronizovat Feed 2 nyn"}),v.jsx("button",{onClick:()=>window.open(R6,"_blank"),className:"bg-gray-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-600 transition-colors",children:" Zobrazit feed"})]})]})]})},xT=({products:e,title:t=" Doporuen produkty",showSimilarity:n=!1})=>{const[r,s]=se.useState(0),[a,u]=se.useState(null);if(!e||e.length===0)return null;const c=()=>typeof window<"u"?window.innerWidth<768?1:window.innerWidth<1200?2:3:3,[d,h]=se.useState(c);se.useEffect(()=>{const M=()=>{h(c());const I=Math.ceil(e.length/c())-1;r>I&&s(I)};if(typeof window<"u")return window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)},[r,e.length]);const p=Math.ceil(e.length/d),m=r<p-1,b=r>0,T=()=>{m&&s(M=>M+1)},w=()=>{b&&s(M=>M-1)},A=()=>{const M=r*d,I=M+d;return e.slice(M,I)},S=(M,I)=>M?`${M.toLocaleString("cs-CZ")} ${I}`:"Cena na dotaz",x=(M,I)=>{M.stopPropagation(),I.product_url&&window.open(I.product_url,"_blank","noopener,noreferrer")},R=M=>{u(M)},C=()=>{u(null)},j=M=>M.image_url?M.image_url:`data:image/svg+xml;base64,${btoa(`
        <svg width="200" height="200" xmlns="http://www.w3.org/2000/svg">
          <rect width="200" height="200" fill="#f8f9fa"/>
          <text x="100" y="100" text-anchor="middle" dy=".3em" font-family="Arial, sans-serif" font-size="14" fill="#666">
            ${M.product_name.substring(0,20)}
          </text>
        </svg>
      `)}`;return A(),v.jsxs("div",{style:Ue.container,children:[v.jsxs("div",{style:Ue.header,children:[v.jsx("h4",{style:Ue.title,children:t}),e.length>d&&v.jsx("div",{style:Ue.controls,children:v.jsxs("span",{style:Ue.counter,children:[r+1," / ",p," stran"]})})]}),v.jsxs("div",{style:Ue.outerCarouselWrapper,children:[e.length>d&&v.jsx("button",{style:{...Ue.navigationArrow,...Ue.leftArrow},onClick:w,disabled:!b,title:"Pedchoz produkty",children:""}),v.jsx("div",{style:Ue.productsWrapper,children:v.jsx("div",{style:{...Ue.productsContainer,gridTemplateColumns:`repeat(${d}, 1fr)`},children:A().map((M,I)=>v.jsxs("div",{style:Ue.productCard,onClick:()=>R(M),children:[v.jsx("div",{style:Ue.imageContainer,children:v.jsx("img",{src:j(M),alt:M.product_name,style:Ue.productImage,onError:Q=>{const W=Q.target;W.src=j({...M,image_url:null})}})}),v.jsxs("div",{style:Ue.productInfo,children:[v.jsx("h5",{style:Ue.productName,title:M.product_name,children:M.product_name}),M.description&&v.jsx("p",{style:Ue.description,title:M.description,children:M.description.length>60?`${M.description.substring(0,60)}...`:M.description}),v.jsx("div",{style:Ue.priceContainer,children:v.jsx("span",{style:Ue.price,children:S(M.price,M.currency)})}),v.jsx("button",{style:Ue.buyButton,onClick:Q=>x(Q,M),disabled:!M.product_url,title:M.product_url?"Koupit produkt":"Odkaz nen dostupn",children:"Koupit"})]})]},M.product_code))})}),e.length>d&&v.jsx("button",{style:{...Ue.navigationArrow,...Ue.rightArrow},onClick:T,disabled:!m,title:"Dal produkty",children:""})]}),e.length>d&&v.jsx("div",{style:Ue.pageIndicators,children:Array.from({length:p},(M,I)=>v.jsx("button",{style:{...Ue.pageIndicator,...I===r?Ue.activePageIndicator:{}},onClick:()=>s(I)},I))}),a&&v.jsx("div",{style:Ue.modalOverlay,onClick:C,children:v.jsxs("div",{style:Ue.modalContent,onClick:M=>M.stopPropagation(),children:[v.jsxs("div",{style:Ue.modalHeader,children:[v.jsx("h3",{style:Ue.modalTitle,children:a.product_name}),v.jsx("button",{style:Ue.modalCloseButton,onClick:C,children:""})]}),v.jsxs("div",{style:Ue.modalBody,children:[v.jsx("div",{style:Ue.modalImageContainer,children:v.jsx("img",{src:j(a),alt:a.product_name,style:Ue.modalImage})}),v.jsxs("div",{style:Ue.modalInfo,children:[a.description&&v.jsx("p",{style:Ue.modalDescription,children:a.description}),v.jsx("div",{style:Ue.modalPrice,children:S(a.price,a.currency)}),v.jsx("button",{style:{...Ue.buyButton,...Ue.modalBuyButton},onClick:M=>x(M,a),disabled:!a.product_url,children:"Koupit produkt"})]})]})]})})]})},Ue={container:{margin:"16px 0",padding:"16px",backgroundColor:"#f8f9fa",borderRadius:"12px",border:"1px solid #e9ecef"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},title:{margin:0,fontSize:"16px",fontWeight:"600",color:"#333"},controls:{display:"flex",alignItems:"center",gap:"8px"},counter:{fontSize:"12px",color:"#666",minWidth:"50px",textAlign:"center"},productCard:{backgroundColor:"white",borderRadius:"8px",border:"1px solid #e9ecef",overflow:"hidden",display:"flex",flexDirection:"column",transition:"transform 0.2s, box-shadow 0.2s",height:"100%",cursor:"pointer"},imageContainer:{position:"relative",width:"100%",height:"200px",overflow:"hidden"},productImage:{width:"100%",height:"100%",objectFit:"cover"},productInfo:{flex:1,display:"flex",flexDirection:"column",gap:"8px",padding:"16px"},productName:{margin:0,fontSize:"16px",fontWeight:"600",color:"#333",lineHeight:"1.3",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},description:{margin:0,fontSize:"13px",color:"#666",lineHeight:"1.4",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},priceContainer:{marginTop:"auto"},price:{fontSize:"18px",fontWeight:"700",color:"#28a745"},buyButton:{backgroundColor:"#28a745",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s",alignSelf:"flex-start"},outerCarouselWrapper:{display:"flex",alignItems:"center",gap:"20px",position:"relative",width:"100%"},productsWrapper:{flex:1,overflow:"hidden",borderRadius:"8px"},productsContainer:{display:"grid",gap:"16px",flex:1,maxWidth:"100%"},navigationArrow:{backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",fontSize:"20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",flexShrink:0,zIndex:2,boxShadow:"0 2px 8px rgba(0, 123, 255, 0.3)"},leftArrow:{},rightArrow:{},pageIndicators:{display:"flex",justifyContent:"center",gap:"8px",marginTop:"16px"},pageIndicator:{width:"12px",height:"12px",borderRadius:"50%",border:"none",backgroundColor:"#ddd",cursor:"pointer",transition:"all 0.2s"},activePageIndicator:{backgroundColor:"#007bff",transform:"scale(1.2)"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},modalContent:{backgroundColor:"white",borderRadius:"12px",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 20px 0 20px",borderBottom:"1px solid #e9ecef",marginBottom:"20px"},modalTitle:{margin:0,fontSize:"24px",fontWeight:"600",color:"#333"},modalCloseButton:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#999",padding:"0",width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center"},modalBody:{padding:"0 20px 20px 20px",display:"flex",flexDirection:"column",gap:"20px"},modalImageContainer:{display:"flex",justifyContent:"center",backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"20px"},modalImage:{maxWidth:"300px",maxHeight:"300px",width:"100%",height:"auto",objectFit:"contain",borderRadius:"8px"},modalInfo:{display:"flex",flexDirection:"column",gap:"12px"},modalDescription:{fontSize:"16px",lineHeight:"1.5",color:"#555",margin:0},modalPrice:{fontSize:"24px",fontWeight:"700",color:"#28a745"},modalBuyButton:{marginTop:"12px",fontSize:"16px",padding:"12px 24px",alignSelf:"stretch"}},M6="https://n8n.srv980546.hstgr.cloud/webhook/cd6b668b-1e35-4018-9bf4-28d0926b023b";async function B6(e){try{const t=`Na zklad tto konverzace doporu produkty:
Uivatel: ${e.userQuery}
Chatbot: ${e.botResponse}`,n=await fetch(M6,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chatInput:t,session_id:e.sessionId,timestamp:new Date().toISOString()})});if(!n.ok){const a=await n.text();throw console.error(" N8N webhook error:",n.status,a),new Error(`N8N webhook failed: ${n.status} ${n.statusText}`)}let r=await n.json(),s=null;if(Array.isArray(r)&&r.length>0&&r[0].data)s=r[0].data;else if(r.data&&Array.isArray(r.data))s=r.data;else if(r.text&&Array.isArray(r.products))return r;if(s&&Array.isArray(s)){const a=s.map(u=>({product_code:u["ID produktu"]||u.product_code,recommendation:u.Doporuceni||u.recommendation}));r={text:`Na zklad konverzace jsem pro vs vybral ${a.length} produkt:`,products:a}}if(!r.text||!Array.isArray(r.products))throw console.error(" Invalid N8N response format po konverzi:",JSON.stringify(r,null,2)),new Error("Invalid response format from N8N webhook - nelze konvertovat na standardn formt");return r}catch(t){throw console.error(" Chyba pi voln N8N webhooku:",t),t}}async function F6(e){try{if(e.length===0)return[];const t=e.map(a=>a.product_code),{data:n,error:r}=await Ze.from("product_feed_2").select("product_code, product_name, description_short, url, thumbnail, price, currency, availability").in("product_code",t);if(r)throw console.error(" Chyba pi natn metadat z product_feed_2:",r),r;return!n||n.length===0?(console.warn(" dn metadata nenalezena pro produkty:",t),e.map(a=>({product_code:a.product_code,product_name:"Produkt "+a.product_code,recommendation:a.recommendation,description:"",url:"",image_url:"",price:0,currency:"CZK",availability:0}))):e.map(a=>{const u=n.find(c=>c.product_code===a.product_code);return{product_code:a.product_code,product_name:(u==null?void 0:u.product_name)||"Produkt "+a.product_code,recommendation:a.recommendation,description:(u==null?void 0:u.description_short)||"",url:(u==null?void 0:u.url)||"",image_url:(u==null?void 0:u.thumbnail)||"",price:(u==null?void 0:u.price)||0,currency:(u==null?void 0:u.currency)||"CZK",availability:(u==null?void 0:u.availability)||0}})}catch(t){throw console.error(" Chyba pi obohacovn produkt:",t),t}}async function j6(e){try{console.log(" Zahajuji zskvn produktovch doporuen na tlatko"),console.log(" User Query:",e.userQuery),console.log(" Bot Response:",e.botResponse.substring(0,100)+"..."),console.log(" Session:",e.sessionId);const t=await B6(e),n=await F6(t.products);return{text:t.text,products:n}}catch(t){return console.error(" Kritick chyba pi zskvn produktovch doporuen na tlatko:",t),{text:" Omlouvme se, dolo k chyb pi zpracovn vaeho dotazu. Zkuste to prosm znovu.",products:[]}}}function fl({children:e,className:t="",colors:n=["#06912d","#2596be","#06912d","#2596be","#06912d"],animationSpeed:r=8,showBorder:s=!1}){const a={backgroundImage:`linear-gradient(to right, ${n.join(", ")})`,animationDuration:`${r}s`};return v.jsxs("div",{className:`animated-gradient-text ${t}`,children:[s&&v.jsx("div",{className:"gradient-overlay",style:a}),v.jsx("div",{className:"text-content",style:a,children:e})]})}const U6=e=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[v.jsx("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),v.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),v.jsx("path",{d:"M16 10a4 4 0 0 1-8 0"})]}),H6=({userQuery:e,botResponse:t,sessionId:n,onProductsLoaded:r,className:s=""})=>{const[a,u]=se.useState([]),[c,d]=se.useState(!1),[h,p]=se.useState(null),[m,b]=se.useState(!1),T=async()=>{if(!c)try{d(!0),p(null);const w=await j6({userQuery:e,botResponse:t,sessionId:n});u(w.products),b(!0),r&&r(w.products)}catch(w){console.error(" Chyba pi natn produkt:",w),p("Nepodailo se nast produktov doporuen. Zkuste to prosm znovu.")}finally{d(!1)}};return v.jsxs("div",{className:`product-recommendation-button-container ${s}`,style:Hr.container,children:[!m&&v.jsx("button",{onClick:T,disabled:c,className:"product-recommendation-button",style:Hr.button,children:c?v.jsxs(v.Fragment,{children:[v.jsx("div",{style:Hr.spinner}),v.jsx(fl,{colors:["#00d084","#4079ff","#00d084","#4079ff","#00d084"],animationSpeed:8,showBorder:!1,children:"Natm doporuen..."})]}):v.jsxs(v.Fragment,{children:[v.jsx(U6,{style:Hr.icon}),v.jsx(fl,{colors:["#00d084","#4079ff","#00d084","#4079ff","#00d084"],animationSpeed:8,showBorder:!1,children:"Doporu produkty"})]})}),h&&v.jsxs("div",{style:Hr.error,children:[v.jsxs("span",{children:[" ",h]}),v.jsx("button",{onClick:()=>p(null),style:Hr.errorCloseButton,children:""})]}),m&&a.length>0&&v.jsxs("div",{style:Hr.carouselContainer,children:[v.jsx(xT,{products:a.slice(0,6).map(w=>({id:w.product_code,product_code:w.product_code,product_name:w.product_name,description:w.recommendation,product_url:w.url,image_url:w.image_url,price:w.price,currency:w.currency})),title:"Doporuen produkty na zklad konverzace",showSimilarity:!1}),v.jsx("button",{onClick:()=>b(!1),style:Hr.closeCarouselButton,children:"Zavt doporuen"})]})]})},Hr={container:{display:"flex",flexDirection:"column",alignItems:"flex-end"},button:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",backgroundColor:"#f8f9fa",color:"#2c3e50",border:"1px solid #e0e6ed",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)",marginTop:"12px"},icon:{flexShrink:0,color:"#6c757d"},spinner:{width:"16px",height:"16px",border:"2px solid #007bff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"},error:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"8px",fontSize:"14px",marginTop:"12px",border:"1px solid #f5c6cb"},errorCloseButton:{background:"none",border:"none",color:"#721c24",fontSize:"18px",cursor:"pointer",padding:"0 8px"},carouselContainer:{marginTop:"16px",padding:"16px",backgroundColor:"#f8f9fa",borderRadius:"12px",border:"1px solid #e0e0e0"},closeCarouselButton:{display:"block",margin:"12px auto 0",padding:"8px 16px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"6px",fontSize:"13px",cursor:"pointer",transition:"all 0.2s"}},wT=({funnelText:e,selectedProducts:t,symptomList:n=[]})=>{const r=t.slice(0,2),s=c=>c.thumbnail&&c.thumbnail.length>0?c.thumbnail:c.url&&c.url.includes("bewit.love")?c.url.replace("/produkt/","/media/products/")+"/image.jpg":"",a=(c,d)=>{c.stopPropagation(),d.url&&window.open(d.url,"_blank","noopener,noreferrer")},u=e?e.replace(/\\n/g,`
`):"";return v.jsxs("div",{className:"funnel-message-wrapper",children:[v.jsx("div",{className:"funnel-text-content",children:v.jsx(wi,{remarkPlugins:[ki],rehypePlugins:[Si,Ai],children:u})}),r.length>0&&v.jsx("div",{className:"funnel-products-grid",children:r.map((c,d)=>v.jsxs("div",{className:"funnel-product-tile",children:[v.jsx("div",{className:"funnel-product-image-container",children:s(c)?v.jsx("img",{src:s(c),alt:c.product_name,className:"funnel-product-image",onError:h=>{h.target.style.display="none"}}):v.jsx("span",{className:"funnel-product-placeholder",children:""})}),v.jsxs("div",{className:"funnel-product-info",children:[v.jsx("h4",{className:"funnel-product-name",children:c.product_name}),c.price&&v.jsxs("p",{className:"funnel-product-price",children:[c.price.toLocaleString("cs-CZ")," ",c.currency||"K"]}),v.jsx("button",{className:"funnel-buy-button",onClick:h=>a(h,c),disabled:!c.url,children:"Koupit"})]})]},c.product_code||d))}),v.jsx("style",{children:`
        .funnel-message-wrapper {
          background: #ffffff;
          border: 2px solid #3B82F6;
          border-radius: 16px;
          padding: 16px 20px;
          max-width: 100%;
        }

        .funnel-text-content {
          color: #1e293b;
          line-height: 1.7;
          font-size: 14px;
        }

        /* Markdown formtovn - stejn jako v bnm chatu */
        .funnel-text-content h1 {
          font-size: 1.5rem;
          font-weight: 700;
          margin-top: 1rem;
          margin-bottom: 0.5rem;
        }

        .funnel-text-content h2 {
          font-size: 1.25rem;
          font-weight: 700;
          margin-top: 0.75rem;
          margin-bottom: 0.5rem;
        }

        .funnel-text-content h3 {
          font-size: 1.125rem;
          font-weight: 700;
          margin-top: 0.5rem;
          margin-bottom: 0.25rem;
        }

        .funnel-text-content h4 {
          font-size: 1rem;
          font-weight: 700;
          margin-top: 0.5rem;
          margin-bottom: 0.25rem;
        }

        .funnel-text-content p {
          margin-top: 0.5rem;
          margin-bottom: 0.5rem;
          line-height: 1.7;
        }

        .funnel-text-content strong {
          font-weight: 700;
        }

        .funnel-text-content em {
          font-style: italic;
        }

        .funnel-text-content ul {
          list-style-type: disc;
          list-style-position: inside;
          margin-top: 0.5rem;
          margin-bottom: 0.5rem;
          padding-left: 1rem;
        }

        .funnel-text-content ol {
          list-style-type: decimal;
          list-style-position: inside;
          margin-top: 0.5rem;
          margin-bottom: 0.5rem;
          padding-left: 1rem;
        }

        .funnel-text-content li {
          margin-left: 1rem;
          margin-top: 0.25rem;
          margin-bottom: 0.25rem;
        }

        .funnel-text-content a {
          color: #3B82F6;
          text-decoration: none;
        }

        .funnel-text-content a:hover {
          text-decoration: underline;
        }

        .funnel-text-content hr {
          margin-top: 1rem;
          margin-bottom: 1rem;
          border-color: #e2e8f0;
        }

        .funnel-text-content code {
          background-color: #f1f5f9;
          padding: 0.125rem 0.25rem;
          border-radius: 0.25rem;
          font-family: monospace;
          font-size: 0.875rem;
        }

        .funnel-text-content pre {
          background-color: #f1f5f9;
          padding: 0.75rem;
          border-radius: 0.5rem;
          overflow-x: auto;
          margin-top: 0.5rem;
          margin-bottom: 0.5rem;
        }

        .funnel-text-content pre code {
          background-color: transparent;
          padding: 0;
        }

        .funnel-text-content blockquote {
          border-left: 4px solid #3B82F6;
          padding-left: 1rem;
          margin-left: 0;
          margin-top: 0.5rem;
          margin-bottom: 0.5rem;
          color: #64748b;
        }

        /* Produktov dladice */
        .funnel-products-grid {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 16px;
          margin-top: 20px;
          padding-top: 16px;
          border-top: 1px solid #e2e8f0;
        }

        .funnel-product-tile {
          background: #f8fafc;
          border: 1px solid #e2e8f0;
          border-radius: 12px;
          overflow: hidden;
          display: flex;
          flex-direction: column;
          transition: transform 0.2s, box-shadow 0.2s;
        }

        .funnel-product-tile:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .funnel-product-image-container {
          width: 100%;
          height: 160px;
          overflow: hidden;
          background: #f1f5f9;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .funnel-product-image {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }

        .funnel-product-placeholder {
          font-size: 48px;
          color: #94a3b8;
        }

        .funnel-product-info {
          padding: 12px;
          display: flex;
          flex-direction: column;
          gap: 8px;
          flex: 1;
        }

        .funnel-product-name {
          margin: 0;
          font-size: 14px;
          font-weight: 600;
          color: #1e293b;
          line-height: 1.3;
          display: -webkit-box;
          -webkit-line-clamp: 2;
          -webkit-box-orient: vertical;
          overflow: hidden;
        }

        .funnel-product-price {
          margin: 0;
          font-size: 16px;
          font-weight: 700;
          color: #16a34a;
        }

        .funnel-buy-button {
          margin-top: auto;
          width: 100%;
          padding: 10px 16px;
          background: #28a745;
          color: white;
          font-weight: 600;
          font-size: 14px;
          border: none;
          border-radius: 8px;
          cursor: pointer;
          transition: all 0.2s ease;
        }

        .funnel-buy-button:hover {
          background: #218838;
          transform: scale(1.02);
        }

        .funnel-buy-button:disabled {
          background: #94a3b8;
          cursor: not-allowed;
          transform: none;
        }

        /* Responsive - na mobilu pod sebou */
        @media (max-width: 560px) {
          .funnel-products-grid {
            grid-template-columns: 1fr;
          }

          .funnel-product-image-container {
            height: 140px;
          }
        }
      `})]})},z6="openrouter-proxy",V6="anthropic/claude-3-haiku",$6=.1,W6=500,K6=`Jsi routing agent pro BEWIT chatbot. Rozhoduje POUZE mezi dvma mdy:

## MDY

### CHAT (vchoz)
Informan reim - odpovdn na dotazy, konverzace.
Ve jde pes N8N webhook jako bn chat.

### FUNNEL  
Produktov reim - doporuovn wan na zklad symptom.
Spout se POUZE kdy uivatel EXPLICITN REAGUJE na vzvu k doporuen.

### UPDATE_FUNNEL
Aktualizace existujcho funnelu - uivatel chce zmnit/rozit doporuen.

## KLOV PRAVIDLO

 FUNNEL se spust POUZE pokud:
1. V historii je zprva obsahujc "Potebujete pesnj doporuen?" (lut callout)
2. A uivatel na tuto vzvu ODPOVD (popisuje symptomy, k "ano", upesuje pote)

Pokud lut callout v historii NEN  vdy CHAT (i kdy uivatel popisuje symptomy!)

## ROZHODOVN

1. Je v historii "Potebujete pesnj doporuen?"?
   - NE  **CHAT** (vdy!)
   - ANO  pokrauj na bod 2

2. Reaguje uivatel na vzvu? (popisuje symptomy, k ano, upesuje)
   - ANO  **FUNNEL** + extrahuj symptomy
   - NE (pt se na nco jinho)  **CHAT**

3. Jsou ji produkty doporuen a uivatel chce zmnu?
   - ANO  **UPDATE_FUNNEL**

## VSTUP
Vra POUZE JSON:
{
  "intent": "chat" | "funnel" | "update_funnel",
  "confidence": 0.0-1.0,
  "reasoning": "Krtk vysvtlen",
  "symptomList": ["symptom1", "symptom2"]
}

## PKLADY

Historie: (bez callout)
Zprva: "bol m hlava"
 {"intent": "chat", "confidence": 0.99, "reasoning": "dn vzva k doporuen v historii.", "symptomList": []}

Historie: "...Potebujete pesnj doporuen?..."
Zprva: "ano, bol m hlava a mm zvrat"
 {"intent": "funnel", "confidence": 0.99, "reasoning": "Uivatel reaguje na vzvu a popisuje symptomy.", "symptomList": ["bolest hlavy", "zvrat"]}

Historie: "...Potebujete pesnj doporuen?..."
Zprva: "kolik to stoj?"
 {"intent": "chat", "confidence": 0.95, "reasoning": "Uivatel se pt na informace, ne na doporuen.", "symptomList": []}

Historie: (produkty ji doporueny)
Zprva: "dej mi jin produkty"
 {"intent": "update_funnel", "confidence": 0.95, "reasoning": "Uivatel chce zmnit doporuen.", "symptomList": []}`;async function q6(e,t,n,r){try{if(!e||e.trim().length===0)return{success:!0,intent:"chat",confidence:1,reasoning:"Przdn zprva",symptomList:[],extractedProducts:[]};const s=((r==null?void 0:r.length)||0)>0,a=(t==null?void 0:t.some(m=>m.role==="bot"&&m.hasCallout===!0))||!1;let u=`## AKTULN ZPRVA UIVATELE
"${e}"

## KONTEXT
- lut callout "Potebujete pesnj doporuen?" v historii: ${a?"ANO":"NE"}
- Produkty ji byly doporueny: ${s?"ANO":"NE"}

## HISTORIE (posledn zprvy)
${t&&t.length>0?t.slice(-4).map(m=>`${m.role.toUpperCase()}: ${m.text.substring(0,150)}${m.text.length>150?"...":""}`).join(`
`):"(przdn)"}

Rozhodni o intentu podle pravidel.`;const{data:c,error:d}=await Ze.functions.invoke(z6,{body:{systemPrompt:K6,userPrompt:u,model:V6,temperature:$6,maxTokens:W6}});if(d)throw new Error(`Edge Function chyba: ${d.message}`);if(!c||!c.success)throw new Error((c==null?void 0:c.error)||"Edge Function nevrtila data");const h=c.response;let p;try{let m=h;const b=h.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/)||h.match(/(\{[\s\S]*\})/);b&&(m=b[1]),p=JSON.parse(m),["chat","funnel","update_funnel"].includes(p.intent)||(p.intent="chat"),(typeof p.confidence!="number"||p.confidence<0||p.confidence>1)&&(p.confidence=.5)}catch{p={intent:"chat",confidence:.5,reasoning:"Fallback - chyba parsovn",symptomList:[]}}return{success:!0,intent:p.intent,confidence:p.confidence,reasoning:p.reasoning,symptomList:p.symptomList||[],extractedProducts:[]}}catch(s){return console.error(" Intent routing error:",s instanceof Error?s.message:String(s)),{success:!1,intent:"chat",confidence:0,reasoning:"Chyba pi zpracovn - fallback na chat",symptomList:[],extractedProducts:[],error:s instanceof Error?s.message:String(s)}}}function kT(e){const t=[];for(const n of e)if(n.role==="bot"){const r=/<<<PRODUCT:([^|]+)\|\|\|([^|]+)\|\|\|([^|]+)\|\|\|([^>]+)>>>/g;let s;for(;(s=r.exec(n.text))!==null;){const c=s[1].trim(),d=s[2].trim(),h=s[3].trim(),p=s[4].trim();t.find(m=>m.product_code===c)||t.push({product_code:c,product_name:h,description:p,url:d,thumbnail:d?`${d.replace("/produkt/","/media/product/")}/thumbnail.jpg`:void 0})}const a=n.text.replace(/<<<PRODUCT:[^>]+>>>/g,""),u=[/(\d{3})\s*-\s*([^,.\n\[\]()]+)/g,/Bewit\s+([A-Za-z-\s]+)/gi];for(const c of u){let d;for(;(d=c.exec(a))!==null;){const h=d[0].trim();t.find(p=>p.product_name===h)||t.push({product_code:d[1]||"",product_name:h})}}}return t}async function ST(e){if(!e||e.length===0)return[];try{const t=e.map(d=>d.product_code).filter(d=>d&&d.length>0),n=e.map(d=>d.url).filter(d=>d&&d.length>0);if(t.length===0&&n.length===0)return await rh(e);let r=Ze.from("product_feed_2").select("product_code, product_name, description_short, description_long, url, thumbnail, price, currency, availability");const s=[];n.length>0&&s.push(`url.in.(${n.map(d=>`"${d}"`).join(",")})`),t.length>0&&s.push(`product_code.in.(${t.map(d=>`"${d}"`).join(",")})`),s.length>0&&(r=r.or(s.join(",")));const{data:a,error:u}=await r;return u?(console.error("Chyba pi natn z product_feed_2:",u),await rh(e)):!a||a.length===0?await rh(e):e.map(d=>{let h=null;return d.url&&(h=a.find(p=>p.url===d.url)),h||(h=a.find(p=>p.product_code===d.product_code)),h?{product_code:h.product_code,product_name:h.product_name||d.product_name,description:d.description||h.description_short,url:h.url||d.url,thumbnail:h.thumbnail||void 0,price:h.price,currency:h.currency||"CZK"}:d})}catch(t){return console.error("Chyba pi obohacovn produkt:",t),e}}async function rh(e){const t=[];for(const n of e)try{let r=null,s=null;if(n.url){const a=await Ze.from("product_feed_2").select("product_code, product_name, description_short, url, thumbnail, price, currency").eq("url",n.url).single();!a.error&&a.data&&(r=a.data)}if(!r){const a=n.product_name.match(/^(\d{3})/);let u=Ze.from("product_feed_2").select("product_code, product_name, description_short, url, thumbnail, price, currency");a?u=u.ilike("product_name",`${a[1]}%`):u=u.ilike("product_name",`%${n.product_name}%`);const c=await u.limit(1).single();r=c.data,s=c.error}r?t.push({product_code:r.product_code,product_name:r.product_name,description:n.description||r.description_short,url:r.url||n.url,thumbnail:r.thumbnail||void 0,price:r.price,currency:r.currency||"CZK"}):t.push(n)}catch{t.push(n)}return t}const Yy="https://n8n.srv980546.hstgr.cloud/webhook/8eda4352-19ca-48fe-8325-855ecf554fc3/chat",Y6=({recommendedProducts:e,sessionId:t,metadata:n,chatHistory:r,onFunnelResponse:s,className:a=""})=>{const[u,c]=se.useState(!1),[d,h]=se.useState(""),[p,m]=se.useState(!1),[b,T]=se.useState(null),[w,A]=se.useState(null),S=async()=>{const x=d.split(/[\n,]+/).map(R=>R.trim()).filter(R=>R.length>0);if(x.length===0){T("Zadejte alespo jeden symptom nebo problm.");return}if(e.length===0){T("Nejsou k dispozici dn produkty pro doporuen.");return}m(!0),T(null);try{console.log("%c","background: #3B82F6; color: white; font-weight: bold;"),console.log("%c          MANULN FUNNEL SPOUT - START                       ","background: #3B82F6; color: white; font-weight: bold;"),console.log("%c","background: #3B82F6; color: white; font-weight: bold;"),console.log("%c Symptomy zadan uivatelem:","color: #3B82F6; font-weight: bold;"),x.forEach((K,H)=>console.log(`   ${H+1}. ${K}`)),console.log("%c Dostupn produkty:","color: #8B5CF6; font-weight: bold;"),e.forEach((K,H)=>console.log(`   ${H+1}. ${K.product_name}`));const R=e.map(K=>K.description?`${K.product_name} (${K.description})`:K.product_name),j=[...new Set(R)].join(", "),M=x.join(", "),I=` OMEZEN: Pracuj POUZE s tmito vybranmi produkty, NEDOPORUUJ dn jin!

Vybran produkty (POUZE TYTO): ${j}

Symptomy zkaznka: ${M}

KOL: Z ve uvedench ${e.length} produkt (${j}) vyber 2 nejlep pro dan symptomy.
- Detailn rozepi pro jsou vhodn
- Uve jak je pouvat
- NEDOPORUUJ dn jin produkty mimo tento seznam!`,Q={sessionId:t,action:"sendMessage",chatInput:I,chatHistory:r.map(K=>({id:K.id,role:K.role,text:K.text.replace(/<<<PRODUCT:[^>]+>>>/g,"").trim()})),metadata:n};console.log("%c Odeslm do N8N webhook:","color: #EF4444; font-weight: bold;"),console.log("   URL:",Yy),console.log("%c chatInput:","color: #EF4444;"),console.log(I);const W=await fetch(Yy,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if(!W.ok)throw new Error(`Webhook error: ${W.status} ${W.statusText}`);const te=await W.json();console.log("%c N8N response:","color: #10B981; font-weight: bold;",te);let B=Array.isArray(te)?te[0]:te;B!=null&&B.json&&(B=B.json);let q=(B==null?void 0:B.output)||(B==null?void 0:B.text)||(B==null?void 0:B.response)||(B==null?void 0:B.html)||"Nepodailo se zskat odpov.",Z=[],de=q;if(typeof q=="string"&&q.trim().startsWith("{")&&q.includes("selectedProductCodes"))try{const K=JSON.parse(q);Z=K.selectedProductCodes||[],de=K.recommendation||q,console.log("%c Parsovn JSON z N8N:","color: #10B981;"),console.log("   selectedProductCodes:",Z),console.log("   recommendation text length:",de.length)}catch(K){console.warn("%c Nepodailo se parsovat JSON z botText:","color: orange;",K)}if(typeof de=="string"&&de.includes("<")&&de.includes(">")){const K=document.createElement("div");K.innerHTML=de,de=K.textContent||K.innerText||de}console.log("%c Extrahovan text (preview):","color: #8B5CF6;",de.substring(0,200)),console.log("%c Obohacuji produkty z databze...","color: #8B5CF6;");let ue=[];Z.length>0?(console.log("    Filtrujeme produkty podle selectedProductCodes:",Z),ue=e.filter(K=>{const H=Z.some(_=>K.product_name.toLowerCase().includes(_.toLowerCase())),G=Z.includes(K.product_code);return H||G?(console.log(`    Match: ${K.product_name} (code: ${K.product_code})`),!0):!1}),ue.length===0?(console.warn("    dn produkty neodpovdaj selectedProductCodes:",Z),console.warn("    Dostupn produkty:",e.map(K=>K.product_name)),console.warn("    Fallback: pouiji prvn 2 produkty"),ue=e.slice(0,2)):(console.log("    Nalezeno produkt:",ue.length),ue.forEach(K=>console.log(`      - ${K.product_name}`)))):(console.log("    dn selectedProductCodes, pouiji prvn 2 produkty"),ue=e.slice(0,2));const ne=(await ST(ue)).map(K=>({product_code:K.product_code,product_name:K.product_name,description:K.description,description_short:K.description,price:K.price,currency:K.currency||"CZK",url:K.url||`https://bewit.love/produkt/${K.product_code}`,thumbnail:K.thumbnail}));console.log("%c Funnel dokonen!","color: #10B981; font-weight: bold;"),console.log("   Produkty:",ne.map(K=>K.product_name)),A({text:de,products:ne}),s&&s(de,ne),c(!1),h("")}catch(R){console.error("%c Chyba manulnho funnelu:","color: #EF4444;",R),T(R instanceof Error?R.message:"Nepodailo se zpracovat poadavek.")}finally{m(!1)}};return w?v.jsx("div",{className:a,children:v.jsx(wT,{funnelText:w.text,selectedProducts:w.products,symptomList:d.split(/[\n,]+/).map(x=>x.trim()).filter(x=>x.length>0)})}):v.jsxs("div",{className:`manual-funnel-container ${a}`,children:[!u&&v.jsx("button",{onClick:()=>c(!0),className:"manual-funnel-trigger-button",children:v.jsx("span",{className:"manual-funnel-text",children:" Doporuit produkty pesn na mru mm potm"})}),u&&v.jsxs("div",{className:"manual-funnel-form",children:[v.jsxs("div",{className:"manual-funnel-form-header",children:[v.jsx("h4",{children:"Popite sv symptomy nebo pote"}),v.jsx("button",{onClick:()=>c(!1),className:"manual-funnel-close-btn",title:"Zavt",children:""})]}),v.jsx("p",{className:"manual-funnel-form-desc",children:"Napite sv symptomy nebo pote, kter vs trp. Kad symptom oddlte rkou nebo napite na nov dek. Na zklad tchto informac vm doporume nejvhodnj produkty."}),v.jsx("textarea",{value:d,onChange:x=>h(x.target.value),placeholder:"Nap.: bolest hlavy, nava, nespavost...",className:"manual-funnel-textarea",disabled:p,rows:4}),b&&v.jsx("div",{className:"manual-funnel-error",children:b}),v.jsx("button",{onClick:S,disabled:p,className:"manual-funnel-submit-btn",children:p?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"manual-funnel-spinner"}),v.jsx(fl,{colors:["#00d084","#4079ff","#00d084","#4079ff","#00d084"],animationSpeed:8,showBorder:!1,children:"Zpracovvm..."})]}):v.jsx(fl,{colors:["#00d084","#4079ff","#00d084","#4079ff","#00d084"],animationSpeed:8,showBorder:!1,children:" Doporu mi produkty"})})]}),v.jsx("style",{children:`
        .manual-funnel-container {
          margin-top: 16px;
        }

        .manual-funnel-trigger-button {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 10px;
          padding: 14px 20px;
          background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
          border: 2px solid #2563EB;
          border-radius: 12px;
          cursor: pointer;
          transition: all 0.3s ease;
          width: 100%;
          text-align: center;
          box-shadow: 0 2px 8px rgba(59, 130, 246, 0.2);
        }

        .manual-funnel-trigger-button:hover {
          background: linear-gradient(135deg, #2563EB 0%, #1D4ED8 100%);
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(59, 130, 246, 0.35);
          border-color: #1D4ED8;
        }

        .manual-funnel-text {
          font-size: 15px;
          font-weight: 600;
          color: #ffffff;
          letter-spacing: 0.01em;
        }

        .manual-funnel-form {
          background: #ffffff;
          border: 2px solid #3B82F6;
          border-radius: 12px;
          padding: 20px;
          animation: slideDown 0.3s ease;
          box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
        }

        @keyframes slideDown {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .manual-funnel-form-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 12px;
        }

        .manual-funnel-form-header h4 {
          margin: 0;
          font-size: 16px;
          font-weight: 600;
          color: #1e293b;
        }

        .manual-funnel-close-btn {
          background: none;
          border: none;
          font-size: 18px;
          color: #64748b;
          cursor: pointer;
          padding: 4px 8px;
          border-radius: 4px;
          transition: all 0.2s;
        }

        .manual-funnel-close-btn:hover {
          background: #f1f5f9;
          color: #1e293b;
        }

        .manual-funnel-form-desc {
          font-size: 13px;
          color: #64748b;
          margin-bottom: 16px;
          line-height: 1.5;
        }

        .manual-funnel-textarea {
          width: 100%;
          padding: 12px 14px;
          border: 2px solid #e2e8f0;
          border-radius: 10px;
          font-size: 14px;
          font-family: inherit;
          line-height: 1.6;
          transition: all 0.2s;
          resize: vertical;
          min-height: 100px;
          margin-bottom: 16px;
        }

        .manual-funnel-textarea:focus {
          outline: none;
          border-color: #3B82F6;
          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .manual-funnel-textarea:disabled {
          background: #f8fafc;
          color: #94a3b8;
          cursor: not-allowed;
        }

        .manual-funnel-textarea::placeholder {
          color: #94a3b8;
        }

        .manual-funnel-error {
          background: #fef2f2;
          border: 1px solid #fecaca;
          color: #dc2626;
          padding: 10px 12px;
          border-radius: 6px;
          font-size: 13px;
          margin-bottom: 16px;
        }

        .manual-funnel-submit-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          width: 100%;
          padding: 14px 20px;
          background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
          border: 2px solid #e2e8f0;
          border-radius: 10px;
          cursor: pointer;
          transition: all 0.3s ease;
          font-size: 15px;
          font-weight: 600;
        }

        .manual-funnel-submit-btn:hover:not(:disabled) {
          background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
          border-color: #3B82F6;
          transform: translateY(-1px);
          box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
        }

        .manual-funnel-submit-btn:disabled {
          opacity: 0.7;
          cursor: not-allowed;
          transform: none;
        }

        .manual-funnel-spinner {
          width: 18px;
          height: 18px;
          border: 2px solid #3B82F6;
          border-top-color: transparent;
          border-radius: 50%;
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          to {
            transform: rotate(360deg);
          }
        }
      `})]})};async function G6(e){return console.warn(" Vector diagnostics test nen implementovn"),{success:!1,message:"Sluba nen k dispozici"}}async function Q6(e){return console.warn(" Complete vector test nen implementovn"),{success:!1,message:"Sluba nen k dispozici",results:[]}}async function X6(e,t=10){return console.warn(" Combined search nen implementovn"),[]}async function J6(e){return console.warn(" Embedding service nen implementovn, vrac se przdn vektor"),new Array(1536).fill(0)}async function Z6(e,t,n=10,r=!0,s=!0){try{if(!r&&!s)return console.warn(" dn feed nen povolen pro vyhledvn"),[];const a=await J6(e);let u=[];if(r&&s){const{data:c,error:d}=await Ze.rpc("hybrid_product_search",{query_text:e,query_embedding:a,match_count:n,full_text_weight:1,semantic_weight:1,rrf_k:50,filter_feed_source:null});if(d)return console.error(" Chyba pi hybridnm vyhledvn:",d),await ih(e,a,n,null);c&&c.length>0&&(u=await sh(c))}else if(r){const{data:c,error:d}=await Ze.rpc("hybrid_product_search",{query_text:e,query_embedding:a,match_count:n,full_text_weight:1,semantic_weight:1,rrf_k:50,filter_feed_source:"feed_1"});if(d)return console.error(" Chyba pi vyhledvn Feed 1:",d),await ih(e,a,n,"feed_1");c&&c.length>0&&(u=await sh(c))}else if(s){const{data:c,error:d}=await Ze.rpc("hybrid_product_search",{query_text:e,query_embedding:a,match_count:n,full_text_weight:1,semantic_weight:1,rrf_k:50,filter_feed_source:"feed_2"});if(d)return console.error(" Chyba pi vyhledvn Feed 2:",d),await ih(e,a,n,"feed_2");c&&c.length>0&&(u=await sh(c))}return u.length===0?[]:u}catch(a){return console.error(" Chyba v hybridnm produktovm vyhledvn:",a),[]}}async function ih(e,t,n,r=null){try{const{data:s,error:a}=await Ze.rpc("search_products_by_vector",{query_embedding:t,similarity_threshold:.5,max_results:n,filter_feed_source:r});return a?(console.error(" Chyba pi ist smantickm vyhledvn:",a),[]):!s||s.length===0?[]:s.map(u=>({id:u.id||0,product_code:u.product_code,product_name:u.product_name,description:u.description,category:u.category,price:u.price,currency:u.currency,product_url:u.product_url,image_url:u.image_url,similarity_score:u.similarity_score}))}catch(s){return console.error(" Kritick chyba pi fallback vyhledvn:",s),[]}}async function sh(e){const t=[];for(const n of e)try{const r=n.product_code;let s=null;const{data:a}=await Ze.from("product_embeddings").select("feed_source").eq("product_code",r).single(),u=(a==null?void 0:a.feed_source)||"feed_1";if(u==="feed_2"){const{data:c}=await Ze.from("product_feed_2").select("*").eq("product_code",r).single();s=c}else{const{data:c}=await Ze.from("products").select("*").eq("product_code",r).single();s=c}t.push({id:(s==null?void 0:s.id)||n.id||0,product_code:r,product_name:(s==null?void 0:s.product_name)||(s==null?void 0:s.name)||n.product_name,description:(s==null?void 0:s.description_short)||(s==null?void 0:s.description)||n.description,category:(s==null?void 0:s.category)||n.category,price:(s==null?void 0:s.price)||n.price,currency:(s==null?void 0:s.currency)||n.currency||"CZK",product_url:(s==null?void 0:s.url)||(s==null?void 0:s.product_url)||n.product_url,image_url:(s==null?void 0:s.thumbnail)||(s==null?void 0:s.image_url)||n.image_url,similarity_score:n.similarity_score||n.combined_score||0,feed_source:u})}catch(r){console.error(` Chyba pi obohacen produktu ${n.product_code}:`,r),t.push({id:n.id||0,product_code:n.product_code,product_name:n.product_name,description:n.description,category:n.category,price:n.price,currency:n.currency||"CZK",product_url:n.product_url,image_url:n.image_url,similarity_score:n.similarity_score||n.combined_score||0})}return t}const eL="openrouter-proxy",tL=`Jsi expert na tradin nskou medicnu a esenciln oleje BEWIT.

Tvm kolem je identifikovat v textu POUZE **KONKRTN NZVY PRODUKT**.

**CO IDENTIFIKOVAT:**
1. **Nzvy esencilnch olej** - nap. "DENT", "PEPPERMINT", "EUKALYPTUS"
2. **Nzvy sms** - nap. "Imm", "Pure", "Relax"
3. **Wany (nsk smsi)** - nap. "009 - ist dech", "Shi Xiao Wan"
4. **Pinyin nzvy** - nap. "Te Xiao Bi Min Gan Wan", "Chuan Xiong Cha Tiao Wan"
5. **Produktov kdy** - nap. "009", "033", "BEWIT KOKOSOV OLEJ"

**CO NEIDENTIFIKOVAT (IGNORUJ):**
 Obecn frze typu: "sv dech", "zdrav zub", "bolest hlavy"
 inky produkt: "antibakteriln", "protizntliv", "povzbuzujc"
 Tlesn sti: "stn dutina", "dsn", "zuby"
 Symptomy: "znty", "citlivost", "paradontza"
 Popisn frze v kontextu "nco PRO X": "vplach PRO sv dech", "pasta NA zuby"

**KLOV PRAVIDLA:**
- Identifikuj POUZE pokud je text **pmo nzev produktu**, ne jeho inek nebo pouit
- Pokud vid frzi v kontextu "pro/na + X", IGNORUJ "X" (nap. "voda pro sv dech"  NEIDENTIFIKUJ "sv dech")
- Preferuj nzvy v UPPERCASE nebo s selnmi kdy (nap. "DENT", "009")
- Pinyin nzvy obvykle obsahuj slova jako "Wan", "Tang", "Pian"

**KRITICK PRAVIDLO PRO VSTUP:**
- Vra VHRADN validn JSON array - dn text ped ani za
- NEPI: "Zde je seznam...", "Produkty/wany:", "Zdravotn tmata:", vysvtlen, komente
- NEPOUVEJ: markdown code blocks ani dn formtovn
- POUZE ist JSON: ["produkt1", "produkt2"]
- Przdn vsledek: []
- DN dal text, dn odstavce, dn seznamy - POUZE JSON array

**PKLADY SPRVNHO VSTUPU:**

Input: "Doporuuji sms DENT pro stn hygienu a PEPPERMINT."
Output: ["DENT", "PEPPERMINT"]

Input: "Wan 009 - ist dech nebo Te Xiao Bi Min Gan Wan."
Output: ["009", "Te Xiao Bi Min Gan Wan"]

Input: "stn voda pro sv dech a zdrav zub."
Output: []

Input: "Pomh pi zntech dsn a posiluje obranyschopnost."
Output: []`;async function nL(e){try{if(!e||e.trim().length===0)return{success:!0,products:[]};if(e.trim().length<20)return{success:!0,products:[]};const{data:t,error:n}=await Ze.functions.invoke(eL,{body:{systemPrompt:tL,userPrompt:`Analyzuj nsledujc text a extrahuj nzvy produkt/wan a zdravotn tmata:

${e}`,model:"anthropic/claude-3-haiku",temperature:.1,maxTokens:500}});if(n)throw console.error(" Edge Function error:",n),new Error(`Edge Function chyba: ${n.message}`);if(!t)throw new Error("Edge Function nevrtila dn data");if(!t.success)throw new Error(t.error||"Edge Function vrtila chybu");let r=[];try{const s=t.response||"";let a=s.trim();const u=s.match(/```(?:json)?\s*(\[[\s\S]*?\])\s*```/)||s.match(/(\[[\s\S]*\])/);u&&(a=u[1]),r=JSON.parse(a),Array.isArray(r)||(console.error(" Response nen pole, pouvm przdn pole"),r=[])}catch(s){console.error(" Chyba pi parsovn JSON:",s),console.error(" Response text:",t.response),r=[]}return{success:!0,products:r,rawResponse:t.response}}catch(t){return console.error(" Kritick chyba pi screeningu produkt:",t),{success:!1,products:[],error:t instanceof Error?t.message:String(t)}}}async function rL(e){if(e.length===0)return{success:!0,matches:[],unmatched:[]};try{const{data:t,error:n}=await Ze.rpc("get_products_with_pinyin_names");if(n)throw console.error(" Chyba pi natn produkt z databze:",n),new Error(`Database error: ${n.message}`);if(!t||t.length===0)return{success:!0,matches:[],unmatched:e};const r=[],s=[];for(const a of e){const u=iL(a,t);u&&u.similarity>=.5?r.push(u):s.push(a)}return{success:!0,matches:r,unmatched:s}}catch(t){return console.error(" Kritick chyba pi matchingu produkt:",t),{success:!1,matches:[],unmatched:e,error:t instanceof Error?t.message:String(t)}}}function iL(e,t){let n=null,r=0;const s=Gy(e);for(const a of t){const u=[a.pinyin_name,a.product_name,sL(a.description_short)].filter(Boolean);for(const c of u){const d=oL(s,Gy(c));d>r&&(r=d,n={id:a.id,product_code:a.product_code,product_name:a.product_name,pinyin_name:a.pinyin_name,url:a.url,similarity:d,matched_from:e})}}return n}function Gy(e){return e?e.toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[-]/g," ").replace(/\s+/g," ").replace(/[^\w\s]/g,""):""}function sL(e){if(!e)return null;const t=e.match(/^\*\*([^*]+)\*\*/);return t?t[1].trim().replace(/^[0-9]+\s*[-]?\s*/,""):null}function oL(e,t){if(!e||!t)return 0;if(e===t)return 1;if(e.includes(t)||t.includes(e))return .9;const n=e.split(/\s+/),r=t.split(/\s+/),a=n.filter(h=>r.includes(h)&&h.length>2).length/Math.max(n.length,r.length),u=aL(e,t),c=Math.max(e.length,t.length),d=1-u/c;return a*.6+d*.4}function aL(e,t){const n=e.length,r=t.length,s=[];for(let a=0;a<=n;a++)s[a]=[a];for(let a=0;a<=r;a++)s[0][a]=a;for(let a=1;a<=n;a++)for(let u=1;u<=r;u++)e[a-1]===t[u-1]?s[a][u]=s[a-1][u-1]:s[a][u]=Math.min(s[a-1][u]+1,s[a][u-1]+1,s[a-1][u-1]+1);return s[n][r]}const uL=e=>v.jsx("img",{src:"https://modopafybeslbcqjxsve.supabase.co/storage/v1/object/public/web/Generated_Image_September_08__2025_-_3_09PM-removebg-preview.png",alt:"Sana AI Logo",style:{objectFit:"contain"},...e}),Qy=e=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[v.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),v.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),lL=e=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[v.jsx("circle",{cx:"9",cy:"21",r:"1"}),v.jsx("circle",{cx:"20",cy:"21",r:"1"}),v.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),cL=e=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[v.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),v.jsx("polyline",{points:"7 10 12 15 17 10"}),v.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),dL=e=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[v.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),v.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),hL=({chatbotName:e,buttons:t=[],leftContent:n,onClose:r,languages:s,selectedLanguage:a,onLanguageChange:u})=>{const c=d=>{if(d.icon==="custom"&&d.customIcon)return d.customIcon;switch(d.icon){case"close":return v.jsx(Qy,{className:"h-5 w-5"});case"product":return v.jsx(lL,{className:"h-5 w-5"});case"download":return v.jsx(cL,{className:"h-5 w-5"});case"plus":return v.jsx(dL,{className:"h-5 w-5"});default:return null}};return v.jsx("div",{className:"bg-bewit-blue text-white shadow-md w-full",children:v.jsx("div",{className:"w-full",children:v.jsxs("div",{className:"flex items-center justify-between h-16 pl-4 pr-4",children:[v.jsx("div",{className:"flex items-center space-x-4",children:n||v.jsx(uL,{className:"h-10 w-auto object-contain"})}),v.jsx("div",{className:"flex items-center space-x-3",children:v.jsxs("div",{className:"flex items-center space-x-2",children:[t.map((d,h)=>v.jsx("button",{onClick:d.onClick,className:`flex items-center justify-center h-9 w-9 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-white ${d.isActive?"bg-white/20 text-white":"bg-white/10 hover:bg-white/20 text-white"}`,"aria-label":d.label,title:d.tooltip,children:c(d)},h)),r&&v.jsx("button",{onClick:r,className:"flex items-center justify-center h-9 w-9 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-white bg-white/10 hover:bg-white/20 text-white","aria-label":"Zavt chat",title:"Zavt chat",children:v.jsx(Qy,{className:"h-5 w-5"})})]})})]})})})},AT=se.createContext({});function fL(e){const t=se.useRef(null);return t.current===null&&(t.current=e()),t.current}const CT=typeof window<"u",pL=CT?se.useLayoutEffect:se.useEffect,$f=se.createContext(null);function Wf(e,t){e.indexOf(t)===-1&&e.push(t)}function Kf(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Jn=(e,t,n)=>n>t?t:n<e?e:n;let qf=()=>{};const pr={},NT=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function IT(e){return typeof e=="object"&&e!==null}const OT=e=>/^0[^.\s]+$/u.test(e);function Yf(e){let t;return()=>(t===void 0&&(t=e()),t)}const Cn=e=>e,mL=(e,t)=>n=>t(e(n)),xa=(...e)=>e.reduce(mL),ca=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Gf{constructor(){this.subscriptions=[]}add(t){return Wf(this.subscriptions,t),()=>Kf(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let a=0;a<s;a++){const u=this.subscriptions[a];u&&u(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const fr=e=>e*1e3,An=e=>e/1e3;function RT(e,t){return t?e*(1e3/t):0}const PT=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,gL=1e-7,yL=12;function bL(e,t,n,r,s){let a,u,c=0;do u=t+(n-t)/2,a=PT(u,r,s)-e,a>0?n=u:t=u;while(Math.abs(a)>gL&&++c<yL);return u}function wa(e,t,n,r){if(e===t&&n===r)return Cn;const s=a=>bL(a,0,1,e,n);return a=>a===0||a===1?a:PT(s(a),t,r)}const LT=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,DT=e=>t=>1-e(1-t),MT=wa(.33,1.53,.69,.99),Qf=DT(MT),BT=LT(Qf),FT=e=>(e*=2)<1?.5*Qf(e):.5*(2-Math.pow(2,-10*(e-1))),Xf=e=>1-Math.sin(Math.acos(e)),jT=DT(Xf),UT=LT(Xf),EL=wa(.42,0,1,1),TL=wa(0,0,.58,1),HT=wa(.42,0,.58,1),_L=e=>Array.isArray(e)&&typeof e[0]!="number",zT=e=>Array.isArray(e)&&typeof e[0]=="number",vL={linear:Cn,easeIn:EL,easeInOut:HT,easeOut:TL,circIn:Xf,circInOut:UT,circOut:jT,backIn:Qf,backInOut:BT,backOut:MT,anticipate:FT},xL=e=>typeof e=="string",Xy=e=>{if(zT(e)){qf(e.length===4);const[t,n,r,s]=e;return wa(t,n,r,s)}else if(xL(e))return vL[e];return e},Yu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function wL(e,t){let n=new Set,r=new Set,s=!1,a=!1;const u=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function d(p){u.has(p)&&(h.schedule(p),e()),p(c)}const h={schedule:(p,m=!1,b=!1)=>{const w=b&&s?n:r;return m&&u.add(p),w.has(p)||w.add(p),p},cancel:p=>{r.delete(p),u.delete(p)},process:p=>{if(c=p,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(d),n.clear(),s=!1,a&&(a=!1,h.process(p))}};return h}const kL=40;function VT(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,u=Yu.reduce((C,j)=>(C[j]=wL(a),C),{}),{setup:c,read:d,resolveKeyframes:h,preUpdate:p,update:m,preRender:b,render:T,postRender:w}=u,A=()=>{const C=pr.useManualTiming?s.timestamp:performance.now();n=!1,pr.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(C-s.timestamp,kL),1)),s.timestamp=C,s.isProcessing=!0,c.process(s),d.process(s),h.process(s),p.process(s),m.process(s),b.process(s),T.process(s),w.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(A))},S=()=>{n=!0,r=!0,s.isProcessing||e(A)};return{schedule:Yu.reduce((C,j)=>{const M=u[j];return C[j]=(I,Q=!1,W=!1)=>(n||S(),M.schedule(I,Q,W)),C},{}),cancel:C=>{for(let j=0;j<Yu.length;j++)u[Yu[j]].cancel(C)},state:s,steps:u}}const{schedule:nt,cancel:Qr,state:Dt,steps:oh}=VT(typeof requestAnimationFrame<"u"?requestAnimationFrame:Cn,!0);let el;function SL(){el=void 0}const qt={now:()=>(el===void 0&&qt.set(Dt.isProcessing||pr.useManualTiming?Dt.timestamp:performance.now()),el),set:e=>{el=e,queueMicrotask(SL)}},$T=e=>t=>typeof t=="string"&&t.startsWith(e),WT=$T("--"),AL=$T("var(--"),Jf=e=>AL(e)?CL.test(e.split("/*")[0].trim()):!1,CL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Jy(e){return typeof e!="string"?!1:e.split("/*")[0].includes("var(--")}const Hs={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},da={...Hs,transform:e=>Jn(0,1,e)},Gu={...Hs,default:1},Qo=e=>Math.round(e*1e5)/1e5,Zf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function NL(e){return e==null}const IL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ep=(e,t)=>n=>!!(typeof n=="string"&&IL.test(n)&&n.startsWith(e)||t&&!NL(n)&&Object.prototype.hasOwnProperty.call(n,t)),KT=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,a,u,c]=r.match(Zf);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(u),alpha:c!==void 0?parseFloat(c):1}},OL=e=>Jn(0,255,e),ah={...Hs,transform:e=>Math.round(OL(e))},Pi={test:ep("rgb","red"),parse:KT("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+ah.transform(e)+", "+ah.transform(t)+", "+ah.transform(n)+", "+Qo(da.transform(r))+")"};function RL(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Xh={test:ep("#"),parse:RL,transform:Pi.transform},ka=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),$r=ka("deg"),Xn=ka("%"),Ee=ka("px"),PL=ka("vh"),LL=ka("vw"),Zy={...Xn,parse:e=>Xn.parse(e)/100,transform:e=>Xn.transform(e*100)},ks={test:ep("hsl","hue"),parse:KT("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Xn.transform(Qo(t))+", "+Xn.transform(Qo(n))+", "+Qo(da.transform(r))+")"},bt={test:e=>Pi.test(e)||Xh.test(e)||ks.test(e),parse:e=>Pi.test(e)?Pi.parse(e):ks.test(e)?ks.parse(e):Xh.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Pi.transform(e):ks.transform(e),getAnimatableNone:e=>{const t=bt.parse(e);return t.alpha=0,bt.transform(t)}},DL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ML(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Zf))==null?void 0:t.length)||0)+(((n=e.match(DL))==null?void 0:n.length)||0)>0}const qT="number",YT="color",BL="var",FL="var(",e1="${}",jL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ha(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const c=t.replace(jL,d=>(bt.test(d)?(r.color.push(a),s.push(YT),n.push(bt.parse(d))):d.startsWith(FL)?(r.var.push(a),s.push(BL),n.push(d)):(r.number.push(a),s.push(qT),n.push(parseFloat(d))),++a,e1)).split(e1);return{values:n,split:c,indexes:r,types:s}}function GT(e){return ha(e).values}function QT(e){const{split:t,types:n}=ha(e),r=t.length;return s=>{let a="";for(let u=0;u<r;u++)if(a+=t[u],s[u]!==void 0){const c=n[u];c===qT?a+=Qo(s[u]):c===YT?a+=bt.transform(s[u]):a+=s[u]}return a}}const UL=e=>typeof e=="number"?0:bt.test(e)?bt.getAnimatableNone(e):e;function HL(e){const t=GT(e);return QT(e)(t.map(UL))}const Xr={test:ML,parse:GT,createTransformer:QT,getAnimatableNone:HL};function uh(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function zL({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,a=0,u=0;if(!t)s=a=u=n;else{const c=n<.5?n*(1+t):n+t-n*t,d=2*n-c;s=uh(d,c,e+1/3),a=uh(d,c,e),u=uh(d,c,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(u*255),alpha:r}}function pl(e,t){return n=>n>0?t:e}const ut=(e,t,n)=>e+(t-e)*n,lh=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},VL=[Xh,Pi,ks],$L=e=>VL.find(t=>t.test(e));function t1(e){const t=$L(e);if(!t)return!1;let n=t.parse(e);return t===ks&&(n=zL(n)),n}const n1=(e,t)=>{const n=t1(e),r=t1(t);if(!n||!r)return pl(e,t);const s={...n};return a=>(s.red=lh(n.red,r.red,a),s.green=lh(n.green,r.green,a),s.blue=lh(n.blue,r.blue,a),s.alpha=ut(n.alpha,r.alpha,a),Pi.transform(s))},Jh=new Set(["none","hidden"]);function WL(e,t){return Jh.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function KL(e,t){return n=>ut(e,t,n)}function tp(e){return typeof e=="number"?KL:typeof e=="string"?Jf(e)?pl:bt.test(e)?n1:GL:Array.isArray(e)?XT:typeof e=="object"?bt.test(e)?n1:qL:pl}function XT(e,t){const n=[...e],r=n.length,s=e.map((a,u)=>tp(a)(a,t[u]));return a=>{for(let u=0;u<r;u++)n[u]=s[u](a);return n}}function qL(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=tp(e[s])(e[s],t[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function YL(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],u=e.indexes[a][r[a]],c=e.values[u]??0;n[s]=c,r[a]++}return n}const GL=(e,t)=>{const n=Xr.createTransformer(t),r=ha(e),s=ha(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Jh.has(e)&&!s.values.length||Jh.has(t)&&!r.values.length?WL(e,t):xa(XT(YL(r,s),s.values),n):pl(e,t)};function JT(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?ut(e,t,n):tp(e)(e,t)}const QL=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>nt.update(t,n),stop:()=>Qr(t),now:()=>Dt.isProcessing?Dt.timestamp:qt.now()}},ZT=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let a=0;a<s;a++)r+=Math.round(e(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},ml=2e4;function np(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<ml;)t+=n,r=e.next(t);return t>=ml?1/0:t}function XL(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(np(r),ml);return{type:"keyframes",ease:a=>r.next(s*a).value/t,duration:An(s)}}const JL=5;function e_(e,t,n){const r=Math.max(t-JL,0);return RT(n-e(r),t-r)}const dt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ch=.001;function ZL({duration:e=dt.duration,bounce:t=dt.bounce,velocity:n=dt.velocity,mass:r=dt.mass}){let s,a,u=1-t;u=Jn(dt.minDamping,dt.maxDamping,u),e=Jn(dt.minDuration,dt.maxDuration,An(e)),u<1?(s=h=>{const p=h*u,m=p*e,b=p-n,T=Zh(h,u),w=Math.exp(-m);return ch-b/T*w},a=h=>{const m=h*u*e,b=m*n+n,T=Math.pow(u,2)*Math.pow(h,2)*e,w=Math.exp(-m),A=Zh(Math.pow(h,2),u);return(-s(h)+ch>0?-1:1)*((b-T)*w)/A}):(s=h=>{const p=Math.exp(-h*e),m=(h-n)*e+1;return-ch+p*m},a=h=>{const p=Math.exp(-h*e),m=(n-h)*(e*e);return p*m});const c=5/e,d=tD(s,a,c);if(e=fr(e),isNaN(d))return{stiffness:dt.stiffness,damping:dt.damping,duration:e};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:u*2*Math.sqrt(r*h),duration:e}}}const eD=12;function tD(e,t,n){let r=n;for(let s=1;s<eD;s++)r=r-e(r)/t(r);return r}function Zh(e,t){return e*Math.sqrt(1-t*t)}const nD=["duration","bounce"],rD=["stiffness","damping","mass"];function r1(e,t){return t.some(n=>e[n]!==void 0)}function iD(e){let t={velocity:dt.velocity,stiffness:dt.stiffness,damping:dt.damping,mass:dt.mass,isResolvedFromDuration:!1,...e};if(!r1(e,rD)&&r1(e,nD))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*Jn(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:dt.mass,stiffness:s,damping:a}}else{const n=ZL(e);t={...t,...n,mass:dt.mass},t.isResolvedFromDuration=!0}return t}function gl(e=dt.visualDuration,t=dt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],c={done:!1,value:a},{stiffness:d,damping:h,mass:p,duration:m,velocity:b,isResolvedFromDuration:T}=iD({...n,velocity:-An(n.velocity||0)}),w=b||0,A=h/(2*Math.sqrt(d*p)),S=u-a,x=An(Math.sqrt(d/p)),R=Math.abs(S)<5;r||(r=R?dt.restSpeed.granular:dt.restSpeed.default),s||(s=R?dt.restDelta.granular:dt.restDelta.default);let C;if(A<1){const M=Zh(x,A);C=I=>{const Q=Math.exp(-A*x*I);return u-Q*((w+A*x*S)/M*Math.sin(M*I)+S*Math.cos(M*I))}}else if(A===1)C=M=>u-Math.exp(-x*M)*(S+(w+x*S)*M);else{const M=x*Math.sqrt(A*A-1);C=I=>{const Q=Math.exp(-A*x*I),W=Math.min(M*I,300);return u-Q*((w+A*x*S)*Math.sinh(W)+M*S*Math.cosh(W))/M}}const j={calculatedDuration:T&&m||null,next:M=>{const I=C(M);if(T)c.done=M>=m;else{let Q=M===0?w:0;A<1&&(Q=M===0?fr(w):e_(C,M,I));const W=Math.abs(Q)<=r,te=Math.abs(u-I)<=s;c.done=W&&te}return c.value=c.done?u:I,c},toString:()=>{const M=Math.min(np(j),ml),I=ZT(Q=>j.next(M*Q).value,M,30);return M+"ms "+I},toTransition:()=>{}};return j}gl.applyToOptions=e=>{const t=XL(e,100,gl);return e.ease=t.ease,e.duration=fr(t.duration),e.type="keyframes",e};function ef({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:u,min:c,max:d,restDelta:h=.5,restSpeed:p}){const m=e[0],b={done:!1,value:m},T=W=>c!==void 0&&W<c||d!==void 0&&W>d,w=W=>c===void 0?d:d===void 0||Math.abs(c-W)<Math.abs(d-W)?c:d;let A=n*t;const S=m+A,x=u===void 0?S:u(S);x!==S&&(A=x-m);const R=W=>-A*Math.exp(-W/r),C=W=>x+R(W),j=W=>{const te=R(W),B=C(W);b.done=Math.abs(te)<=h,b.value=b.done?x:B};let M,I;const Q=W=>{T(b.value)&&(M=W,I=gl({keyframes:[b.value,w(b.value)],velocity:e_(C,W,b.value),damping:s,stiffness:a,restDelta:h,restSpeed:p}))};return Q(0),{calculatedDuration:null,next:W=>{let te=!1;return!I&&M===void 0&&(te=!0,j(W),Q(W)),M!==void 0&&W>=M?I.next(W-M):(!te&&j(W),b)}}}function sD(e,t,n){const r=[],s=n||pr.mix||JT,a=e.length-1;for(let u=0;u<a;u++){let c=s(e[u],e[u+1]);if(t){const d=Array.isArray(t)?t[u]||Cn:t;c=xa(d,c)}r.push(c)}return r}function oD(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const a=e.length;if(qf(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const u=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const c=sD(t,r,s),d=c.length,h=p=>{if(u&&p<e[0])return t[0];let m=0;if(d>1)for(;m<e.length-2&&!(p<e[m+1]);m++);const b=ca(e[m],e[m+1],p);return c[m](b)};return n?p=>h(Jn(e[0],e[a-1],p)):h}function aD(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=ca(0,t,r);e.push(ut(n,1,s))}}function uD(e){const t=[0];return aD(t,e.length-1),t}function lD(e,t){return e.map(n=>n*t)}function cD(e,t){return e.map(()=>t||HT).splice(0,e.length-1)}function Xo({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=_L(r)?r.map(Xy):Xy(r),a={done:!1,value:t[0]},u=lD(n&&n.length===t.length?n:uD(t),e),c=oD(u,t,{ease:Array.isArray(s)?s:cD(t,s)});return{calculatedDuration:e,next:d=>(a.value=c(d),a.done=d>=e,a)}}const dD=e=>e!==null;function rp(e,{repeat:t,repeatType:n="loop"},r,s=1){const a=e.filter(dD),c=s<0||t&&n!=="loop"&&t%2===1?0:a.length-1;return!c||r===void 0?a[c]:r}const hD={decay:ef,inertia:ef,tween:Xo,keyframes:Xo,spring:gl};function t_(e){typeof e.type=="string"&&(e.type=hD[e.type])}class ip{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const fD=e=>e/100;class sp extends ip{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==qt.now()&&this.tick(qt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;t_(t);const{type:n=Xo,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:u=0}=t;let{keyframes:c}=t;const d=n||Xo;d!==Xo&&typeof c[0]!="number"&&(this.mixKeyframes=xa(fD,JT(c[0],c[1])),c=[0,100]);const h=d({...t,keyframes:c});a==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...c].reverse(),velocity:-u})),h.calculatedDuration===null&&(h.calculatedDuration=np(h));const{calculatedDuration:p}=h;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=h}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:u,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:p,repeat:m,repeatType:b,repeatDelay:T,type:w,onUpdate:A,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const x=this.currentTime-h*(this.playbackSpeed>=0?1:-1),R=this.playbackSpeed>=0?x<0:x>s;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let C=this.currentTime,j=r;if(m){const W=Math.min(this.currentTime,s)/c;let te=Math.floor(W),B=W%1;!B&&W>=1&&(B=1),B===1&&te--,te=Math.min(te,m+1),!!(te%2)&&(b==="reverse"?(B=1-B,T&&(B-=T/c)):b==="mirror"&&(j=u)),C=Jn(0,1,B)*c}const M=R?{done:!1,value:p[0]}:j.next(C);a&&(M.value=a(M.value));let{done:I}=M;!R&&d!==null&&(I=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const Q=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return Q&&w!==ef&&(M.value=rp(p,this.options,S,this.speed)),A&&A(M.value),Q&&this.finish(),M}then(t,n){return this.finished.then(t,n)}get duration(){return An(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+An(t)}get time(){return An(this.currentTime)}set time(t){var n;t=fr(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(qt.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=An(this.currentTime))}play(){var s,a;if(this.isStopped)return;const{driver:t=QL,startTime:n}=this.options;this.driver||(this.driver=t(u=>this.tick(u))),(a=(s=this.options).onPlay)==null||a.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(qt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function pD(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Li=e=>e*180/Math.PI,tf=e=>{const t=Li(Math.atan2(e[1],e[0]));return nf(t)},mD={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:tf,rotateZ:tf,skewX:e=>Li(Math.atan(e[1])),skewY:e=>Li(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},nf=e=>(e=e%360,e<0&&(e+=360),e),i1=tf,s1=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),o1=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),gD={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:s1,scaleY:o1,scale:e=>(s1(e)+o1(e))/2,rotateX:e=>nf(Li(Math.atan2(e[6],e[5]))),rotateY:e=>nf(Li(Math.atan2(-e[2],e[0]))),rotateZ:i1,rotate:i1,skewX:e=>Li(Math.atan(e[4])),skewY:e=>Li(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function rf(e){return e.includes("scale")?1:0}function sf(e,t){if(!e||e==="none")return rf(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=gD,s=n;else{const c=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=mD,s=c}if(!s)return rf(t);const a=r[t],u=s[1].split(",").map(bD);return typeof a=="function"?a(u):u[a]}const yD=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return sf(n,t)};function bD(e){return parseFloat(e.trim())}const zs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vs=new Set(zs),a1=e=>e===Hs||e===Ee,ED=new Set(["x","y","z"]),TD=zs.filter(e=>!ED.has(e));function _D(e){const t=[];return TD.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Gr={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>sf(t,"x"),y:(e,{transform:t})=>sf(t,"y")};Gr.translateX=Gr.x;Gr.translateY=Gr.y;const Mi=new Set;let of=!1,af=!1,uf=!1;function n_(){if(af){const e=Array.from(Mi).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=_D(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,u])=>{var c;(c=r.getValue(a))==null||c.set(u)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}af=!1,of=!1,Mi.forEach(e=>e.complete(uf)),Mi.clear()}function r_(){Mi.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(af=!0)})}function vD(){uf=!0,r_(),n_(),uf=!1}class op{constructor(t,n,r,s,a,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(Mi.add(this),of||(of=!0,nt.read(r_),nt.resolveKeyframes(n_))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const a=s==null?void 0:s.get(),u=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&n){const c=r.readValue(n,u);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=u),s&&a===void 0&&s.set(t[0])}pD(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Mi.delete(this)}cancel(){this.state==="scheduled"&&(Mi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const xD=e=>e.startsWith("--");function wD(e,t,n){xD(t)?e.style.setProperty(t,n):e.style[t]=n}const kD=Yf(()=>window.ScrollTimeline!==void 0),SD={};function AD(e,t){const n=Yf(e);return()=>SD[t]??n()}const i_=AD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Fo=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,u1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fo([0,.65,.55,1]),circOut:Fo([.55,0,1,.45]),backIn:Fo([.31,.01,.66,-.59]),backOut:Fo([.33,1.53,.69,.99])};function s_(e,t){if(e)return typeof e=="function"?i_()?ZT(e,t):"ease-out":zT(e)?Fo(e):Array.isArray(e)?e.map(n=>s_(n,t)||u1.easeOut):u1[e]}function CD(e,t,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:u="loop",ease:c="easeOut",times:d}={},h=void 0){const p={[t]:n};d&&(p.offset=d);const m=s_(c,s);Array.isArray(m)&&(p.easing=m);const b={delay:r,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:u==="reverse"?"alternate":"normal"};return h&&(b.pseudoElement=h),e.animate(p,b)}function o_(e){return typeof e=="function"&&"applyToOptions"in e}function ND({type:e,...t}){return o_(e)&&i_()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class ID extends ip{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:u=!1,finalKeyframe:c,onComplete:d}=t;this.isPseudoElement=!!a,this.allowFlatten=u,this.options=t,qf(typeof t.type!="string");const h=ND(t);this.animation=CD(n,r,s,h,a),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const p=rp(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):wD(n,r,p),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return An(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+An(t)}get time(){return An(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=fr(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&kD()?(this.animation.timeline=t,Cn):n(this)}}const a_={anticipate:FT,backInOut:BT,circInOut:UT};function OD(e){return e in a_}function RD(e){typeof e.ease=="string"&&OD(e.ease)&&(e.ease=a_[e.ease])}const dh=10;class PD extends ID{constructor(t){RD(t),t_(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...u}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const c=new sp({...u,autoplay:!1}),d=Math.max(dh,qt.now()-this.startTime),h=Jn(0,dh,d-dh);n.setWithVelocity(c.sample(Math.max(0,d-h)).value,c.sample(d).value,h),c.stop()}}const l1=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Xr.test(e)||e==="0")&&!e.startsWith("url("));function LD(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function DD(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],u=l1(s,t),c=l1(a,t);return!u||!c?!1:LD(e)||(n==="spring"||o_(n))&&r}function lf(e){e.duration=0,e.type="keyframes"}const MD=new Set(["opacity","clipPath","filter","transform"]),BD=Yf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function FD(e){var p;const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:a,type:u}=e;if(!(((p=t==null?void 0:t.owner)==null?void 0:p.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:h}=t.owner.getProps();return BD()&&n&&MD.has(n)&&(n!=="transform"||!h)&&!d&&!r&&s!=="mirror"&&a!==0&&u!=="inertia"}const jD=40;class UD extends ip{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:u="loop",keyframes:c,name:d,motionValue:h,element:p,...m}){var w;super(),this.stop=()=>{var A,S;this._animation&&(this._animation.stop(),(A=this.stopTimeline)==null||A.call(this)),(S=this.keyframeResolver)==null||S.cancel()},this.createdAt=qt.now();const b={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:u,name:d,motionValue:h,element:p,...m},T=(p==null?void 0:p.KeyframeResolver)||op;this.keyframeResolver=new T(c,(A,S,x)=>this.onKeyframesResolved(A,S,b,!x),d,h,p),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(t,n,r,s){var S,x;this.keyframeResolver=void 0;const{name:a,type:u,velocity:c,delay:d,isHandoff:h,onUpdate:p}=r;this.resolvedAt=qt.now(),DD(t,a,u,c)||((pr.instantAnimations||!d)&&(p==null||p(rp(t,r,n))),t[0]=t[t.length-1],lf(r),r.repeat=0);const b={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>jD?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},T=!h&&FD(b),w=(x=(S=b.motionValue)==null?void 0:S.owner)==null?void 0:x.current,A=T?new PD({...b,element:w}):new sp(b);A.finished.then(()=>{this.notifyFinished()}).catch(Cn),this.pendingTimeline&&(this.stopTimeline=A.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=A}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),vD()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}function u_(e,t,n,r=0,s=1){const a=Array.from(e).sort((h,p)=>h.sortNodePosition(p)).indexOf(t),u=e.size,c=(u-1)*r;return typeof n=="function"?n(a,u):s===1?a*r:c-a*r}const HD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function zD(e){const t=HD.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function l_(e,t,n=1){const[r,s]=zD(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const u=a.trim();return NT(u)?parseFloat(u):u}return Jf(s)?l_(s,t,n+1):s}const VD={type:"spring",stiffness:500,damping:25,restSpeed:10},$D=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),WD={type:"keyframes",duration:.8},KD={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},qD=(e,{keyframes:t})=>t.length>2?WD:Vs.has(e)?e.startsWith("scale")?$D(t[1]):VD:KD,YD=e=>e!==null;function GD(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(YD),a=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[a]}function ap(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}function QD({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:u,repeatDelay:c,from:d,elapsed:h,...p}){return!!Object.keys(p).length}const up=(e,t,n,r={},s,a)=>u=>{const c=ap(r,e)||{},d=c.delay||r.delay||0;let{elapsed:h=0}=r;h=h-fr(d);const p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-h,onUpdate:b=>{t.set(b),c.onUpdate&&c.onUpdate(b)},onComplete:()=>{u(),c.onComplete&&c.onComplete()},name:e,motionValue:t,element:a?void 0:s};QD(c)||Object.assign(p,qD(e,p)),p.duration&&(p.duration=fr(p.duration)),p.repeatDelay&&(p.repeatDelay=fr(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(lf(p),p.delay===0&&(m=!0)),(pr.instantAnimations||pr.skipAnimations)&&(m=!0,lf(p),p.delay=0),p.allowFlatten=!c.type&&!c.ease,m&&!a&&t.get()!==void 0){const b=GD(p.keyframes,c);if(b!==void 0){nt.update(()=>{p.onUpdate(b),p.onComplete()});return}}return c.isSync?new sp(p):new UD(p)};function c1(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function lp(e,t,n,r){if(typeof t=="function"){const[s,a]=c1(r);t=t(n!==void 0?n:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=c1(r);t=t(n!==void 0?n:e.custom,s,a)}return t}function Os(e,t,n){const r=e.getProps();return lp(r,t,n!==void 0?n:r.custom,e)}const c_=new Set(["width","height","top","left","right","bottom",...zs]),d1=30,XD=e=>!isNaN(parseFloat(e));class JD{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const s=qt.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=qt.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=XD(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Gf);const r=this.events[t].add(n);return t==="change"?()=>{r(),nt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=qt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>d1)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,d1);return RT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ls(e,t){return new JD(e,t)}const cf=e=>Array.isArray(e);function ZD(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ls(n))}function e4(e){return cf(e)?e[e.length-1]||0:e}function t4(e,t){const n=Os(e,t);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const u in a){const c=e4(a[u]);ZD(e,u,c)}}const Ht=e=>!!(e&&e.getVelocity);function n4(e){return!!(Ht(e)&&e.add)}function df(e,t){const n=e.getValue("willChange");if(n4(n))return n.add(t);if(!n&&pr.WillChange){const r=new pr.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function cp(e){return e.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const r4="framerAppearId",d_="data-"+cp(r4);function h_(e){return e.props[d_]}function i4({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function f_(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:u,...c}=t;const d=a==null?void 0:a.reduceMotion;r&&(a=r);const h=[],p=s&&e.animationState&&e.animationState.getState()[s];for(const m in c){const b=e.getValue(m,e.latestValues[m]??null),T=c[m];if(T===void 0||p&&i4(p,m))continue;const w={delay:n,...ap(a||{},m)},A=b.get();if(A!==void 0&&!b.isAnimating&&!Array.isArray(T)&&T===A&&!w.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const C=h_(e);if(C){const j=window.MotionHandoffAnimation(C,m,nt);j!==null&&(w.startTime=j,S=!0)}}df(e,m);const x=d??e.shouldReduceMotion;b.start(up(m,b,T,x&&c_.has(m)?{type:!1}:w,e,S));const R=b.animation;R&&h.push(R)}return u&&Promise.all(h).then(()=>{nt.update(()=>{u&&t4(e,u)})}),h}function hf(e,t,n={}){var d;const r=Os(e,t,n.type==="exit"?(d=e.presenceContext)==null?void 0:d.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(f_(e,r,n)):()=>Promise.resolve(),u=e.variantChildren&&e.variantChildren.size?(h=0)=>{const{delayChildren:p=0,staggerChildren:m,staggerDirection:b}=s;return s4(e,t,h,p,m,b,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[h,p]=c==="beforeChildren"?[a,u]:[u,a];return h().then(()=>p())}else return Promise.all([a(),u(n.delay)])}function s4(e,t,n=0,r=0,s=0,a=1,u){const c=[];for(const d of e.variantChildren)d.notify("AnimationStart",t),c.push(hf(d,t,{...u,delay:n+(typeof r=="function"?0:r)+u_(e.variantChildren,d,r,s,a)}).then(()=>d.notify("AnimationComplete",t)));return Promise.all(c)}function o4(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(a=>hf(e,a,n));r=Promise.all(s)}else if(typeof t=="string")r=hf(e,t,n);else{const s=typeof t=="function"?Os(e,t,n.custom):t;r=Promise.all(f_(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const a4={test:e=>e==="auto",parse:e=>e},p_=e=>t=>t.test(e),m_=[Hs,Ee,Xn,$r,LL,PL,a4],h1=e=>m_.find(p_(e));function u4(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||OT(e):!0}const l4=new Set(["brightness","contrast","saturate","opacity"]);function c4(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Zf)||[];if(!r)return e;const s=n.replace(r,"");let a=l4.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const d4=/\b([a-z-]*)\(.*?\)/gu,ff={...Xr,getAnimatableNone:e=>{const t=e.match(d4);return t?t.map(c4).join(" "):e}},f1={...Hs,transform:Math.round},h4={rotate:$r,rotateX:$r,rotateY:$r,rotateZ:$r,scale:Gu,scaleX:Gu,scaleY:Gu,scaleZ:Gu,skew:$r,skewX:$r,skewY:$r,distance:Ee,translateX:Ee,translateY:Ee,translateZ:Ee,x:Ee,y:Ee,z:Ee,perspective:Ee,transformPerspective:Ee,opacity:da,originX:Zy,originY:Zy,originZ:Ee},dp={borderWidth:Ee,borderTopWidth:Ee,borderRightWidth:Ee,borderBottomWidth:Ee,borderLeftWidth:Ee,borderRadius:Ee,borderTopLeftRadius:Ee,borderTopRightRadius:Ee,borderBottomRightRadius:Ee,borderBottomLeftRadius:Ee,width:Ee,maxWidth:Ee,height:Ee,maxHeight:Ee,top:Ee,right:Ee,bottom:Ee,left:Ee,inset:Ee,insetBlock:Ee,insetBlockStart:Ee,insetBlockEnd:Ee,insetInline:Ee,insetInlineStart:Ee,insetInlineEnd:Ee,padding:Ee,paddingTop:Ee,paddingRight:Ee,paddingBottom:Ee,paddingLeft:Ee,paddingBlock:Ee,paddingBlockStart:Ee,paddingBlockEnd:Ee,paddingInline:Ee,paddingInlineStart:Ee,paddingInlineEnd:Ee,margin:Ee,marginTop:Ee,marginRight:Ee,marginBottom:Ee,marginLeft:Ee,marginBlock:Ee,marginBlockStart:Ee,marginBlockEnd:Ee,marginInline:Ee,marginInlineStart:Ee,marginInlineEnd:Ee,fontSize:Ee,backgroundPositionX:Ee,backgroundPositionY:Ee,...h4,zIndex:f1,fillOpacity:da,strokeOpacity:da,numOctaves:f1},f4={...dp,color:bt,backgroundColor:bt,outlineColor:bt,fill:bt,stroke:bt,borderColor:bt,borderTopColor:bt,borderRightColor:bt,borderBottomColor:bt,borderLeftColor:bt,filter:ff,WebkitFilter:ff},g_=e=>f4[e];function y_(e,t){let n=g_(e);return n!==ff&&(n=Xr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const p4=new Set(["auto","none","0"]);function m4(e,t,n){let r=0,s;for(;r<e.length&&!s;){const a=e[r];typeof a=="string"&&!p4.has(a)&&ha(a).values.length&&(s=e[r]),r++}if(s&&n)for(const a of t)e[a]=y_(n,s)}class g4 extends op{constructor(t,n,r,s,a){super(t,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let p=0;p<t.length;p++){let m=t[p];if(typeof m=="string"&&(m=m.trim(),Jf(m))){const b=l_(m,n.current);b!==void 0&&(t[p]=b),p===t.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!c_.has(r)||t.length!==2)return;const[s,a]=t,u=h1(s),c=h1(a),d=Jy(s),h=Jy(a);if(d!==h&&Gr[r]){this.needsMeasurement=!0;return}if(u!==c)if(a1(u)&&a1(c))for(let p=0;p<t.length;p++){const m=t[p];typeof m=="string"&&(t[p]=parseFloat(m))}else Gr[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||u4(t[s]))&&r.push(s);r.length&&m4(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Gr[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var c;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,u=r[a];r[a]=Gr[n](t.measureViewportBox(),window.getComputedStyle(t.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([d,h])=>{t.getValue(d).set(h)}),this.resolveNoneKeyframes()}}function y4(e,t,n){if(e==null)return[];if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=(n==null?void 0:n[e])??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e).filter(r=>r!=null)}const b_=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function b4(e){return IT(e)&&"offsetHeight"in e}const{schedule:hp}=VT(queueMicrotask,!1),Fn={x:!1,y:!1};function E_(){return Fn.x||Fn.y}function E4(e){return e==="x"||e==="y"?Fn[e]?null:(Fn[e]=!0,()=>{Fn[e]=!1}):Fn.x||Fn.y?null:(Fn.x=Fn.y=!0,()=>{Fn.x=Fn.y=!1})}function T_(e,t){const n=y4(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function p1(e){return!(e.pointerType==="touch"||E_())}function T4(e,t,n={}){const[r,s,a]=T_(e,n),u=c=>{if(!p1(c))return;const{target:d}=c,h=t(d,c);if(typeof h!="function"||!d)return;const p=m=>{p1(m)&&(h(m),d.removeEventListener("pointerleave",p))};d.addEventListener("pointerleave",p,s)};return r.forEach(c=>{c.addEventListener("pointerenter",u,s)}),a}const __=(e,t)=>t?e===t?!0:__(e,t.parentElement):!1,fp=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,_4=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function v_(e){return _4.has(e.tagName)||e.isContentEditable===!0}const tl=new WeakSet;function m1(e){return t=>{t.key==="Enter"&&e(t)}}function hh(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const v4=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=m1(()=>{if(tl.has(n))return;hh(n,"down");const s=m1(()=>{hh(n,"up")}),a=()=>hh(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function g1(e){return fp(e)&&!E_()}function x4(e,t,n={}){const[r,s,a]=T_(e,n),u=c=>{const d=c.currentTarget;if(!g1(c))return;tl.add(d);const h=t(d,c),p=(T,w)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",b),tl.has(d)&&tl.delete(d),g1(T)&&typeof h=="function"&&h(T,{success:w})},m=T=>{p(T,d===window||d===document||n.useGlobalTarget||__(d,T.target))},b=T=>{p(T,!1)};window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",b,s)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",u,s),b4(c)&&(c.addEventListener("focus",h=>v4(h,s)),!v_(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function x_(e){return IT(e)&&"ownerSVGElement"in e}function w4(e){return x_(e)&&e.tagName==="svg"}const k4=[...m_,bt,Xr],S4=e=>k4.find(p_(e)),y1=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ss=()=>({x:y1(),y:y1()}),b1=()=>({min:0,max:0}),xt=()=>({x:b1(),y:b1()}),pf={current:null},w_={current:!1},A4=typeof window<"u";function C4(){if(w_.current=!0,!!A4)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>pf.current=e.matches;e.addEventListener("change",t),t()}else pf.current=!1}const N4=new WeakMap;function Fl(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function fa(e){return typeof e=="string"||Array.isArray(e)}const pp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],mp=["initial",...pp];function jl(e){return Fl(e.animate)||mp.some(t=>fa(e[t]))}function k_(e){return!!(jl(e)||e.variants)}function I4(e,t,n){for(const r in t){const s=t[r],a=n[r];if(Ht(s))e.addValue(r,s);else if(Ht(a))e.addValue(r,Ls(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const u=e.getValue(r);u.liveStyle===!0?u.jump(s):u.hasAnimated||u.set(s)}else{const u=e.getStaticValue(r);e.addValue(r,Ls(u!==void 0?u:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const E1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let yl={};function S_(e){yl=e}function O4(){return yl}class R4{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:u},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=op,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=qt.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,nt.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=u;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=h,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=jl(n),this.isVariantNode=k_(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const b in m){const T=m[b];d[b]!==void 0&&Ht(T)&&T.set(d[b])}}mount(t){var n;this.current=t,N4.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(w_.current||C4(),this.shouldReduceMotion=pf.current),(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Qr(this.notifyUpdate),Qr(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Vs.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",u=>{this.latestValues[t]=u,this.props.onUpdate&&nt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in yl){const n=yl[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<E1.length;r++){const s=E1[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,u=t[a];u&&(this.propEventSubscriptions[s]=this.on(s,u))}this.prevMotionValues=I4(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Ls(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(NT(r)||OT(r))?r=parseFloat(r):!S4(r)&&Xr.test(n)&&(r=y_(t,n)),this.setBaseTarget(t,Ht(r)?r.get():r)),Ht(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const u=lp(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);u&&(r=u[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Ht(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Gf),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){hp.render(this.render)}}class A_ extends R4{constructor(){super(...arguments),this.KeyframeResolver=g4}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){const r=t.style;return r?r[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ht(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class ei{constructor(t){this.isMounted=!1,this.node=t}update(){}}function C_({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function P4({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function L4(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function fh(e){return e===void 0||e===1}function mf({scale:e,scaleX:t,scaleY:n}){return!fh(e)||!fh(t)||!fh(n)}function Ci(e){return mf(e)||N_(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function N_(e){return T1(e.x)||T1(e.y)}function T1(e){return e&&e!=="0%"}function bl(e,t,n){const r=e-n,s=t*r;return n+s}function _1(e,t,n,r,s){return s!==void 0&&(e=bl(e,s,r)),bl(e,n,r)+t}function gf(e,t=0,n=1,r,s){e.min=_1(e.min,t,n,r,s),e.max=_1(e.max,t,n,r,s)}function I_(e,{x:t,y:n}){gf(e.x,t.translate,t.scale,t.originPoint),gf(e.y,n.translate,n.scale,n.originPoint)}const v1=.999999999999,x1=1.0000000000001;function D4(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let a,u;for(let c=0;c<s;c++){a=n[c],u=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Cs(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),u&&(t.x*=u.x.scale,t.y*=u.y.scale,I_(e,u)),r&&Ci(a.latestValues)&&Cs(e,a.latestValues))}t.x<x1&&t.x>v1&&(t.x=1),t.y<x1&&t.y>v1&&(t.y=1)}function As(e,t){e.min=e.min+t,e.max=e.max+t}function w1(e,t,n,r,s=.5){const a=ut(e.min,e.max,s);gf(e,t,n,a,r)}function Cs(e,t){w1(e.x,t.x,t.scaleX,t.scale,t.originX),w1(e.y,t.y,t.scaleY,t.scale,t.originY)}function O_(e,t){return C_(L4(e.getBoundingClientRect(),t))}function M4(e,t,n){const r=O_(e,n),{scroll:s}=t;return s&&(As(r.x,s.offset.x),As(r.y,s.offset.y)),r}const B4={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},F4=zs.length;function j4(e,t,n){let r="",s=!0;for(let a=0;a<F4;a++){const u=zs[a],c=e[u];if(c===void 0)continue;let d=!0;if(typeof c=="number")d=c===(u.startsWith("scale")?1:0);else{const h=parseFloat(c);d=u.startsWith("scale")?h===1:h===0}if(!d||n){const h=b_(c,dp[u]);if(!d){s=!1;const p=B4[u]||u;r+=`${p}(${h}) `}n&&(t[u]=h)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function gp(e,t,n){const{style:r,vars:s,transformOrigin:a}=e;let u=!1,c=!1;for(const d in t){const h=t[d];if(Vs.has(d)){u=!0;continue}else if(WT(d)){s[d]=h;continue}else{const p=b_(h,dp[d]);d.startsWith("origin")?(c=!0,a[d]=p):r[d]=p}}if(t.transform||(u||n?r.transform=j4(t,e.transform,n):r.transform&&(r.transform="none")),c){const{originX:d="50%",originY:h="50%",originZ:p=0}=a;r.transformOrigin=`${d} ${h} ${p}`}}function R_(e,{style:t,vars:n},r,s){const a=e.style;let u;for(u in t)a[u]=t[u];s==null||s.applyProjectionStyles(a,r);for(u in n)a.setProperty(u,n[u])}function k1(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Do={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ee.test(e))e=parseFloat(e);else return e;const n=k1(e,t.target.x),r=k1(e,t.target.y);return`${n}% ${r}%`}},U4={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=Xr.parse(e);if(s.length>5)return r;const a=Xr.createTransformer(e),u=typeof s[0]!="number"?1:0,c=n.x.scale*t.x,d=n.y.scale*t.y;s[0+u]/=c,s[1+u]/=d;const h=ut(c,d,.5);return typeof s[2+u]=="number"&&(s[2+u]/=h),typeof s[3+u]=="number"&&(s[3+u]/=h),a(s)}},yf={borderRadius:{...Do,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Do,borderTopRightRadius:Do,borderBottomLeftRadius:Do,borderBottomRightRadius:Do,boxShadow:U4};function P_(e,{layout:t,layoutId:n}){return Vs.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!yf[e]||e==="opacity")}function yp(e,t,n){var u;const r=e.style,s=t==null?void 0:t.style,a={};if(!r)return a;for(const c in r)(Ht(r[c])||s&&Ht(s[c])||P_(c,e)||((u=n==null?void 0:n.getValue(c))==null?void 0:u.liveStyle)!==void 0)&&(a[c]=r[c]);return a}function H4(e){return window.getComputedStyle(e)}class z4 extends A_{constructor(){super(...arguments),this.type="html",this.renderInstance=R_}readValueFromInstance(t,n){var r;if(Vs.has(n))return(r=this.projection)!=null&&r.isProjecting?rf(n):yD(t,n);{const s=H4(t),a=(WT(n)?s.getPropertyValue(n):s[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:n}){return O_(t,n)}build(t,n,r){gp(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return yp(t,n,r)}}const V4={offset:"stroke-dashoffset",array:"stroke-dasharray"},$4={offset:"strokeDashoffset",array:"strokeDasharray"};function W4(e,t,n=1,r=0,s=!0){e.pathLength=1;const a=s?V4:$4;e[a.offset]=`${-r}`,e[a.array]=`${t} ${n}`}const K4=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function L_(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:u=0,...c},d,h,p){if(gp(e,c,h),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:b}=e;m.transform&&(b.transform=m.transform,delete m.transform),(b.transform||m.transformOrigin)&&(b.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),b.transform&&(b.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete m.transformBox);for(const T of K4)m[T]!==void 0&&(b[T]=m[T],delete m[T]);t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),s!==void 0&&W4(m,s,a,u,!1)}const D_=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),M_=e=>typeof e=="string"&&e.toLowerCase()==="svg";function q4(e,t,n,r){R_(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(D_.has(s)?s:cp(s),t.attrs[s])}function B_(e,t,n){const r=yp(e,t,n);for(const s in e)if(Ht(e[s])||Ht(t[s])){const a=zs.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=e[s]}return r}class Y4 extends A_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=xt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Vs.has(n)){const r=g_(n);return r&&r.default||0}return n=D_.has(n)?n:cp(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return B_(t,n,r)}build(t,n,r){L_(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){q4(t,n,r,s)}mount(t){this.isSVGTag=M_(t.tagName),super.mount(t)}}const G4=mp.length;function F_(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?F_(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<G4;n++){const r=mp[n],s=e.props[r];(fa(s)||s===!1)&&(t[r]=s)}return t}function j_(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const Q4=[...pp].reverse(),X4=pp.length;function J4(e){return t=>Promise.all(t.map(({animation:n,options:r})=>o4(e,n,r)))}function Z4(e){let t=J4(e),n=S1(),r=!0;const s=d=>(h,p)=>{var b;const m=Os(e,p,d==="exit"?(b=e.presenceContext)==null?void 0:b.custom:void 0);if(m){const{transition:T,transitionEnd:w,...A}=m;h={...h,...A,...w}}return h};function a(d){t=d(e)}function u(d){const{props:h}=e,p=F_(e.parent)||{},m=[],b=new Set;let T={},w=1/0;for(let S=0;S<X4;S++){const x=Q4[S],R=n[x],C=h[x]!==void 0?h[x]:p[x],j=fa(C),M=x===d?R.isActive:null;M===!1&&(w=S);let I=C===p[x]&&C!==h[x]&&j;if(I&&r&&e.manuallyAnimateOnMount&&(I=!1),R.protectedKeys={...T},!R.isActive&&M===null||!C&&!R.prevProp||Fl(C)||typeof C=="boolean")continue;const Q=e8(R.prevProp,C);let W=Q||x===d&&R.isActive&&!I&&j||S>w&&j,te=!1;const B=Array.isArray(C)?C:[C];let q=B.reduce(s(x),{});M===!1&&(q={});const{prevResolvedValues:Z={}}=R,de={...Z,...q},ue=K=>{W=!0,b.has(K)&&(te=!0,b.delete(K)),R.needsAnimating[K]=!0;const H=e.getValue(K);H&&(H.liveStyle=!1)};for(const K in de){const H=q[K],G=Z[K];if(T.hasOwnProperty(K))continue;let _=!1;cf(H)&&cf(G)?_=!j_(H,G):_=H!==G,_?H!=null?ue(K):b.add(K):H!==void 0&&b.has(K)?ue(K):R.protectedKeys[K]=!0}R.prevProp=C,R.prevResolvedValues=q,R.isActive&&(T={...T,...q}),r&&e.blockInitialAnimation&&(W=!1);const re=I&&Q;W&&(!re||te)&&m.push(...B.map(K=>{const H={type:x};if(typeof K=="string"&&r&&!re&&e.manuallyAnimateOnMount&&e.parent){const{parent:G}=e,_=Os(G,K);if(G.enteringChildren&&_){const{delayChildren:X}=_.transition||{};H.delay=u_(G.enteringChildren,e,X)}}return{animation:K,options:H}}))}if(b.size){const S={};if(typeof h.initial!="boolean"){const x=Os(e,Array.isArray(h.initial)?h.initial[0]:h.initial);x&&x.transition&&(S.transition=x.transition)}b.forEach(x=>{const R=e.getBaseTarget(x),C=e.getValue(x);C&&(C.liveStyle=!0),S[x]=R??null}),m.push({animation:S})}let A=!!m.length;return r&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(A=!1),r=!1,A?t(m):Promise.resolve()}function c(d,h){var m;if(n[d].isActive===h)return Promise.resolve();(m=e.variantChildren)==null||m.forEach(b=>{var T;return(T=b.animationState)==null?void 0:T.setActive(d,h)}),n[d].isActive=h;const p=u(d);for(const b in n)n[b].protectedKeys={};return p}return{animateChanges:u,setActive:c,setAnimateFunction:a,getState:()=>n,reset:()=>{n=S1()}}}function e8(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!j_(t,e):!1}function vi(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function S1(){return{animate:vi(!0),whileInView:vi(),whileHover:vi(),whileTap:vi(),whileDrag:vi(),whileFocus:vi(),exit:vi()}}function A1(e,t){e.min=t.min,e.max=t.max}function Mn(e,t){A1(e.x,t.x),A1(e.y,t.y)}function C1(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}const U_=1e-4,t8=1-U_,n8=1+U_,H_=.01,r8=0-H_,i8=0+H_;function Yt(e){return e.max-e.min}function s8(e,t,n){return Math.abs(e-t)<=n}function N1(e,t,n,r=.5){e.origin=r,e.originPoint=ut(t.min,t.max,e.origin),e.scale=Yt(n)/Yt(t),e.translate=ut(n.min,n.max,e.origin)-e.originPoint,(e.scale>=t8&&e.scale<=n8||isNaN(e.scale))&&(e.scale=1),(e.translate>=r8&&e.translate<=i8||isNaN(e.translate))&&(e.translate=0)}function Jo(e,t,n,r){N1(e.x,t.x,n.x,r?r.originX:void 0),N1(e.y,t.y,n.y,r?r.originY:void 0)}function I1(e,t,n){e.min=n.min+t.min,e.max=e.min+Yt(t)}function o8(e,t,n){I1(e.x,t.x,n.x),I1(e.y,t.y,n.y)}function O1(e,t,n){e.min=t.min-n.min,e.max=e.min+Yt(t)}function El(e,t,n){O1(e.x,t.x,n.x),O1(e.y,t.y,n.y)}function R1(e,t,n,r,s){return e-=t,e=bl(e,1/n,r),s!==void 0&&(e=bl(e,1/s,r)),e}function a8(e,t=0,n=1,r=.5,s,a=e,u=e){if(Xn.test(t)&&(t=parseFloat(t),t=ut(u.min,u.max,t/100)-u.min),typeof t!="number")return;let c=ut(a.min,a.max,r);e===a&&(c-=t),e.min=R1(e.min,t,n,c,s),e.max=R1(e.max,t,n,c,s)}function P1(e,t,[n,r,s],a,u){a8(e,t[n],t[r],t[s],t.scale,a,u)}const u8=["x","scaleX","originX"],l8=["y","scaleY","originY"];function L1(e,t,n,r){P1(e.x,t,u8,n?n.x:void 0,r?r.x:void 0),P1(e.y,t,l8,n?n.y:void 0,r?r.y:void 0)}function D1(e){return e.translate===0&&e.scale===1}function z_(e){return D1(e.x)&&D1(e.y)}function M1(e,t){return e.min===t.min&&e.max===t.max}function c8(e,t){return M1(e.x,t.x)&&M1(e.y,t.y)}function B1(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function V_(e,t){return B1(e.x,t.x)&&B1(e.y,t.y)}function F1(e){return Yt(e.x)/Yt(e.y)}function j1(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}function xn(e){return[e("x"),e("y")]}function d8(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,u=(n==null?void 0:n.z)||0;if((s||a||u)&&(r=`translate3d(${s}px, ${a}px, ${u}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:h,rotate:p,rotateX:m,rotateY:b,skewX:T,skewY:w}=n;h&&(r=`perspective(${h}px) ${r}`),p&&(r+=`rotate(${p}deg) `),m&&(r+=`rotateX(${m}deg) `),b&&(r+=`rotateY(${b}deg) `),T&&(r+=`skewX(${T}deg) `),w&&(r+=`skewY(${w}deg) `)}const c=e.x.scale*t.x,d=e.y.scale*t.y;return(c!==1||d!==1)&&(r+=`scale(${c}, ${d})`),r||"none"}const $_=["TopLeft","TopRight","BottomLeft","BottomRight"],h8=$_.length,U1=e=>typeof e=="string"?parseFloat(e):e,H1=e=>typeof e=="number"||Ee.test(e);function f8(e,t,n,r,s,a){s?(e.opacity=ut(0,n.opacity??1,p8(r)),e.opacityExit=ut(t.opacity??1,0,m8(r))):a&&(e.opacity=ut(t.opacity??1,n.opacity??1,r));for(let u=0;u<h8;u++){const c=`border${$_[u]}Radius`;let d=z1(t,c),h=z1(n,c);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||H1(d)===H1(h)?(e[c]=Math.max(ut(U1(d),U1(h),r),0),(Xn.test(h)||Xn.test(d))&&(e[c]+="%")):e[c]=h}(t.rotate||n.rotate)&&(e.rotate=ut(t.rotate||0,n.rotate||0,r))}function z1(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const p8=W_(0,.5,jT),m8=W_(.5,.95,Cn);function W_(e,t,n){return r=>r<e?0:r>t?1:n(ca(e,t,r))}function g8(e,t,n){const r=Ht(e)?e:Ls(e);return r.start(up("",r,t,n)),r.animation}function pa(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const y8=(e,t)=>e.depth-t.depth;class b8{constructor(){this.children=[],this.isDirty=!1}add(t){Wf(this.children,t),this.isDirty=!0}remove(t){Kf(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(y8),this.isDirty=!1,this.children.forEach(t)}}function E8(e,t){const n=qt.now(),r=({timestamp:s})=>{const a=s-n;a>=t&&(Qr(r),e(a-t))};return nt.setup(r,!0),()=>Qr(r)}function nl(e){return Ht(e)?e.get():e}class T8{constructor(){this.members=[]}add(t){Wf(this.members,t),t.scheduleRender()}remove(t){if(Kf(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender();const s=r.options.layoutDependency,a=t.options.layoutDependency;s!==void 0&&a!==void 0&&s===a||(t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0));const{crossfade:c}=t.options;c===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const rl={hasAnimatedSinceResize:!0,hasEverUpdated:!1},ph=["","X","Y","Z"],_8=1e3;let v8=0;function mh(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function K_(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=h_(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",nt,!(s||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&K_(r)}function q_({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(u={},c=t==null?void 0:t()){this.id=v8++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(k8),this.nodes.forEach(N8),this.nodes.forEach(I8),this.nodes.forEach(S8)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new b8)}addEventListener(u,c){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Gf),this.eventHandlers.get(u).add(c)}notifyListeners(u,...c){const d=this.eventHandlers.get(u);d&&d.notify(...c)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=x_(u)&&!w4(u),this.instance=u;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),e){let p,m=0;const b=()=>this.root.updateBlockedByResize=!1;nt.read(()=>{m=window.innerWidth}),e(u,()=>{const T=window.innerWidth;T!==m&&(m=T,this.root.updateBlockedByResize=!0,p&&p(),p=E8(b,250),rl.hasAnimatedSinceResize&&(rl.hasAnimatedSinceResize=!1,this.nodes.forEach(W1)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeLayoutChanged:b,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||D8,{onLayoutAnimationStart:A,onLayoutAnimationComplete:S}=h.getProps(),x=!this.targetLayout||!V_(this.targetLayout,T),R=!m&&b;if(this.options.layoutRoot||this.resumeFrom||R||m&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const C={...ap(w,"layout"),onPlay:A,onComplete:S};(h.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C),this.setAnimationOrigin(p,R)}else m||W1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Qr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(O8),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&K_(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(V1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach($1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(C8),this.nodes.forEach(x8),this.nodes.forEach(w8)):this.nodes.forEach($1),this.clearAllSnapshots();const c=qt.now();Dt.delta=Jn(0,1e3/60,c-Dt.timestamp),Dt.timestamp=c,Dt.isProcessing=!0,oh.update.process(Dt),oh.preRender.process(Dt),oh.render.process(Dt),Dt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,hp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(A8),this.sharedNodes.forEach(R8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Yt(this.snapshot.measuredBox.x)&&!Yt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=xt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(c=!1),c&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!z_(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;u&&this.instance&&(c||Ci(this.latestValues)||p)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return u&&(d=this.removeTransform(d)),M8(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:u}=this.options;if(!u)return xt();const c=u.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(B8))){const{scroll:p}=this.root;p&&(As(c.x,p.offset.x),As(c.y,p.offset.y))}return c}removeElementScroll(u){var d;const c=xt();if(Mn(c,u),(d=this.scroll)!=null&&d.wasRoot)return c;for(let h=0;h<this.path.length;h++){const p=this.path[h],{scroll:m,options:b}=p;p!==this.root&&m&&b.layoutScroll&&(m.wasRoot&&Mn(c,u),As(c.x,m.offset.x),As(c.y,m.offset.y))}return c}applyTransform(u,c=!1){const d=xt();Mn(d,u);for(let h=0;h<this.path.length;h++){const p=this.path[h];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Cs(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Ci(p.latestValues)&&Cs(d,p.latestValues)}return Ci(this.latestValues)&&Cs(d,this.latestValues),d}removeTransform(u){const c=xt();Mn(c,u);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!Ci(h.latestValues))continue;mf(h.latestValues)&&h.updateSnapshot();const p=xt(),m=h.measurePageBox();Mn(p,m),L1(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return Ci(this.latestValues)&&L1(c,this.latestValues),c}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Dt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var T;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(u||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!this.layout||!(p||m))return;this.resolvedRelativeTargetAt=Dt.timestamp;const b=this.getClosestProjectingParent();b&&this.linkedParentVersion!==b.layoutVersion&&!b.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(b&&b.layout?this.createRelativeTarget(b,this.layout.layoutBox,b.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=xt(),this.targetWithTransforms=xt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Mn(this.target,this.layout.layoutBox),I_(this.target,this.targetDelta)):Mn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?this.createRelativeTarget(b,this.target,b.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||mf(this.parent.latestValues)||N_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(u,c,d){this.relativeParent=u,this.linkedParentVersion=u.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),El(this.relativeTargetOrigin,c,d),Mn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var w;const u=this.getLead(),c=!!this.resumingFrom||this!==u;let d=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Dt.timestamp&&(d=!1),d)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;Mn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,b=this.treeScale.y;D4(this.layoutCorrected,this.treeScale,this.path,c),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=xt());const{target:T}=u;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(C1(this.prevProjectionDelta.x,this.projectionDelta.x),C1(this.prevProjectionDelta.y,this.projectionDelta.y)),Jo(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==b||!j1(this.projectionDelta.x,this.prevProjectionDelta.x)||!j1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),u){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ss(),this.projectionDelta=Ss(),this.projectionDeltaWithTransform=Ss()}setAnimationOrigin(u,c=!1){const d=this.snapshot,h=d?d.latestValues:{},p={...this.latestValues},m=Ss();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const b=xt(),T=d?d.source:void 0,w=this.layout?this.layout.source:void 0,A=T!==w,S=this.getStack(),x=!S||S.members.length<=1,R=!!(A&&!x&&this.options.crossfade===!0&&!this.path.some(L8));this.animationProgress=0;let C;this.mixTargetDelta=j=>{const M=j/1e3;K1(m.x,u.x,M),K1(m.y,u.y,M),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(El(b,this.layout.layoutBox,this.relativeParent.layout.layoutBox),P8(this.relativeTarget,this.relativeTargetOrigin,b,M),C&&c8(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=xt()),Mn(C,this.relativeTarget)),A&&(this.animationValues=p,f8(p,h,this.latestValues,M,R,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){var c,d,h;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(h=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||h.stop(),this.pendingAnimation&&(Qr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nt.update(()=>{rl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ls(0)),this.currentAnimation=g8(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),u.onUpdate&&u.onUpdate(p)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_8),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:c,target:d,layout:h,latestValues:p}=u;if(!(!c||!d||!h)){if(this!==u&&this.layout&&h&&Y_(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||xt();const m=Yt(this.layout.layoutBox.x);d.x.min=u.target.x.min,d.x.max=d.x.min+m;const b=Yt(this.layout.layoutBox.y);d.y.min=u.target.y.min,d.y.max=d.y.min+b}Mn(c,d),Cs(c,p),Jo(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(u,c){this.sharedNodes.has(u)||this.sharedNodes.set(u,new T8),this.sharedNodes.get(u).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var c;const{layoutId:u}=this.options;return u?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:u}=this.options;return u?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:c,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),u&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let c=!1;const{latestValues:d}=u;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const h={};d.z&&mh("z",u,h,this.animationValues);for(let p=0;p<ph.length;p++)mh(`rotate${ph[p]}`,u,h,this.animationValues),mh(`skew${ph[p]}`,u,h,this.animationValues);u.render();for(const p in h)u.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);u.scheduleRender()}applyProjectionStyles(u,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=nl(c==null?void 0:c.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=nl(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!Ci(this.latestValues)&&(u.transform=d?d({},""):"none",this.hasProjected=!1);return}u.visibility="";const p=h.animationValues||h.latestValues;this.applyTransformsToTarget();let m=d8(this.projectionDeltaWithTransform,this.treeScale,p);d&&(m=d(p,m)),u.transform=m;const{x:b,y:T}=this.projectionDelta;u.transformOrigin=`${b.origin*100}% ${T.origin*100}% 0`,h.animationValues?u.opacity=h===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const w in yf){if(p[w]===void 0)continue;const{correct:A,applyTo:S,isCSSVariable:x}=yf[w],R=m==="none"?p[w]:A(p[w],h);if(S){const C=S.length;for(let j=0;j<C;j++)u[S[j]]=R}else x?this.options.visualElement.renderState.vars[w]=R:u[w]=R}this.options.layoutId&&(u.pointerEvents=h===this?nl(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var c;return(c=u.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(V1),this.root.sharedNodes.clear()}}}function x8(e){e.updateLayout()}function w8(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:a}=e.options,u=t.source!==e.layout.source;a==="size"?xn(m=>{const b=u?t.measuredBox[m]:t.layoutBox[m],T=Yt(b);b.min=r[m].min,b.max=b.min+T}):Y_(a,t.layoutBox,r)&&xn(m=>{const b=u?t.measuredBox[m]:t.layoutBox[m],T=Yt(r[m]);b.max=b.min+T,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[m].max=e.relativeTarget[m].min+T)});const c=Ss();Jo(c,r,t.layoutBox);const d=Ss();u?Jo(d,e.applyTransform(s,!0),t.measuredBox):Jo(d,r,t.layoutBox);const h=!z_(c);let p=!1;if(!e.resumeFrom){const m=e.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:b,layout:T}=m;if(b&&T){const w=xt();El(w,t.layoutBox,b.layoutBox);const A=xt();El(A,r,T.layoutBox),V_(w,A)||(p=!0),m.options.layoutRoot&&(e.relativeTarget=A,e.relativeTargetOrigin=w,e.relativeParent=m)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:p})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function k8(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function S8(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function A8(e){e.clearSnapshot()}function V1(e){e.clearMeasurements()}function $1(e){e.isLayoutDirty=!1}function C8(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function W1(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function N8(e){e.resolveTargetDelta()}function I8(e){e.calcProjection()}function O8(e){e.resetSkewAndRotation()}function R8(e){e.removeLeadSnapshot()}function K1(e,t,n){e.translate=ut(t.translate,0,n),e.scale=ut(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function q1(e,t,n,r){e.min=ut(t.min,n.min,r),e.max=ut(t.max,n.max,r)}function P8(e,t,n,r){q1(e.x,t.x,n.x,r),q1(e.y,t.y,n.y,r)}function L8(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const D8={duration:.45,ease:[.4,0,.1,1]},Y1=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),G1=Y1("applewebkit/")&&!Y1("chrome/")?Math.round:Cn;function Q1(e){e.min=G1(e.min),e.max=G1(e.max)}function M8(e){Q1(e.x),Q1(e.y)}function Y_(e,t,n){return e==="position"||e==="preserve-aspect"&&!s8(F1(t),F1(n),.2)}function B8(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const F8=q_({attachResizeListener:(e,t)=>pa(e,"resize",t),measureScroll:()=>{var e,t;return{x:document.documentElement.scrollLeft||((e=document.body)==null?void 0:e.scrollLeft)||0,y:document.documentElement.scrollTop||((t=document.body)==null?void 0:t.scrollTop)||0}},checkIsScrollRoot:()=>!0}),gh={current:void 0},G_=q_({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!gh.current){const e=new F8({});e.mount(window),e.setOptions({layoutScroll:!0}),gh.current=e}return gh.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Q_=se.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function j8(e=!0){const t=se.useContext($f);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,a=se.useId();se.useEffect(()=>{if(e)return s(a)},[e]);const u=se.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,u]:[!0]}const X_=se.createContext({strict:!1}),X1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let J1=!1;function U8(){if(J1)return;const e={};for(const t in X1)e[t]={isEnabled:n=>X1[t].some(r=>!!n[r])};S_(e),J1=!0}function J_(){return U8(),O4()}function H8(e){const t=J_();for(const n in e)t[n]={...t[n],...e[n]};S_(t)}const z8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Tl(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||z8.has(e)}let Z_=e=>!Tl(e);function V8(e){typeof e=="function"&&(Z_=t=>t.startsWith("on")?!Tl(t):e(t))}try{V8(require("@emotion/is-prop-valid").default)}catch{}function $8(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(Z_(s)||n===!0&&Tl(s)||!t&&!Tl(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const Ul=se.createContext({});function W8(e,t){if(jl(e)){const{initial:n,animate:r}=e;return{initial:n===!1||fa(n)?n:void 0,animate:fa(r)?r:void 0}}return e.inherit!==!1?t:{}}function K8(e){const{initial:t,animate:n}=W8(e,se.useContext(Ul));return se.useMemo(()=>({initial:t,animate:n}),[Z1(t),Z1(n)])}function Z1(e){return Array.isArray(e)?e.join(" "):e}const bp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ev(e,t,n){for(const r in t)!Ht(t[r])&&!P_(r,n)&&(e[r]=t[r])}function q8({transformTemplate:e},t){return se.useMemo(()=>{const n=bp();return gp(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Y8(e,t){const n=e.style||{},r={};return ev(r,n,e),Object.assign(r,q8(e,t)),r}function G8(e,t){const n={},r=Y8(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const tv=()=>({...bp(),attrs:{}});function Q8(e,t,n,r){const s=se.useMemo(()=>{const a=tv();return L_(a,t,M_(r),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};ev(a,e.style,e),s.style={...a,...s.style}}return s}const X8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ep(e){return typeof e!="string"||e.includes("-")?!1:!!(X8.indexOf(e)>-1||/[A-Z]/u.test(e))}function J8(e,t,n,{latestValues:r},s,a=!1,u){const d=(u??Ep(e)?Q8:G8)(t,r,s,e),h=$8(t,typeof e=="string",a),p=e!==se.Fragment?{...h,...d,ref:n}:{},{children:m}=t,b=se.useMemo(()=>Ht(m)?m.get():m,[m]);return se.createElement(e,{...p,children:b})}function Z8({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:e5(n,r,s,e),renderState:t()}}function e5(e,t,n,r){const s={},a=r(e,{});for(const b in a)s[b]=nl(a[b]);let{initial:u,animate:c}=e;const d=jl(e),h=k_(e);t&&h&&!d&&e.inherit!==!1&&(u===void 0&&(u=t.initial),c===void 0&&(c=t.animate));let p=n?n.initial===!1:!1;p=p||u===!1;const m=p?c:u;if(m&&typeof m!="boolean"&&!Fl(m)){const b=Array.isArray(m)?m:[m];for(let T=0;T<b.length;T++){const w=lp(e,b[T]);if(w){const{transitionEnd:A,transition:S,...x}=w;for(const R in x){let C=x[R];if(Array.isArray(C)){const j=p?C.length-1:0;C=C[j]}C!==null&&(s[R]=C)}for(const R in A)s[R]=A[R]}}}return s}const nv=e=>(t,n)=>{const r=se.useContext(Ul),s=se.useContext($f),a=()=>Z8(e,t,r,s);return n?a():fL(a)},t5=nv({scrapeMotionValuesFromProps:yp,createRenderState:bp}),n5=nv({scrapeMotionValuesFromProps:B_,createRenderState:tv}),r5=Symbol.for("motionComponentSymbol");function i5(e,t,n){const r=se.useRef(n);se.useInsertionEffect(()=>{r.current=n});const s=se.useRef(null);return se.useCallback(a=>{var c;a&&((c=e.onMount)==null||c.call(e,a)),t&&(a?t.mount(a):t.unmount());const u=r.current;if(typeof u=="function")if(a){const d=u(a);typeof d=="function"&&(s.current=d)}else s.current?(s.current(),s.current=null):u(a);else u&&(u.current=a)},[t])}const rv=se.createContext({});function jo(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function s5(e,t,n,r,s,a){var x,R;const{visualElement:u}=se.useContext(Ul),c=se.useContext(X_),d=se.useContext($f),h=se.useContext(Q_).reducedMotion,p=se.useRef(null),m=se.useRef(!1);r=r||c.renderer,!p.current&&r&&(p.current=r(e,{visualState:t,parent:u,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h,isSVG:a}),m.current&&p.current&&(p.current.manuallyAnimateOnMount=!0));const b=p.current,T=se.useContext(rv);b&&!b.projection&&s&&(b.type==="html"||b.type==="svg")&&o5(p.current,n,s,T);const w=se.useRef(!1);se.useInsertionEffect(()=>{b&&w.current&&b.update(n,d)});const A=n[d_],S=se.useRef(!!A&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,A))&&((R=window.MotionHasOptimisedAnimation)==null?void 0:R.call(window,A)));return pL(()=>{m.current=!0,b&&(w.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),b.scheduleRenderMicrotask(),S.current&&b.animationState&&b.animationState.animateChanges())}),se.useEffect(()=>{b&&(!S.current&&b.animationState&&b.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var C;(C=window.MotionHandoffMarkAsComplete)==null||C.call(window,A)}),S.current=!1),b.enteringChildren=void 0)}),b}function o5(e,t,n,r){const{layoutId:s,layout:a,drag:u,dragConstraints:c,layoutScroll:d,layoutRoot:h,layoutCrossfade:p}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:iv(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!u||c&&jo(c),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:d,layoutRoot:h})}function iv(e){if(e)return e.options.allowProjection!==!1?e.projection:iv(e.parent)}function yh(e,{forwardMotionProps:t=!1,type:n}={},r,s){r&&H8(r);const a=n?n==="svg":Ep(e),u=a?n5:t5;function c(h,p){let m;const b={...se.useContext(Q_),...h,layoutId:a5(h)},{isStatic:T}=b,w=K8(h),A=u(h,T);if(!T&&CT){u5();const S=l5(b);m=S.MeasureLayout,w.visualElement=s5(e,A,b,s,S.ProjectionNode,a)}return v.jsxs(Ul.Provider,{value:w,children:[m&&w.visualElement?v.jsx(m,{visualElement:w.visualElement,...b}):null,J8(e,h,i5(A,w.visualElement,p),A,T,t,a)]})}c.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const d=se.forwardRef(c);return d[r5]=e,d}function a5({layoutId:e}){const t=se.useContext(AT).id;return t&&e!==void 0?t+"-"+e:e}function u5(e,t){se.useContext(X_).strict}function l5(e){const t=J_(),{drag:n,layout:r}=t;if(!n&&!r)return{};const s={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(e)||r!=null&&r.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function c5(e,t){if(typeof Proxy>"u")return yh;const n=new Map,r=(a,u)=>yh(a,u,e,t),s=(a,u)=>r(a,u);return new Proxy(s,{get:(a,u)=>u==="create"?r:(n.has(u)||n.set(u,yh(u,void 0,e,t)),n.get(u))})}const d5=(e,t)=>t.isSVG??Ep(e)?new Y4(t):new z4(t,{allowProjection:e!==se.Fragment});class h5 extends ei{constructor(t){super(t),t.animationState||(t.animationState=Z4(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Fl(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let f5=0;class p5 extends ei{constructor(){super(...arguments),this.id=f5++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const m5={animation:{Feature:h5},exit:{Feature:p5}};function Sa(e){return{point:{x:e.pageX,y:e.pageY}}}const g5=e=>t=>fp(t)&&e(t,Sa(t));function Zo(e,t,n,r){return pa(e,t,g5(n),r)}const sv=({current:e})=>e?e.ownerDocument.defaultView:null,eb=(e,t)=>Math.abs(e-t);function y5(e,t){const n=eb(e.x,t.x),r=eb(e.y,t.y);return Math.sqrt(n**2+r**2)}const tb=new Set(["auto","scroll"]);class ov{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:u=3,element:c}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=T=>{this.handleScroll(T.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Eh(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,A=y5(T.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!A)return;const{point:S}=T,{timestamp:x}=Dt;this.history.push({...S,timestamp:x});const{onStart:R,onMove:C}=this.handlers;w||(R&&R(this.lastMoveEvent,T),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,T)},this.handlePointerMove=(T,w)=>{this.lastMoveEvent=T,this.lastMoveEventInfo=bh(w,this.transformPagePoint),nt.update(this.updatePoint,!0)},this.handlePointerUp=(T,w)=>{this.end();const{onEnd:A,onSessionEnd:S,resumeAnimation:x}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=Eh(T.type==="pointercancel"?this.lastMoveEventInfo:bh(w,this.transformPagePoint),this.history);this.startEvent&&A&&A(T,R),S&&S(T,R)},!fp(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=u,this.contextWindow=s||window;const d=Sa(t),h=bh(d,this.transformPagePoint),{point:p}=h,{timestamp:m}=Dt;this.history=[{...p,timestamp:m}];const{onSessionStart:b}=n;b&&b(t,Eh(h,this.history)),this.removeListeners=xa(Zo(this.contextWindow,"pointermove",this.handlePointerMove),Zo(this.contextWindow,"pointerup",this.handlePointerUp),Zo(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}startScrollTracking(t){let n=t.parentElement;for(;n;){const r=getComputedStyle(n);(tb.has(r.overflowX)||tb.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const n=this.scrollPositions.get(t);if(!n)return;const r=t===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},a={x:s.x-n.x,y:s.y-n.y};a.x===0&&a.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(t,s),nt.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Qr(this.updatePoint)}}function bh(e,t){return t?{point:t(e.point)}:e}function nb(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Eh({point:e},t){return{point:e,delta:nb(e,av(t)),offset:nb(e,b5(t)),velocity:E5(t,.1)}}function b5(e){return e[0]}function av(e){return e[e.length-1]}function E5(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=av(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>fr(t)));)n--;if(!r)return{x:0,y:0};const a=An(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const u={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function T5(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?ut(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?ut(n,e,r.max):Math.min(e,n)),e}function rb(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function _5(e,{top:t,left:n,bottom:r,right:s}){return{x:rb(e.x,n,s),y:rb(e.y,t,r)}}function ib(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function v5(e,t){return{x:ib(e.x,t.x),y:ib(e.y,t.y)}}function x5(e,t){let n=.5;const r=Yt(e),s=Yt(t);return s>r?n=ca(t.min,t.max-r,e.min):r>s&&(n=ca(e.min,e.max-s,t.min)),Jn(0,1,n)}function w5(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const bf=.35;function k5(e=bf){return e===!1?e=0:e===!0&&(e=bf),{x:sb(e,"left","right"),y:sb(e,"top","bottom")}}function sb(e,t,n){return{min:ob(e,t),max:ob(e,n)}}function ob(e,t){return typeof e=="number"?e:e[t]||0}const S5=new WeakMap;class A5{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=m=>{n?(this.stopAnimation(),this.snapToCursor(Sa(m).point)):this.pauseAnimation()},u=(m,b)=>{this.stopAnimation();const{drag:T,dragPropagation:w,onDragStart:A}=this.getProps();if(T&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=E4(T),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=b,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),xn(x=>{let R=this.getAxisMotionValue(x).get()||0;if(Xn.test(R)){const{projection:C}=this.visualElement;if(C&&C.layout){const j=C.layout.layoutBox[x];j&&(R=Yt(j)*(parseFloat(R)/100))}}this.originPoint[x]=R}),A&&nt.postRender(()=>A(m,b)),df(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},c=(m,b)=>{this.latestPointerEvent=m,this.latestPanInfo=b;const{dragPropagation:T,dragDirectionLock:w,onDirectionLock:A,onDrag:S}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:x}=b;if(w&&this.currentDirection===null){this.currentDirection=C5(x),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",b.point,x),this.updateAxis("y",b.point,x),this.visualElement.render(),S&&S(m,b)},d=(m,b)=>{this.latestPointerEvent=m,this.latestPanInfo=b,this.stop(m,b),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>xn(m=>{var b;return this.getAnimationState(m)==="paused"&&((b=this.getAxisMotionValue(m).animation)==null?void 0:b.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new ov(t,{onSessionStart:a,onStart:u,onMove:c,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:r,contextWindow:sv(this.visualElement),element:this.visualElement.current})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:u}=s;this.startAnimation(u);const{onDragEnd:c}=this.getProps();c&&nt.postRender(()=>c(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Qu(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let u=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(u=T5(u,this.constraints[t],this.elastic[t])),a.set(u)}resolveConstraints(){var a;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,s=this.constraints;t&&jo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=_5(r.layoutBox,t):this.constraints=!1,this.elastic=k5(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&xn(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=w5(r.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!jo(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=M4(r,s.root,this.visualElement.getTransformPagePoint());let u=v5(s.layout.layoutBox,a);if(n){const c=n(P4(u));this.hasMutatedConstraints=!!c,c&&(u=C_(c))}return u}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:u,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},h=xn(p=>{if(!Qu(p,n,this.currentDirection))return;let m=d&&d[p]||{};u&&(m={min:0,max:0});const b=s?200:1e6,T=s?40:1e7,w={type:"inertia",velocity:r?t[p]:0,bounceStiffness:b,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(p,w)});return Promise.all(h).then(c)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return df(this.visualElement,t),r.start(up(t,r,0,n,this.visualElement,!1))}stopAnimation(){xn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){xn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){xn(n=>{const{drag:r}=this.getProps();if(!Qu(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:u,max:c}=s.layout.layoutBox[n],d=a.get()||0;a.set(t[n]-ut(u,c,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!jo(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};xn(u=>{const c=this.getAxisMotionValue(u);if(c&&this.constraints!==!1){const d=c.get();s[u]=x5({min:d,max:d},this.constraints[u])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),xn(u=>{if(!Qu(u,t,null))return;const c=this.getAxisMotionValue(u),{min:d,max:h}=this.constraints[u];c.set(ut(d,h,s[u]))})}addListeners(){if(!this.visualElement.current)return;S5.set(this.visualElement,this);const t=this.visualElement.current,n=Zo(t,"pointerdown",d=>{const{drag:h,dragListener:p=!0}=this.getProps(),m=d.target,b=m!==t&&v_(m);h&&p&&!b&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();jo(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),nt.read(r);const u=pa(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(xn(p=>{const m=this.getAxisMotionValue(p);m&&(this.originPoint[p]+=d[p].translate,m.set(m.get()+d[p].translate))}),this.visualElement.render())}));return()=>{u(),n(),a(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:u=bf,dragMomentum:c=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:u,dragMomentum:c}}}function Qu(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function C5(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class N5 extends ei{constructor(t){super(t),this.removeGroupControls=Cn,this.removeListeners=Cn,this.controls=new A5(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Cn}update(){const{dragControls:t}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};t!==n&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const ab=e=>(t,n)=>{e&&nt.postRender(()=>e(t,n))};class I5 extends ei{constructor(){super(...arguments),this.removePointerDownListener=Cn}onPointerDown(t){this.session=new ov(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sv(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:ab(t),onStart:ab(n),onMove:r,onEnd:(a,u)=>{delete this.session,s&&nt.postRender(()=>s(a,u))}}}mount(){this.removePointerDownListener=Zo(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Th=!1;class O5 extends se.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=t;a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),Th&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),rl.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:u}=r;return u&&(u.isPresent=a,t.layoutDependency!==n&&u.setOptions({...u.options,layoutDependency:n}),Th=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==a?u.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?u.promote():u.relegate()||nt.postRender(()=>{const c=u.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),hp.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;Th=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function uv(e){const[t,n]=j8(),r=se.useContext(AT);return v.jsx(O5,{...e,layoutGroup:r,switchLayoutGroup:se.useContext(rv),isPresent:t,safeToRemove:n})}const R5={pan:{Feature:I5},drag:{Feature:N5,ProjectionNode:G_,MeasureLayout:uv}};function ub(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&nt.postRender(()=>a(t,Sa(t)))}class P5 extends ei{mount(){const{current:t}=this.node;t&&(this.unmount=T4(t,(n,r)=>(ub(this.node,r,"Start"),s=>ub(this.node,s,"End"))))}unmount(){}}class L5 extends ei{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xa(pa(this.node.current,"focus",()=>this.onFocus()),pa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function lb(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&nt.postRender(()=>a(t,Sa(t)))}class D5 extends ei{mount(){const{current:t}=this.node;t&&(this.unmount=x4(t,(n,r)=>(lb(this.node,r,"Start"),(s,{success:a})=>lb(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ef=new WeakMap,_h=new WeakMap,M5=e=>{const t=Ef.get(e.target);t&&t(e)},B5=e=>{e.forEach(M5)};function F5({root:e,...t}){const n=e||document;_h.has(n)||_h.set(n,{});const r=_h.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(B5,{root:e,...t})),r[s]}function j5(e,t,n){const r=F5(t);return Ef.set(e,n),r.observe(e),()=>{Ef.delete(e),r.unobserve(e)}}const U5={some:0,all:1};class H5 extends ei{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=t,u={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:U5[s]},c=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,a&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),b=h?p:m;b&&b(d)};return j5(this.node.current,u,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(z5(t,n))&&this.startObserver()}unmount(){}}function z5({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const V5={inView:{Feature:H5},tap:{Feature:D5},focus:{Feature:L5},hover:{Feature:P5}},$5={layout:{ProjectionNode:G_,MeasureLayout:uv}},W5={...m5,...V5,...R5,...$5},cb=c5(W5,d5),vh=["Generuji odpov ...","Hledm tu nejlep informaci...","Hledm a hledm...","Zpracovvm v dotaz...","Prosm o chvilku strpen...","Analyzuji vai otzku...","Hledm relevantn vsledky...","Pipravuji odpov...","Skoro hotovo...","Natm data...","Sestavuji doporuen...","Vyhledvm v katalogu...","Zpracovvm informace...","Optimalizuji vsledky...","Chvilku strpen prosm...","Moment, u to mm...","Dopluji detaily...","Ovuji informace...","Finalizuji odpov...","Kontroluji vechny monosti...","Zpracovvm v poadavek...","Pipravuji vsledky...","Sbrm relevantn data...","Analyzuji monosti...","Vybrm nejlep een...","Sestavuji informace...","Tm pipraveno..."],K5=({text:e})=>{const t=e.split(""),n={hidden:{opacity:0},visible:(s=1)=>({opacity:1,transition:{staggerChildren:.03,delayChildren:.04*s}})},r={visible:{opacity:1,y:0,scale:1,transition:{type:"spring",damping:12,stiffness:200}},hidden:{opacity:0,y:20,scale:.8,transition:{type:"spring",damping:12,stiffness:200}}};return v.jsx(cb.div,{style:{display:"flex",overflow:"hidden"},variants:n,initial:"hidden",animate:"visible",children:t.map((s,a)=>v.jsx(cb.span,{variants:r,style:{display:"inline-block"},children:s===" "?"":s},a))},e)},q5=({changeInterval:e=7e3})=>{const t=()=>Math.floor(Math.random()*vh.length),[n,r]=se.useState(t()),[s,a]=se.useState(new Set([n]));return se.useEffect(()=>{const u=setInterval(()=>{r(c=>{const d=vh.map((m,b)=>b).filter(m=>!s.has(m));let h,p=new Set(s);return d.length===0?(p=new Set,h=t()):d.length===1?(h=d[0],p=new Set):h=d[Math.floor(Math.random()*d.length)],p.add(h),a(p),h})},e);return()=>clearInterval(u)},[e,s]),v.jsx("div",{className:"text-slate-600 text-sm",children:v.jsx(K5,{text:vh[n]},n)})},Y5=()=>v.jsxs("div",{className:"bouncing-loader-wrapper",children:[v.jsx("style",{children:`
          .bouncing-loader-wrapper {
            width: 100px;
            height: 30px;
            position: relative;
            z-index: 1;
          }

          .bouncing-circle {
            width: 10px;
            height: 10px;
            position: absolute;
            border-radius: 50%;
            background-color: #007bff;
            left: 15%;
            transform-origin: 50%;
            animation: circle7124 0.5s alternate infinite ease;
          }

          @keyframes circle7124 {
            0% {
              top: 30px;
              height: 5px;
              border-radius: 50px 50px 25px 25px;
              transform: scaleX(1.7);
            }
            40% {
              height: 10px;
              border-radius: 50%;
              transform: scaleX(1);
            }
            100% {
              top: 0%;
            }
          }

          .bouncing-circle:nth-child(2) {
            left: 45%;
            animation-delay: 0.2s;
          }

          .bouncing-circle:nth-child(3) {
            left: auto;
            right: 15%;
            animation-delay: 0.3s;
          }

        `}),v.jsx("div",{className:"bouncing-circle"}),v.jsx("div",{className:"bouncing-circle"}),v.jsx("div",{className:"bouncing-circle"})]});async function G5(e,t,n,r,s,a,u){try{console.log(" [ChatHistory] Ukldm PAR otzka-odpov:",{session_id:e,question_length:r.length,answer_length:s.length,has_metadata:!!a,has_answer_data:!!u});const c={session_id:e,user_id:t||null,chatbot_id:n,role:"pair",message_text:r},d={answer:s};if(u&&(u.sources&&u.sources.length>0&&(d.sources=u.sources),u.products&&u.products.length>0&&(d.products=u.products),u.productRecommendations&&u.productRecommendations.length>0&&(d.productRecommendations=u.productRecommendations),u.matchedProducts&&u.matchedProducts.length>0&&(d.matchedProducts=u.matchedProducts),u.funnelProducts&&u.funnelProducts.length>0&&(d.funnelProducts=u.funnelProducts),u.symptomList&&u.symptomList.length>0&&(d.symptomList=u.symptomList),u.isFunnelMessage!==void 0&&(d.isFunnelMessage=u.isFunnelMessage),u.isUpdateFunnel!==void 0&&(d.isUpdateFunnel=u.isUpdateFunnel),u.hasCallout!==void 0&&(d.hasCallout=u.hasCallout),u.user_info&&Object.keys(u.user_info).length>0&&(d.user_info=u.user_info)),c.message_data=d,a){const p={};a.categories&&a.categories.length>0&&(p.categories=a.categories),a.labels&&a.labels.length>0&&(p.labels=a.labels),a.publication_types&&a.publication_types.length>0&&(p.publication_types=a.publication_types),Object.keys(p).length>0&&(c.conversation_metadata=p)}const{error:h}=await Ze.from("chat_messages").insert([c]);return h?(console.error(" [ChatHistory] Chyba pi ukldn pru:",h),{error:h.message}):(console.log(" [ChatHistory] Pr otzka-odpov spn uloen"),{error:null})}catch(c){return console.error(" [ChatHistory] Neoekvan chyba pi ukldn pru:",c),{error:c instanceof Error?c.message:"Neznm chyba"}}}async function db(e,t,n,r,s,a,u){try{await G5(e,t||null,n||"unknown",r,s,a,u)}catch(c){console.error(" Nepodailo se uloit pr otzka-odpov do historie:",c)}}const Sn=structuredClone(Qh);Sn.protocols&&Sn.protocols.href?Sn.protocols.href.push("product"):Sn.protocols?Sn.protocols.href=["http","https","mailto","product"]:Sn.protocols={href:["http","https","mailto","product"]};const xh={async getLabels(){const{data:e,error:t}=await Ze.from("labels").select("id, name").order("name");return t?(console.error("Error loading labels:",t),[]):e||[]},async getCategories(){const{data:e,error:t}=await Ze.from("categories").select("id, name").order("name");return t?(console.error("Error loading categories:",t),[]):e||[]},async getPublicationTypes(){const{data:e,error:t}=await Ze.from("publication_types").select("id, name").order("name");return t?(console.error("Error loading publication types:",t),[]):e||[]}},Q5=e=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[v.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),v.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),X5=e=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[v.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),v.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),lv=e=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[v.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),v.jsx("path",{d:"M12 2C6.477 2 2 6.477 2 12h10c5.523 0 10-4.477 10-10C17.523 2 12 2 12 2z"})]}),cv=e=>v.jsx("img",{src:"https://modopafybeslbcqjxsve.supabase.co/storage/v1/object/public/web/Generated_Image_September_08__2025_-_3_09PM-removebg-preview.png",alt:"Sana AI Logo",style:{objectFit:"contain"},...e}),J5=e=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[v.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),v.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),v.jsx("polyline",{points:"21 15 16 10 5 21"})]}),Z5=e=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:v.jsx("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})}),eM="https://n8n.srv980546.hstgr.cloud/webhook/97dc857e-352b-47b4-91cb-bc134afc764c/chat",hb=async(e,t,n,r,s,a,u,c,d,h)=>{var p,m,b;try{const T=s||eM,w={sessionId:t,action:"sendMessage",chatInput:e,chatHistory:n,intent:u||"chat"};c&&c.length>0,r&&Object.keys(r).length>0&&(w.metadata=r),w.user=h?{id:h.external_user_id||"",email:h.email||"",firstName:h.first_name||"",lastName:h.last_name||"",role:h.position||""}:d?{id:d.id,email:d.email,firstName:d.firstName,lastName:d.lastName,role:d.role}:{id:"",email:"",firstName:"",lastName:"",role:""},console.log(" Odeslm poadavek na N8N webhook..."),console.log(" Webhook URL:",T),console.log(" Payload size:",JSON.stringify(w).length,"bytes"),console.log(" Session ID:",t),console.log(" Message length:",e.length),console.log(" History length:",n.length),console.log(" Metadata:",r),console.log(" Intent:",u||"chat");const A=await fetch(T,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(console.log(" N8N response status:",A.status,A.statusText),!A.ok){const M=await A.text();console.error(" N8N error response:",M);let I="";try{const Q=JSON.parse(M);I=`<pre style="background-color: #fff0f0; color: #b91c1c; border: 1px solid #fecaca; padding: 15px; border-radius: 8px; font-family: monospace; white-space: pre-wrap; word-wrap: break-word;"><code>${JSON.stringify(Q,null,2)}</code></pre>`}catch{I=`<pre style="background-color: #fff0f0; color: #b91c1c; border: 1px solid #fecaca; padding: 15px; border-radius: 8px; font-family: monospace; white-space: pre-wrap; word-wrap: break-word;"><code>${M}</code></pre>`}throw A.status===500?new Error(` N8N workflow selhalo (500 error). Zkontrolujte prosm N8N workflow konfiguraci.<br/><br/>Detaily chyby:<br/>${I}<br/><br/> <strong>Tip:</strong> Problm je pravdpodobn v N8N workflow, ne v aplikaci.`):new Error(`Chyba serveru: ${A.status} ${A.statusText}.<br/><br/>Odpov ze serveru:<br/>${I}`)}const S=await A.json();console.log("N8N webhook response:",JSON.stringify(S,null,2)),console.log("Payload sent to N8N:",JSON.stringify(w,null,2)),console.log("Metadata being sent:",JSON.stringify(r,null,2));let x;Array.isArray(S)?(console.log(" N8N vrtil array dat:",S),x=S[0]):x=S,x&&typeof x.json=="object"&&x.json!==null?x=x.json:x&&x.body?x=x.body:x&&x.data&&(x=x.data);let R=(x==null?void 0:x.output)||(x==null?void 0:x.html)||(x==null?void 0:x.text)||(x==null?void 0:x.content)||(x==null?void 0:x.response)||(x==null?void 0:x.message)||(x==null?void 0:x.result);if(typeof R!="string"){const M="Odpov ze serveru neobsahovala text nebo byl ve patnm formtu.",I=`<br/><br/><small style="color: #6b7280; font-family: sans-serif;">Pijat data: <code style="background-color: #f3f4f6; padding: 2px 4px; border-radius: 4px; font-family: monospace;">${JSON.stringify(S,null,2)}</code></small>`;throw new Error(M+I)}let C=R;if(console.log(" Pvodn odpov z N8N:",R.substring(0,500)+"..."),x!=null&&x.html||R.includes("<style>")||R.includes('<div class="chatgpt-text">')){C=R.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"").trim();const M=C.match(/<div class="chatgpt-text"[^>]*>([\s\S]*)<\/div>\s*$/i);M&&(C=M[1].trim())}x!=null&&x.sources&&x.sources.length>0&&C.includes("### Zdroje:")&&(C=C.replace(/###\s*Zdroje:[\s\S]*$/i,"").trim()),console.log(" Zpracovan text:",C.substring(0,500)+"..."),C.includes("<img")&&console.log(" Detekovn HTML s obrzky v odpovdi - poet:",(C.match(/<img[^>]*>/gi)||[]).length);let j=[];console.log(""),console.log(" INLINE PRODUCT BUTTONS - DIAGNOSTIKA"),console.log(""),console.log(" Text dlka:",C.length,"znak"),console.log(" Text preview:",C.substring(0,200)+"..."),console.log("");try{console.log(" Zahajuji screening produkt z odpovdi...");const M=await nL(C);if(console.log(" Screening vsledek:",{success:M.success,productCount:((p=M.products)==null?void 0:p.length)||0,products:M.products,error:M.error}),M.success&&M.products.length>0){console.log(` GPT identifikoval ${M.products.length} produkt/tmat:`,M.products),console.log(" Zahajuji matching v databzi...");const I=await rL(M.products);if(console.log(" Matching vsledek:",{success:I.success,matchCount:((m=I.matches)==null?void 0:m.length)||0,unmatchedCount:((b=I.unmatched)==null?void 0:b.length)||0,unmatched:I.unmatched,error:I.error}),I.success&&I.matches.length>0){console.log(` Nalezeno ${I.matches.length} produkt v databzi`),j=I.matches,console.log(" Matched produkty:",I.matches.map(W=>({matched_from:W.matched_from,product_name:W.product_name,pinyin_name:W.pinyin_name,similarity:W.similarity})));const Q=I.matches.filter((W,te,B)=>te===B.findIndex(q=>q.product_code===W.product_code));console.log(" Vkldm produktov tlatka pmo do textu na konec vt..."),Q.forEach(W=>{const te=[W.matched_from,W.pinyin_name,W.product_name].filter(Boolean);console.log(`   Hledm "${W.matched_from}" v textu...`);let B=!1;for(const q of te){const Z=q.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),de=new RegExp(`\\b${Z}\\b`,"i"),ue=C.match(de);if(ue&&!B){let ne=ue.index+ue[0].length,K=C.substring(ne),H=0;K.startsWith("**")?H=2:K.startsWith("*")?H=1:K.startsWith("__")?H=2:K.startsWith("_")&&(H=1),ne+=H;const G=` <<<PRODUCT:${W.product_code}|||${W.url}|||${W.product_name}|||${W.pinyin_name}>>>`;C=C.slice(0,ne)+G+C.slice(ne),console.log(`     Marker vloen hned za "${q}" na pozici ${ne} (markdown offset: ${H})`),console.log("     Marker:",G),B=!0;break}}B||console.log(`     Nenalezen vskyt "${W.matched_from}"`)}),console.log(" Produktov tlatka vloena do textu"),console.log(" Finln text s markery (preview):",C.substring(0,300)+"..."),console.log("")}else console.log(" dn produkty nebyly namatchovny v databzi"),console.log("")}else console.log(" GPT neidentifikoval dn produkty v odpovdi"),console.log(" TIP: Zkus se zeptat na konkrtn produkt nebo nsk nzev"),console.log("")}catch(M){console.error(" CHYBA pi screeningu/matchingu produkt:",M),console.error(" Detaily chyby:",{message:M instanceof Error?M.message:String(M),stack:M instanceof Error?M.stack:void 0}),console.log("")}return{text:C,sources:(x==null?void 0:x.sources)||[],productRecommendations:void 0,matchedProducts:j}}catch(T){throw console.error(" Celkov chyba v sendMessageToAPI:",T),T instanceof TypeError&&T.message==="Failed to fetch"?new Error(`<div style="font-family: sans-serif; line-height: 1.6;"><strong style="font-size: 1.1em; color: #b91c1c;">Chyba: Nelze se pipojit k serveru</strong><br /><br />Zd se, e mm pote s pipojenm k vaemu n8n webhooku na adrese <strong>${N8N_WEBHOOK_URL}</strong>.<br /><br />Pinou je tm jist bezpenostn mechanismus prohlee zvan <strong>CORS</strong>. V n8n server mus explicitn povolit komunikaci s touto webovou aplikac.</div>`):T instanceof Error&&T.message.includes("N8N workflow selhalo")||T instanceof Error?T:new Error("Dolo k neznm chyb pi komunikaci se serverem.")}},tM=()=>console.log("New chat started. State cleared in UI."),fb=({productName:e,pinyinName:t,url:n,similarity:r})=>{const[s,a]=uw.useState(!1);return v.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"relative overflow-hidden inline-flex items-center h-8 px-4 rounded-full bg-transparent text-gray-700 text-sm font-medium border border-gray-300 transition-all duration-300 cursor-pointer ml-1",title:r?`${t} - Shoda: ${(r*100).toFixed(0)}%`:t,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),style:{position:"relative",overflow:"hidden",color:s?"#fff":"#374151",borderColor:s?"transparent":"#d1d5db"},children:[v.jsx("div",{style:{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"inherit",background:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",transform:s?"scaleX(1)":"scaleX(0)",transformOrigin:"0 50%",transition:"all 0.475s",zIndex:0}}),v.jsx("span",{className:"relative z-10",children:e})]})},nM=()=>v.jsxs("div",{className:"flex items-start gap-3 max-w-4xl mx-auto justify-start",children:[v.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-bewit-blue flex items-center justify-center text-white",children:v.jsx(lv,{className:"w-5 h-5"})}),v.jsx("div",{className:"px-4 py-3 rounded-2xl bg-white border border-slate-200 rounded-bl-none shadow-sm",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(Y5,{}),v.jsx(q5,{changeInterval:7e3})]})})]}),rM=({message:e,onSilentPrompt:t,chatbotSettings:n,sessionId:r,lastUserQuery:s,chatbotId:a,recommendedProducts:u=[],chatHistory:c=[],metadata:d={categories:[],labels:[],publication_types:[]}})=>{var A;const h=e.role==="user",p=a==="sana_local_format"||a==="vany_chat"||a==="eo_smesi"||a==="wany_chat_local",m=S=>{if(!S)return"";let x=S;if(x=x.replace(/<img([^>]*)>/gi,(R,C)=>{if(C.includes("loading=")&&C.includes("style="))return R;let j=C;return C.includes("loading=")||(j+=' loading="lazy"'),C.includes("style=")||(j+=' style="max-width: 100%; height: auto; border-radius: 8px; margin: 12px 0; display: block;"'),C.includes("alt=")||(j+=' alt="Obrzek z dokumentu"'),`<img${j}>`}),x.includes("<img")){const R=x.match(/<img[^>]*>/gi)||[];console.log(" Zpracovn zprvy s obrzky - poet:",R.length),R.forEach((C,j)=>{const M=C.match(/src="([^"]*)"/)||C.match(/src='([^']*)'/);M&&console.log(` Obrzek ${j+1} URL:`,M[1])})}return(x.includes("<h1")||x.includes("<h2")||x.includes("<h3"))&&console.log(" Zpracovn zprvy s nadpisy:",x.substring(0,200)+"..."),x},b=()=>{const S=e.text||"",x=/<<<PRODUCT:([^|]+)\|\|\|([^|]+)\|\|\|([^|]+)\|\|\|([^>]+)>>>/g,R=[];let C;for(;(C=x.exec(S))!==null;){const[,j,M,I,Q]=C;R.push({productCode:j.trim(),productUrl:M.trim(),productName:I.trim(),pinyinName:Q.trim()})}return R},T=()=>{const S=e.text||"";console.log(" renderTextWithProductButtons - zanm parsovn"),console.log(" Text dlka:",S.length),console.log(" Hledm markery ve formtu: <<<PRODUCT:...");const x=/<<<PRODUCT:([^|]+)\|\|\|([^|]+)\|\|\|([^|]+)\|\|\|([^>]+)>>>/g,R=n!=null&&n.inline_product_links?b():[],C=S.indexOf(`

`),j=C>0?C:-1;console.log(" Prvn odstavec kon na pozici:",j);const M=[];let I=0,Q,W=0,te=!1;for(;(Q=x.exec(S))!==null;){console.log(" Nalezen product marker:",Q[0]);const B=Q.index,q=Q.index+Q[0].length;if(B>I){const ne=S.substring(I,B);if(!te&&R.length>0&&j>0&&I<=j&&B>j){const K=ne.substring(0,j-I),H=ne.substring(j-I);K.trim()&&(M.push(v.jsx(wi,{remarkPlugins:[ki],rehypePlugins:[Si,[Ai,Sn]],components:{h1:({node:G,..._})=>v.jsx("h1",{className:"text-2xl font-bold mt-4 mb-2",..._}),h2:({node:G,..._})=>v.jsx("h2",{className:"text-xl font-bold mt-3 mb-2",..._}),h3:({node:G,..._})=>v.jsx("h3",{className:"text-lg font-bold mt-2 mb-1",..._}),p:({node:G,..._})=>v.jsx("p",{className:"my-2 leading-relaxed",..._}),strong:({node:G,..._})=>v.jsx("strong",{className:"font-bold",..._}),a:({node:G,..._})=>v.jsx("a",{className:"text-bewit-blue hover:underline",target:"_blank",rel:"noopener noreferrer",..._}),ul:({node:G,..._})=>v.jsx("ul",{className:"list-disc list-inside my-2 space-y-1",..._}),ol:({node:G,..._})=>v.jsx("ol",{className:"list-decimal list-inside my-2 space-y-1",..._}),li:({node:G,..._})=>v.jsx("li",{className:"ml-4",..._}),code:({node:G,inline:_,...X})=>_?v.jsx("code",{className:"bg-slate-100 text-slate-800 px-1.5 py-0.5 rounded text-sm font-mono",...X}):v.jsx("code",{className:"block bg-slate-100 text-slate-800 p-3 rounded-lg my-2 overflow-x-auto font-mono text-sm",...X}),table:({node:G,..._})=>v.jsx("div",{className:"overflow-x-auto my-4 rounded-lg shadow-sm border border-slate-200",children:v.jsx("table",{className:"min-w-full border-collapse bg-white",..._})}),thead:({node:G,..._})=>v.jsx("thead",{className:"bg-gradient-to-r from-bewit-blue to-blue-700",..._}),tbody:({node:G,..._})=>v.jsx("tbody",{className:"divide-y divide-slate-200",..._}),tr:({node:G,..._})=>v.jsx("tr",{className:"hover:bg-slate-50 transition-colors",..._}),th:({node:G,..._})=>v.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-white uppercase tracking-wider",..._}),td:({node:G,..._})=>v.jsx("td",{className:"px-6 py-4 text-sm text-slate-700 whitespace-nowrap",..._})},children:K},`text-${W}`)),W++),console.log(" Vkldm sekci s produkty po prvnm odstavci"),M.push(v.jsxs("div",{className:"my-4 bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-4 shadow-sm",children:[v.jsxs("h4",{className:"text-sm font-semibold text-bewit-blue mb-3 flex items-center gap-2",children:[v.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("circle",{cx:"9",cy:"21",r:"1"}),v.jsx("circle",{cx:"20",cy:"21",r:"1"}),v.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),"Souvisejc produkty BEWIT"]}),v.jsx("div",{className:"flex flex-col gap-2",children:R.map((G,_)=>v.jsx(fb,{productName:G.productName,pinyinName:G.pinyinName,url:G.productUrl},`top-product-${_}`))})]},"products-section")),W++,te=!0,H.trim()&&M.push(v.jsx(wi,{remarkPlugins:[ki],rehypePlugins:[Si,[Ai,Sn]],components:{h1:({node:G,..._})=>v.jsx("h1",{className:"text-2xl font-bold mt-4 mb-2",..._}),h2:({node:G,..._})=>v.jsx("h2",{className:"text-xl font-bold mt-3 mb-2",..._}),h3:({node:G,..._})=>v.jsx("h3",{className:"text-lg font-bold mt-2 mb-1",..._}),p:({node:G,..._})=>v.jsx("p",{className:"my-2 leading-relaxed",..._}),strong:({node:G,..._})=>v.jsx("strong",{className:"font-bold",..._}),a:({node:G,..._})=>v.jsx("a",{className:"text-bewit-blue hover:underline",target:"_blank",rel:"noopener noreferrer",..._}),ul:({node:G,..._})=>v.jsx("ul",{className:"list-disc list-inside my-2 space-y-1",..._}),ol:({node:G,..._})=>v.jsx("ol",{className:"list-decimal list-inside my-2 space-y-1",..._}),li:({node:G,..._})=>v.jsx("li",{className:"ml-4",..._}),code:({node:G,inline:_,...X})=>_?v.jsx("code",{className:"bg-slate-100 text-slate-800 px-1.5 py-0.5 rounded text-sm font-mono",...X}):v.jsx("code",{className:"block bg-slate-100 text-slate-800 p-3 rounded-lg my-2 overflow-x-auto font-mono text-sm",...X}),table:({node:G,..._})=>v.jsx("div",{className:"overflow-x-auto my-4 rounded-lg shadow-sm border border-slate-200",children:v.jsx("table",{className:"min-w-full border-collapse bg-white",..._})}),thead:({node:G,..._})=>v.jsx("thead",{className:"bg-gradient-to-r from-bewit-blue to-blue-700",..._}),tbody:({node:G,..._})=>v.jsx("tbody",{className:"divide-y divide-slate-200",..._}),tr:({node:G,..._})=>v.jsx("tr",{className:"hover:bg-slate-50 transition-colors",..._}),th:({node:G,..._})=>v.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-white uppercase tracking-wider",..._}),td:({node:G,..._})=>v.jsx("td",{className:"px-6 py-4 text-sm text-slate-700 whitespace-nowrap",..._})},children:H},`text-${W}`))}else M.push(v.jsx(wi,{remarkPlugins:[ki],rehypePlugins:[Si,[Ai,Sn]],components:{h1:({node:K,...H})=>v.jsx("h1",{className:"text-2xl font-bold mt-4 mb-2",...H}),h2:({node:K,...H})=>v.jsx("h2",{className:"text-xl font-bold mt-3 mb-2",...H}),h3:({node:K,...H})=>v.jsx("h3",{className:"text-lg font-bold mt-2 mb-1",...H}),p:({node:K,...H})=>v.jsx("p",{className:"my-2 leading-relaxed",...H}),strong:({node:K,...H})=>v.jsx("strong",{className:"font-bold",...H}),a:({node:K,...H})=>v.jsx("a",{className:"text-bewit-blue hover:underline",target:"_blank",rel:"noopener noreferrer",...H}),ul:({node:K,...H})=>v.jsx("ul",{className:"list-disc list-inside my-2 space-y-1",...H}),ol:({node:K,...H})=>v.jsx("ol",{className:"list-decimal list-inside my-2 space-y-1",...H}),li:({node:K,...H})=>v.jsx("li",{className:"ml-4",...H}),code:({node:K,inline:H,...G})=>H?v.jsx("code",{className:"bg-slate-100 text-slate-800 px-1.5 py-0.5 rounded text-sm font-mono",...G}):v.jsx("code",{className:"block bg-slate-100 text-slate-800 p-3 rounded-lg my-2 overflow-x-auto font-mono text-sm",...G}),table:({node:K,...H})=>v.jsx("div",{className:"overflow-x-auto my-4 rounded-lg shadow-sm border border-slate-200",children:v.jsx("table",{className:"min-w-full border-collapse bg-white",...H})}),thead:({node:K,...H})=>v.jsx("thead",{className:"bg-gradient-to-r from-bewit-blue to-blue-700",...H}),tbody:({node:K,...H})=>v.jsx("tbody",{className:"divide-y divide-slate-200",...H}),tr:({node:K,...H})=>v.jsx("tr",{className:"hover:bg-slate-50 transition-colors",...H}),th:({node:K,...H})=>v.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-white uppercase tracking-wider",...H}),td:({node:K,...H})=>v.jsx("td",{className:"px-6 py-4 text-sm text-slate-700 whitespace-nowrap",...H})},children:ne},`text-${W}`))}const[,Z,de,ue,re]=Q;console.log(" Vytvm ProductPill:",{productCode:Z,productName:ue,productPinyin:re}),M.push(v.jsx(fb,{productName:ue,pinyinName:re,url:de},`product-${W}`)),I=q,W++}if(I<S.length){const B=S.substring(I);M.push(v.jsx(wi,{remarkPlugins:[ki],rehypePlugins:[Si,[Ai,Sn]],components:{h1:({node:q,...Z})=>v.jsx("h1",{className:"text-2xl font-bold mt-4 mb-2",...Z}),h2:({node:q,...Z})=>v.jsx("h2",{className:"text-xl font-bold mt-3 mb-2",...Z}),h3:({node:q,...Z})=>v.jsx("h3",{className:"text-lg font-bold mt-2 mb-1",...Z}),p:({node:q,...Z})=>v.jsx("p",{className:"my-2 leading-relaxed",...Z}),strong:({node:q,...Z})=>v.jsx("strong",{className:"font-bold",...Z}),a:({node:q,...Z})=>v.jsx("a",{className:"text-bewit-blue hover:underline",target:"_blank",rel:"noopener noreferrer",...Z}),ul:({node:q,...Z})=>v.jsx("ul",{className:"list-disc list-inside my-2 space-y-1",...Z}),ol:({node:q,...Z})=>v.jsx("ol",{className:"list-decimal list-inside my-2 space-y-1",...Z}),li:({node:q,...Z})=>v.jsx("li",{className:"ml-4",...Z}),code:({node:q,inline:Z,...de})=>Z?v.jsx("code",{className:"bg-slate-100 text-slate-800 px-1.5 py-0.5 rounded text-sm font-mono",...de}):v.jsx("code",{className:"block bg-slate-100 text-slate-800 p-3 rounded-lg my-2 overflow-x-auto font-mono text-sm",...de}),table:({node:q,...Z})=>v.jsx("div",{className:"overflow-x-auto my-4 rounded-lg shadow-sm border border-slate-200",children:v.jsx("table",{className:"min-w-full border-collapse bg-white",...Z})}),thead:({node:q,...Z})=>v.jsx("thead",{className:"bg-gradient-to-r from-bewit-blue to-blue-700",...Z}),tbody:({node:q,...Z})=>v.jsx("tbody",{className:"divide-y divide-slate-200",...Z}),tr:({node:q,...Z})=>v.jsx("tr",{className:"hover:bg-slate-50 transition-colors",...Z}),th:({node:q,...Z})=>v.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-white uppercase tracking-wider",...Z}),td:({node:q,...Z})=>v.jsx("td",{className:"px-6 py-4 text-sm text-slate-700 whitespace-nowrap",...Z})},children:B},`text-${W}`))}return console.log(` Celkem nalezeno ${M.length/2} product marker`),console.log(` Vytvoeno ${M.length} segment (text + buttony)`),M.length===0?(console.log(" dn product markery nenalezeny - renderuji normln markdown"),v.jsx(wi,{remarkPlugins:[ki],rehypePlugins:[Si,[Ai,Sn]],components:{h1:({node:B,...q})=>v.jsx("h1",{className:"text-2xl font-bold mt-4 mb-2",...q}),h2:({node:B,...q})=>v.jsx("h2",{className:"text-xl font-bold mt-3 mb-2",...q}),h3:({node:B,...q})=>v.jsx("h3",{className:"text-lg font-bold mt-2 mb-1",...q}),p:({node:B,...q})=>v.jsx("p",{className:"my-2 leading-relaxed",...q}),strong:({node:B,...q})=>v.jsx("strong",{className:"font-bold",...q}),a:({node:B,...q})=>v.jsx("a",{className:"text-bewit-blue hover:underline",target:"_blank",rel:"noopener noreferrer",...q}),ul:({node:B,...q})=>v.jsx("ul",{className:"list-disc list-inside my-2 space-y-1",...q}),ol:({node:B,...q})=>v.jsx("ol",{className:"list-decimal list-inside my-2 space-y-1",...q}),li:({node:B,...q})=>v.jsx("li",{className:"ml-4",...q}),code:({node:B,inline:q,...Z})=>q?v.jsx("code",{className:"bg-slate-100 text-slate-800 px-1.5 py-0.5 rounded text-sm font-mono",...Z}):v.jsx("code",{className:"block bg-slate-100 text-slate-800 p-3 rounded-lg my-2 overflow-x-auto font-mono text-sm",...Z}),table:({node:B,...q})=>v.jsx("div",{className:"overflow-x-auto my-4 rounded-lg shadow-sm border border-slate-200",children:v.jsx("table",{className:"min-w-full border-collapse bg-white",...q})}),thead:({node:B,...q})=>v.jsx("thead",{className:"bg-gradient-to-r from-bewit-blue to-blue-700",...q}),tbody:({node:B,...q})=>v.jsx("tbody",{className:"divide-y divide-slate-200",...q}),tr:({node:B,...q})=>v.jsx("tr",{className:"hover:bg-slate-50 transition-colors",...q}),th:({node:B,...q})=>v.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-white uppercase tracking-wider",...q}),td:({node:B,...q})=>v.jsx("td",{className:"px-6 py-4 text-sm text-slate-700 whitespace-nowrap",...q})},children:S})):v.jsx(v.Fragment,{children:M})},w=m(e.text||"");return v.jsxs("div",{className:`flex items-start gap-3 max-w-4xl mx-auto group ${h?"justify-end ml-auto pl-12":"justify-start"}`,children:[!h&&v.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-bewit-blue flex items-center justify-center text-white",children:v.jsx(lv,{className:"w-5 h-5"})}),v.jsx("div",{className:`flex flex-col ${h?"items-end":"items-start"}`,children:!h&&e.isFunnelMessage?v.jsx(wT,{funnelText:e.text||"",selectedProducts:e.funnelProducts||[],symptomList:e.symptomList||[]}):v.jsxs("div",{className:`px-4 py-3 rounded-2xl max-w-xl md:max-w-2xl lg:max-w-3xl shadow-sm ${h?"bg-bewit-blue text-white rounded-br-none":"bg-white text-bewit-dark border border-slate-200 rounded-bl-none"}`,children:[!h&&p&&((A=e.text)!=null&&A.includes("<<<PRODUCT:"))?v.jsx("div",{className:"markdown-content",children:T()}):p&&!h?v.jsx("div",{className:"markdown-content",children:v.jsx(wi,{remarkPlugins:[ki],rehypePlugins:[Si,[Ai,Sn]],components:{h1:({node:S,...x})=>v.jsx("h1",{className:"text-2xl font-bold mt-4 mb-2",...x}),h2:({node:S,...x})=>v.jsx("h2",{className:"text-xl font-bold mt-3 mb-2",...x}),h3:({node:S,...x})=>v.jsx("h3",{className:"text-lg font-bold mt-2 mb-1",...x}),h4:({node:S,...x})=>v.jsx("h4",{className:"text-base font-bold mt-2 mb-1",...x}),h5:({node:S,...x})=>v.jsx("h5",{className:"text-sm font-bold mt-1 mb-1",...x}),h6:({node:S,...x})=>v.jsx("h6",{className:"text-xs font-bold mt-1 mb-1",...x}),p:({node:S,...x})=>v.jsx("p",{className:"my-2 leading-relaxed",...x}),strong:({node:S,...x})=>v.jsx("strong",{className:"font-bold",...x}),em:({node:S,...x})=>v.jsx("em",{className:"italic",...x}),a:({node:S,...x})=>v.jsx("a",{className:"text-bewit-blue hover:underline",target:"_blank",rel:"noopener noreferrer",...x}),ul:({node:S,...x})=>v.jsx("ul",{className:"list-disc list-inside my-2 space-y-1",...x}),ol:({node:S,...x})=>v.jsx("ol",{className:"list-decimal list-inside my-2 space-y-1",...x}),li:({node:S,...x})=>v.jsx("li",{className:"ml-4",...x}),img:({node:S,...x})=>v.jsx("img",{className:"max-w-full h-auto rounded-lg my-3 shadow-md block",loading:"lazy",...x}),code:({node:S,inline:x,...R})=>x?v.jsx("code",{className:"bg-slate-100 text-slate-800 px-1.5 py-0.5 rounded text-sm font-mono",...R}):v.jsx("code",{className:"block bg-slate-100 text-slate-800 p-3 rounded-lg my-2 overflow-x-auto font-mono text-sm",...R}),pre:({node:S,...x})=>v.jsx("pre",{className:"bg-slate-100 p-3 rounded-lg my-2 overflow-x-auto",...x}),blockquote:({node:S,...x})=>v.jsx("blockquote",{className:"border-l-4 border-bewit-blue pl-4 my-2 italic text-slate-600",...x}),hr:({node:S,...x})=>v.jsx("hr",{className:"my-4 border-slate-200",...x}),table:({node:S,...x})=>v.jsx("div",{className:"overflow-x-auto my-4 rounded-lg shadow-sm border border-slate-200",children:v.jsx("table",{className:"min-w-full border-collapse bg-white",...x})}),thead:({node:S,...x})=>v.jsx("thead",{className:"bg-gradient-to-r from-bewit-blue to-blue-700",...x}),tbody:({node:S,...x})=>v.jsx("tbody",{className:"divide-y divide-slate-200",...x}),tr:({node:S,...x})=>v.jsx("tr",{className:"hover:bg-slate-50 transition-colors",...x}),th:({node:S,...x})=>v.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-white uppercase tracking-wider",...x}),td:({node:S,...x})=>v.jsx("td",{className:"px-6 py-4 text-sm text-slate-700 whitespace-nowrap",...x})},children:e.text||""})}):v.jsx("div",{className:"prose prose-sm max-w-none text-inherit prose-headings:font-bold prose-h1:text-2xl prose-h2:text-xl prose-h3:text-lg prose-h4:text-base prose-h5:text-sm prose-h6:text-xs prose-p:my-2 prose-strong:font-bold prose-a:text-bewit-blue hover:prose-a:underline prose-img:block prose-img:max-w-full prose-img:h-auto prose-img:rounded-lg prose-img:mt-3 prose-img:mb-2 prose-img:shadow-md prose-img:object-cover",dangerouslySetInnerHTML:{__html:w}}),!h&&e.productRecommendations&&e.productRecommendations.length>0&&(n==null?void 0:n.product_recommendations)&&v.jsxs("div",{className:"mt-4",children:[console.log(" Renderuji ProductCarousel s produkty:",e.productRecommendations.length,"Settings:",n),v.jsx(xT,{products:e.productRecommendations,showSimilarity:!0,title:" Doporuen produkty"})]}),!h&&(n==null?void 0:n.product_button_recommendations)&&r&&s&&v.jsxs("div",{className:"mt-4",children:[console.log(" Zobrazuji tlatko doporuen",{product_button_recommendations:n==null?void 0:n.product_button_recommendations,sessionId:!!r,lastUserQuery:s.substring(0,30)}),v.jsx(H6,{userQuery:s,botResponse:e.text,sessionId:r})]}),!h&&e.hasCallout&&console.log(" CALLOUT DECISION:",{hasCallout:e.hasCallout,enable_manual_funnel:n==null?void 0:n.enable_manual_funnel,chatbotSettings:n}),!h&&e.hasCallout&&(n!=null&&n.enable_manual_funnel?v.jsx(Y6,{recommendedProducts:u,sessionId:r||"",metadata:d,chatHistory:c}):v.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-lg",children:v.jsxs("div",{className:"flex items-start gap-2",children:[v.jsx("span",{className:"text-amber-500 text-lg flex-shrink-0",children:""}),v.jsxs("p",{className:"text-sm text-amber-800",children:[v.jsx("strong",{children:"Potebujete pesnj doporuen?"}),v.jsx("br",{}),v.jsx("span",{className:"text-amber-700",children:"Napite nm vce o svch symptomech nebo potebch, abychom mohli produkty lpe zaclit pmo pro vs."})]})]})})),!h&&e.sources&&e.sources.length>0&&v.jsxs("div",{className:`mt-4 pt-4 border-t ${h?"border-t-white/30":"border-t-slate-200"}`,children:[v.jsx("h4",{className:`text-xs font-semibold mb-2 uppercase tracking-wider ${h?"text-white/80":"text-slate-500"}`,children:"Zdroje"}),v.jsx("div",{className:"flex flex-col gap-1",children:e.sources.map((S,x)=>v.jsxs("div",{className:`text-xs ${h?"text-white/90":"text-slate-600"}`,children:["- ",S.title]},x))})]})]})}),!h&&v.jsxs("div",{className:"flex flex-col space-y-1 self-center opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[v.jsx("button",{onClick:()=>t("Ukaz mi vsechny obrazky, ktere s tematem souviseji"),className:"p-1.5 text-slate-500 hover:text-bewit-blue hover:bg-slate-200 rounded-full","aria-label":"Ukzat obrzky k tmatu",title:"Ukzat obrzky k tmatu",children:v.jsx(J5,{className:"h-5 w-5"})}),v.jsx("button",{onClick:()=>t("text detailne rozepis. POsbirej vsechny informace a udelej detailni vystup"),className:"p-1.5 text-slate-500 hover:text-bewit-blue hover:bg-slate-200 rounded-full","aria-label":"Rozepsat vce",title:"Rozepsat vce",children:v.jsx(Z5,{className:"h-5 w-5"})})]}),h&&v.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-slate-300 flex items-center justify-center text-slate-600",children:v.jsx(X5,{className:"w-5 h-5"})})]})},iM=({messages:e,isLoading:t,onSilentPrompt:n,shouldAutoScroll:r=!0,chatbotSettings:s,sessionId:a,chatbotId:u,selectedCategories:c=[],selectedLabels:d=[],selectedPublicationTypes:h=[]})=>{const p=se.useRef(null),m=se.useRef(null),[b,T]=se.useState(0),[w,A]=se.useState(!1);se.useEffect(()=>{if(e.length>b&&(console.log(" Nov zprva pidna (bez auto-scroll):",{messageCount:e.length,lastCount:b}),m.current)){const{scrollTop:C,scrollHeight:j,clientHeight:M}=m.current;C+M>=j-50||A(!0)}T(e.length)},[e,b]);const S=()=>{var R;m.current?m.current.scrollTop=m.current.scrollHeight:(R=p.current)==null||R.scrollIntoView({behavior:"smooth"}),A(!1)},x=se.useCallback(()=>{if(m.current){const{scrollTop:R,scrollHeight:C,clientHeight:j}=m.current;!(R+j>=C-10)&&e.length>0?A(!0):A(!1)}},[e.length]);return v.jsxs("div",{className:"relative flex flex-col h-full",children:[v.jsxs("div",{ref:m,className:"chat-scroll-container flex-1 overflow-y-auto p-3 sm:p-4 md:p-6 lg:p-8 space-y-4 sm:space-y-6 min-h-0",onScroll:x,style:{scrollBehavior:"smooth",scrollbarWidth:"thin",scrollbarColor:"#CBD5E1 #F8FAFC"},children:[e.length===0&&!t&&v.jsxs("div",{className:"text-center text-slate-500 flex flex-col items-center justify-center min-h-96",children:[v.jsx(cv,{className:"h-45 w-45 text-bewit-blue opacity-20 mb-4"}),v.jsx("h2",{className:"text-2xl font-semibold text-bewit-blue",children:"Vtejte v Sana AI!"}),v.jsx("p",{children:"Jak vm dnes mohu pomoci?"})]}),e.map((R,C)=>{var W;const j=((W=e.slice(0,C).reverse().find(te=>te.role==="user"))==null?void 0:W.text)||"",M=e.slice(0,C+1).map(te=>({id:te.id,role:te.role,text:te.text,hasCallout:te.hasCallout})),I=kT(M),Q=M.map(te=>({id:te.id,role:te.role,text:te.text.replace(/<<<PRODUCT:[^>]+>>>/g,"").trim()}));return v.jsx(rM,{message:R,onSilentPrompt:n,chatbotSettings:s,sessionId:a,lastUserQuery:j,chatbotId:u,recommendedProducts:I,chatHistory:Q,metadata:{categories:c,labels:d,publication_types:h}},R.id)}),t&&v.jsx(nM,{}),v.jsx("div",{ref:p})]}),w&&v.jsx("div",{className:"absolute bottom-2 right-2 sm:bottom-4 sm:right-4 z-50",children:v.jsxs("button",{onClick:S,className:"flex items-center gap-1 sm:gap-2 bg-bewit-blue text-white px-3 py-2 sm:px-4 sm:py-2 rounded-full shadow-lg hover:bg-blue-700 transition-all duration-200 animate-bounce",title:"Pejt na konec chatu",children:[v.jsx("span",{className:"text-xs sm:text-sm font-medium hidden sm:inline",children:"Nov obsah"}),v.jsx("span",{className:"text-xs font-medium sm:hidden",children:""}),v.jsx("svg",{className:"hidden sm:block",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:v.jsx("path",{d:"M7 10l5 5 5-5"})})]})})]})},sM=({onSendMessage:e,isLoading:t})=>{const[n,r]=se.useState(""),s=se.useRef(null),a=c=>{c.preventDefault(),n.trim()&&!t&&(e(n),r(""))},u=c=>{c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),a(c))};return se.useEffect(()=>{s.current&&(s.current.style.height="auto",s.current.style.height=`${s.current.scrollHeight}px`)},[n]),v.jsx("form",{onSubmit:a,className:"relative",children:v.jsxs("div",{className:"flex items-center bg-white border border-slate-300 rounded-xl shadow-sm focus-within:ring-2 focus-within:ring-bewit-blue transition-shadow duration-200 p-3",children:[v.jsx("textarea",{ref:s,value:n,onChange:c=>r(c.target.value),onKeyDown:u,placeholder:"Jak vm mohu pomoci...",className:"w-full flex-1 px-2 py-2 bg-transparent resize-none focus:outline-none text-bewit-dark placeholder-slate-400 leading-5",rows:1,style:{maxHeight:"120px",minHeight:"40px"},disabled:t}),v.jsx("button",{type:"submit",disabled:t||!n.trim(),className:"ml-3 flex-shrink-0 w-10 h-10 rounded-lg bg-bewit-blue text-white flex items-center justify-center transition-colors duration-200 disabled:bg-slate-300 disabled:cursor-not-allowed hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-bewit-blue","aria-label":"Odeslat zprvu",children:t?v.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):v.jsx(Q5,{className:"w-5 h-5"})})]})})},pb=()=>"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[x]/g,()=>(Math.random()*16|0).toString(16)),wh={cs:"Odpovz v etin.",sk:"Odpovedz v slovenine.",de:"Antworte auf Deutsch.",en:"Answer in English."},oM=({currentUser:e,selectedCategories:t,selectedLabels:n,selectedPublicationTypes:r,chatbotSettings:s={product_recommendations:!1,product_button_recommendations:!1,inline_product_links:!1,book_database:!0,use_feed_1:!0,use_feed_2:!0,enable_product_router:!0,enable_manual_funnel:!1},chatbotId:a,onClose:u,externalUserInfo:c})=>{console.log("%c","background: #FF0000; color: #FFFFFF; font-size: 20px; font-weight: bold;"),console.log("%c SANACHATCONTENT COMPONENT LOADED","background: #FF0000; color: #FFFFFF; font-size: 16px; font-weight: bold;"),console.log(`%c chatbotId prop: "${a}" (type: ${typeof a})`,"background: #FFFF00; color: #000; font-size: 14px;"),console.log(`%c chatbotId === 'vany_chat': ${a==="vany_chat"}`,"background: #FFFF00; color: #000; font-size: 14px;"),console.log("%c","background: #FF0000; color: #FFFFFF; font-size: 20px; font-weight: bold;");const[d,h]=se.useState([]),[p,m]=se.useState(!1),[b,T]=se.useState(""),[w,A]=se.useState("cs"),[S,x]=se.useState(!0);se.useEffect(()=>{T(pb()),s.product_recommendations&&(console.log(" Spoutm KOMPLETN diagnostiku vektorov databze..."),G6().catch(j=>{console.error(" Chyba pi rychl diagnostice:",j)}),setTimeout(()=>{console.log(" Spoutm kompletn test vektorovho vyhledvn..."),Q6().then(j=>{console.log(" Kompletn test dokonen - vsledky ve v console")}).catch(j=>{console.error(" Chyba pi kompletnm testu:",j)})},3e3))},[s.product_recommendations]);const R=se.useCallback(async j=>{var W;if(!j.trim()||!b)return;const M={id:Date.now().toString(),role:"user",text:j},I=[...d,M];h(I),m(!0),x(!0);const Q={};t.length>0&&(Q.categories=t),n.length>0&&(Q.labels=n),r.length>0&&(Q.publication_types=r);try{console.log(" Chatbot settings v SanaChatContent:",{book_database:s.book_database,product_recommendations:s.product_recommendations,willUseCombinedSearch:s.book_database&&s.product_recommendations,webhook_url:s.webhook_url});const te={};t.length>0&&(te.categories=t),n.length>0&&(te.labels=n),r.length>0&&(te.publication_types=r);const B=wh[w],q=`${j.trim()} ${B}`;console.log(` Checking Intent Routing: chatbotId = "${a}" (type: ${typeof a})`),console.log(` Comparison: chatbotId === 'vany_chat'  ${a==="vany_chat"}`);const Z=(s==null?void 0:s.enable_product_router)!==!1;if(console.log(` Product Router enabled: ${Z?"ANO":"NE"}`),a==="vany_chat"&&Z){console.log("%c","color: #8B5CF6; font-weight: bold;"),console.log("%c WANY CHAT - KONTROLA INTENT ROUTING","color: #8B5CF6; font-weight: bold; font-size: 14px;"),console.log("%c","color: #8B5CF6; font-weight: bold;");const de=d.filter(K=>K.role==="bot").pop(),ue=(de==null?void 0:de.text)||"",re=d.some(K=>K.role==="bot"&&K.hasCallout===!0),ne=(s==null?void 0:s.enable_manual_funnel)===!0;if(console.log(` lut callout v historii: ${re?"ANO ":"NE"}`),console.log(` Manuln funnel: ${ne?"AKTIVN (peskakuji auto routing)":"NEAKTIVN"}`),!re||ne)ne&&re?console.log("%c Manuln funnel aktivn  PESKAKUJI AUTOMATICK ROUTING","color: #F59E0B; font-weight: bold;"):console.log("%c dn callout  STANDARDN CHAT (bez intent routingu)","color: #10B981; font-weight: bold;"),console.log("%c","color: #8B5CF6; font-weight: bold;");else{console.log("%c Callout detekovn  SPOUTM INTENT ROUTING","color: #F59E0B; font-weight: bold;");const K=d.map(P=>({role:P.role,text:P.text,hasCallout:P.hasCallout})),H=kT(K);console.log(` Produkty v historii: ${H.length}`),console.log("%c Volm Intent Router (LLM model)...","color: #8B5CF6;");const G=await q6(j.trim(),K,ue,H);console.log(` Intent Router odpovdl: ${G.intent}`),console.log(` Dvod: ${G.reasoning}`),G.symptomList&&G.symptomList.length>0&&console.log(` Extrahovan symptomy: ${G.symptomList.join(", ")}`);const _=G.intent==="funnel",X=G.intent==="update_funnel",me=H.length>0;if(console.log("%c DIAGNOSTIKA ROZHODNUT:","color: #FF6B6B; font-weight: bold;"),console.log(`   Intent = ${G.intent}`),console.log(`   Products = ${H.length} (hasProducts: ${me})`),console.log(`   Action: ${_?" FUNNEL MODE (symptomy po calloutu)":X?" UPDATE FUNNEL (zmna produkt)":" CHAT MODE"}`),(G.intent==="funnel"||G.intent==="update_funnel")&&H.length>0){console.log("%c","background: #10B981; color: white; font-weight: bold; font-size: 16px;"),console.log("%c          SPUTN PRODUKTOVHO FUNNELU (N8N WEBHOOK)           ","background: #10B981; color: white; font-weight: bold; font-size: 16px;"),console.log("%c","background: #10B981; color: white; font-weight: bold; font-size: 16px;");const P=G.symptomList&&G.symptomList.length>0?G.symptomList:[j.trim()];console.log("%c","color: #F59E0B;"),console.log("%c  SEZNAM SYMPTOM/PROBLM                                      ","color: #F59E0B; font-weight: bold; font-size: 14px;"),console.log("%c","color: #F59E0B;"),P.forEach((We,Gt)=>{console.log(`%c   ${Gt+1}. ${We}`,"color: #F59E0B;")}),console.log("%c","color: #F59E0B;"),console.log("%c","color: #8B5CF6;"),console.log("%c  SEZNAM PRODUKT (z Product Pills v pedchoz konverzaci)      ","color: #8B5CF6; font-weight: bold; font-size: 14px;"),console.log("%c","color: #8B5CF6;"),console.log(`%c   Celkem produkt: ${H.length}`,"color: #8B5CF6;"),console.log("%c","color: #8B5CF6;"),H.forEach((We,Gt)=>{console.log(`%c   ${Gt+1}. ${We.product_name}`,"color: #8B5CF6; font-weight: bold;"),console.log(`%c      Kd: ${We.product_code||"N/A"}`,"color: #8B5CF6;"),We.description&&console.log(`%c      Popis: ${We.description.substring(0,80)}...`,"color: #8B5CF6;")}),console.log("%c","color: #8B5CF6;");const Te=`Jsi expert na tradin nskou medicnu (TM) a produkty BEWIT.

## TVJ KOL
Na zklad symptom uivatele vyber PESN 2 NEJLEP produkty z poskytnutho seznamu a vytvo detailn doporuen.

##  KRITICK PRAVIDLO - POUZE PRODUKTY ZE SEZNAMU!
NESM doporuovat dn jin produkty ne ty, kter jsou uvedeny v seznamu "Vybran produkty"!
Pokud v seznamu jsou nap. "009 - ist dech" a "200 - Voln meridiny", MUS pracovat POUZE s tmito produkty.
NIKDY nedoporuuj produkty, kter nejsou v seznamu - ani je nezmiuj.

## PRAVIDLA
1. Vyber PESN 2 produkty z poskytnutho seznamu, kter nejlpe odpovdaj symptomm
2. Pro kad produkt vysvtli PRO je vhodn pro dan symptomy
3. Uve jak produkt pouvat (dvkovn, aplikace)
4. Bu konkrtn a praktick
5. Pi v etin, ptelskm tnem
6. NIKDY nedoporuuj produkty mimo poskytnut seznam!

## FORMT ODPOVDI
Vytvo krsn formtovanou odpov v markdown s doporuenm obou vybranch produkt z poskytnutho seznamu.`;console.log("%c","color: #3B82F6;"),console.log("%c  SYSTEM PROMPT PRO FUNNEL                                      ","color: #3B82F6; font-weight: bold; font-size: 14px;"),console.log("%c","color: #3B82F6;"),Te.split(`
`).forEach(We=>{console.log(`%c ${We}`,"color: #3B82F6;")}),console.log("%c","color: #3B82F6;");const Me=H.map(We=>We.description?`${We.product_name} (${We.description})`:We.product_name),Pe=[...new Set(Me)].join(", "),Re=P.join(", "),Le=` OMEZEN: Pracuj POUZE s tmito vybranmi produkty, NEDOPORUUJ dn jin!

Vybran produkty (POUZE TYTO): ${Pe}

Symptomy zkaznka: ${Re}

KOL: Z ve uvedench ${H.length} produkt (${Pe}) vyber 2 nejlep pro dan symptomy.
- Detailn rozepi pro jsou vhodn
- Uve jak je pouvat
- NEDOPORUUJ dn jin produkty mimo tento seznam!`,zn=wh[w],mn=`${Le} ${zn}`,ti="https://n8n.srv980546.hstgr.cloud/webhook/22856d03-acea-4174-89ae-1b6f0c8ede71/chat",yr=I.slice(0,-1).map(We=>({id:We.id,role:We.role,text:We.text.replace(/<<<PRODUCT:[^>]+>>>/g,"").trim()})),br={sessionId:b,action:"sendMessage",chatInput:mn,chatHistory:yr,metadata:{categories:t,labels:n,publication_types:r}};console.log("%c","background: #EF4444; color: white; font-weight: bold; font-size: 14px;"),console.log("%c  ODESLM FUNNEL DO N8N WEBHOOKU                               ","background: #EF4444; color: white; font-weight: bold; font-size: 14px;"),console.log("%c","background: #EF4444; color: white; font-weight: bold; font-size: 14px;"),console.log("%c Webhook URL:","color: #EF4444; font-weight: bold;",ti),console.log("%c chatInput (co jde do N8N):","color: #EF4444; font-weight: bold;"),console.log(mn),console.log("%c Kompletn Payload:","color: #EF4444; font-weight: bold;"),console.log(JSON.stringify(br,null,2)),console.log("%c","color: #EF4444; font-weight: bold;");try{const We=await fetch(ti,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(br)});if(console.log("%c N8N FUNNEL response status:","color: #10B981; font-weight: bold;",We.status,We.statusText),!We.ok)throw new Error(`N8N webhook error: ${We.status} ${We.statusText}`);const Gt=await We.json();console.log("%c N8N FUNNEL response data:","color: #10B981; font-weight: bold;"),console.log(Gt);let qe=Array.isArray(Gt)?Gt[0]:Gt;qe!=null&&qe.json&&(qe=qe.json);const ni=(qe==null?void 0:qe.output)||(qe==null?void 0:qe.html)||(qe==null?void 0:qe.text)||(qe==null?void 0:qe.response)||"Nepodailo se zskat odpov.";console.log("%c Obohacuji funnel produkty z product_feed_2...","color: #8B5CF6; font-weight: bold;");const Er=H.slice(0,2),on=(await ST(Er)).map(Et=>({product_code:Et.product_code,product_name:Et.product_name,description:Et.description,description_short:Et.description,price:Et.price,currency:Et.currency||"CZK",url:Et.url||`https://bewit.love/produkt/${Et.product_code}`,thumbnail:Et.thumbnail}));console.log("%c Funnel produkty pro UI (max 2):","color: #3B82F6; font-weight: bold;",on),console.log("%c Obrzky produkt:","color: #3B82F6;",on.map(Et=>({name:Et.product_name,thumbnail:Et.thumbnail})));const ri={id:(Date.now()+1).toString(),role:"bot",text:ni,sources:(qe==null?void 0:qe.sources)||[],isFunnelMessage:!0,funnelProducts:on,symptomList:P};h(Et=>[...Et,ri]),db(b,e==null?void 0:e.id,a,j.trim(),ni,Object.keys(Q).length>0?Q:void 0,{sources:qe==null?void 0:qe.sources,isFunnelMessage:!0,funnelProducts:on,symptomList:P,user_info:c}),m(!1);return}catch(We){console.error("%c FUNNEL N8N WEBHOOK ERROR:","color: #EF4444; font-weight: bold;",We),console.log("%c Fallback na standardn chat mode...","color: #FFA500; font-weight: bold;")}}else console.log("%c POKRAUJI STANDARDNM CHAT MODE (intent byl CHAT)","color: #FFA500; font-weight: bold;")}}if(s.book_database&&s.product_recommendations){console.log(" Kombinovan vyhledvn: knihy + produkty souasn s prioritizac knih");let de=(Date.now()+1).toString();const ue=ne=>{var H,G,_;console.log(" onBooksReceived callback zavoln v komponent!",{textLength:((H=ne.text)==null?void 0:H.length)||0,sourcesCount:((G=ne.sources)==null?void 0:G.length)||0,productsCount:((_=ne.productRecommendations)==null?void 0:_.length)||0});const K={id:de,role:"bot",text:ne.text||"",sources:ne.sources||[],productRecommendations:ne.productRecommendations};console.log(" Pidvm zprvu do messages:",K),h(X=>{const me=[...X,K];return console.log(" Nov stav messages:",me.length,"zprv"),me}),x(!1)},re=ne=>{console.log(" onProductsReceived callback zavoln v komponent!",{productsCount:ne.length,targetMessageId:de}),h(K=>{var G,_;const H=K.map(X=>X.id===de?{...X,productRecommendations:[...X.productRecommendations||[],...ne]}:X);return console.log(" Aktualizoval jsem zprvu s produkty:",(_=(G=H.find(X=>X.id===de))==null?void 0:G.productRecommendations)==null?void 0:_.length),H})};await X6(q,b,I.slice(0,-1),te,ue,re)}else if(s.book_database){console.log(" Pouvm pouze webhook pro databzi knih - IGNORUJI produktov doporuen...");const de=await hb(q,b,I.slice(0,-1),te,s.webhook_url,a,void 0,void 0,e,c),ue=(((W=de.text)==null?void 0:W.match(/<<<PRODUCT:/g))||[]).length,re=ue>2;console.log(` Callout detekce: ${ue} vloench produkt v textu  callout = ${re?"ANO":"NE"}`);const ne={id:(Date.now()+1).toString(),role:"bot",text:de.text,sources:de.sources||[],productRecommendations:void 0,matchedProducts:de.matchedProducts||[],hasCallout:re};h(K=>[...K,ne]),db(b,e==null?void 0:e.id,a,j.trim(),de.text,Object.keys(Q).length>0?Q:void 0,{sources:de.sources,matchedProducts:de.matchedProducts,hasCallout:re,user_info:c})}else if(s.product_recommendations){console.log(" Pouvm hybridn systm pro produktov doporuen...");try{const de=s.use_feed_1!==!1,ue=s.use_feed_2!==!1,ne=(await Z6(j.trim(),b,10,de,ue)).map((H,G)=>({id:H.id||G+1,product_code:H.product_code,product_name:H.product_name,description:H.description,category:H.category,price:H.price,currency:H.currency,product_url:H.product_url,image_url:H.image_url,similarity_score:H.similarity_score})),K={id:(Date.now()+1).toString(),role:"bot",text:ne.length>0?` Nael jsem ${ne.length} doporuench produkt podle vaich poteb:`:" Bohuel jsem nenael dn produkty odpovdajc vaemu dotazu.",sources:[],productRecommendations:ne.length>0?ne:void 0};h(H=>[...H,K]),x(!1)}catch(de){console.error(" Chyba pi hybridnm vyhledvn produkt:",de);const ue={id:(Date.now()+1).toString(),role:"bot",text:` Chyba pi vyhledvn produkt: ${de instanceof Error?de.message:"Neznm chyba"}`};h(re=>[...re,ue])}}else{console.log(" dn zdroj dat nen zapnut");const de={id:(Date.now()+1).toString(),role:"bot",text:" Nen zapnut dn zdroj dat. Prosm, zapnte bu databzi knih nebo produktov doporuen v nastaven chatbota."};h(ue=>[...ue,de])}}catch(te){console.error(" Chyba v handleSendMessage:",te);const B=te instanceof Error?te.message:"Omlouvm se, dolo k neznm chyb.",q={id:(Date.now()+1).toString(),role:"bot",text:B};h(Z=>[...Z,q])}finally{m(!1)}},[b,d,w,t,n,r,s]),C=se.useCallback(async j=>{if(!(!j.trim()||!b)){m(!0);try{const M={};t.length>0&&(M.categories=t),n.length>0&&(M.labels=n),r.length>0&&(M.publication_types=r),console.log("Sending silent prompt with current metadata:",M);const I=wh[w],Q=`${j.trim()} ${I}`,{text:W,sources:te,productRecommendations:B,matchedProducts:q}=await hb(Q,b,d,M,s.webhook_url,a,void 0,void 0,e,c),Z={id:(Date.now()+1).toString(),role:"bot",text:W,sources:te,productRecommendations:B,matchedProducts:q};h(de=>[...de,Z])}catch(M){const I=M instanceof Error?M.message:"Omlouvm se, dolo k neznm chyb.",Q={id:(Date.now()+1).toString(),role:"bot",text:I};h(W=>[...W,Q])}finally{m(!1)}}},[b,d,w,t,n,r]);return se.useCallback(()=>{h([]),T(pb()),tM()},[]),se.useCallback(()=>{const j=document.getElementById("chat-container-for-pdf");if(j){const M=j.style.backgroundColor;j.style.backgroundColor="white",html2canvas(j,{scale:2,useCORS:!0}).then(I=>{const Q=I.toDataURL("image/png"),W=new jspdf.jsPDF({orientation:"p",unit:"mm",format:"a4"}),te=W.internal.pageSize.getWidth(),B=I.height*te/I.width;let q=0,Z=B;for(W.addImage(Q,"PNG",0,q,te,B),Z-=W.internal.pageSize.getHeight();Z>0;)q=-Z,W.addPage(),W.addImage(Q,"PNG",0,q,te,B),Z-=W.internal.pageSize.getHeight();W.save("sana-ai-chat.pdf"),j.style.backgroundColor=M})}},[]),v.jsx("div",{className:"flex flex-col h-full font-sans",children:v.jsxs("main",{className:"flex-1 flex flex-col w-full min-h-0",children:[v.jsx("div",{id:"chat-container-for-pdf",className:"w-full flex-1 min-h-0 relative",children:v.jsx(iM,{messages:d,isLoading:p,onSilentPrompt:C,shouldAutoScroll:S,chatbotSettings:s,sessionId:b,chatbotId:a,selectedCategories:t,selectedLabels:n,selectedPublicationTypes:r})}),v.jsx("div",{className:"w-full max-w-4xl p-4 md:p-6 bg-bewit-gray flex-shrink-0 border-t border-slate-200 mx-auto",children:v.jsx(sM,{onSendMessage:R,isLoading:p})})]})})},dM=({currentUser:e,chatbotSettings:t={product_recommendations:!1,product_button_recommendations:!1,inline_product_links:!1,book_database:!0,use_feed_1:!0,use_feed_2:!0,enable_product_router:!0,enable_manual_funnel:!1},chatbotId:n,onClose:r,externalUserInfo:s})=>{const[a,u]=se.useState(t);se.useEffect(()=>{u(t)},[t]);const[c,d]=se.useState([]),[h,p]=se.useState([]),[m,b]=se.useState([]),[T,w]=se.useState([]),[A,S]=se.useState([]),[x,R]=se.useState([]),[C,j]=se.useState(!1),[M,I]=se.useState(!1),[Q,W]=se.useState("cs"),te=[{code:"cs",label:"CZ"},{code:"sk",label:"SK"},{code:"de",label:"DE"},{code:"en",label:"UK"}];se.useEffect(()=>{(async()=>{const K=["Aromaterapie","Mase","Akupunktura","Diagnostika","TM","Wany"],H=["Osobn","Chci pest"],G=["public","students","internal_bewit"];console.log(" FALLBACK LOGIKA:"),console.log("  - settings.allowed_categories:",a==null?void 0:a.allowed_categories),console.log("  - settings.allowed_labels:",a==null?void 0:a.allowed_labels),console.log("  - settings.allowed_publication_types:",a==null?void 0:a.allowed_publication_types);const _=(a==null?void 0:a.allowed_categories)===void 0?K:a.allowed_categories.length===0?[]:[],X=(a==null?void 0:a.allowed_labels)===void 0?H:[],me=(a==null?void 0:a.allowed_publication_types)===void 0?G:a.allowed_publication_types.length===0?[]:[];console.log(" FALLBACK VSLEDKY:"),console.log("  - fallbackCategories:",_),console.log("  - fallbackLabels:",X),console.log("  - fallbackTypes:",me),d(_),p(X),b(me),w([..._]),S([...X]),R([...me]),console.log(" Nastaveny vchoz hodnoty pro filtry podle chatbotSettings:",{categories:_,labels:X,types:me,allowed_settings:{categories:a==null?void 0:a.allowed_categories,labels:a==null?void 0:a.allowed_labels,publication_types:a==null?void 0:a.allowed_publication_types}});try{const[P,Te,Me]=await Promise.all([xh.getLabels(),xh.getCategories(),xh.getPublicationTypes()]);console.log(" Naten metadata z databze do Sana chatu:"),console.log("- ttky:",P),console.log("- Kategorie:",Te),console.log("- Typy publikac:",Me);const we=(a==null?void 0:a.allowed_categories)===void 0?Te.map(Le=>Le.name):a.allowed_categories.length===0?[]:Te.filter(Le=>a.allowed_categories.includes(Le.id)).map(Le=>Le.name),Pe=(a==null?void 0:a.allowed_labels)===void 0?P.map(Le=>Le.name):a.allowed_labels.length===0?[]:P.filter(Le=>a.allowed_labels.includes(Le.id)).map(Le=>Le.name),Re=(a==null?void 0:a.allowed_publication_types)===void 0?Me.map(Le=>Le.name):a.allowed_publication_types.length===0?[]:Me.filter(Le=>a.allowed_publication_types.includes(Le.id)).map(Le=>Le.name);console.log(" Filtrovan kategorie podle chatbotSettings:"),console.log("  - Vechny z DB:",Te),console.log("  - Povolen UUID z settings.allowed_categories:",a==null?void 0:a.allowed_categories),console.log("  - Vsledn povolen kategorie (jmna):",we),console.log("  - Povolen ttky:",Pe),console.log("  - Povolen typy:",Re),Pe.length>0&&(p(Pe),S([...Pe])),we.length>0&&(d(we),w([...we])),Re.length>0&&(b(Re),R([...Re]))}catch(P){console.error("Chyba pi natn metadat z databze, zstvm u fallback hodnot:",P)}})()},[a]);const B=(ne,K,H)=>{if(console.log("Toggle filter:",{value:ne,currentSelected:K}),K.includes(ne)){const G=K.filter(_=>_!==ne);console.log("Removing filter, new selection:",G),H(G)}else{const G=[...K,ne];console.log("Adding filter, new selection:",G),H(G)}},q=()=>{w([]),S([]),R([])},Z=()=>{w([...c]),S([...h]),R([...m])};T.length>0&&T.length<c.length||A.length>0&&A.length<h.length||x.length>0&&x.length<m.length;const de=()=>{j(!C)},ue=se.useCallback(()=>{console.log(" Nov chat v FilteredSanaChat")},[]),re=se.useCallback(()=>{const ne=document.getElementById("chat-container-for-pdf");if(ne){const K=ne.style.backgroundColor;ne.style.backgroundColor="white",html2canvas(ne,{scale:2,useCORS:!0}).then(H=>{const G=H.toDataURL("image/png"),_=new jspdf.jsPDF({orientation:"p",unit:"mm",format:"a4"}),X=_.internal.pageSize.getWidth(),me=H.height*X/H.width;let P=0,Te=me;for(_.addImage(G,"PNG",0,P,X,me),Te-=_.internal.pageSize.getHeight();Te>0;)P=-Te,_.addPage(),_.addImage(G,"PNG",0,P,X,me),Te-=_.internal.pageSize.getHeight();_.save("sana-ai-chat.pdf"),ne.style.backgroundColor=K})}},[]);return v.jsxs("div",{className:"flex h-full w-full bg-bewit-gray m-0 p-0",children:[v.jsx("div",{className:`${C?"w-80":"w-0"} bg-white overflow-hidden transition-all duration-300 ease-in-out`,children:v.jsxs("div",{className:"w-80 p-6 overflow-y-auto h-full",children:[v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("h2",{className:"text-xl font-bold text-bewit-dark mb-2",children:"Filtrace obsahu"}),v.jsx("p",{className:"text-sm text-gray-600",children:"Vyberte kategorie pro pesnj vsledky"})]}),v.jsxs("div",{className:"flex gap-2 mb-6",children:[v.jsx("button",{onClick:Z,className:"flex-1 px-3 py-2 text-xs font-medium text-bewit-blue bg-bewit-lightBlue rounded-md hover:bg-blue-100 transition-colors",children:"Vybrat ve"}),v.jsx("button",{onClick:q,className:"flex-1 px-3 py-2 text-xs font-medium text-slate-600 bg-slate-100 rounded-md hover:bg-slate-200 transition-colors",children:"Filter Reset"})]}),c.length>0&&v.jsxs("div",{className:"mb-6",children:[v.jsx("h3",{className:"text-lg font-semibold text-bewit-dark mb-4 text-center",children:"Kategorie lby"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:c.map(ne=>v.jsx("button",{onClick:()=>B(ne,T,w),className:`p-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 text-center ${T.includes(ne)?"bg-bewit-blue text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:ne},ne))})]}),m.length>0&&v.jsxs("div",{className:"mb-6",children:[v.jsx("h3",{className:"text-lg font-semibold text-bewit-dark mb-4 text-center",children:"Typy publikac"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:m.map(ne=>v.jsx("button",{onClick:()=>B(ne,x,R),className:`p-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 text-center ${x.includes(ne)?"bg-bewit-blue text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:ne==="public"?"Veejn":ne==="students"?"Pro studenty":"Intern"},ne))})]}),h.length>0&&v.jsxs("div",{className:"mb-6",children:[v.jsx("h3",{className:"text-lg font-semibold text-bewit-dark mb-4 text-center",children:"ttky"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:h.map(ne=>v.jsx("button",{onClick:()=>B(ne,A,S),className:`p-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 text-center ${A.includes(ne)?"bg-bewit-blue text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:ne},ne))})]})]})}),v.jsxs("div",{className:"flex-1 flex flex-col w-full",children:[v.jsx(hL,{onClose:r,languages:te,selectedLanguage:Q,onLanguageChange:W,leftContent:v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:C,onChange:de,className:"sr-only peer","aria-label":"Zobrazit/skrt filtry"}),v.jsx("div",{className:"relative w-11 h-6 bg-white/20 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-white/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-white/40"})]}),v.jsx("div",{className:"h-6 w-px bg-white/20"}),v.jsx(cv,{className:"h-10 w-auto object-contain"})]}),buttons:[{icon:"plus",onClick:ue,label:"Nov chat",tooltip:"Nov chat"},{icon:"download",onClick:re,label:"Export do PDF",tooltip:"Export do PDF"}]}),v.jsx("div",{className:"flex-1 bg-bewit-gray min-h-0",children:M?v.jsx("div",{className:"w-full h-full flex-1 overflow-y-auto p-6",children:v.jsx(D6,{})}):v.jsx(oM,{currentUser:e,selectedCategories:T,selectedLabels:A,selectedPublicationTypes:x,chatbotSettings:a,chatbotId:n,externalUserInfo:s,onClose:r})})]})]})};export{hL as C,dM as F,q5 as L,xT as P,uw as R,oM as S,Y5 as W,D6 as a,Ib as b,pw as c,Ob as d,aM as e,_l as f,J6 as g,uM as h,lM as i,v as j,se as r,Ze as s};
